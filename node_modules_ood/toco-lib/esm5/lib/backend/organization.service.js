/**
 * @fileoverview added by tsickle
 * Generated from: lib/backend/organization.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { HttpBackend, HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { tap } from 'rxjs/operators';
import { Environment, MessageService } from '../core/public-api';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "../core/services/message.service";
/**
 * The URL to the root api.
 * @type {?}
 */
export var ROOT_API = 'api';
/**
 * The object with the URLs to the endpoint apis.
 * @type {?}
 */
export var ENDPOINT_APIS = {
    organizations: ROOT_API + '/organizations',
};
/**
 * The backend service in order to communicate with a remote server over HTTP.
 */
var OrganizationService = /** @class */ (function () {
    function OrganizationService(_http, _messageService) {
        this._http = _http;
        this._messageService = _messageService;
        /**
         * The `httpOptions` object that contains the headers and will be passed to every `HttpClient` save method.
         */
        this._httpOptions = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Authorization': 'my-auth-token'
            })
        };
    }
    /**
     * Gets data from the server.
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @param url The endpoint api URL.
     * @param optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     */
    /**
     * Gets data from the server.
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @template T
     * @param {?} url The endpoint api URL.
     * @param {?} optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     * @return {?}
     */
    OrganizationService.prototype.get = /**
     * Gets data from the server.
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @template T
     * @param {?} url The endpoint api URL.
     * @param {?} optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     * @return {?}
     */
    function (url, optionalResult) {
        var _this = this;
        return this._http.get(url).pipe(tap((/**
         * @param {?} _
         * @return {?}
         */
        function (_) { return _this.log("fetched data from '" + url + "'"); })));
    };
    /**
     * Gets data from the server that meets the specified `query`.
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @param url The endpoint api URL.
     * @param query The query to search.
     * @param optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     */
    /**
     * Gets data from the server that meets the specified `query`.
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @template T
     * @param {?} url The endpoint api URL.
     * @param {?} query The query to search.
     * @param {?} optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     * @return {?}
     */
    OrganizationService.prototype.search = /**
     * Gets data from the server that meets the specified `query`.
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @template T
     * @param {?} url The endpoint api URL.
     * @param {?} query The query to search.
     * @param {?} optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     * @return {?}
     */
    function (url, query, optionalResult) {
        var _this = this;
        return this._http.get(url + "/?" + query).pipe(tap((/**
         * @param {?} _
         * @return {?}
         */
        function (_) { return _this.log("searched '" + query + "' in '" + url + "'"); })));
    };
    /**
     * Adds `data` to the server. Expects the server to generate an `id` for the new `data`.
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @param url The endpoint api URL.
     * @param data The data to add.
     * @param optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     */
    /**
     * Adds `data` to the server. Expects the server to generate an `id` for the new `data`.
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @template T
     * @param {?} url The endpoint api URL.
     * @param {?} data The data to add.
     * @param {?} optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     * @return {?}
     */
    OrganizationService.prototype.add = /**
     * Adds `data` to the server. Expects the server to generate an `id` for the new `data`.
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @template T
     * @param {?} url The endpoint api URL.
     * @param {?} data The data to add.
     * @param {?} optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     * @return {?}
     */
    function (url, data, optionalResult) {
        /* Expects the server to generate an `id` for the new `data`. */
        var _this = this;
        return this._http.post(url, data, this._httpOptions).pipe(tap((/**
         * @param {?} _
         * @return {?}
         */
        function (_) { return _this.log("added " + data + " to '" + url + "'"); })));
    };
    /**
     * Updates `data` on the server. Returns an Observable of that `data` if the `data` is inserted (does
     * not exist) on the server; otherwise, returns an Observable of null (if the `data` is only updated).
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @param url The endpoint api URL.
     * @param data The data to update.
     * @param optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     */
    /**
     * Updates `data` on the server. Returns an Observable of that `data` if the `data` is inserted (does
     * not exist) on the server; otherwise, returns an Observable of null (if the `data` is only updated).
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @template T
     * @param {?} url The endpoint api URL.
     * @param {?} data The data to update.
     * @param {?} optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     * @return {?}
     */
    OrganizationService.prototype.update = /**
     * Updates `data` on the server. Returns an Observable of that `data` if the `data` is inserted (does
     * not exist) on the server; otherwise, returns an Observable of null (if the `data` is only updated).
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @template T
     * @param {?} url The endpoint api URL.
     * @param {?} data The data to update.
     * @param {?} optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     * @return {?}
     */
    function (url, data, optionalResult) {
        var _this = this;
        return this._http.put(url, data, this._httpOptions).pipe(tap((/**
         * @param {?} _
         * @return {?}
         */
        function (_) { return _this.log("updated " + data + " to '" + url + "'"); })));
    };
    /**
     * Deletes data from the server.
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @param url The endpoint api URL.
     * @param id The unique identifier that identifies the data to delete.
     * @param optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     */
    /**
     * Deletes data from the server.
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @template T
     * @param {?} url The endpoint api URL.
     * @param {?} id The unique identifier that identifies the data to delete.
     * @param {?} optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     * @return {?}
     */
    OrganizationService.prototype.delete = /**
     * Deletes data from the server.
     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.
     * @template T
     * @param {?} url The endpoint api URL.
     * @param {?} id The unique identifier that identifies the data to delete.
     * @param {?} optionalResult If an error occurs, lets the app keep running by returning a safe optional value
     * as the observable result.
     * @return {?}
     */
    function (url, id, optionalResult) {
        var _this = this;
        return this._http.delete(url + "/" + id, this._httpOptions).pipe(tap((/**
         * @param {?} _
         * @return {?}
         */
        function (_) { return _this.log("deleted data with id = " + id + " from '" + url + "'"); })));
    };
    /**
     * Logs an `OrganizationService` message with the `MessageService`.
     * @param message The message to log.
     */
    /**
     * Logs an `OrganizationService` message with the `MessageService`.
     * @private
     * @param {?} message The message to log.
     * @return {?}
     */
    OrganizationService.prototype.log = /**
     * Logs an `OrganizationService` message with the `MessageService`.
     * @private
     * @param {?} message The message to log.
     * @return {?}
     */
    function (message) {
        this._messageService.add(OrganizationService.name + ": " + message + ".");
    };
    OrganizationService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    OrganizationService.ctorParameters = function () { return [
        { type: HttpClient },
        { type: MessageService }
    ]; };
    /** @nocollapse */ OrganizationService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function OrganizationService_Factory() { return new OrganizationService(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.MessageService)); }, token: OrganizationService, providedIn: "root" });
    return OrganizationService;
}());
export { OrganizationService };
if (false) {
    /**
     * The `httpOptions` object that contains the headers and will be passed to every `HttpClient` save method.
     * @type {?}
     * @private
     */
    OrganizationService.prototype._httpOptions;
    /**
     * @type {?}
     * @private
     */
    OrganizationService.prototype._http;
    /**
     * @type {?}
     * @private
     */
    OrganizationService.prototype._messageService;
}
var OrganizationServiceNoAuth = /** @class */ (function () {
    function OrganizationServiceNoAuth(env, handler) {
        this.env = env;
        this.handler = handler;
        this.path = 'organizations';
        this.http = new HttpClient(handler);
    }
    /**
     * @param {?} uuid
     * @return {?}
     */
    OrganizationServiceNoAuth.prototype.getOrganizationByUUID = /**
     * @param {?} uuid
     * @return {?}
     */
    function (uuid) {
        // const req = this.env.sceibaApi + this.prefix + "/" + uuid;
        /** @type {?} */
        var req = this.env.sceibaApi + "/pid/organization/" + uuid;
        return this.http.get(req);
    };
    /**
     * @param {?} uuid
     * @param {?=} relType
     * @return {?}
     */
    OrganizationServiceNoAuth.prototype.getOrganizationRelationships = /**
     * @param {?} uuid
     * @param {?=} relType
     * @return {?}
     */
    function (uuid, relType) {
        if (relType === void 0) { relType = null; }
        /** @type {?} */
        var req = this.env.sceibaApi + this.path + '/' + uuid + '/relationships';
        if (relType != null) {
            /** @type {?} */
            var params = new HttpParams();
            params = params.set('type', relType);
            /** @type {?} */
            var options = {
                params: params,
            };
            return this.http.get(req, options);
        }
        else {
            return this.http.get(req);
        }
    };
    /**
     * @param {?} pid
     * @return {?}
     */
    OrganizationServiceNoAuth.prototype.getOrganizationByPID = /**
     * @param {?} pid
     * @return {?}
     */
    function (pid) {
        // const req = this.env.sceibaApi + this.prefix + "/" + uuid;
        /** @type {?} */
        var params = new HttpParams();
        params = params.set('value', pid);
        /** @type {?} */
        var options = {
            params: params,
        };
        /** @type {?} */
        var req = this.env.sceibaApi + this.path + '/pid';
        return this.http.get(req, options);
    };
    /**
     * @param {?} params
     * @return {?}
     */
    OrganizationServiceNoAuth.prototype.getOrganizations = /**
     * @param {?} params
     * @return {?}
     */
    function (params) {
        /** @type {?} */
        var options = {
            params: params,
        };
        console.log(params);
        /** @type {?} */
        var req = this.env.sceibaApi + 'search/' + this.path;
        console.log(req);
        return this.http.get(req, options);
    };
    OrganizationServiceNoAuth.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    OrganizationServiceNoAuth.ctorParameters = function () { return [
        { type: Environment },
        { type: HttpBackend }
    ]; };
    return OrganizationServiceNoAuth;
}());
export { OrganizationServiceNoAuth };
if (false) {
    /** @type {?} */
    OrganizationServiceNoAuth.prototype.http;
    /** @type {?} */
    OrganizationServiceNoAuth.prototype.path;
    /**
     * @type {?}
     * @private
     */
    OrganizationServiceNoAuth.prototype.env;
    /**
     * @type {?}
     * @private
     */
    OrganizationServiceNoAuth.prototype.handler;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JnYW5pemF0aW9uLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly90b2NvLWxpYi8iLCJzb3VyY2VzIjpbImxpYi9iYWNrZW5kL29yZ2FuaXphdGlvbi5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsT0FBTyxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ3hGLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFM0MsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3JDLE9BQU8sRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7Ozs7Ozs7O0FBT2pFLE1BQU0sS0FBTyxRQUFRLEdBQVcsS0FBSzs7Ozs7QUFLckMsTUFBTSxLQUFPLGFBQWEsR0FBRztJQUN6QixhQUFhLEVBQUUsUUFBUSxHQUFHLGdCQUFnQjtDQUM3Qzs7OztBQUtEO0lBZUksNkJBQTJCLEtBQWlCLEVBQVUsZUFBK0I7UUFBMUQsVUFBSyxHQUFMLEtBQUssQ0FBWTtRQUFVLG9CQUFlLEdBQWYsZUFBZSxDQUFnQjs7OztRQVBwRSxpQkFBWSxHQUFHO1lBQzVCLE9BQU8sRUFBRSxJQUFJLFdBQVcsQ0FBQztnQkFDckIsY0FBYyxFQUFFLGtCQUFrQjtnQkFDbEMsZUFBZSxFQUFFLGVBQWU7YUFDbkMsQ0FBQztTQUNMLENBQUM7SUFHQSxDQUFDO0lBRUg7Ozs7OztPQU1HOzs7Ozs7Ozs7O0lBQ0ksaUNBQUc7Ozs7Ozs7OztJQUFWLFVBQWMsR0FBVyxFQUFFLGNBQWlCO1FBQTVDLGlCQUtDO1FBSEcsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQzlCLEdBQUc7Ozs7UUFBQyxVQUFBLENBQUMsSUFBSSxPQUFBLEtBQUksQ0FBQyxHQUFHLENBQUMsd0JBQXVCLEdBQUcs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QUFHLENBQW9CLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN4RCxDQUFDOzs7OztJQUVELG9EQUFnQjs7OztJQUFoQixVQUFpQixNQUFrQjs7WUFDM0IsT0FBTyxHQUFHO1lBQ2QsTUFBTSxFQUFFLE1BQU07U0FFZjtRQUNELE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7O1lBQ2QsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLFNBQVMsR0FBRyxJQUFJLENBQUMsSUFBSTtRQUN0RCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRWpCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQStCLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNuRSxDQUFDOztnQkF4REYsVUFBVTs7OztnQkE3SEYsV0FBVztnQkFKWCxXQUFXOztJQTJMcEIsZ0NBQUM7Q0FBQSxBQTFERCxJQTBEQztTQXpEWSx5QkFBeUI7OztJQUVwQyx5Q0FBaUI7O0lBQ2pCLHlDQUFzQjs7Ozs7SUFDVix3Q0FBd0I7Ozs7O0lBQUUsNENBQTRCIiwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBIdHRwQmFja2VuZCwgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBFbnZpcm9ubWVudCwgTWVzc2FnZVNlcnZpY2UgfSBmcm9tICcuLi9jb3JlL3B1YmxpYy1hcGknO1xuaW1wb3J0IHsgSGl0LCBPcmdhbml6YXRpb24sIFNlYXJjaFJlc3BvbnNlIH0gZnJvbSAnLi4vZW50aXRpZXMvcHVibGljLWFwaSc7XG5cblxuLyoqXG4gKiBUaGUgVVJMIHRvIHRoZSByb290IGFwaS5cbiAqL1xuZXhwb3J0IGNvbnN0IFJPT1RfQVBJOiBzdHJpbmcgPSAnYXBpJztcblxuLyoqXG4gKiBUaGUgb2JqZWN0IHdpdGggdGhlIFVSTHMgdG8gdGhlIGVuZHBvaW50IGFwaXMuXG4gKi9cbmV4cG9ydCBjb25zdCBFTkRQT0lOVF9BUElTID0ge1xuICAgIG9yZ2FuaXphdGlvbnM6IFJPT1RfQVBJICsgJy9vcmdhbml6YXRpb25zJyxcbn07XG5cbi8qKlxuICogVGhlIGJhY2tlbmQgc2VydmljZSBpbiBvcmRlciB0byBjb21tdW5pY2F0ZSB3aXRoIGEgcmVtb3RlIHNlcnZlciBvdmVyIEhUVFAuXG4gKi9cbkBJbmplY3RhYmxlKHtcbiAgICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgT3JnYW5pemF0aW9uU2VydmljZVxue1xuICAgIC8qKlxuICAgICAqIFRoZSBgaHR0cE9wdGlvbnNgIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBoZWFkZXJzIGFuZCB3aWxsIGJlIHBhc3NlZCB0byBldmVyeSBgSHR0cENsaWVudGAgc2F2ZSBtZXRob2QuXG4gICAgICovXG4gICAgcHJpdmF0ZSByZWFkb25seSBfaHR0cE9wdGlvbnMgPSB7XG4gICAgICAgIGhlYWRlcnM6IG5ldyBIdHRwSGVhZGVycyh7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnbXktYXV0aC10b2tlbidcbiAgICAgICAgfSlcbiAgICB9O1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHByaXZhdGUgX2h0dHA6IEh0dHBDbGllbnQsIHByaXZhdGUgX21lc3NhZ2VTZXJ2aWNlOiBNZXNzYWdlU2VydmljZSlcbiAgICB7IH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICogSWYgYW4gZXJyb3Igb2NjdXJzLCBsZXRzIHRoZSBhcHAga2VlcCBydW5uaW5nIGJ5IHJldHVybmluZyB0aGUgc3BlY2lmaWVkIHNhZmUgYG9wdGlvbmFsUmVzdWx0YC5cbiAgICAgKiBAcGFyYW0gdXJsIFRoZSBlbmRwb2ludCBhcGkgVVJMLlxuICAgICAqIEBwYXJhbSBvcHRpb25hbFJlc3VsdCBJZiBhbiBlcnJvciBvY2N1cnMsIGxldHMgdGhlIGFwcCBrZWVwIHJ1bm5pbmcgYnkgcmV0dXJuaW5nIGEgc2FmZSBvcHRpb25hbCB2YWx1ZVxuICAgICAqIGFzIHRoZSBvYnNlcnZhYmxlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0PFQ+KHVybDogc3RyaW5nLCBvcHRpb25hbFJlc3VsdDogVCk6IE9ic2VydmFibGU8VD5cbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLl9odHRwLmdldDxUPih1cmwpLnBpcGUoXG4gICAgICAgICAgICB0YXAoXyA9PiB0aGlzLmxvZyhgZmV0Y2hlZCBkYXRhIGZyb20gJyR7IHVybCB9J2ApKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGRhdGEgZnJvbSB0aGUgc2VydmVyIHRoYXQgbWVldHMgdGhlIHNwZWNpZmllZCBgcXVlcnlgLlxuICAgICAqIElmIGFuIGVycm9yIG9jY3VycywgbGV0cyB0aGUgYXBwIGtlZXAgcnVubmluZyBieSByZXR1cm5pbmcgdGhlIHNwZWNpZmllZCBzYWZlIGBvcHRpb25hbFJlc3VsdGAuXG4gICAgICogQHBhcmFtIHVybCBUaGUgZW5kcG9pbnQgYXBpIFVSTC5cbiAgICAgKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IHRvIHNlYXJjaC5cbiAgICAgKiBAcGFyYW0gb3B0aW9uYWxSZXN1bHQgSWYgYW4gZXJyb3Igb2NjdXJzLCBsZXRzIHRoZSBhcHAga2VlcCBydW5uaW5nIGJ5IHJldHVybmluZyBhIHNhZmUgb3B0aW9uYWwgdmFsdWVcbiAgICAgKiBhcyB0aGUgb2JzZXJ2YWJsZSByZXN1bHQuXG4gICAgICovXG4gICAgcHVibGljIHNlYXJjaDxUPih1cmw6IHN0cmluZywgcXVlcnk6IHN0cmluZywgb3B0aW9uYWxSZXN1bHQ6IFQpOiBPYnNlcnZhYmxlPFQ+XG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5nZXQ8VD4oYCR7IHVybCB9Lz8keyBxdWVyeSB9YCkucGlwZShcbiAgICAgICAgICAgIHRhcChfID0+IHRoaXMubG9nKGBzZWFyY2hlZCAnJHsgcXVlcnkgfScgaW4gJyR7IHVybCB9J2ApKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGBkYXRhYCB0byB0aGUgc2VydmVyLiBFeHBlY3RzIHRoZSBzZXJ2ZXIgdG8gZ2VuZXJhdGUgYW4gYGlkYCBmb3IgdGhlIG5ldyBgZGF0YWAuXG4gICAgICogSWYgYW4gZXJyb3Igb2NjdXJzLCBsZXRzIHRoZSBhcHAga2VlcCBydW5uaW5nIGJ5IHJldHVybmluZyB0aGUgc3BlY2lmaWVkIHNhZmUgYG9wdGlvbmFsUmVzdWx0YC5cbiAgICAgKiBAcGFyYW0gdXJsIFRoZSBlbmRwb2ludCBhcGkgVVJMLlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIGFkZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9uYWxSZXN1bHQgSWYgYW4gZXJyb3Igb2NjdXJzLCBsZXRzIHRoZSBhcHAga2VlcCBydW5uaW5nIGJ5IHJldHVybmluZyBhIHNhZmUgb3B0aW9uYWwgdmFsdWVcbiAgICAgKiBhcyB0aGUgb2JzZXJ2YWJsZSByZXN1bHQuXG4gICAgICovXG4gICAgcHVibGljIGFkZDxUPih1cmw6IHN0cmluZywgZGF0YTogVCwgb3B0aW9uYWxSZXN1bHQ6IFQpOiBPYnNlcnZhYmxlPFQ+XG4gICAge1xuICAgICAgICAvKiBFeHBlY3RzIHRoZSBzZXJ2ZXIgdG8gZ2VuZXJhdGUgYW4gYGlkYCBmb3IgdGhlIG5ldyBgZGF0YWAuICovXG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2h0dHAucG9zdDxUPih1cmwsIGRhdGEsIHRoaXMuX2h0dHBPcHRpb25zKS5waXBlKFxuICAgICAgICAgICAgdGFwKF8gPT4gdGhpcy5sb2coYGFkZGVkICR7IGRhdGEgfSB0byAnJHsgdXJsIH0nYCkpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgYGRhdGFgIG9uIHRoZSBzZXJ2ZXIuIFJldHVybnMgYW4gT2JzZXJ2YWJsZSBvZiB0aGF0IGBkYXRhYCBpZiB0aGUgYGRhdGFgIGlzIGluc2VydGVkIChkb2VzXG4gICAgICogbm90IGV4aXN0KSBvbiB0aGUgc2VydmVyOyBvdGhlcndpc2UsIHJldHVybnMgYW4gT2JzZXJ2YWJsZSBvZiBudWxsIChpZiB0aGUgYGRhdGFgIGlzIG9ubHkgdXBkYXRlZCkuXG4gICAgICogSWYgYW4gZXJyb3Igb2NjdXJzLCBsZXRzIHRoZSBhcHAga2VlcCBydW5uaW5nIGJ5IHJldHVybmluZyB0aGUgc3BlY2lmaWVkIHNhZmUgYG9wdGlvbmFsUmVzdWx0YC5cbiAgICAgKiBAcGFyYW0gdXJsIFRoZSBlbmRwb2ludCBhcGkgVVJMLlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRvIHVwZGF0ZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9uYWxSZXN1bHQgSWYgYW4gZXJyb3Igb2NjdXJzLCBsZXRzIHRoZSBhcHAga2VlcCBydW5uaW5nIGJ5IHJldHVybmluZyBhIHNhZmUgb3B0aW9uYWwgdmFsdWVcbiAgICAgKiBhcyB0aGUgb2JzZXJ2YWJsZSByZXN1bHQuXG4gICAgICovXG4gICAgcHVibGljIHVwZGF0ZTxUPih1cmw6IHN0cmluZywgZGF0YTogVCwgb3B0aW9uYWxSZXN1bHQ6IFQpOiBPYnNlcnZhYmxlPFQ+XG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5wdXQ8VD4odXJsLCBkYXRhLCB0aGlzLl9odHRwT3B0aW9ucykucGlwZShcbiAgICAgICAgICAgIHRhcChfID0+IHRoaXMubG9nKGB1cGRhdGVkICR7IGRhdGEgfSB0byAnJHsgdXJsIH0nYCkpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICogSWYgYW4gZXJyb3Igb2NjdXJzLCBsZXRzIHRoZSBhcHAga2VlcCBydW5uaW5nIGJ5IHJldHVybmluZyB0aGUgc3BlY2lmaWVkIHNhZmUgYG9wdGlvbmFsUmVzdWx0YC5cbiAgICAgKiBAcGFyYW0gdXJsIFRoZSBlbmRwb2ludCBhcGkgVVJMLlxuICAgICAqIEBwYXJhbSBpZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgdGhhdCBpZGVudGlmaWVzIHRoZSBkYXRhIHRvIGRlbGV0ZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9uYWxSZXN1bHQgSWYgYW4gZXJyb3Igb2NjdXJzLCBsZXRzIHRoZSBhcHAga2VlcCBydW5uaW5nIGJ5IHJldHVybmluZyBhIHNhZmUgb3B0aW9uYWwgdmFsdWVcbiAgICAgKiBhcyB0aGUgb2JzZXJ2YWJsZSByZXN1bHQuXG4gICAgICovXG4gICAgcHVibGljIGRlbGV0ZTxUPih1cmw6IHN0cmluZywgaWQ6IHN0cmluZywgb3B0aW9uYWxSZXN1bHQ6IFQpOiBPYnNlcnZhYmxlPFQ+XG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5faHR0cC5kZWxldGU8VD4oYCR7IHVybCB9LyR7IGlkIH1gLCB0aGlzLl9odHRwT3B0aW9ucykucGlwZShcbiAgICAgICAgICAgIHRhcChfID0+IHRoaXMubG9nKGBkZWxldGVkIGRhdGEgd2l0aCBpZCA9ICR7IGlkIH0gZnJvbSAnJHsgdXJsIH0nYCkpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ3MgYW4gYE9yZ2FuaXphdGlvblNlcnZpY2VgIG1lc3NhZ2Ugd2l0aCB0aGUgYE1lc3NhZ2VTZXJ2aWNlYC5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICovXG4gICAgcHJpdmF0ZSBsb2cobWVzc2FnZTogc3RyaW5nKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5fbWVzc2FnZVNlcnZpY2UuYWRkKGAkeyBPcmdhbml6YXRpb25TZXJ2aWNlLm5hbWUgfTogJHsgbWVzc2FnZSB9LmApO1xuICAgIH1cbn1cblxuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgT3JnYW5pemF0aW9uU2VydmljZU5vQXV0aCB7XG5cbiAgaHR0cDogSHR0cENsaWVudDtcbiAgcGF0aCA9ICdvcmdhbml6YXRpb25zJ1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVudjogRW52aXJvbm1lbnQsIHByaXZhdGUgaGFuZGxlcjogSHR0cEJhY2tlbmQpIHtcblxuICAgIHRoaXMuaHR0cCA9IG5ldyBIdHRwQ2xpZW50KGhhbmRsZXIpO1xuICB9XG5cbiAgZ2V0T3JnYW5pemF0aW9uQnlVVUlEKHV1aWQpOiBPYnNlcnZhYmxlPEhpdDxPcmdhbml6YXRpb24+PiB7XG4gICAgLy8gY29uc3QgcmVxID0gdGhpcy5lbnYuc2NlaWJhQXBpICsgdGhpcy5wcmVmaXggKyBcIi9cIiArIHV1aWQ7XG4gICAgY29uc3QgcmVxID0gdGhpcy5lbnYuc2NlaWJhQXBpICsgXCIvcGlkL29yZ2FuaXphdGlvbi9cIiArIHV1aWQ7XG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8SGl0PE9yZ2FuaXphdGlvbj4+KHJlcSk7XG4gIH1cblxuICBnZXRPcmdhbml6YXRpb25SZWxhdGlvbnNoaXBzKHV1aWQsIHJlbFR5cGU9bnVsbCk6IE9ic2VydmFibGU8QXJyYXk8SGl0PE9yZ2FuaXphdGlvbj4+PiB7XG4gICAgY29uc3QgcmVxID0gdGhpcy5lbnYuc2NlaWJhQXBpICsgdGhpcy5wYXRoICsgJy8nICsgdXVpZCArICcvcmVsYXRpb25zaGlwcyc7XG5cbiAgICBpZiAocmVsVHlwZSAhPSBudWxsKXtcbiAgICAgIGxldCBwYXJhbXMgPSBuZXcgSHR0cFBhcmFtcygpO1xuICAgICAgcGFyYW1zID0gcGFyYW1zLnNldCgndHlwZScsIHJlbFR5cGUpO1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8QXJyYXk8SGl0PE9yZ2FuaXphdGlvbj4+PihyZXEsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5odHRwLmdldDxBcnJheTxIaXQ8T3JnYW5pemF0aW9uPj4+KHJlcSk7XG4gICAgfVxuXG4gIH1cblxuICBnZXRPcmdhbml6YXRpb25CeVBJRChwaWQpOiBPYnNlcnZhYmxlPEhpdDxPcmdhbml6YXRpb24+PiB7XG4gICAgLy8gY29uc3QgcmVxID0gdGhpcy5lbnYuc2NlaWJhQXBpICsgdGhpcy5wcmVmaXggKyBcIi9cIiArIHV1aWQ7XG4gICAgbGV0IHBhcmFtcyA9IG5ldyBIdHRwUGFyYW1zKCk7XG4gICAgcGFyYW1zID0gcGFyYW1zLnNldCgndmFsdWUnLCBwaWQpO1xuXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIHBhcmFtczogcGFyYW1zLFxuICAgICAgLy8gaGVhZGVyczogdGhpcy5oZWFkZXJzXG4gICAgfTtcblxuICAgIGNvbnN0IHJlcSA9IHRoaXMuZW52LnNjZWliYUFwaSArIHRoaXMucGF0aCArICcvcGlkJztcbiAgICByZXR1cm4gdGhpcy5odHRwLmdldDxIaXQ8T3JnYW5pemF0aW9uPj4ocmVxLCBvcHRpb25zKTtcbiAgfVxuXG4gIGdldE9yZ2FuaXphdGlvbnMocGFyYW1zOiBIdHRwUGFyYW1zKTogT2JzZXJ2YWJsZTxTZWFyY2hSZXNwb25zZTxPcmdhbml6YXRpb24+PiB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIHBhcmFtczogcGFyYW1zLFxuICAgICAgLy8gaGVhZGVyczogdGhpcy5oZWFkZXJzXG4gICAgfTtcbiAgICBjb25zb2xlLmxvZyhwYXJhbXMpO1xuICAgIGNvbnN0IHJlcSA9IHRoaXMuZW52LnNjZWliYUFwaSArICdzZWFyY2gvJyArIHRoaXMucGF0aDtcbiAgICBjb25zb2xlLmxvZyhyZXEpO1xuXG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8U2VhcmNoUmVzcG9uc2U8T3JnYW5pemF0aW9uPj4ocmVxLCBvcHRpb25zKTtcbiAgfVxuXG59XG4iXX0=