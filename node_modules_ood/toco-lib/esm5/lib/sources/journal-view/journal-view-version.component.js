/**
 * @fileoverview added by tsickle
 * Generated from: lib/sources/journal-view/journal-view-version.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter } from '@angular/core';
import { MatSnackBar } from '@angular/material';
import { MessageHandler, StatusCode } from '../../core/public-api';
import { JournalVersion, VocabulariesInmutableNames } from '../../entities/public-api';
import { JournalDataType } from './journal-view.component';
var JournalViewVersionComponent = /** @class */ (function () {
    function JournalViewVersionComponent(_snackBar) {
        this._snackBar = _snackBar;
        this.journalDataType = JournalDataType;
        this.panelOpenState = false;
        this.currentJournalChecked = false;
        this.editingJournalChange = new EventEmitter();
    }
    /**
     * @return {?}
     */
    JournalViewVersionComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        if (this.currentJournal == undefined)
            this.currentJournal = new JournalVersion();
        this.loadJournalData();
        if (this.type == undefined)
            this.type = JournalDataType.default;
    };
    /**
     * @return {?}
     */
    JournalViewVersionComponent.prototype.ngOnChanges = /**
     * @return {?}
     */
    function () {
        console.log("***////****////***///");
        this.ngOnInit();
    };
    /**
     * @return {?}
     */
    JournalViewVersionComponent.prototype.loadJournalData = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.currentDataBaseTerms = new Array();
        this.currentGroupTerms = new Array();
        this.currentInstitutionTerms = new Array();
        this.currentLicenceTerms = new Array();
        this.currentProvinceTerms = new Array();
        this.currentSubjectTerms = new Array();
        this.vocabularies = VocabulariesInmutableNames;
        if (this.currentJournal.data.classifications) {
            this.currentJournal.data.classifications.forEach((/**
             * @param {?} termSource
             * @return {?}
             */
            function (termSource) {
                switch (termSource.vocabulary.toString()) {
                    case VocabulariesInmutableNames.CUBAN_INTITUTIONS:
                        _this.currentInstitutionTerms.push(termSource);
                        break;
                    case VocabulariesInmutableNames.INDEXES:
                        _this.currentDataBaseTerms.push(termSource);
                        break;
                    case VocabulariesInmutableNames.INDEXES_CLASIFICATION:
                        _this.currentGroupTerms.push(termSource);
                        break;
                    case VocabulariesInmutableNames.LICENCES:
                        _this.currentLicenceTerms.push(termSource);
                        break;
                    case VocabulariesInmutableNames.CUBAN_PROVINCES:
                        _this.currentProvinceTerms.push(termSource);
                        break;
                    case VocabulariesInmutableNames.SUBJECTS:
                        _this.currentSubjectTerms.push(termSource);
                        break;
                }
            }));
        }
    };
    /**
     * Changes the field `reviewed` of a `Journal`, that means the user saw these version
     * and consider it not has more information.
     */
    /**
     * Changes the field `reviewed` of a `Journal`, that means the user saw these version
     * and consider it not has more information.
     * @return {?}
     */
    JournalViewVersionComponent.prototype.markAsViewed = /**
     * Changes the field `reviewed` of a `Journal`, that means the user saw these version
     * and consider it not has more information.
     * @return {?}
     */
    function () {
        if (this.currentJournalChecked) {
            this.currentJournal.data.reviewed = true;
            // TODO: hacer el request al backend de marcar la version como vista o
            /** @type {?} */
            var m = new MessageHandler(this._snackBar);
            m.showMessage(StatusCode.OK, "RevisiÃ³n marcada como vista!!!");
        }
    };
    /**
     * @return {?}
     */
    JournalViewVersionComponent.prototype.fieldEditingJournalChange = /**
     * @return {?}
     */
    function () {
        this.editingJournalChange.emit(this.editingJournal);
    };
    /**
     * @return {?}
     */
    JournalViewVersionComponent.prototype.replace = /**
     * @return {?}
     */
    function () {
        this.editingJournal = this.currentJournal;
        // this.editingJournal.data.classifications = [];
        // this.editingJournal.data.classifications = this.currentJournal.data.classifications;
        this.editingJournalChange.emit(this.editingJournal);
        // // this.currentJournal.data.classifications.forEach((termSource: SourceClasification) => {
        // //     this.editingJournal.data.classifications.push(termSource);
        // // });
        console.log("editingJournal remplazado", this.editingJournal);
    };
    /**
     * Concats a `Journal` property by a equal property in `JournalData`.
     * @param type is a `JournalDataType` enum, that means, `type` has all properties of a `Journal` enumerated as identifyer.
     * @param termId is a `Term` identifyer, only needs if `type` is `JournalDataType.term`.
     * @NOTE this function call `replace(..., true)`
     */
    /**
     * Concats a `Journal` property by a equal property in `JournalData`.
     * \@NOTE this function call `replace(..., true)`
     * @param {?} type is a `JournalDataType` enum, that means, `type` has all properties of a `Journal` enumerated as identifyer.
     * @param {?} termSource
     * @return {?}
     */
    JournalViewVersionComponent.prototype.concat = /**
     * Concats a `Journal` property by a equal property in `JournalData`.
     * \@NOTE this function call `replace(..., true)`
     * @param {?} type is a `JournalDataType` enum, that means, `type` has all properties of a `Journal` enumerated as identifyer.
     * @param {?} termSource
     * @return {?}
     */
    function (type, termSource) {
        if (type == JournalDataType.term) {
            /** @type {?} */
            var notFound = true;
            for (var index = 0; index < this.editingJournal.data.classifications.length; index++) {
                /** @type {?} */
                var element = this.editingJournal.data.classifications[index];
                if (element.id == termSource.id) {
                    this.editingJournal.data.classifications[index].data =
                        termSource.data;
                    notFound = false;
                }
            }
            if (notFound) {
                this.editingJournal.data.classifications.push(termSource);
            }
            this.editingJournalChange.emit(this.editingJournal);
        }
    };
    /**
     * @return {?}
     */
    JournalViewVersionComponent.prototype.replaceSubjects = /**
     * @return {?}
     */
    function () {
        this.replaceClassifications(VocabulariesInmutableNames.SUBJECTS);
    };
    /**
     * @return {?}
     */
    JournalViewVersionComponent.prototype.replaceIndexes = /**
     * @return {?}
     */
    function () {
        this.replaceClassifications(VocabulariesInmutableNames.INDEXES);
    };
    /**
     * @param {?} vocab
     * @return {?}
     */
    JournalViewVersionComponent.prototype.replaceClassifications = /**
     * @param {?} vocab
     * @return {?}
     */
    function (vocab) {
        /** @type {?} */
        var found = false;
        /** @type {?} */
        var newts = [];
        this.editingJournal.data.classifications.forEach((/**
         * @param {?} ts
         * @return {?}
         */
        function (ts) {
            if (ts.vocabulary != vocab) {
                newts.push(ts);
            }
        }));
        this.currentJournal.data.classifications.forEach((/**
         * @param {?} ts
         * @return {?}
         */
        function (ts) {
            if (ts.vocabulary == vocab) {
                newts.push(ts);
            }
        }));
        this.editingJournal.data.classifications = newts;
        this.editingJournalChange.emit(this.editingJournal);
    };
    /**
     * @return {?}
     */
    JournalViewVersionComponent.prototype.replaceOrganizations = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var found = false;
        /** @type {?} */
        var newts = [];
        this.currentJournal.data.organizations.forEach((/**
         * @param {?} ts
         * @return {?}
         */
        function (ts) {
            newts.push(ts);
        }));
        this.editingJournal.data.organizations = newts;
        this.editingJournalChange.emit(this.editingJournal);
    };
    JournalViewVersionComponent.decorators = [
        { type: Component, args: [{
                    selector: "toco-journal-view-version",
                    template: "<mat-card *ngIf=\"currentJournal.data\">\n  <mat-card-header>\n    <!-- <img mat-card-avatar *ngIf=\"currentJournal.data.logo; else logotemplate\" [style.background-size]=\"'cover'\" src=\"currentJournal.data.logo\">\n            <ng-template #logotemplate>\n                <img mat-card-avatar [src]=\"defaultLogo\" alt=\"\">\n            </ng-template> -->\n\n    <mat-card-title>\n      <div fxLAyout=\"row\" fxLayoutAlign=\"space-between start\">\n        <mat-icon\n          class=\"mat-18 notification-position\"\n          color=\"accent\"\n          *ngIf=\"currentJournal.is_current\"\n          matTooltip=\"{{ currentJournal.comment }}\"\n          >star</mat-icon\n        >\n        <mat-icon\n          class=\"mat-18 notification-position\"\n          color=\"accent\"\n          *ngIf=\"!currentJournal.reviewed\"\n          matTooltip=\"{{ currentJournal.comment }}\"\n          >adjust</mat-icon\n        >\n      </div>\n    </mat-card-title>\n\n    <mat-card-subtitle>\n      <mat-label> {{ currentJournal.created_at | date }}. </mat-label>\n      <mat-label>\n        {{ currentJournal.userprofile.identify() }}\n      </mat-label>\n    </mat-card-subtitle>\n  </mat-card-header>\n\n  <mat-divider [inset]=\"true\" style=\"margin-bottom: 1em\"></mat-divider>\n\n  <mat-card-content>\n    <toco-journal-view-version-field\n      (editingJournalChange)=\"fieldEditingJournalChange()\"\n      [editingJournal]=\"editingJournal\"\n      [currentJournal]=\"currentJournal\"\n      [type]=\"journalDataType.title\"\n    ></toco-journal-view-version-field>\n\n    <!-- subtitle -->\n    <toco-journal-view-version-field\n      (editingJournalChange)=\"fieldEditingJournalChange()\"\n      [editingJournal]=\"editingJournal\"\n      [currentJournal]=\"currentJournal\"\n      [type]=\"journalDataType.subtitle\"\n    ></toco-journal-view-version-field>\n\n    <toco-journal-view-version-field\n    (editingJournalChange)=\"fieldEditingJournalChange()\"\n      [editingJournal]=\"editingJournal\"\n      [currentJournal]=\"currentJournal\"\n      [type]=\"journalDataType.shortname\"\n    ></toco-journal-view-version-field>\n\n    <mat-label style=\"font-weight: bold\">ISSN: </mat-label>\n    <div style=\"margin-left: 0.8em\">\n      <toco-journal-view-version-field\n      (editingJournalChange)=\"fieldEditingJournalChange()\"\n        [editingJournal]=\"editingJournal\"\n        [currentJournal]=\"currentJournal\"\n        [type]=\"journalDataType.issnP\"\n      ></toco-journal-view-version-field>\n\n      <toco-journal-view-version-field\n      (editingJournalChange)=\"fieldEditingJournalChange()\"\n        [editingJournal]=\"editingJournal\"\n        [currentJournal]=\"currentJournal\"\n        [type]=\"journalDataType.issnE\"\n      ></toco-journal-view-version-field>\n\n      <toco-journal-view-version-field\n      (editingJournalChange)=\"fieldEditingJournalChange()\"\n        [editingJournal]=\"editingJournal\"\n        [currentJournal]=\"currentJournal\"\n        [type]=\"journalDataType.issnL\"\n      ></toco-journal-view-version-field>\n    </div>\n    <mat-label style=\"font-weight: bold\">RNPS: </mat-label>\n    <div style=\"margin-left: 0.8em\">\n      <toco-journal-view-version-field\n      (editingJournalChange)=\"fieldEditingJournalChange()\"\n        [editingJournal]=\"editingJournal\"\n        [currentJournal]=\"currentJournal\"\n        [type]=\"journalDataType.rnpsP\"\n      ></toco-journal-view-version-field>\n      <toco-journal-view-version-field\n      (editingJournalChange)=\"fieldEditingJournalChange()\"\n        [editingJournal]=\"editingJournal\"\n        [currentJournal]=\"currentJournal\"\n        [type]=\"journalDataType.rnpsE\"\n      ></toco-journal-view-version-field>\n    </div>\n    <toco-journal-view-version-field\n    (editingJournalChange)=\"fieldEditingJournalChange()\"\n      [editingJournal]=\"editingJournal\"\n      [currentJournal]=\"currentJournal\"\n      [type]=\"journalDataType.url\"\n    ></toco-journal-view-version-field>\n\n    <toco-journal-view-version-field\n    (editingJournalChange)=\"fieldEditingJournalChange()\"\n      [editingJournal]=\"editingJournal\"\n      [currentJournal]=\"currentJournal\"\n      [type]=\"journalDataType.oaiurl\"\n    ></toco-journal-view-version-field>\n\n    <toco-journal-view-version-field\n    (editingJournalChange)=\"fieldEditingJournalChange()\"\n      [editingJournal]=\"editingJournal\"\n      [currentJournal]=\"currentJournal\"\n      [type]=\"journalDataType.email\"\n    ></toco-journal-view-version-field>\n\n    <toco-journal-view-version-field\n    (editingJournalChange)=\"fieldEditingJournalChange()\"\n      [editingJournal]=\"editingJournal\"\n      [currentJournal]=\"currentJournal\"\n      [type]=\"journalDataType.seriadas_cubanas\"\n    ></toco-journal-view-version-field>\n\n    <toco-journal-view-version-field\n    (editingJournalChange)=\"fieldEditingJournalChange()\"\n      [editingJournal]=\"editingJournal\"\n      [currentJournal]=\"currentJournal\"\n      [type]=\"journalDataType.purpose\"\n    ></toco-journal-view-version-field>\n\n    <toco-journal-view-version-field\n    (editingJournalChange)=\"fieldEditingJournalChange()\"\n      [editingJournal]=\"editingJournal\"\n      [currentJournal]=\"currentJournal\"\n      [type]=\"journalDataType.start_year\"\n    ></toco-journal-view-version-field>\n\n    <toco-journal-view-version-field\n    (editingJournalChange)=\"fieldEditingJournalChange()\"\n      [editingJournal]=\"editingJournal\"\n      [currentJournal]=\"currentJournal\"\n      [type]=\"journalDataType.end_year\"\n    ></toco-journal-view-version-field>\n\n    <toco-journal-view-version-field\n    (editingJournalChange)=\"fieldEditingJournalChange()\"\n      [editingJournal]=\"editingJournal\"\n      [currentJournal]=\"currentJournal\"\n      [type]=\"journalDataType.frequency\"\n    ></toco-journal-view-version-field>\n\n    <toco-journal-view-version-field\n    (editingJournalChange)=\"fieldEditingJournalChange()\"\n      [editingJournal]=\"editingJournal\"\n      [currentJournal]=\"currentJournal\"\n      [type]=\"journalDataType.description\"\n    ></toco-journal-view-version-field>\n\n    <div\n      *ngIf=\"currentJournal.data.description\"\n      class=\"e2e-inner-html-bound text-align-justify\"\n      [innerHTML]=\"currentJournal.data.description\"\n    ></div>\n\n    <mat-label style=\"font-weight: bold\">Redes Sociales:</mat-label>\n    <div style=\"margin-left: 0.8em\">\n      <toco-journal-view-version-field\n      (editingJournalChange)=\"fieldEditingJournalChange()\"\n        [editingJournal]=\"editingJournal\"\n        [currentJournal]=\"currentJournal\"\n        [type]=\"journalDataType.facebook\"\n      ></toco-journal-view-version-field>\n\n      <toco-journal-view-version-field\n      (editingJournalChange)=\"fieldEditingJournalChange()\"\n        [editingJournal]=\"editingJournal\"\n        [currentJournal]=\"currentJournal\"\n        [type]=\"journalDataType.twitter\"\n      ></toco-journal-view-version-field>\n\n      <toco-journal-view-version-field\n      (editingJournalChange)=\"fieldEditingJournalChange()\"\n        [editingJournal]=\"editingJournal\"\n        [currentJournal]=\"currentJournal\"\n        [type]=\"journalDataType.linkedin\"\n      ></toco-journal-view-version-field>\n    </div>\n\n    <!-- show terms -->\n    <mat-divider\n      [inset]=\"true\"\n      style=\"margin-bottom: 1em; margin-top: 1em\"\n    ></mat-divider>\n\n    <!-- <p>\n      <mat-label style=\"font-weight: bold;\"> Instituci\u00F3n: </mat-label>\n      <mat-label\n        *ngIf=\"currentInstitutionTerms.length == 0\"\n        class=\"text-muted text-through\"\n        >Vac\u00EDo</mat-label\n      >\n      <ng-container *ngFor=\"let termSource of currentInstitutionTerms\">\n        <mat-label style=\"padding-left: 1em;\">\n          {{ termSource.description }}\n        </mat-label>\n      </ng-container>\n    </p> -->\n    <!-- <mat-card style=\"margin: 1em; background-color: whitesmoke;\">\n      <mat-card-header>\n        <mat-card-title> Grupo: </mat-card-title>\n        <mat-label\n          *ngIf=\"currentGroupTerms.length == 0\"\n          class=\"text-muted text-through\"\n          >Vac\u00EDo</mat-label\n        >\n      </mat-card-header>\n      <mat-card-content>\n        <mat-chip-list>\n          <ng-container *ngFor=\"let termSource of currentGroupTerms\">\n            <mat-chip>\n              <button\n                mat-icon-button\n                color=\"accent\"\n                matTooltip=\"Agregar\"\n                (click)=\"concat(journalDataType.term, termSource)\"\n              >\n                <mat-icon class=\"mat-18\">merge_type</mat-icon>\n              </button>\n              {{ termSource.description }}\n            </mat-chip>\n          </ng-container>\n        </mat-chip-list>\n      </mat-card-content>\n    </mat-card>\n\n    <mat-card style=\"margin: 1em; background-color: whitesmoke;\">\n      <mat-card-header>\n        <mat-card-title> Provincia: </mat-card-title>\n        <mat-label\n          *ngIf=\"currentProvinceTerms.length == 0\"\n          class=\"text-muted text-through\"\n          >Vac\u00EDo</mat-label\n        >\n      </mat-card-header>\n      <mat-card-content>\n        <mat-chip-list>\n          <ng-container *ngFor=\"let termSource of currentProvinceTerms\">\n            <mat-chip>\n              <button\n                mat-icon-button\n                color=\"accent\"\n                matTooltip=\"Agregar\"\n                (click)=\"concat(journalDataType.term, termSource)\"\n              >\n                <mat-icon class=\"mat-18\">merge_type</mat-icon>\n              </button>\n              {{ termSource.description }}\n            </mat-chip>\n          </ng-container>\n        </mat-chip-list>\n      </mat-card-content>\n    </mat-card> -->\n\n    <mat-card style=\"margin: 1em; background-color: whitesmoke\">\n      <mat-card-header>\n        <mat-card-title> Licencia: </mat-card-title>\n        <mat-label\n          *ngIf=\"currentLicenceTerms.length == 0\"\n          class=\"text-muted text-through\"\n          >Vac\u00EDo</mat-label\n        >\n      </mat-card-header>\n      <mat-card-content>\n        <mat-chip-list>\n          <ng-container *ngFor=\"let termSource of currentLicenceTerms\">\n            <mat-chip>\n              <button\n                mat-icon-button\n                color=\"accent\"\n                matTooltip=\"Agregar\"\n                (click)=\"concat(journalDataType.term, termSource)\"\n              >\n                <mat-icon class=\"mat-18\">merge_type</mat-icon>\n              </button>\n              {{ termSource.description }}\n            </mat-chip>\n          </ng-container>\n        </mat-chip-list>\n      </mat-card-content>\n    </mat-card>\n\n    <mat-card style=\"margin: 1em; background-color: whitesmoke\">\n      <mat-card-header>\n        <mat-card-title>\n          <button\n            mat-icon-button\n            color=\"accent\"\n            matTooltip=\"Reemplazar\"\n            (click)=\"replaceSubjects()\"\n          >\n            <mat-icon class=\"mat-18\">merge_type</mat-icon>\n          </button>\n\n          Materias:\n        </mat-card-title>\n        <mat-label\n          *ngIf=\"currentSubjectTerms.length == 0\"\n          class=\"text-muted text-through\"\n          >Vac\u00EDo</mat-label\n        >\n      </mat-card-header>\n      <mat-card-content>\n        <mat-chip-list>\n          <ng-container *ngFor=\"let termSource of currentSubjectTerms\">\n            <mat-chip>\n              <!-- <button\n                mat-icon-button\n                color=\"accent\"\n                matTooltip=\"Agregar\"\n                (click)=\"concat(journalDataType.term, termSource)\"\n              >\n                <mat-icon class=\"mat-18\">merge_type</mat-icon>\n              </button> -->\n              {{ termSource.description }}\n            </mat-chip>\n          </ng-container>\n        </mat-chip-list>\n      </mat-card-content>\n    </mat-card>\n\n    <mat-card style=\"margin: 1em; background-color: whitesmoke\">\n      <mat-card-header>\n        <mat-card-title>\n          <button\n            mat-icon-button\n            color=\"accent\"\n            matTooltip=\"Reemplazar\"\n            (click)=\"replaceOrganizations()\"\n          >\n            <mat-icon class=\"mat-18\">merge_type</mat-icon>\n          </button>\n          Organizaciones:\n        </mat-card-title>\n      </mat-card-header>\n      <mat-card-content>\n        <toco-source-organizations\n          [sourceData]=\"currentJournal.data\"\n          [editable]=\"false\"\n          [ngStyle]=\"{ margin: '1em' }\"\n        >\n        </toco-source-organizations>\n      </mat-card-content>\n    </mat-card>\n\n    <mat-card style=\"margin: 1em; background-color: whitesmoke\">\n      <mat-card-header>\n        <mat-card-title>\n          <button\n            mat-icon-button\n            color=\"accent\"\n            matTooltip=\"Reemplazar\"\n            (click)=\"replaceIndexes()\"\n          >\n            <mat-icon class=\"mat-18\">merge_type</mat-icon>\n          </button>\n\n          Indizaciones:\n        </mat-card-title>\n        <!-- <mat-label\n          *ngIf=\"currentDataBaseTerms.length == 0\"\n          class=\"text-muted text-through\"\n          >Vac\u00EDo</mat-label\n        > -->\n      </mat-card-header>\n      <mat-card-content>\n        <toco-source-indexes\n          [sourceData]=\"currentJournal.data\"\n          [editable]=\"false\"\n          [ngStyle]=\"{ margin: '1em' }\"\n        >\n        </toco-source-indexes>\n        <!-- <mat-accordion>\n          <ng-container *ngFor=\"let termSource of currentDataBaseTerms\">\n            <mat-expansion-panel\n              (opened)=\"panelOpenState = true\"\n              (closed)=\"panelOpenState = false\"\n            >\n              <mat-expansion-panel-header>\n                <mat-panel-title>\n                  <button\n                    mat-icon-button\n                    color=\"accent\"\n                    matTooltip=\"Agregar\"\n                    (click)=\"concat(journalDataType.term, termSource)\"\n                  >\n                    <mat-icon class=\"mat-18\">merge_type</mat-icon>\n                  </button>\n                  {{ termSource.description }}\n                </mat-panel-title>\n                <mat-panel-description> </mat-panel-description>\n              </mat-expansion-panel-header>\n              <p *ngIf=\"termSource.data\">\n                <strong>URL: </strong> {{ termSource.data.url }}\n              </p>\n              <p *ngIf=\"termSource.data && termSource.data['initial_cover']\">\n                <strong>Cobertura inicio: </strong>\n                {{ termSource.data[\"initial_cover\"] }}\n              </p>\n              <p *ngIf=\"termSource.data && termSource.data['end_cover']\">\n                <strong>Cobertura hasta: </strong>\n                {{ termSource.data[\"end_cover\"] }}\n              </p>\n            </mat-expansion-panel>\n          </ng-container>\n        </mat-accordion> -->\n      </mat-card-content>\n    </mat-card>\n  </mat-card-content>\n\n  <mat-divider [inset]=\"true\"></mat-divider>\n\n  <!-- <mat-card-actions\n    fxLayout=\"row wrap\"\n    fxLayoutAlign=\"space-between center\"\n    fxLayoutGap=\"10px\"\n    style=\"padding: 1em\"\n  >\n    <mat-checkbox\n                [(ngModel)]=\"currentJournalChecked\"\n                (change)=\"markAsViewed()\"\n            >\n                Marcar como Visto\n            </mat-checkbox>\n\n    <div fxLayoutGap=\"10px\">\n      <button mat-stroked-button color=\"primary\" (click)=\"replace()\">\n        Sustituir todos los campos\n      </button>\n      <!-- <button mat-raised-button color=\"accent\">Descartar</button>\n    </div>\n  </mat-card-actions> -->\n</mat-card>\n",
                    styles: [".text-muted{color:rgba(0,0,0,.54);padding-left:.2em}.text-through{text-decoration:line-through}.notification-position{position:absolute;top:0;right:0}p{padding-top:.8em}.overlay{opacity:.4;background:#000;width:100%;height:100%;z-index:10;top:0;left:0;position:fixed}"]
                }] }
    ];
    /** @nocollapse */
    JournalViewVersionComponent.ctorParameters = function () { return [
        { type: MatSnackBar }
    ]; };
    JournalViewVersionComponent.propDecorators = {
        currentJournal: [{ type: Input }],
        type: [{ type: Input }],
        editingJournal: [{ type: Input }],
        editingJournalChange: [{ type: Output }]
    };
    return JournalViewVersionComponent;
}());
export { JournalViewVersionComponent };
if (false) {
    /** @type {?} */
    JournalViewVersionComponent.prototype.currentJournal;
    /** @type {?} */
    JournalViewVersionComponent.prototype.type;
    /** @type {?} */
    JournalViewVersionComponent.prototype.editingJournal;
    /** @type {?} */
    JournalViewVersionComponent.prototype.journalDataType;
    /** @type {?} */
    JournalViewVersionComponent.prototype.currentInstitutionTerms;
    /** @type {?} */
    JournalViewVersionComponent.prototype.currentDataBaseTerms;
    /** @type {?} */
    JournalViewVersionComponent.prototype.currentGroupTerms;
    /** @type {?} */
    JournalViewVersionComponent.prototype.currentProvinceTerms;
    /** @type {?} */
    JournalViewVersionComponent.prototype.currentSubjectTerms;
    /** @type {?} */
    JournalViewVersionComponent.prototype.currentLicenceTerms;
    /** @type {?} */
    JournalViewVersionComponent.prototype.vocabularies;
    /** @type {?} */
    JournalViewVersionComponent.prototype.panelOpenState;
    /** @type {?} */
    JournalViewVersionComponent.prototype.currentJournalChecked;
    /** @type {?} */
    JournalViewVersionComponent.prototype.editingJournalChange;
    /**
     * @type {?}
     * @private
     */
    JournalViewVersionComponent.prototype._snackBar;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiam91cm5hbC12aWV3LXZlcnNpb24uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vdG9jby1saWIvIiwic291cmNlcyI6WyJsaWIvc291cmNlcy9qb3VybmFsLXZpZXcvam91cm5hbC12aWV3LXZlcnNpb24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBcUIsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDMUYsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxjQUFjLEVBQUUsVUFBVSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDbkUsT0FBTyxFQUFFLGNBQWMsRUFBdUIsMEJBQTBCLEVBQXNCLE1BQU0sMkJBQTJCLENBQUM7QUFDaEksT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBRzNEO0lBOEJFLHFDQUFvQixTQUFzQjtRQUF0QixjQUFTLEdBQVQsU0FBUyxDQUFhO1FBakJuQyxvQkFBZSxHQUFHLGVBQWUsQ0FBQztRQVVsQyxtQkFBYyxHQUFHLEtBQUssQ0FBQztRQUU5QiwwQkFBcUIsR0FBWSxLQUFLLENBQUM7UUFHdkMseUJBQW9CLEdBQUcsSUFBSSxZQUFZLEVBQWtCLENBQUM7SUFFYixDQUFDOzs7O0lBRTlDLDhDQUFROzs7SUFBUjtRQUNFLElBQUksSUFBSSxDQUFDLGNBQWMsSUFBSSxTQUFTO1lBQ2xDLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxjQUFjLEVBQUUsQ0FBQztRQUM3QyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFFdkIsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLFNBQVM7WUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLGVBQWUsQ0FBQyxPQUFPLENBQUM7SUFDbEUsQ0FBQzs7OztJQUVELGlEQUFXOzs7SUFBWDtRQUNFLE9BQU8sQ0FBQyxH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QTJCO29CQUNyQywybWZBQW9EOztpQkFFckQ7Ozs7Z0JBVlEsV0FBVzs7O2lDQVlqQixLQUFLO3VCQUVMLEtBQUs7aUNBRUwsS0FBSzt1Q0FpQkwsTUFBTTs7SUEwSlQsa0NBQUM7Q0FBQSxBQXJMRCxJQXFMQztTQWhMWSwyQkFBMkI7OztJQUN0QyxxREFBK0M7O0lBRS9DLDJDQUE2Qjs7SUFFN0IscURBQ3NDOztJQUV0QyxzREFBeUM7O0lBRXpDLDhEQUEyRDs7SUFDM0QsMkRBQXdEOztJQUN4RCx3REFBcUQ7O0lBQ3JELDJEQUF3RDs7SUFDeEQsMERBQXVEOztJQUN2RCwwREFBdUQ7O0lBRXZELG1EQUFhOztJQUNiLHFEQUE4Qjs7SUFFOUIsNERBQXVDOztJQUV2QywyREFDMEQ7Ozs7O0lBRTlDLGdEQUE4QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBPbkNoYW5nZXMsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTWF0U25hY2tCYXIgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5pbXBvcnQgeyBNZXNzYWdlSGFuZGxlciwgU3RhdHVzQ29kZSB9IGZyb20gJy4uLy4uL2NvcmUvcHVibGljLWFwaSc7XG5pbXBvcnQgeyBKb3VybmFsVmVyc2lvbiwgU291cmNlQ2xhc2lmaWNhdGlvbiwgVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXMsIFNvdXJjZU9yZ2FuaXphdGlvbiB9IGZyb20gJy4uLy4uL2VudGl0aWVzL3B1YmxpYy1hcGknO1xuaW1wb3J0IHsgSm91cm5hbERhdGFUeXBlIH0gZnJvbSAnLi9qb3VybmFsLXZpZXcuY29tcG9uZW50JztcblxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6IFwidG9jby1qb3VybmFsLXZpZXctdmVyc2lvblwiLFxuICB0ZW1wbGF0ZVVybDogXCIuL2pvdXJuYWwtdmlldy12ZXJzaW9uLmNvbXBvbmVudC5odG1sXCIsXG4gIHN0eWxlVXJsczogW1wiLi9qb3VybmFsLXZpZXcuY29tcG9uZW50LnNjc3NcIl0sXG59KVxuZXhwb3J0IGNsYXNzIEpvdXJuYWxWaWV3VmVyc2lvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcbiAgQElucHV0KCkgcHVibGljIGN1cnJlbnRKb3VybmFsOiBKb3VybmFsVmVyc2lvbjtcblxuICBASW5wdXQoKSBwdWJsaWMgdHlwZTogbnVtYmVyO1xuXG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBlZGl0aW5nSm91cm5hbDogSm91cm5hbFZlcnNpb247XG5cbiAgcHVibGljIGpvdXJuYWxEYXRhVHlwZSA9IEpvdXJuYWxEYXRhVHlwZTtcblxuICBwdWJsaWMgY3VycmVudEluc3RpdHV0aW9uVGVybXM6IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+O1xuICBwdWJsaWMgY3VycmVudERhdGFCYXNlVGVybXM6IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+O1xuICBwdWJsaWMgY3VycmVudEdyb3VwVGVybXM6IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+O1xuICBwdWJsaWMgY3VycmVudFByb3ZpbmNlVGVybXM6IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+O1xuICBwdWJsaWMgY3VycmVudFN1YmplY3RUZXJtczogQXJyYXk8U291cmNlQ2xhc2lmaWNhdGlvbj47XG4gIHB1YmxpYyBjdXJyZW50TGljZW5jZVRlcm1zOiBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPjtcblxuICB2b2NhYnVsYXJpZXM7XG4gIHB1YmxpYyBwYW5lbE9wZW5TdGF0ZSA9IGZhbHNlO1xuXG4gIGN1cnJlbnRKb3VybmFsQ2hlY2tlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIEBPdXRwdXQoKVxuICBlZGl0aW5nSm91cm5hbENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8Sm91cm5hbFZlcnNpb24+KCk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfc25hY2tCYXI6IE1hdFNuYWNrQmFyKSB7fVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmN1cnJlbnRKb3VybmFsID09IHVuZGVmaW5lZClcbiAgICAgIHRoaXMuY3VycmVudEpvdXJuYWwgPSBuZXcgSm91cm5hbFZlcnNpb24oKTtcbiAgICB0aGlzLmxvYWRKb3VybmFsRGF0YSgpO1xuXG4gICAgaWYgKHRoaXMudHlwZSA9PSB1bmRlZmluZWQpIHRoaXMudHlwZSA9IEpvdXJuYWxEYXRhVHlwZS5kZWZhdWx0O1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCIqKiovLy8vKioqKi8vLy8qKiovLy9cIik7XG4gICAgdGhpcy5uZ09uSW5pdCgpO1xuICB9XG5cbiAgbG9hZEpvdXJuYWxEYXRhKCkge1xuICAgIHRoaXMuY3VycmVudERhdGFCYXNlVGVybXMgPSBuZXcgQXJyYXk8U291cmNlQ2xhc2lmaWNhdGlvbj4oKTtcbiAgICB0aGlzLmN1cnJlbnRHcm91cFRlcm1zID0gbmV3IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+KCk7XG4gICAgdGhpcy5jdXJyZW50SW5zdGl0dXRpb25UZXJtcyA9IG5ldyBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPigpO1xuICAgIHRoaXMuY3VycmVudExpY2VuY2VUZXJtcyA9IG5ldyBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPigpO1xuICAgIHRoaXMuY3VycmVudFByb3ZpbmNlVGVybXMgPSBuZXcgQXJyYXk8U291cmNlQ2xhc2lmaWNhdGlvbj4oKTtcbiAgICB0aGlzLmN1cnJlbnRTdWJqZWN0VGVybXMgPSBuZXcgQXJyYXk8U291cmNlQ2xhc2lmaWNhdGlvbj4oKTtcblxuICAgIHRoaXMudm9jYWJ1bGFyaWVzID0gVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXM7XG5cbiAgICBpZiAodGhpcy5jdXJyZW50Sm91cm5hbC5kYXRhLmNsYXNzaWZpY2F0aW9ucykge1xuICAgICAgdGhpcy5jdXJyZW50Sm91cm5hbC5kYXRhLmNsYXNzaWZpY2F0aW9ucy5mb3JFYWNoKFxuICAgICAgICAodGVybVNvdXJjZTogU291cmNlQ2xhc2lmaWNhdGlvbikgPT4ge1xuICAgICAgICAgIHN3aXRjaCAodGVybVNvdXJjZS52b2NhYnVsYXJ5LnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgIGNhc2UgVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXMuQ1VCQU5fSU5USVRVVElPTlM6XG4gICAgICAgICAgICAgIHRoaXMuY3VycmVudEluc3RpdHV0aW9uVGVybXMucHVzaCh0ZXJtU291cmNlKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLklOREVYRVM6XG4gICAgICAgICAgICAgIHRoaXMuY3VycmVudERhdGFCYXNlVGVybXMucHVzaCh0ZXJtU291cmNlKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLklOREVYRVNfQ0xBU0lGSUNBVElPTjpcbiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50R3JvdXBUZXJtcy5wdXNoKHRlcm1Tb3VyY2UpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXMuTElDRU5DRVM6XG4gICAgICAgICAgICAgIHRoaXMuY3VycmVudExpY2VuY2VUZXJtcy5wdXNoKHRlcm1Tb3VyY2UpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXMuQ1VCQU5fUFJPVklOQ0VTOlxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQcm92aW5jZVRlcm1zLnB1c2godGVybVNvdXJjZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcy5TVUJKRUNUUzpcbiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U3ViamVjdFRlcm1zLnB1c2godGVybVNvdXJjZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hhbmdlcyB0aGUgZmllbGQgYHJldmlld2VkYCBvZiBhIGBKb3VybmFsYCwgdGhhdCBtZWFucyB0aGUgdXNlciBzYXcgdGhlc2UgdmVyc2lvblxuICAgKiBhbmQgY29uc2lkZXIgaXQgbm90IGhhcyBtb3JlIGluZm9ybWF0aW9uLlxuICAgKi9cbiAgbWFya0FzVmlld2VkKCkge1xuICAgIGlmICh0aGlzLmN1cnJlbnRKb3VybmFsQ2hlY2tlZCkge1xuICAgICAgdGhpcy5jdXJyZW50Sm91cm5hbC5kYXRhLnJldmlld2VkID0gdHJ1ZTtcbiAgICAgIC8vIFRPRE86IGhhY2VyIGVsIHJlcXVlc3QgYWwgYmFja2VuZCBkZSBtYXJjYXIgbGEgdmVyc2lvbiBjb21vIHZpc3RhIG9cbiAgICAgIGNvbnN0IG0gPSBuZXcgTWVzc2FnZUhhbmRsZXIodGhpcy5fc25hY2tCYXIpO1xuICAgICAgbS5zaG93TWVzc2FnZShTdGF0dXNDb2RlLk9LLCBcIlJldmlzacOzbiBtYXJjYWRhIGNvbW8gdmlzdGEhISFcIik7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGZpZWxkRWRpdGluZ0pvdXJuYWxDaGFuZ2UoKSB7XG4gICAgdGhpcy5lZGl0aW5nSm91cm5hbENoYW5nZS5lbWl0KHRoaXMuZWRpdGluZ0pvdXJuYWwpO1xuICB9XG5cbiAgcHVibGljIHJlcGxhY2UoKSB7XG4gICAgdGhpcy5lZGl0aW5nSm91cm5hbCA9IHRoaXMuY3VycmVudEpvdXJuYWw7XG4gICAgLy8gdGhpcy5lZGl0aW5nSm91cm5hbC5kYXRhLmNsYXNzaWZpY2F0aW9ucyA9IFtdO1xuICAgIC8vIHRoaXMuZWRpdGluZ0pvdXJuYWwuZGF0YS5jbGFzc2lmaWNhdGlvbnMgPSB0aGlzLmN1cnJlbnRKb3VybmFsLmRhdGEuY2xhc3NpZmljYXRpb25zO1xuICAgIHRoaXMuZWRpdGluZ0pvdXJuYWxDaGFuZ2UuZW1pdCh0aGlzLmVkaXRpbmdKb3VybmFsKTtcbiAgICAvLyAvLyB0aGlzLmN1cnJlbnRKb3VybmFsLmRhdGEuY2xhc3NpZmljYXRpb25zLmZvckVhY2goKHRlcm1Tb3VyY2U6IFNvdXJjZUNsYXNpZmljYXRpb24pID0+IHtcblxuICAgIC8vIC8vICAgICB0aGlzLmVkaXRpbmdKb3VybmFsLmRhdGEuY2xhc3NpZmljYXRpb25zLnB1c2godGVybVNvdXJjZSk7XG5cbiAgICAvLyAvLyB9KTtcbiAgICBjb25zb2xlLmxvZyhcImVkaXRpbmdKb3VybmFsIHJlbXBsYXphZG9cIiwgdGhpcy5lZGl0aW5nSm91cm5hbCk7XG4gIH1cblxuICAvKipcbiAgICogQ29uY2F0cyBhIGBKb3VybmFsYCBwcm9wZXJ0eSBieSBhIGVxdWFsIHByb3BlcnR5IGluIGBKb3VybmFsRGF0YWAuXG4gICAqIEBwYXJhbSB0eXBlIGlzIGEgYEpvdXJuYWxEYXRhVHlwZWAgZW51bSwgdGhhdCBtZWFucywgYHR5cGVgIGhhcyBhbGwgcHJvcGVydGllcyBvZiBhIGBKb3VybmFsYCBlbnVtZXJhdGVkIGFzIGlkZW50aWZ5ZXIuXG4gICAqIEBwYXJhbSB0ZXJtSWQgaXMgYSBgVGVybWAgaWRlbnRpZnllciwgb25seSBuZWVkcyBpZiBgdHlwZWAgaXMgYEpvdXJuYWxEYXRhVHlwZS50ZXJtYC5cbiAgICogQE5PVEUgdGhpcyBmdW5jdGlvbiBjYWxsIGByZXBsYWNlKC4uLiwgdHJ1ZSlgXG4gICAqL1xuICBwdWJsaWMgY29uY2F0KHR5cGU6IEpvdXJuYWxEYXRhVHlwZSwgdGVybVNvdXJjZTogU291cmNlQ2xhc2lmaWNhdGlvbikge1xuICAgIGlmICh0eXBlID09IEpvdXJuYWxEYXRhVHlwZS50ZXJtKSB7XG4gICAgICBsZXQgbm90Rm91bmQgPSB0cnVlO1xuICAgICAgZm9yIChcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgaW5kZXggPCB0aGlzLmVkaXRpbmdKb3VybmFsLmRhdGEuY2xhc3NpZmljYXRpb25zLmxlbmd0aDtcbiAgICAgICAgaW5kZXgrK1xuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVkaXRpbmdKb3VybmFsLmRhdGEuY2xhc3NpZmljYXRpb25zW2luZGV4XTtcbiAgICAgICAgaWYgKGVsZW1lbnQuaWQgPT0gdGVybVNvdXJjZS5pZCkge1xuICAgICAgICAgIHRoaXMuZWRpdGluZ0pvdXJuYWwuZGF0YS5jbGFzc2lmaWNhdGlvbnNbaW5kZXhdLmRhdGEgPVxuICAgICAgICAgICAgdGVybVNvdXJjZS5kYXRhO1xuICAgICAgICAgIG5vdEZvdW5kID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChub3RGb3VuZCkge1xuICAgICAgICB0aGlzLmVkaXRpbmdKb3VybmFsLmRhdGEuY2xhc3NpZmljYXRpb25zLnB1c2godGVybVNvdXJjZSk7XG4gICAgICB9XG4gICAgICB0aGlzLmVkaXRpbmdKb3VybmFsQ2hhbmdlLmVtaXQodGhpcy5lZGl0aW5nSm91cm5hbCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlcGxhY2VTdWJqZWN0cygpIHtcbiAgICB0aGlzLnJlcGxhY2VDbGFzc2lmaWNhdGlvbnMoVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXMuU1VCSkVDVFMpO1xuICB9XG5cbiAgcHVibGljIHJlcGxhY2VJbmRleGVzKCkge1xuICAgIHRoaXMucmVwbGFjZUNsYXNzaWZpY2F0aW9ucyhWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcy5JTkRFWEVTKTtcbiAgfVxuXG4gIHB1YmxpYyByZXBsYWNlQ2xhc3NpZmljYXRpb25zKHZvY2FiOiBzdHJpbmcpIHtcbiAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICBsZXQgbmV3dHM6IFNvdXJjZUNsYXNpZmljYXRpb25bXSA9IFtdO1xuXG4gICAgdGhpcy5lZGl0aW5nSm91cm5hbC5kYXRhLmNsYXNzaWZpY2F0aW9ucy5mb3JFYWNoKCh0cykgPT4ge1xuICAgICAgaWYgKHRzLnZvY2FidWxhcnkgIT0gdm9jYWIpIHtcbiAgICAgICAgbmV3dHMucHVzaCh0cyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmN1cnJlbnRKb3VybmFsLmRhdGEuY2xhc3NpZmljYXRpb25zLmZvckVhY2goKHRzKSA9PiB7XG4gICAgICBpZiAodHMudm9jYWJ1bGFyeSA9PSB2b2NhYikge1xuICAgICAgICBuZXd0cy5wdXNoKHRzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmVkaXRpbmdKb3VybmFsLmRhdGEuY2xhc3NpZmljYXRpb25zID0gbmV3dHM7XG5cbiAgICB0aGlzLmVkaXRpbmdKb3VybmFsQ2hhbmdlLmVtaXQodGhpcy5lZGl0aW5nSm91cm5hbCk7XG4gIH1cblxuICBwdWJsaWMgcmVwbGFjZU9yZ2FuaXphdGlvbnMoKSB7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgbGV0IG5ld3RzOiBTb3VyY2VPcmdhbml6YXRpb25bXSA9IFtdO1xuXG4gICAgdGhpcy5jdXJyZW50Sm91cm5hbC5kYXRhLm9yZ2FuaXphdGlvbnMuZm9yRWFjaCgodHMpID0+IHtcbiAgICAgIG5ld3RzLnB1c2godHMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5lZGl0aW5nSm91cm5hbC5kYXRhLm9yZ2FuaXphdGlvbnMgPSBuZXd0cztcblxuICAgIHRoaXMuZWRpdGluZ0pvdXJuYWxDaGFuZ2UuZW1pdCh0aGlzLmVkaXRpbmdKb3VybmFsKTtcbiAgfVxufVxuIl19