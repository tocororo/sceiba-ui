/**
 * @fileoverview added by tsickle
 * Generated from: lib/sources/journal-view/journal-view-info.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild } from "@angular/core";
import { MatSnackBar } from '@angular/material';
import { SourceService } from '../../backend/public-api';
import { IdentifierSchemas } from '../../entities/common';
import { JournalVersion, JournalData, SourceTypes, SourceSystems, VocabulariesInmutableNames } from '../../entities/public-api';
import { SourceIndexesComponent } from '../source-edit/source-indexes/source-indexes.component';
import { SourceOrganizationsComponent } from '../source-edit/source-organizations/source-organizations.component';
/**
 * This component share the same scss that `JournalViewComponent`.
 * His goal, shows a Journal
 */
var JournalViewInfoComponent = /** @class */ (function () {
    function JournalViewInfoComponent(_sourveService, _snackBar) {
        this._sourveService = _sourveService;
        this._snackBar = _snackBar;
        this.showVersionLabel = true;
        this.tipos = SourceTypes;
        this.sistemas = SourceSystems;
        this.panelOpenState = false;
        this.IdentifierSchemas = IdentifierSchemas;
    }
    /**
     * @return {?}
     */
    JournalViewInfoComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.loadJournalData();
    };
    /**
     * @return {?}
     */
    JournalViewInfoComponent.prototype.ngOnChanges = /**
     * @return {?}
     */
    function () {
        console.log("changes....");
        this.loadJournalData();
    };
    /**
     * @return {?}
     */
    JournalViewInfoComponent.prototype.loadJournalData = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.journalData == undefined)
            this.journalData = new JournalData();
        this.journalData.deepcopy(this.journalVersion.data);
        this.dataBaseTerms = new Array();
        this.groupTerms = new Array();
        this.institutionTerms = new Array();
        this.licenceTerms = new Array();
        this.provinceTerms = new Array();
        this.subjectTerms = new Array();
        this.vocabularies = VocabulariesInmutableNames;
        if (this.journalData.classifications) {
            this.journalData.classifications.forEach((/**
             * @param {?} term
             * @return {?}
             */
            function (term) {
                switch (term.vocabulary.toString()) {
                    case VocabulariesInmutableNames.CUBAN_INTITUTIONS:
                    case VocabulariesInmutableNames.EXTRA_INSTITUTIONS:
                        _this.institutionTerms.push(term);
                        break;
                    case VocabulariesInmutableNames.INDEXES:
                        _this.dataBaseTerms.push(term);
                        break;
                    case VocabulariesInmutableNames.INDEXES_CLASIFICATION:
                        _this.groupTerms.push(term);
                        break;
                    case VocabulariesInmutableNames.LICENCES:
                        _this.licenceTerms.push(term);
                        break;
                    case VocabulariesInmutableNames.CUBAN_PROVINCES:
                        _this.provinceTerms.push(term);
                        break;
                    case VocabulariesInmutableNames.SUBJECTS:
                        _this.subjectTerms.push(term);
                        break;
                }
            }));
        }
    };
    /**
     * @param {?} idtype
     * @return {?}
     */
    JournalViewInfoComponent.prototype.getIdentifier = /**
     * @param {?} idtype
     * @return {?}
     */
    function (idtype) {
        /** @type {?} */
        var r = this.journalData
            ? this.journalData.getIdentifierValue(idtype)
            : "";
        return r;
    };
    /**
     * @param {?} newVersion
     * @return {?}
     */
    JournalViewInfoComponent.prototype.editingJournalChange = /**
     * @param {?} newVersion
     * @return {?}
     */
    function (newVersion) {
        console.log("*****llego....", newVersion, this.journalData);
        this.loadJournalData();
        this.orgs.ngOnInit();
        this.indexes.initIndexes();
    };
    JournalViewInfoComponent.decorators = [
        { type: Component, args: [{
                    selector: "toco-journal-view-info",
                    template: "<!-- Journal Information -->\n<mat-card *ngIf=\"journalVersion && journalData\">\n  <mat-card-header *ngIf=\"showVersionLabel\">\n    <!-- <img mat-card-avatar *ngIf=\"journal.data.logo; else logotemplate\" [style.background-size]=\"'cover'\" src=\"journal.data.logo\">\n        <ng-template #logotemplate>\n            <img mat-card-avatar [src]=\"defaultLogo\" alt=\"\">\n        </ng-template> -->\n\n    <mat-card-title> </mat-card-title>\n\n    <mat-card-subtitle> Revisi\u00F3n actual </mat-card-subtitle>\n  </mat-card-header>\n\n  <mat-divider  *ngIf=\"showVersionLabel\" [inset]=\"true\" style=\"margin-bottom: 1em\"></mat-divider>\n\n  <mat-card-content>\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'T\u00EDtulo'\"\n        [value]=\"journalData.title\"\n      ></toco-journal-view-info-field>\n    </p>\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'Subt\u00EDtulo'\"\n        [value]=\"journalData.subtitle\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'Nombre Abreviado'\"\n        [value]=\"journalData.shortname\"\n      ></toco-journal-view-info-field>\n    </p>\n    <p>\n      <toco-journal-view-info-field *ngIf=\"journalData.source_type\"\n        [label]=\"'Tipo'\"\n        [value]=\"tipos[journalData.source_type].label\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <mat-label style=\"font-weight: bold\">ISSN: </mat-label>\n    <div style=\"margin-left: 0.8em\">\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Impreso'\"\n          [value]=\"getIdentifier(IdentifierSchemas.issn_p)\"\n        ></toco-journal-view-info-field>\n      </p>\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Electr\u00F3nico'\"\n          [value]=\"getIdentifier(IdentifierSchemas.issn_e)\"\n        ></toco-journal-view-info-field>\n      </p>\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'De enlace'\"\n          [value]=\"getIdentifier(IdentifierSchemas.issn_l)\"\n        ></toco-journal-view-info-field>\n      </p>\n    </div>\n    <mat-label style=\"font-weight: bold\">RNPS: </mat-label>\n    <div style=\"margin-left: 0.8em\">\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Impreso'\"\n          [value]=\"getIdentifier(IdentifierSchemas.prnps)\"\n        ></toco-journal-view-info-field>\n      </p>\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Electr\u00F3nico'\"\n          [value]=\"getIdentifier(IdentifierSchemas.ernps)\"\n        ></toco-journal-view-info-field>\n      </p>\n    </div>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'URL'\"\n        [value]=\"getIdentifier(IdentifierSchemas.url)\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'OAIURL'\"\n        [value]=\"getIdentifier(IdentifierSchemas.oaiurl)\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field *ngIf=\"journalData.source_system\"\n        [label]=\"'Sistema'\"\n        [value]=\"sistemas[journalData.source_system].label\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'Email'\"\n        [value]=\"journalData.email\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'Seriadas Cubanas'\"\n        [value]=\"journalData.seriadas_cubanas\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'Prop\u00F3sito'\"\n        [value]=\"journalData.purpose\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'A\u00F1o de Inicio'\"\n        [value]=\"journalData.start_year | date\"\n      ></toco-journal-view-info-field>\n      <!-- <mat-label style=\"font-weight: bold;\"> A\u00F1o de Inicio: </mat-label>\n      <mat-label *ngIf=\"journalData.start_year\">\n        {{ journalData.start_year | date }}\n      </mat-label>\n      <mat-label\n        *ngIf=\"!journalData.start_year\"\n        class=\"text-muted text-through\"\n        >Vac\u00EDo</mat-label\n      > -->\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'A\u00F1o de Fin'\"\n        [value]=\"journalData.end_year | date\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'Frecuencia de Publicaci\u00F3n'\"\n        [value]=\"journalData.frequency\"\n      ></toco-journal-view-info-field>\n    </p>\n    <mat-label style=\"font-weight: bold\"> Descripci\u00F3n:</mat-label>\n    <mat-label *ngIf=\"!journalData.description\" class=\"text-muted text-through\"\n      >Vac\u00EDo</mat-label\n    >\n    <div\n      *ngIf=\"journalData.description\"\n      class=\"e2e-inner-html-bound text-align-justify\"\n      [innerHTML]=\"journalData.description\"\n    ></div>\n\n    <mat-label style=\"font-weight: bold\">Redes Sociales:</mat-label>\n    <div style=\"margin-left: 0.8em\">\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Facebook'\"\n          [value]=\"journalData.socialNetworks.facebook\"\n        ></toco-journal-view-info-field>\n      </p>\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Twitter'\"\n          [value]=\"journalData.socialNetworks.twitter\"\n        ></toco-journal-view-info-field>\n      </p>\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Linkedin'\"\n          [value]=\"journalData.socialNetworks.linkedin\"\n        ></toco-journal-view-info-field>\n      </p>\n    </div>\n\n    <!-- show terms -->\n\n    <mat-divider\n      [inset]=\"true\"\n      style=\"margin-bottom: 1em; margin-top: 1em\"\n    ></mat-divider>\n\n    <!-- <toco-journal-view-term\n      title=\"Grupo:\"\n      [terms]=\"groupTerms\"\n      [vocab_id]=\"vocabularies.INDEXES_CLASIFICATION\"\n    ></toco-journal-view-term>\n\n    <toco-journal-view-term\n      title=\"Provincia:\"\n      [terms]=\"provinceTerms\"\n      [vocab_id]=\"vocabularies.CUBAN_PROVINCES\"\n    ></toco-journal-view-term> -->\n\n    <toco-journal-view-term\n      title=\"Licencia:\"\n      [terms]=\"licenceTerms\"\n      [vocab_id]=\"vocabularies.LICENCES\"\n    ></toco-journal-view-term>\n\n    <toco-journal-view-term\n      title=\"Materias:\"\n      [terms]=\"subjectTerms\"\n      [vocab_id]=\"vocabularies.SUBJECTS\"\n    ></toco-journal-view-term>\n\n    <mat-card style=\"margin: 1em; background-color: whitesmoke\">\n      <mat-card-header>\n        <mat-card-title>Organizaciones:</mat-card-title>\n      </mat-card-header>\n      <mat-card-content>\n        <toco-source-organizations\n          [sourceData]=\"journalData\"\n          [editable]=\"false\"\n          [ngStyle]=\"{ margin: '1em' }\"\n        >\n        </toco-source-organizations>\n      </mat-card-content>\n    </mat-card>\n\n    <mat-card style=\"margin: 1em; background-color: whitesmoke\">\n      <mat-card-header>\n        <mat-card-title> Indizaciones:</mat-card-title>\n      </mat-card-header>\n      <mat-card-content>\n        <toco-source-indexes\n          [sourceData]=\"journalData\"\n          [editable]=\"false\"\n          [ngStyle]=\"{ margin: '1em' }\"\n        >\n        </toco-source-indexes>\n        <!-- <mat-accordion>\n          <ng-container *ngFor=\"let termSource of dataBaseTerms\">\n            <mat-expansion-panel\n              *ngIf=\"termSource.term.vocabulary == vocabularies.INDEXES\"\n              (opened)=\"panelOpenState = true\"\n              (closed)=\"panelOpenState = false\"\n            >\n              <mat-expansion-panel-header>\n                <mat-panel-title>\n                  {{ termSource.term.description }}\n                </mat-panel-title>\n                <mat-panel-description> </mat-panel-description>\n              </mat-expansion-panel-header>\n              <p *ngIf=\"termSource.data\">\n                <strong>URL: </strong> {{ termSource.data.url }}\n              </p>\n              <p *ngIf=\"termSource.data && termSource.data['initial_cover']\">\n                <strong>Cobertura inicio: </strong>\n                {{ termSource.data[\"initial_cover\"] }}\n              </p>\n              <p *ngIf=\"termSource.data && termSource.data['end_cover']\">\n                <strong>Cobertura hasta: </strong>\n                {{ termSource.data[\"end_cover\"] }}\n              </p>\n            </mat-expansion-panel>\n          </ng-container>\n        </mat-accordion> -->\n      </mat-card-content>\n    </mat-card>\n  </mat-card-content>\n\n  <mat-divider [inset]=\"true\"></mat-divider>\n</mat-card>\n",
                    styles: [".text-muted{color:rgba(0,0,0,.54);padding-left:.2em}.text-through{text-decoration:line-through}.notification-position{position:absolute;top:0;right:0}p{padding-top:.8em}.overlay{opacity:.4;background:#000;width:100%;height:100%;z-index:10;top:0;left:0;position:fixed}"]
                }] }
    ];
    /** @nocollapse */
    JournalViewInfoComponent.ctorParameters = function () { return [
        { type: SourceService },
        { type: MatSnackBar }
    ]; };
    JournalViewInfoComponent.propDecorators = {
        journalVersion: [{ type: Input }],
        showVersionLabel: [{ type: Input }],
        orgs: [{ type: ViewChild, args: [SourceOrganizationsComponent, { static: false },] }],
        indexes: [{ type: ViewChild, args: [SourceIndexesComponent, { static: false },] }]
    };
    return JournalViewInfoComponent;
}());
export { JournalViewInfoComponent };
if (false) {
    /** @type {?} */
    JournalViewInfoComponent.prototype.journalVersion;
    /** @type {?} */
    JournalViewInfoComponent.prototype.showVersionLabel;
    /** @type {?} */
    JournalViewInfoComponent.prototype.journalData;
    /** @type {?} */
    JournalViewInfoComponent.prototype.tipos;
    /** @type {?} */
    JournalViewInfoComponent.prototype.sistemas;
    /**
     * TODO: In the future databaseTerms and subjectTerms will be changes by
     *  miarTerms and subjectsUnescoTerms
     *  public miarTerms: Array<SourceClasification>;
     *  public subjectsUnescoTerms: Array<SourceClasification>;
     * @type {?}
     */
    JournalViewInfoComponent.prototype.institutionTerms;
    /** @type {?} */
    JournalViewInfoComponent.prototype.dataBaseTerms;
    /** @type {?} */
    JournalViewInfoComponent.prototype.groupTerms;
    /** @type {?} */
    JournalViewInfoComponent.prototype.provinceTerms;
    /** @type {?} */
    JournalViewInfoComponent.prototype.subjectTerms;
    /** @type {?} */
    JournalViewInfoComponent.prototype.licenceTerms;
    /** @type {?} */
    JournalViewInfoComponent.prototype.vocabularies;
    /** @type {?} */
    JournalViewInfoComponent.prototype.panelOpenState;
    /** @type {?} */
    JournalViewInfoComponent.prototype.IdentifierSchemas;
    /** @type {?} */
    JournalViewInfoComponent.prototype.orgs;
    /** @type {?} */
    JournalViewInfoComponent.prototype.indexes;
    /**
     * @type {?}
     * @private
     */
    JournalViewInfoComponent.prototype._sourveService;
    /**
     * @type {?}
     * @private
     */
    JournalViewInfoComponent.prototype._snackBar;
}
var JournalViewInfoFieldComponent = /** @class */ (function () {
    function JournalViewInfoFieldComponent() {
        this.emptyLabel = 'Vacío';
    }
    JournalViewInfoFieldComponent.decorators = [
        { type: Component, args: [{
                    selector: "toco-journal-view-info-field",
                    template: "\n    <mat-label style=\"font-weight: bold;\">{{label}}: </mat-label>\n    <mat-label *ngIf=\"value\">\n      {{ value }}\n    </mat-label>\n    <mat-label\n      *ngIf=\"!value\"\n      class=\"text-muted text-through\"\n      >{{emptyLabel}}\n    </mat-label\n    >",
                    styles: [".text-muted{color:rgba(0,0,0,.54);padding-left:.2em}.text-through{text-decoration:line-through}.notification-position{position:absolute;top:0;right:0}p{padding-top:.8em}.overlay{opacity:.4;background:#000;width:100%;height:100%;z-index:10;top:0;left:0;position:fixed}"]
                }] }
    ];
    JournalViewInfoFieldComponent.propDecorators = {
        label: [{ type: Input }],
        value: [{ type: Input }],
        emptyLabel: [{ type: Input }]
    };
    return JournalViewInfoFieldComponent;
}());
export { JournalViewInfoFieldComponent };
if (false) {
    /** @type {?} */
    JournalViewInfoFieldComponent.prototype.label;
    /** @type {?} */
    JournalViewInfoFieldComponent.prototype.value;
    /** @type {?} */
    JournalViewInfoFieldComponent.prototype.emptyLabel;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiam91cm5hbC12aWV3LWluZm8uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vdG9jby1saWIvIiwic291cmNlcyI6WyJsaWIvc291cmNlcy9qb3VybmFsLXZpZXcvam91cm5hbC12aWV3LWluZm8uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBcUIsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMvRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDaEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzFELE9BQU8sRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxhQUFhLEVBQXVCLDBCQUEwQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDckosT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sd0RBQXdELENBQUM7QUFDaEcsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sb0VBQW9FLENBQUM7Ozs7O0FBTWxIO0lBcUNFLGtDQUNVLGNBQTZCLEVBQzdCLFNBQXNCO1FBRHRCLG1CQUFjLEdBQWQsY0FBYyxDQUFlO1FBQzdCLGNBQVMsR0FBVCxTQUFTLENBQWE7UUFoQ2hCLHFCQUFnQixHQUFZLElBQUksQ0FBQztRQUcxQyxVQUFLLEdBQUcsV0FBVyxDQUFDO1FBQ3BCLGFBQVEsR0FBRyxhQUFhLENBQUM7UUFlekIsbUJBQWMsR0FBRyxLQUFLLENBQUM7UUFFdkIsc0JBQWlCLEdBQUcsaUJBQWlCLENBQUM7SUFZMUMsQ0FBQzs7OztJQUVKLDJDQUFROzs7SUFBUjtRQUNFLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN6QixDQUFDOzs7O0lBQ0QsOENBQVc7OztJQUFYO1FBQ0UsT0FBTyxDQUFDLEdBQUcsQ0FBQyxh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QkFDbEMsdXBSQUFpRDs7aUJBRWxEOzs7O2dCQWRRLGFBQWE7Z0JBRGIsV0FBVzs7O2lDQWlCakIsS0FBSzttQ0FDTCxLQUFLO3VCQXVCTCxTQUFTLFNBQUMsNEJBQTRCLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFOzBCQUd6RCxTQUFTLFNBQUMsc0JBQXNCLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFOztJQTRFdEQsK0JBQUM7Q0FBQSxBQTdHRCxJQTZHQztTQXhHWSx3QkFBd0I7OztJQUNuQyxrREFBK0M7O0lBQy9DLG9EQUFpRDs7SUFDakQsK0NBQWdDOztJQUVoQyx5Q0FBMkI7O0lBQzNCLDRDQUFnQzs7Ozs7Ozs7SUFPaEMsb0RBQW9EOztJQUNwRCxpREFBaUQ7O0lBQ2pELDhDQUE4Qzs7SUFDOUMsaURBQWlEOztJQUNqRCxnREFBZ0Q7O0lBQ2hELGdEQUFnRDs7SUFFaEQsZ0RBQXVEOztJQUN2RCxrREFBOEI7O0lBRTlCLHFEQUE2Qzs7SUFFN0Msd0NBQ21DOztJQUVuQywyQ0FDZ0M7Ozs7O0lBSTlCLGtEQUFxQzs7Ozs7SUFDckMsNkNBQThCOztBQXlFbEM7SUFBQTtRQXFCSSxlQUFVLEdBQVcsT0FBTyxDQUFDO0lBQy9CLENBQUM7O2dCQXRCRixTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFFLDhCQUE4QjtvQkFFeEMsUUFBUSxFQUFFLDZRQVVSOztpQkFDSDs7O3dCQUVFLEtBQUs7d0JBRUwsS0FBSzs2QkFFTCxLQUFLOztJQUVSLG9DQUFDO0NBQUEsQUF0QkgsSUFzQkc7U0FQWSw2QkFBNkI7OztJQUN4Qyw4Q0FDYzs7SUFDZCw4Q0FDYzs7SUFDZCxtREFDNkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgT25DaGFuZ2VzLCBJbnB1dCwgVmlld0NoaWxkIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IE1hdFNuYWNrQmFyIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xuaW1wb3J0IHsgU291cmNlU2VydmljZSB9IGZyb20gJy4uLy4uL2JhY2tlbmQvcHVibGljLWFwaSc7XG5pbXBvcnQgeyBJZGVudGlmaWVyU2NoZW1hcyB9IGZyb20gJy4uLy4uL2VudGl0aWVzL2NvbW1vbic7XG5pbXBvcnQgeyBKb3VybmFsVmVyc2lvbiwgSm91cm5hbERhdGEsIFNvdXJjZVR5cGVzLCBTb3VyY2VTeXN0ZW1zLCBTb3VyY2VDbGFzaWZpY2F0aW9uLCBWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcyB9IGZyb20gJy4uLy4uL2VudGl0aWVzL3B1YmxpYy1hcGknO1xuaW1wb3J0IHsgU291cmNlSW5kZXhlc0NvbXBvbmVudCB9IGZyb20gJy4uL3NvdXJjZS1lZGl0L3NvdXJjZS1pbmRleGVzL3NvdXJjZS1pbmRleGVzLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTb3VyY2VPcmdhbml6YXRpb25zQ29tcG9uZW50IH0gZnJvbSAnLi4vc291cmNlLWVkaXQvc291cmNlLW9yZ2FuaXphdGlvbnMvc291cmNlLW9yZ2FuaXphdGlvbnMuY29tcG9uZW50JztcblxuLyoqXG4gKiBUaGlzIGNvbXBvbmVudCBzaGFyZSB0aGUgc2FtZSBzY3NzIHRoYXQgYEpvdXJuYWxWaWV3Q29tcG9uZW50YC5cbiAqIEhpcyBnb2FsLCBzaG93cyBhIEpvdXJuYWxcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiBcInRvY28tam91cm5hbC12aWV3LWluZm9cIixcbiAgdGVtcGxhdGVVcmw6IFwiLi9qb3VybmFsLXZpZXctaW5mby5jb21wb25lbnQuaHRtbFwiLFxuICBzdHlsZVVybHM6IFtcIi4vam91cm5hbC12aWV3LmNvbXBvbmVudC5zY3NzXCJdLFxufSlcbmV4cG9ydCBjbGFzcyBKb3VybmFsVmlld0luZm9Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgpIHB1YmxpYyBqb3VybmFsVmVyc2lvbjogSm91cm5hbFZlcnNpb247XG4gIEBJbnB1dCgpIHB1YmxpYyBzaG93VmVyc2lvbkxhYmVsOiBib29sZWFuID0gdHJ1ZTtcbiAgcHVibGljIGpvdXJuYWxEYXRhOiBKb3VybmFsRGF0YTtcblxuICBwdWJsaWMgdGlwb3MgPSBTb3VyY2VUeXBlcztcbiAgcHVibGljIHNpc3RlbWFzID0gU291cmNlU3lzdGVtcztcblxuICAvKiogVE9ETzogSW4gdGhlIGZ1dHVyZSBkYXRhYmFzZVRlcm1zIGFuZCBzdWJqZWN0VGVybXMgd2lsbCBiZSBjaGFuZ2VzIGJ5XG4gICAqICBtaWFyVGVybXMgYW5kIHN1YmplY3RzVW5lc2NvVGVybXNcbiAgICogIHB1YmxpYyBtaWFyVGVybXM6IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+O1xuICAgKiAgcHVibGljIHN1YmplY3RzVW5lc2NvVGVybXM6IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+O1xuICAgKi9cbiAgcHVibGljIGluc3RpdHV0aW9uVGVybXM6IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+O1xuICBwdWJsaWMgZGF0YUJhc2VUZXJtczogQXJyYXk8U291cmNlQ2xhc2lmaWNhdGlvbj47XG4gIHB1YmxpYyBncm91cFRlcm1zOiBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPjtcbiAgcHVibGljIHByb3ZpbmNlVGVybXM6IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+O1xuICBwdWJsaWMgc3ViamVjdFRlcm1zOiBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPjtcbiAgcHVibGljIGxpY2VuY2VUZXJtczogQXJyYXk8U291cmNlQ2xhc2lmaWNhdGlvbj47XG5cbiAgcHVibGljIHZvY2FidWxhcmllczogdHlwZW9mIFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzO1xuICBwdWJsaWMgcGFuZWxPcGVuU3RhdGUgPSBmYWxzZTtcblxuICBwdWJsaWMgSWRlbnRpZmllclNjaGVtYXMgPSBJZGVudGlmaWVyU2NoZW1hcztcblxuICBAVmlld0NoaWxkKFNvdXJjZU9yZ2FuaXphdGlvbnNDb21wb25lbnQsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBvcmdzOiBTb3VyY2VPcmdhbml6YXRpb25zQ29tcG9uZW50O1xuXG4gIEBWaWV3Q2hpbGQoU291cmNlSW5kZXhlc0NvbXBvbmVudCwgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIGluZGV4ZXM6IFNvdXJjZUluZGV4ZXNDb21wb25lbnQ7XG5cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9zb3VydmVTZXJ2aWNlOiBTb3VyY2VTZXJ2aWNlLFxuICAgIHByaXZhdGUgX3NuYWNrQmFyOiBNYXRTbmFja0JhclxuICApIHt9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5sb2FkSm91cm5hbERhdGEoKTtcbiAgfVxuICBuZ09uQ2hhbmdlcygpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcImNoYW5nZXMuLi4uXCIpO1xuICAgIHRoaXMubG9hZEpvdXJuYWxEYXRhKCk7XG4gIH1cbiAgbG9hZEpvdXJuYWxEYXRhKCkge1xuICAgIGlmICh0aGlzLmpvdXJuYWxEYXRhID09IHVuZGVmaW5lZClcbiAgICAgIHRoaXMuam91cm5hbERhdGEgPSBuZXcgSm91cm5hbERhdGEoKTtcblxuICAgIHRoaXMuam91cm5hbERhdGEuZGVlcGNvcHkodGhpcy5qb3VybmFsVmVyc2lvbi5kYXRhKTtcblxuICAgIHRoaXMuZGF0YUJhc2VUZXJtcyA9IG5ldyBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPigpO1xuICAgIHRoaXMuZ3JvdXBUZXJtcyA9IG5ldyBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPigpO1xuICAgIHRoaXMuaW5zdGl0dXRpb25UZXJtcyA9IG5ldyBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPigpO1xuICAgIHRoaXMubGljZW5jZVRlcm1zID0gbmV3IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+KCk7XG4gICAgdGhpcy5wcm92aW5jZVRlcm1zID0gbmV3IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+KCk7XG4gICAgdGhpcy5zdWJqZWN0VGVybXMgPSBuZXcgQXJyYXk8U291cmNlQ2xhc2lmaWNhdGlvbj4oKTtcblxuICAgIHRoaXMudm9jYWJ1bGFyaWVzID0gVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXM7XG5cbiAgICBpZiAodGhpcy5qb3VybmFsRGF0YS5jbGFzc2lmaWNhdGlvbnMpIHtcbiAgICAgIHRoaXMuam91cm5hbERhdGEuY2xhc3NpZmljYXRpb25zLmZvckVhY2goXG4gICAgICAgICh0ZXJtOiBTb3VyY2VDbGFzaWZpY2F0aW9uKSA9PiB7XG4gICAgICAgICAgc3dpdGNoICh0ZXJtLnZvY2FidWxhcnkudG9TdHJpbmcoKSkge1xuICAgICAgICAgICAgY2FzZSBWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcy5DVUJBTl9JTlRJVFVUSU9OUzpcbiAgICAgICAgICAgIGNhc2UgVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXMuRVhUUkFfSU5TVElUVVRJT05TOlxuICAgICAgICAgICAgICB0aGlzLmluc3RpdHV0aW9uVGVybXMucHVzaCh0ZXJtKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLklOREVYRVM6XG4gICAgICAgICAgICAgIHRoaXMuZGF0YUJhc2VUZXJtcy5wdXNoKHRlcm0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXMuSU5ERVhFU19DTEFTSUZJQ0FUSU9OOlxuICAgICAgICAgICAgICB0aGlzLmdyb3VwVGVybXMucHVzaCh0ZXJtKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLkxJQ0VOQ0VTOlxuICAgICAgICAgICAgICB0aGlzLmxpY2VuY2VUZXJtcy5wdXNoKHRlcm0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXMuQ1VCQU5fUFJPVklOQ0VTOlxuICAgICAgICAgICAgICB0aGlzLnByb3ZpbmNlVGVybXMucHVzaCh0ZXJtKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLlNVQkpFQ1RTOlxuICAgICAgICAgICAgICB0aGlzLnN1YmplY3RUZXJtcy5wdXNoKHRlcm0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICB9XG5cblxuICBnZXRJZGVudGlmaWVyKGlkdHlwZTogSWRlbnRpZmllclNjaGVtYXMpIHtcbiAgICAgIHZhciByID0gdGhpcy5qb3VybmFsRGF0YVxuICAgICAgPyB0aGlzLmpvdXJuYWxEYXRhLmdldElkZW50aWZpZXJWYWx1ZShpZHR5cGUpXG4gICAgICA6IFwiXCI7XG5cbiAgICByZXR1cm4gcjtcbiAgfVxuXG4gIGVkaXRpbmdKb3VybmFsQ2hhbmdlKG5ld1ZlcnNpb246IEpvdXJuYWxWZXJzaW9uKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCIqKioqKmxsZWdvLi4uLlwiLCBuZXdWZXJzaW9uLCB0aGlzLmpvdXJuYWxEYXRhKTtcblxuICAgIHRoaXMubG9hZEpvdXJuYWxEYXRhKCk7XG4gICAgdGhpcy5vcmdzLm5nT25Jbml0KCk7XG4gICAgdGhpcy5pbmRleGVzLmluaXRJbmRleGVzKCk7XG4gIH1cbn1cblxuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogXCJ0b2NvLWpvdXJuYWwtdmlldy1pbmZvLWZpZWxkXCIsXG4gICAgc3R5bGVVcmxzOiBbXCIuL2pvdXJuYWwtdmlldy5jb21wb25lbnQuc2Nzc1wiXSxcbiAgICB0ZW1wbGF0ZTogYFxuICAgIDxtYXQtbGFiZWwgc3R5bGU9XCJmb250LXdlaWdodDogYm9sZDtcIj57e2xhYmVsfX06IDwvbWF0LWxhYmVsPlxuICAgIDxtYXQtbGFiZWwgKm5nSWY9XCJ2YWx1ZVwiPlxuICAgICAge3sgdmFsdWUgfX1cbiAgICA8L21hdC1sYWJlbD5cbiAgICA8bWF0LWxhYmVsXG4gICAgICAqbmdJZj1cIiF2YWx1ZVwiXG4gICAgICBjbGFzcz1cInRleHQtbXV0ZWQgdGV4dC10aHJvdWdoXCJcbiAgICAgID57e2VtcHR5TGFiZWx9fVxuICAgIDwvbWF0LWxhYmVsXG4gICAgPmBcbiAgfSlcbiAgZXhwb3J0IGNsYXNzIEpvdXJuYWxWaWV3SW5mb0ZpZWxkQ29tcG9uZW50IHtcbiAgICBASW5wdXQoKVxuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgQElucHV0KClcbiAgICB2YWx1ZTogc3RyaW5nO1xuICAgIEBJbnB1dCgpXG4gICAgZW1wdHlMYWJlbDogc3RyaW5nID0gJ1ZhY8Otbyc7XG4gIH1cbiJdfQ==