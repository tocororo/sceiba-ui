/**
 * @fileoverview added by tsickle
 * Generated from: lib/sources/catalog/catalog.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 *   Copyright (c) 2020 Universidad de Pinar del Río "Hermanos Saíz Montes de Oca"
 *   All rights reserved.
 */
import { Component, ViewChild, Inject } from '@angular/core';
import { animate, state, style, transition, trigger } from '@angular/animations';
import { merge, of as observableOf } from 'rxjs';
import { startWith, switchMap, map, catchError } from 'rxjs/operators';
import { MatPaginator } from '@angular/material/paginator';
import { MatTableDataSource } from '@angular/material/table';
import { MetadataService, MessageHandler, StatusCode } from '../../core/public-api';
import { Journal, JournalData, ISSN, JournalVersion } from '../../entities/public-api';
import { FiltersService } from '../../filters/public-api';
import { Environment } from '../../core/env';
import { CatalogService } from '../../backend/public-api';
import { CatalogFiltersComponent } from '../catalog-filters/catalog-filters.component';
import { MatSnackBar, MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';
var CatalogComponent = /** @class */ (function () {
    function CatalogComponent(service, metadata, filterService, env, _snackBar, dialog) {
        this.service = service;
        this.metadata = metadata;
        this.filterService = filterService;
        this.env = env;
        this._snackBar = _snackBar;
        this.dialog = dialog;
        // journalList: Journal[] = [];
        this.loading = true;
        this.hasErrors = false;
        this.dataSource = new MatTableDataSource();
        this.columnsToDisplay = ['title', 'rnps', 'p-issn', 'url'];
        this.length = 0;
        this.pageSize = 5;
        this.pageSizeOptions = [5, 10, 15, 20];
        this.sceibaHost = '';
        this.layoutPosition = [
            {
                name: 'Derecha',
                layout: 'row-reverse',
                aling: 'center baseline',
                width: '22'
            },
            {
                name: 'Izquierda',
                layout: 'row',
                aling: 'center baseline',
                width: '22'
            },
            {
                name: 'Arriba',
                layout: 'column',
                aling: 'center center',
                width: '90'
            },
            {
                name: 'Abajo',
                layout: 'column-reverse',
                aling: 'center center',
                width: '90'
            }
        ];
        this.currentlayout = this.layoutPosition[1];
        this.sceibaHost = env.sceibaHost + '/catalog';
        env.topOrganizationPID;
    }
    /**
     * @return {?}
     */
    CatalogComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.metadata.setStandardMeta("Catálogo de Revistas Científicas", "", "");
        this.paginator.firstPage();
        this.paginator.pageSize = 5;
        try {
            this.fetchJournalData();
            this.filterService.paramsChanged.pipe(catchError((/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                /** @type {?} */
                var m = new MessageHandler(_this._snackBar);
                m.showMessage(StatusCode.serverError, error.message);
                return observableOf([]);
            })))
                .subscribe((/**
             * @param {?} params
             * @return {?}
             */
            function (params) {
                _this.params = params;
                _this.fetchJournalData();
            }));
        }
        catch (err) {
            /** @type {?} */
            var m = new MessageHandler(this._snackBar);
            m.showMessage(StatusCode.serverError, err.message);
        }
    };
    // onPaginatorChanged(){
    //   this.filterService.changeFilter('count',this.paginator.pageSize, false);
    //   this.filterService.changeFilter('page',this.paginator.pageIndex);
    // }
    // onPaginatorChanged(){
    //   this.filterService.changeFilter('count',this.paginator.pageSize, false);
    //   this.filterService.changeFilter('page',this.paginator.pageIndex);
    // }
    /**
     * @return {?}
     */
    CatalogComponent.prototype.fetchJournalData = 
    // onPaginatorChanged(){
    //   this.filterService.changeFilter('count',this.paginator.pageSize, false);
    //   this.filterService.changeFilter('page',this.paginator.pageIndex);
    // }
    /**
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var arr = new Array();
        merge().pipe(startWith({}), switchMap((/**
         * @return {?}
         */
        function () {
            //this.loading = true;
            return (/** @type {?} */ (_this.service)).getJournalsPage(_this.paginator.pageSize, _this.paginator.pageIndex, _this.params);
        })), map((/**
         * @param {?} response
         * @return {?}
         */
        function (response) {
            // Flip flag to show that loading has finished.
            _this.loading = false;
            _this.length = response.data.sources.count;
            response.data.sources.data.forEach((/**
             * @param {?} item
             * @return {?}
             */
            function (item) {
                /** @type {?} */
                var j = new Journal();
                j.id = item.id;
                j.uuid = item.uuid;
                /** @type {?} */
                var info = new JournalData();
                info.url = item.data != null ? item.data.url : '';
                info.title = item.name;
                info.subtitle = item.subtitle;
                info.shortname = item.shortname;
                /** @type {?} */
                var issn = new ISSN();
                issn.e = item.data != null ? item.data.issn.e : '';
                issn.l = item.data != null ? item.data.issn.l : '';
                issn.p = item.data != null ? item.data.issn.p : '';
                info.issn = issn;
                info.rnps = item.data != null ? item.data.rnps : '';
                info.logo = item.data != null ? item.data.logo : '';
                info.purpose = item.purpose;
                info.description = item.data != null ? item.data.description : '';
                j.data = info;
                arr.push(j);
            }));
            return arr;
        })), catchError((/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.loading = false;
            _this.hasErrors = true;
            /** @type {?} */
            var m = new MessageHandler(_this._snackBar);
            m.showMessage(StatusCode.serverError, error.message);
            // Catch if the GitHub API has reached its rate limit. Return empty data.
            // this.isRateLimitReached = true;
            return observableOf([]);
        }))).subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) { return _this.dataSource.data = data; }));
    };
    /**
     * @return {?}
     */
    CatalogComponent.prototype.onScrollUp = /**
     * @return {?}
     */
    function () {
        // console.log("scrolled up!!");
    };
    /**
     * @return {?}
     */
    CatalogComponent.prototype.isEmpty = /**
     * @return {?}
     */
    function () {
        if (this.dataSource.data.length === 0 && this.hasErrors) {
            //this.loading = false;
            return true;
        }
        return false;
    };
    /**
     * @return {?}
     */
    CatalogComponent.prototype.isLoading = /**
     * @return {?}
     */
    function () {
        return this.loading;
    };
    /**
     * @return {?}
     */
    CatalogComponent.prototype.openme = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var a = navigator.userAgent.match(/Android/i);
        /** @type {?} */
        var b = navigator.userAgent.match(/BlackBerry/i);
        /** @type {?} */
        var apple = navigator.userAgent.match(/iPhone|iPad|iPod/i);
        /** @type {?} */
        var o = navigator.userAgent.match(/Opera Mini/i);
        /** @type {?} */
        var i = navigator.userAgent.match(/IEMobile/i);
        if (a != null || b != null || apple != null || o != null || i != null) {
            return false;
        }
        return true;
    };
    /**
     * @param {?} index
     * @return {?}
     */
    CatalogComponent.prototype.changeLayoutPosition = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        this.currentlayout = this.layoutPosition[index];
    };
    /**
     * @param {?} uuid
     * @return {?}
     */
    CatalogComponent.prototype.viewJournal = /**
     * @param {?} uuid
     * @return {?}
     */
    function (uuid) {
        var _this = this;
        this.service.getSourceByUUID(uuid).subscribe((/**
         * @param {?} response
         * @return {?}
         */
        function (response) {
            console.log(response);
            if (response.status == "success") {
                /** @type {?} */
                var journalVersion = new JournalVersion();
                journalVersion.deepcopy(response.data.sources);
                /** @type {?} */
                var dialogRef = _this.dialog.open(DialogCatalogJournalInfoDialog, {
                    data: {
                        journalVersion: journalVersion,
                        journalUUID: uuid
                    }
                });
                dialogRef.afterClosed();
            }
            else {
                /** @type {?} */
                var m = new MessageHandler(_this._snackBar);
                m.showMessage(StatusCode.serverError, 'No fue posible encontrar la Revista');
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            console.log('error');
        }), (/**
         * @return {?}
         */
        function () { }));
    };
    CatalogComponent.decorators = [
        { type: Component, args: [{
                    selector: 'toco-catalog',
                    template: "<!-- <div infiniteScroll [infiniteScrollDistance]=\"0\" [infiniteScrollUpDistance]=\"0.5\" [infiniteScrollThrottle]=\"10\" (scrolled)=\"onScrollDown()\"\n  (scrolledUp)=\"onScrollUp()\"> -->\n\n<!-- <toco-page-header [info]=\"['Cat\u00E1logo de Revistas Cient\u00EDficas Cubanas']\">\n    </toco-page-header> -->\n<div fxLayoutAlign=\"end center\" fxLayout=\"row\">\n    <button mat-icon-button [matMenuTriggerFor]=\"menu\">\n        <mat-icon>view_quilt</mat-icon>\n    </button>\n    <mat-menu #menu=\"matMenu\">\n        <button mat-menu-item (click)=\"changeLayoutPosition(0)\">\n            <mat-icon>arrow_forward</mat-icon>\n            <span>{{layoutPosition[0].name}}</span>\n        </button>\n        <button mat-menu-item (click)=\"changeLayoutPosition(1)\">\n            <mat-icon>arrow_back</mat-icon>\n            <span>{{layoutPosition[1].name}}</span>\n        </button>\n        <button mat-menu-item (click)=\"changeLayoutPosition(2)\">\n            <mat-icon>arrow_upward</mat-icon>\n            <span>{{layoutPosition[2].name}}</span>\n        </button>\n        <button mat-menu-item (click)=\"changeLayoutPosition(3)\">\n            <mat-icon>arrow_downward</mat-icon>\n            <span>{{layoutPosition[3].name}}</span>\n        </button>\n    </mat-menu>\n</div>\n\n\n<div fxLayout=\"{{currentlayout.layout}}\" fxLayout.xs=\"column nowrap\"\n    fxLayoutAlign=\"{{currentlayout.aling}}\">\n\n    <toco-catalog-filters-container *ngIf=\"!isEmpty()\" fxLayout=\"row wrap\" fxLayout.xs=\"column wrap\" fxFlex=\"{{currentlayout.width}}\"\n        fxLayoutAlign=\"start center\" fxLayoutAlign.xs=\"center center\" fxLayoutGap=\"1em\"\n        class=\"width-90 back-grey mat-elevation-z8\">\n    </toco-catalog-filters-container>\n\n\n\n    <div class=\"mat-elevation-z8 width-90 margin1em\">\n        <table *ngIf=\"!isEmpty()\" mat-table [dataSource]=\"dataSource\" multiTemplateDataRows>\n            <ng-container matColumnDef=\"title\">\n                <th mat-header-cell *matHeaderCellDef>Titulo</th>\n                <td mat-cell *matCellDef=\"let element\"> {{element.data.title}} </td>\n            </ng-container>\n            <ng-container matColumnDef=\"rnps\">\n                <th mat-header-cell *matHeaderCellDef>RNPS</th>\n                <td mat-cell *matCellDef=\"let element\"> {{element.data.rnps}} </td>\n            </ng-container>\n            <ng-container matColumnDef=\"p-issn\">\n                <th mat-header-cell *matHeaderCellDef>P-ISSN</th>\n                <td mat-cell *matCellDef=\"let element\"> {{element.data.issn.p}} </td>\n            </ng-container>\n            <ng-container matColumnDef=\"url\">\n                <th mat-header-cell *matHeaderCellDef>URL</th>\n                <td mat-cell *matCellDef=\"let element\"> {{element.data.url}} </td>\n            </ng-container>\n\n            <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->\n            <ng-container matColumnDef=\"expandedDetail\">\n                <td mat-cell *matCellDef=\"let element\" [attr.colspan]=\"columnsToDisplay.length\">\n                    <div class=\"example-element-detail\"\n                        [@detailExpand]=\"element == expandedElement ? 'expanded' : 'collapsed'\">\n                        <div class=\"example-element-description e2e-inner-html-bound\"\n                            [innerHTML]=\"element.data.description\"></div>\n                        <div class=\"example-element-description\" fxLayout=\"row\" fxLayoutAlign=\"center end\">\n                            <button mat-stroked-button color=\"primary\" (click)=\"viewJournal(element.uuid)\">\n                                Ver\n                            </button>\n                        </div>\n\n                    </div>\n                </td>\n            </ng-container>\n\n            <tr mat-header-row *matHeaderRowDef=\"columnsToDisplay\"></tr>\n            <tr mat-row *matRowDef=\"let element; columns: columnsToDisplay;\" class=\"example-element-row\"\n                [class.example-expanded-row]=\"expandedElement === element\" (click)=\"expandedElement = element\">\n            </tr>\n            <tr mat-row *matRowDef=\"let row; columns: ['expandedDetail']\" class=\"example-detail-row\"></tr>\n        </table>\n\n        <h1 *ngIf=\"isEmpty()\">No hay Informaci\u00F3n para Mostrar</h1>\n\n        <mat-paginator [length]=\"length\" [pageSize]=\"pageSize\" [pageSizeOptions]=\"pageSizeOptions\"\n            (page)=\"fetchJournalData()\">\n        </mat-paginator>\n    </div>\n\n\n</div>\n<mat-card *ngIf=\"isLoading()\" class=\"center-spinner\" fxLayout=\"row\" fxLayoutAlign=\"center center\" fxLayoutGap=\"gappx\">\n    <mat-spinner></mat-spinner>\n    <!--<mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>-->\n</mat-card>\n\n\n<!--\n      </mat-drawer-content>\n\n    </mat-drawer-container> -->\n\n<!-- </div> -->",
                    animations: [
                        trigger('detailExpand', [
                            state('collapsed', style({ height: '0px', minHeight: '0', display: 'none' })),
                            state('expanded', style({ height: '*' })),
                            transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')),
                        ]),
                    ],
                    styles: [".width-card{width:30%;min-width:240px;margin-left:24px;margin-top:24px}.card-float-left{float:left}.center-spinner{width:90.5%;min-width:240px;margin-left:24px;margin-right:24px;margin-top:24px}.back-grey{background:rgba(0,0,0,.01);margin:1.5em 1em;padding:1em;min-width:18em}.width-90{width:90%}.width-93{width:93.5%}table{width:90%}.margin1em{margin:1em}.menu-pull-right{flex:1 1 auto}table.mat-table{width:100%}tr.example-detail-row{height:0}tr.example-element-row:not(.example-expanded-row):hover{background:#f5f5f5}tr.example-element-row:not(.example-expanded-row):active{background:#efefef}.example-element-row td{border-bottom-width:0}.example-element-detail{overflow:hidden;display:flex}.example-element-diagram{min-width:80px;border:2px solid #000;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol{font-weight:700;font-size:40px;line-height:normal}.example-element-description{padding:16px}.example-element-description-attribution{opacity:.5}.height-auto{height:auto!important}"]
                }] }
    ];
    /** @nocollapse */
    CatalogComponent.ctorParameters = function () { return [
        { type: CatalogService },
        { type: MetadataService },
        { type: FiltersService },
        { type: Environment },
        { type: MatSnackBar },
        { type: MatDialog }
    ]; };
    CatalogComponent.propDecorators = {
        paginator: [{ type: ViewChild, args: [MatPaginator, { static: true },] }],
        filter_component: [{ type: ViewChild, args: [CatalogFiltersComponent, { static: true },] }]
    };
    return CatalogComponent;
}());
export { CatalogComponent };
if (false) {
    /** @type {?} */
    CatalogComponent.prototype.loading;
    /**
     * @type {?}
     * @private
     */
    CatalogComponent.prototype.hasErrors;
    /** @type {?} */
    CatalogComponent.prototype.dataSource;
    /** @type {?} */
    CatalogComponent.prototype.columnsToDisplay;
    /** @type {?} */
    CatalogComponent.prototype.expandedElement;
    /** @type {?} */
    CatalogComponent.prototype.length;
    /** @type {?} */
    CatalogComponent.prototype.pageSize;
    /** @type {?} */
    CatalogComponent.prototype.pageSizeOptions;
    /** @type {?} */
    CatalogComponent.prototype.pageEvent;
    /** @type {?} */
    CatalogComponent.prototype.params;
    /** @type {?} */
    CatalogComponent.prototype.sceibaHost;
    /** @type {?} */
    CatalogComponent.prototype.layoutPosition;
    /** @type {?} */
    CatalogComponent.prototype.currentlayout;
    /** @type {?} */
    CatalogComponent.prototype.paginator;
    /** @type {?} */
    CatalogComponent.prototype.filter_component;
    /**
     * @type {?}
     * @private
     */
    CatalogComponent.prototype.service;
    /**
     * @type {?}
     * @private
     */
    CatalogComponent.prototype.metadata;
    /**
     * @type {?}
     * @private
     */
    CatalogComponent.prototype.filterService;
    /**
     * @type {?}
     * @private
     */
    CatalogComponent.prototype.env;
    /**
     * @type {?}
     * @private
     */
    CatalogComponent.prototype._snackBar;
    /** @type {?} */
    CatalogComponent.prototype.dialog;
}
var DialogCatalogJournalInfoDialog = /** @class */ (function () {
    function DialogCatalogJournalInfoDialog(dialogRef, data) {
        this.dialogRef = dialogRef;
        this.data = data;
    }
    /**
     * @return {?}
     */
    DialogCatalogJournalInfoDialog.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        console.log(this.data);
    };
    /**
     * @return {?}
     */
    DialogCatalogJournalInfoDialog.prototype.onNoClick = /**
     * @return {?}
     */
    function () {
        this.dialogRef.close();
    };
    DialogCatalogJournalInfoDialog.decorators = [
        { type: Component, args: [{
                    selector: 'dialog-catalog-journal-info',
                    template: "<mat-dialog-content class=\"height-auto\">\n                    <toco-journal-view-info\n                        [journalVersion]=\"data.journalVersion\"\n                    >\n                    </toco-journal-view-info>\n                </mat-dialog-content>"
                }] }
    ];
    /** @nocollapse */
    DialogCatalogJournalInfoDialog.ctorParameters = function () { return [
        { type: MatDialogRef },
        { type: undefined, decorators: [{ type: Inject, args: [MAT_DIALOG_DATA,] }] }
    ]; };
    return DialogCatalogJournalInfoDialog;
}());
export { DialogCatalogJournalInfoDialog };
if (false) {
    /** @type {?} */
    DialogCatalogJournalInfoDialog.prototype.dialogRef;
    /** @type {?} */
    DialogCatalogJournalInfoDialog.prototype.data;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2F0YWxvZy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly90b2NvLWxpYi8iLCJzb3VyY2VzIjpbImxpYi9zb3VyY2VzL2NhdGFsb2cvY2F0YWxvZy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBTUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3JFLE9BQU8sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDakYsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLElBQUksWUFBWSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ2pELE9BQU8sRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN2RSxPQUFPLEVBQUUsWUFBWSxFQUFhLE1BQU0sNkJBQTZCLENBQUM7QUFDdEUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFFN0QsT0FBTyxFQUFFLGVBQWUsRUFBRSxjQUFjLEVBQUUsVUFBVSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDcEYsT0FBTyxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ3ZGLE9BQU8sRUFBaUIsY0FBYyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFFekUsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRTdDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUMxRCxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSw4Q0FBOEMsQ0FBQztBQUN2RixPQUFPLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsZUFBZSxFQUFFLE1BQU0sbUJB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ICBDb3B5cmlnaHQgKGMpIDIwMjAgVW5pdmVyc2lkYWQgZGUgUGluYXIgZGVsIFLDrW8gXCJIZXJtYW5vcyBTYcOteiBNb250ZXMgZGUgT2NhXCJcbiAqICAgQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL1xuXG5cbmltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBWaWV3Q2hpbGQsIEluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgYW5pbWF0ZSwgc3RhdGUsIHN0eWxlLCB0cmFuc2l0aW9uLCB0cmlnZ2VyIH0gZnJvbSAnQGFuZ3VsYXIvYW5pbWF0aW9ucyc7XG5pbXBvcnQgeyBtZXJnZSwgb2YgYXMgb2JzZXJ2YWJsZU9mIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBzdGFydFdpdGgsIHN3aXRjaE1hcCwgbWFwLCBjYXRjaEVycm9yIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgTWF0UGFnaW5hdG9yLCBQYWdlRXZlbnQgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9wYWdpbmF0b3InO1xuaW1wb3J0IHsgTWF0VGFibGVEYXRhU291cmNlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvdGFibGUnO1xuXG5pbXBvcnQgeyBNZXRhZGF0YVNlcnZpY2UsIE1lc3NhZ2VIYW5kbGVyLCBTdGF0dXNDb2RlIH0gZnJvbSAnLi4vLi4vY29yZS9wdWJsaWMtYXBpJztcbmltcG9ydCB7IEpvdXJuYWwsIEpvdXJuYWxEYXRhLCBJU1NOLCBKb3VybmFsVmVyc2lvbiB9IGZyb20gJy4uLy4uL2VudGl0aWVzL3B1YmxpYy1hcGknO1xuaW1wb3J0IHsgRmlsdGVySHR0cE1hcCwgRmlsdGVyc1NlcnZpY2UgfSBmcm9tICcuLi8uLi9maWx0ZXJzL3B1YmxpYy1hcGknO1xuXG5pbXBvcnQgeyBFbnZpcm9ubWVudCB9IGZyb20gJy4uLy4uL2NvcmUvZW52JztcblxuaW1wb3J0IHsgQ2F0YWxvZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi9iYWNrZW5kL3B1YmxpYy1hcGknO1xuaW1wb3J0IHsgQ2F0YWxvZ0ZpbHRlcnNDb21wb25lbnQgfSBmcm9tICcuLi9jYXRhbG9nLWZpbHRlcnMvY2F0YWxvZy1maWx0ZXJzLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBNYXRTbmFja0JhciwgTWF0RGlhbG9nLCBNYXREaWFsb2dSZWYsIE1BVF9ESUFMT0dfREFUQSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IEpvdXJuYWxWaWV3SW5mb0NvbXBvbmVudCB9IGZyb20gJy4uLy4uL3NvdXJjZXMvam91cm5hbC12aWV3L2pvdXJuYWwtdmlldy1pbmZvLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBTY3JvbGxTdHJhdGVneU9wdGlvbnMgfSBmcm9tICdAYW5ndWxhci9jZGsvb3ZlcmxheSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3RvY28tY2F0YWxvZycsXG4gIHRlbXBsYXRlVXJsOiAnLi9jYXRhbG9nLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vY2F0YWxvZy5jb21wb25lbnQuc2NzcyddLFxuICBhbmltYXRpb25zOiBbXG4gICAgdHJpZ2dlcignZGV0YWlsRXhwYW5kJywgW1xuICAgICAgc3RhdGUoJ2NvbGxhcHNlZCcsIHN0eWxlKHsgaGVpZ2h0OiAnMHB4JywgbWluSGVpZ2h0OiAnMCcsIGRpc3BsYXk6ICdub25lJyB9KSksXG4gICAgICBzdGF0ZSgnZXhwYW5kZWQnLCBzdHlsZSh7IGhlaWdodDogJyonIH0pKSxcbiAgICAgIHRyYW5zaXRpb24oJ2V4cGFuZGVkIDw9PiBjb2xsYXBzZWQnLCBhbmltYXRlKCcyMjVtcyBjdWJpYy1iZXppZXIoMC40LCAwLjAsIDAuMiwgMSknKSksXG4gICAgXSksXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIENhdGFsb2dDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIC8vIGpvdXJuYWxMaXN0OiBKb3VybmFsW10gPSBbXTtcbiAgbG9hZGluZyA9IHRydWU7XG4gIHByaXZhdGUgaGFzRXJyb3JzID0gZmFsc2U7XG4gIGRhdGFTb3VyY2UgPSBuZXcgTWF0VGFibGVEYXRhU291cmNlPEpvdXJuYWw+KCk7XG4gIGNvbHVtbnNUb0Rpc3BsYXkgPSBbJ3RpdGxlJywgJ3JucHMnLCAncC1pc3NuJywgJ3VybCddO1xuICBleHBhbmRlZEVsZW1lbnQ6IEpvdXJuYWw7XG4gIGxlbmd0aCA9IDA7XG4gIHBhZ2VTaXplID0gNTtcbiAgcGFnZVNpemVPcHRpb25zOiBudW1iZXJbXSA9IFs1LCAxMCwgMTUsIDIwXTtcbiAgcGFnZUV2ZW50OiBQYWdlRXZlbnQ7XG4gIHBhcmFtczogQXJyYXk8RmlsdGVySHR0cE1hcD47XG5cbiAgc2NlaWJhSG9zdCA9ICcnO1xuXG4gIGxheW91dFBvc2l0aW9uID0gW1xuICAgIHtcbiAgICAgIG5hbWU6ICdEZXJlY2hhJyxcbiAgICAgIGxheW91dDogJ3Jvdy1yZXZlcnNlJyxcbiAgICAgIGFsaW5nOiAnY2VudGVyIGJhc2VsaW5lJyxcbiAgICAgIHdpZHRoOiAnMjInXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnSXpxdWllcmRhJyxcbiAgICAgIGxheW91dDogJ3JvdycsXG4gICAgICBhbGluZzogJ2NlbnRlciBiYXNlbGluZScsXG4gICAgICB3aWR0aDogJzIyJ1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ0FycmliYScsXG4gICAgICBsYXlvdXQ6ICdjb2x1bW4nLFxuICAgICAgYWxpbmc6ICdjZW50ZXIgY2VudGVyJyxcbiAgICAgIHdpZHRoOiAnOTAnXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnQWJham8nLFxuICAgICAgbGF5b3V0OiAnY29sdW1uLXJldmVyc2UnLFxuICAgICAgYWxpbmc6ICdjZW50ZXIgY2VudGVyJyxcbiAgICAgIHdpZHRoOiAnOTAnXG4gICAgfVxuICBdO1xuICBjdXJyZW50bGF5b3V0ID0gdGhpcy5sYXlvdXRQb3NpdGlvblsxXTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNlcnZpY2U6IENhdGFsb2dTZXJ2aWNlLFxuICAgIHByaXZhdGUgbWV0YWRhdGE6IE1ldGFkYXRhU2VydmljZSxcbiAgICBwcml2YXRlIGZpbHRlclNlcnZpY2U6IEZpbHRlcnNTZXJ2aWNlLFxuICAgIHByaXZhdGUgZW52OiBFbnZpcm9ubWVudCxcbiAgICBwcml2YXRlIF9zbmFja0JhcjogTWF0U25hY2tCYXIsXG4gICAgcHVibGljIGRpYWxvZzogTWF0RGlhbG9nKSB7XG4gICAgdGhpcy5zY2VpYmFIb3N0ID0gZW52LnNjZWliYUhvc3QgKyAnL2NhdGFsb2cnO1xuICAgIGVudi50b3BPcmdhbml6YXRpb25QSURcbiAgfVxuXG4gIEBWaWV3Q2hpbGQoTWF0UGFnaW5hdG9yLCB7IHN0YXRpYzogdHJ1ZSB9KSBwYWdpbmF0b3I6IE1hdFBhZ2luYXRvcjtcbiAgQFZpZXdDaGlsZChDYXRhbG9nRmlsdGVyc0NvbXBvbmVudCwgeyBzdGF0aWM6IHRydWUgfSkgZmlsdGVyX2NvbXBvbmVudDogQ2F0YWxvZ0ZpbHRlcnNDb21wb25lbnQ7XG5cbiAgbmdPbkluaXQoKSB7XG5cbiAgICB0aGlzLm1ldGFkYXRhLnNldFN0YW5kYXJkTWV0YShcIkNhdMOhbG9nbyBkZSBSZXZpc3RhcyBDaWVudMOtZmljYXNcIiwgXCJcIiwgXCJcIik7XG4gICAgdGhpcy5wYWdpbmF0b3IuZmlyc3RQYWdlKCk7XG4gICAgdGhpcy5wYWdpbmF0b3IucGFnZVNpemUgPSA1O1xuXG4gICAgdHJ5IHtcblxuICAgICAgdGhpcy5mZXRjaEpvdXJuYWxEYXRhKCk7XG5cbiAgICAgIHRoaXMuZmlsdGVyU2VydmljZS5wYXJhbXNDaGFuZ2VkLnBpcGUoXG4gICAgICAgIGNhdGNoRXJyb3IoZXJyb3IgPT4ge1xuICAgICAgICAgIGNvbnN0IG0gPSBuZXcgTWVzc2FnZUhhbmRsZXIodGhpcy5fc25hY2tCYXIpO1xuICAgICAgICAgIG0uc2hvd01lc3NhZ2UoU3RhdHVzQ29kZS5zZXJ2ZXJFcnJvciwgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgcmV0dXJuIG9ic2VydmFibGVPZihbXSk7XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICAgIC5zdWJzY3JpYmUocGFyYW1zID0+IHtcbiAgICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgICB0aGlzLmZldGNoSm91cm5hbERhdGEoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IG0gPSBuZXcgTWVzc2FnZUhhbmRsZXIodGhpcy5fc25hY2tCYXIpO1xuICAgICAgbS5zaG93TWVzc2FnZShTdGF0dXNDb2RlLnNlcnZlckVycm9yLCBlcnIubWVzc2FnZSk7XG4gICAgfVxuXG4gIH1cblxuICAvLyBvblBhZ2luYXRvckNoYW5nZWQoKXtcbiAgLy8gICB0aGlzLmZpbHRlclNlcnZpY2UuY2hhbmdlRmlsdGVyKCdjb3VudCcsdGhpcy5wYWdpbmF0b3IucGFnZVNpemUsIGZhbHNlKTtcbiAgLy8gICB0aGlzLmZpbHRlclNlcnZpY2UuY2hhbmdlRmlsdGVyKCdwYWdlJyx0aGlzLnBhZ2luYXRvci5wYWdlSW5kZXgpO1xuICAvLyB9XG5cbiAgcHVibGljIGZldGNoSm91cm5hbERhdGEoKSB7XG4gICAgY29uc3QgYXJyID0gbmV3IEFycmF5PEpvdXJuYWw+KCk7XG5cbiAgICBtZXJnZSgpLnBpcGUoXG4gICAgICBzdGFydFdpdGgoe30pLFxuICAgICAgc3dpdGNoTWFwKCgpID0+IHtcbiAgICAgICAgLy90aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlIS5nZXRKb3VybmFsc1BhZ2UodGhpcy5wYWdpbmF0b3IucGFnZVNpemUsIHRoaXMucGFnaW5hdG9yLnBhZ2VJbmRleCwgdGhpcy5wYXJhbXMpO1xuICAgICAgfSksXG4gICAgICBtYXAocmVzcG9uc2UgPT4ge1xuICAgICAgICAvLyBGbGlwIGZsYWcgdG8gc2hvdyB0aGF0IGxvYWRpbmcgaGFzIGZpbmlzaGVkLlxuICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLmxlbmd0aCA9IHJlc3BvbnNlLmRhdGEuc291cmNlcy5jb3VudDtcblxuICAgICAgICByZXNwb25zZS5kYXRhLnNvdXJjZXMuZGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgIGNvbnN0IGogPSBuZXcgSm91cm5hbCgpO1xuICAgICAgICAgIGouaWQgPSBpdGVtLmlkO1xuICAgICAgICAgIGoudXVpZCA9IGl0ZW0udXVpZDtcbiAgICAgICAgICBjb25zdCBpbmZvID0gbmV3IEpvdXJuYWxEYXRhKCk7XG4gICAgICAgICAgaW5mby51cmwgPSBpdGVtLmRhdGEgIT0gbnVsbCA/IGl0ZW0uZGF0YS51cmwgOiAnJztcbiAgICAgICAgICBpbmZvLnRpdGxlID0gaXRlbS5uYW1lO1xuICAgICAgICAgIGluZm8uc3VidGl0bGUgPSBpdGVtLnN1YnRpdGxlO1xuICAgICAgICAgIGluZm8uc2hvcnRuYW1lID0gaXRlbS5zaG9ydG5hbWU7XG4gICAgICAgICAgY29uc3QgaXNzbiA9IG5ldyBJU1NOKCk7XG4gICAgICAgICAgaXNzbi5lID0gaXRlbS5kYXRhICE9IG51bGwgPyBpdGVtLmRhdGEuaXNzbi5lIDogJyc7XG4gICAgICAgICAgaXNzbi5sID0gaXRlbS5kYXRhICE9IG51bGwgPyBpdGVtLmRhdGEuaXNzbi5sIDogJyc7XG4gICAgICAgICAgaXNzbi5wID0gaXRlbS5kYXRhICE9IG51bGwgPyBpdGVtLmRhdGEuaXNzbi5wIDogJyc7XG4gICAgICAgICAgaW5mby5pc3NuID0gaXNzbjtcbiAgICAgICAgICBpbmZvLnJucHMgPSBpdGVtLmRhdGEgIT0gbnVsbCA/IGl0ZW0uZGF0YS5ybnBzIDogJyc7XG4gICAgICAgICAgaW5mby5sb2dvID0gaXRlbS5kYXRhICE9IG51bGwgPyBpdGVtLmRhdGEubG9nbyA6ICcnO1xuICAgICAgICAgIGluZm8ucHVycG9zZSA9IGl0ZW0ucHVycG9zZTtcbiAgICAgICAgICBpbmZvLmRlc2NyaXB0aW9uID0gaXRlbS5kYXRhICE9IG51bGwgPyBpdGVtLmRhdGEuZGVzY3JpcHRpb24gOiAnJztcbiAgICAgICAgICBqLmRhdGEgPSBpbmZvO1xuICAgICAgICAgIGFyci5wdXNoKGopO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICAgIH0pLFxuICAgICAgY2F0Y2hFcnJvcihlcnJvciA9PiB7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgIGNvbnN0IG0gPSBuZXcgTWVzc2FnZUhhbmRsZXIodGhpcy5fc25hY2tCYXIpO1xuICAgICAgICBtLnNob3dNZXNzYWdlKFN0YXR1c0NvZGUuc2VydmVyRXJyb3IsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAvLyBDYXRjaCBpZiB0aGUgR2l0SHViIEFQSSBoYXMgcmVhY2hlZCBpdHMgcmF0ZSBsaW1pdC4gUmV0dXJuIGVtcHR5IGRhdGEuXG4gICAgICAgIC8vIHRoaXMuaXNSYXRlTGltaXRSZWFjaGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGVPZihbXSk7XG5cbiAgICAgIH0pXG4gICAgKS5zdWJzY3JpYmUoZGF0YSA9PiB0aGlzLmRhdGFTb3VyY2UuZGF0YSA9IGRhdGEpO1xuXG4gIH1cblxuICBwdWJsaWMgb25TY3JvbGxVcCgpIHtcbiAgICAvLyBjb25zb2xlLmxvZyhcInNjcm9sbGVkIHVwISFcIik7XG4gIH1cblxuICBwdWJsaWMgaXNFbXB0eSgpIHtcbiAgICBpZiAodGhpcy5kYXRhU291cmNlLmRhdGEubGVuZ3RoID09PSAwICYmIHRoaXMuaGFzRXJyb3JzKSB7XG4gICAgICAvL3RoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBpc0xvYWRpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubG9hZGluZztcbiAgfVxuXG4gIHB1YmxpYyBvcGVubWUoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYSA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FuZHJvaWQvaSk7XG4gICAgY29uc3QgYiA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0JsYWNrQmVycnkvaSk7XG4gICAgY29uc3QgYXBwbGUgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmV8aVBhZHxpUG9kL2kpO1xuICAgIGNvbnN0IG8gPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9PcGVyYSBNaW5pL2kpO1xuICAgIGNvbnN0IGkgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9JRU1vYmlsZS9pKTtcbiAgICBpZiAoYSAhPSBudWxsIHx8IGIgIT0gbnVsbCB8fCBhcHBsZSAhPSBudWxsIHx8IG8gIT0gbnVsbCB8fCBpICE9IG51bGwpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgY2hhbmdlTGF5b3V0UG9zaXRpb24oaW5kZXg6IG51bWJlcikge1xuICAgIHRoaXMuY3VycmVudGxheW91dCA9IHRoaXMubGF5b3V0UG9zaXRpb25baW5kZXhdO1xuICB9XG5cbiAgdmlld0pvdXJuYWwodXVpZDogc3RyaW5nKTogdm9pZCB7XG5cbiAgICB0aGlzLnNlcnZpY2UuZ2V0U291cmNlQnlVVUlEKHV1aWQpLnN1YnNjcmliZShcbiAgICAgIChyZXNwb25zZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICBsZXQgam91cm5hbFZlcnNpb24gPSBuZXcgSm91cm5hbFZlcnNpb24oKTtcbiAgICAgICAgICBqb3VybmFsVmVyc2lvbi5kZWVwY29weShyZXNwb25zZS5kYXRhLnNvdXJjZXMpO1xuICAgICAgICAgIGNvbnN0IGRpYWxvZ1JlZiA9IHRoaXMuZGlhbG9nLm9wZW4oRGlhbG9nQ2F0YWxvZ0pvdXJuYWxJbmZvRGlhbG9nLCB7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGpvdXJuYWxWZXJzaW9uOiBqb3VybmFsVmVyc2lvbixcbiAgICAgICAgICAgICAgam91cm5hbFVVSUQ6IHV1aWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGRpYWxvZ1JlZi5hZnRlckNsb3NlZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG0gPSBuZXcgTWVzc2FnZUhhbmRsZXIodGhpcy5fc25hY2tCYXIpO1xuICAgICAgICAgIG0uc2hvd01lc3NhZ2UoU3RhdHVzQ29kZS5zZXJ2ZXJFcnJvciwgJ05vIGZ1ZSBwb3NpYmxlIGVuY29udHJhciBsYSBSZXZpc3RhJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJyk7XG4gICAgICB9LFxuICAgICAgKCkgPT4geyB9XG4gICAgKTtcblxuXG4gIH1cbn1cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnZGlhbG9nLWNhdGFsb2ctam91cm5hbC1pbmZvJyxcbiAgdGVtcGxhdGU6IGA8bWF0LWRpYWxvZy1jb250ZW50IGNsYXNzPVwiaGVpZ2h0LWF1dG9cIj5cbiAgICAgICAgICAgICAgICAgICAgPHRvY28tam91cm5hbC12aWV3LWluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgIFtqb3VybmFsVmVyc2lvbl09XCJkYXRhLmpvdXJuYWxWZXJzaW9uXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8L3RvY28tam91cm5hbC12aWV3LWluZm8+XG4gICAgICAgICAgICAgICAgPC9tYXQtZGlhbG9nLWNvbnRlbnQ+YCxcbn0pXG5leHBvcnQgY2xhc3MgRGlhbG9nQ2F0YWxvZ0pvdXJuYWxJbmZvRGlhbG9nIGltcGxlbWVudHMgT25Jbml0IHtcblxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBkaWFsb2dSZWY6IE1hdERpYWxvZ1JlZjxEaWFsb2dDYXRhbG9nSm91cm5hbEluZm9EaWFsb2c+LFxuICAgIEBJbmplY3QoTUFUX0RJQUxPR19EQVRBKSBwdWJsaWMgZGF0YTogYW55KSB7IH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGEpO1xuXG4gIH1cbiAgb25Ob0NsaWNrKCk6IHZvaWQge1xuICAgIHRoaXMuZGlhbG9nUmVmLmNsb3NlKCk7XG4gIH1cblxufVxuIl19