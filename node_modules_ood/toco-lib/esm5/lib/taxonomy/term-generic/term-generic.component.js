/**
 * @fileoverview added by tsickle
 * Generated from: lib/taxonomy/term-generic/term-generic.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 *   Copyright (c) 2020 Universidad de Pinar del Río "Hermanos Saíz Montes de Oca"
 *   All rights reserved.
 */
import { Component, Inject } from "@angular/core";
import { MAT_DIALOG_DATA } from "@angular/material/dialog";
import { FormFieldType, HintValue, HintPosition } from "../../forms/public-api";
import { Term, TermInstitutionData, EntityBase, TermIndexData, VocabulariesInmutableNames } from "../../entities/public-api";
import { FormBuilder } from "@angular/forms";
import { MatSnackBar } from "@angular/material";
var TermGenericComponent = /** @class */ (function () {
    function TermGenericComponent(_formBuilder, _snackBar, data) {
        this._formBuilder = _formBuilder;
        this._snackBar = _snackBar;
        this.data = data;
        this.panels = [];
        this.actionLabel = "Adicionar";
        // term: Term;
        this.hasService = false;
        if (data.accept && data.currentVocab) {
            this.accept = data.accept;
            this.hasService = true;
            this.vocab = data.currentVocab;
            if (data.term) {
                this.actionLabel = "Actualizar";
                if (!this.data.term.data) {
                    this.data.term.data = this._getTermDataObject();
                }
            }
            else {
                this.data.term = new Term();
                this.data.term.isNew = true;
                this.data.term.vocabulary_id = data.currentVocab.id;
            }
        }
    }
    /**
     * @return {?}
     */
    TermGenericComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.formGroup = this._formBuilder.group({});
        this.panels = [
            {
                title: "Término",
                description: "",
                iconName: "",
                formSection: this.formGroup,
                formSectionContent: this._getContent()
            }
        ];
        this.action = {
            doit: /**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (this.formGroup.valid) {
                    // get the result from formGroup
                    /** @type {?} */
                    var result = new Term();
                    result.deepcopy(this.data.term);
                    result.deepcopy(this.formGroup.value);
                    result.data = this._getTermDataObject();
                    result.data.deepcopy(this.formGroup.value);
                    // Set the parent term, if any
                    /** @type {?} */
                    var parent_1 = this.formGroup.value["parent_id"];
                    if (parent_1 && parent_1[0]) {
                        result.parent_id = parent_1[0].id;
                    }
                    else {
                        result.parent_id = null;
                    }
                    // if the term is an index, then set miar_class and group_mes
                    // clasifications
                    if (this.vocab.id == VocabulariesInmutableNames.INDEXES) {
                        result.class_ids = [];
                        /** @type {?} */
                        var miar = this.formGroup.value["miar_class"];
                        /** @type {?} */
                        var mes = this.formGroup.value["group_mes"];
                        if (miar && miar[0]) {
                            result.class_ids.push(miar[0].id);
                        }
                        if (mes && mes[0]) {
                            result.class_ids.push(mes[0].id);
                        }
                    }
                    this.accept((/** @type {?} */ (result)));
                }
            }
        };
    };
    /**
     * Returns the panel's content.
     */
    /**
     * Returns the panel's content.
     * @private
     * @return {?}
     */
    TermGenericComponent.prototype._getContent = /**
     * Returns the panel's content.
     * @private
     * @return {?}
     */
    function () {
        // TODO: use TermHelper
        switch (this.vocab.id) {
            case VocabulariesInmutableNames.CUBAN_INTITUTIONS:
                return [
                    {
                        name: "name",
                        label: "Nombre",
                        type: FormFieldType.text,
                        required: true,
                        value: this.data.term.name ? this.data.term.name : null,
                        width: "100%"
                    },
                    {
                        name: "grid",
                        label: "Identificador GRID",
                        type: FormFieldType.text,
                        required: false,
                        value: this.data.term.data.grid ? this.data.term.data.grid : null,
                        width: "50%"
                    },
                    {
                        name: "description",
                        label: "Descripción",
                        type: FormFieldType.textarea,
                        required: false,
                        value: this.data.term.description
                            ? this.data.term.description
                            : null,
                        width: "100%"
                    },
                    {
                        name: "email",
                        label: "Email",
                        type: FormFieldType.email,
                        required: true,
                        value: this.data.term.data.email ? this.data.term.data.email : null,
                        width: "45%"
                    },
                    {
                        name: "website",
                        label: "Sitio Web Oficial",
                        type: FormFieldType.url,
                        required: false,
                        value: this.data.term.data.website
                            ? this.data.term.data.website
                            : null,
                        width: "45%"
                    },
                    {
                        name: "address",
                        label: "Dirección",
                        type: FormFieldType.textarea,
                        required: false,
                        value: this.data.term.data.address
                            ? this.data.term.data.address
                            : null,
                        width: "100%"
                    },
                    {
                        name: "parent_id",
                        label: "Jerarquía Institucional (Institución Superior)",
                        type: FormFieldType.vocabulary,
                        required: false,
                        extraContent: {
                            multiple: false,
                            selectedTermsIds: this.data.term.parent_id
                                ? [this.data.term.parent_id]
                                : null,
                            vocab: this.vocab.id
                        },
                        width: "100%"
                    }
                ];
            case VocabulariesInmutableNames.INDEXES:
                return [
                    {
                        name: "name",
                        label: "Nombre",
                        type: FormFieldType.text,
                        required: true,
                        value: this.data.term.name ? this.data.term.name : null,
                        width: "100%"
                    },
                    {
                        name: "url",
                        label: "URL",
                        type: FormFieldType.url,
                        required: false,
                        value: this.data.term.data.url ? this.data.term.data.url : null,
                        width: "100%"
                    },
                    {
                        name: "abrev",
                        label: "Identificadores",
                        type: FormFieldType.text,
                        required: false,
                        value: this.data.term.data.abrev ? this.data.term.data.abrev : null,
                        width: "30%"
                    },
                    {
                        name: "initial_cover",
                        label: "Cobertura inicio",
                        type: FormFieldType.text,
                        required: false,
                        value: this.data.term.data.initial_cover
                            ? this.data.term.data.initial_cover
                            : null,
                        width: "30%"
                    },
                    {
                        name: "end_cover",
                        label: "Cobertura",
                        type: FormFieldType.text,
                        required: false,
                        value: this.data.term.data.end_cover
                            ? this.data.term.data.end_cover
                            : null,
                        width: "30%"
                    },
                    {
                        name: "description",
                        label: "Descripción",
                        type: FormFieldType.textarea,
                        required: false,
                        value: this.data.term.description
                            ? this.data.term.description
                            : null,
                        width: "100%"
                    },
                    {
                        name: "miar_class",
                        label: "Tipología de sistemas de indización",
                        type: FormFieldType.vocabulary,
                        required: false,
                        extraContent: {
                            multiple: false,
                            selectedTermsIds: this.data.term.class_ids
                                ? this.data.term.class_ids
                                : null,
                            vocab: VocabulariesInmutableNames.INDEXES_CLASIFICATION
                        },
                        width: "48%"
                    },
                    {
                        name: "group_mes",
                        label: "Grupos, Categorías según criterios de “calidad” de las publicaciones ",
                        type: FormFieldType.vocabulary,
                        startHint: new HintValue(HintPosition.start, ""),
                        required: false,
                        extraContent: {
                            multiple: false,
                            selectedTermsIds: this.data.term.class_ids
                                ? this.data.term.class_ids
                                : null,
                            vocab: VocabulariesInmutableNames.INDEXES_CLASIFICATION
                        },
                        width: "48%"
                    }
                ];
            default:
                return [
                    {
                        name: "name",
                        label: "Nombre",
                        type: FormFieldType.text,
                        required: true,
                        width: "100%",
                        value: this.data.term.name ? this.data.term.name : null
                    },
                    {
                        name: "description",
                        label: "Descripción",
                        type: FormFieldType.textarea,
                        required: false,
                        width: "100%",
                        value: this.data.term.description
                            ? this.data.term.description
                            : null
                    },
                    {
                        name: "parent_id",
                        label: "Término Padre",
                        type: FormFieldType.vocabulary,
                        startHint: new HintValue(HintPosition.start, ""),
                        required: false,
                        extraContent: {
                            multiple: false,
                            selectedTermsIds: this.data.term.parent_id
                                ? [this.data.term.parent_id]
                                : null,
                            vocab: this.vocab.id
                        },
                        width: "50%"
                    }
                ];
        }
    };
    /**
     * @private
     * @return {?}
     */
    TermGenericComponent.prototype._getTermDataObject = /**
     * @private
     * @return {?}
     */
    function () {
        switch (this.vocab.id) {
            case VocabulariesInmutableNames.CUBAN_INTITUTIONS:
                return new TermInstitutionData();
            case VocabulariesInmutableNames.INDEXES:
                return new TermIndexData();
            default:
                return new EntityBase();
        }
    };
    TermGenericComponent.decorators = [
        { type: Component, args: [{
                    selector: "toco-term-generic",
                    template: "\n<toco-form-container\n    [panelsContent]=\"panels\"\n    [useAccordion]=\"'false'\"\n    [action]=\"action\"\n    [actionLabel]=\"actionLabel\"\n    [formGroup]=\"formGroup\"\n></toco-form-container>\n\n<h2 *ngIf=\"!hasService\"> No Service</h2>\n",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    TermGenericComponent.ctorParameters = function () { return [
        { type: FormBuilder },
        { type: MatSnackBar },
        { type: undefined, decorators: [{ type: Inject, args: [MAT_DIALOG_DATA,] }] }
    ]; };
    return TermGenericComponent;
}());
export { TermGenericComponent };
if (false) {
    /** @type {?} */
    TermGenericComponent.prototype.panels;
    /** @type {?} */
    TermGenericComponent.prototype.formGroup;
    /** @type {?} */
    TermGenericComponent.prototype.action;
    /** @type {?} */
    TermGenericComponent.prototype.actionLabel;
    /** @type {?} */
    TermGenericComponent.prototype.hasService;
    /** @type {?} */
    TermGenericComponent.prototype.accept;
    /** @type {?} */
    TermGenericComponent.prototype.vocab;
    /**
     * @type {?}
     * @private
     */
    TermGenericComponent.prototype._formBuilder;
    /** @type {?} */
    TermGenericComponent.prototype._snackBar;
    /**
     * @type {?}
     * @private
     */
    TermGenericComponent.prototype.data;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVybS1nZW5lcmljLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3RvY28tbGliLyIsInNvdXJjZXMiOlsibGliL3RheG9ub215L3Rlcm0tZ2VuZXJpYy90ZXJtLWdlbmVyaWMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUtBLE9BQU8sRUFBRSxTQUFTLEVBQVUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzFELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUUzRCxPQUFPLEVBRU4sYUFBYSxFQUViLFNBQVMsRUFDVCxZQUFZLEVBR1osTUFBTSx3QkFBd0IsQ0FBQztBQUNoQyxPQUFPLEVBQ04sSUFBSSxFQUVKLG1CQUFtQixFQUNuQixVQUFVLEVBQ1YsYUFBYSxFQUNiLDBCQUEwQixFQUMxQixNQUFNLDJCQUEyQixDQUFDO0FBRW5DLE9BQU8sRUFBRSxXQUFXLEVBQWEsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4RCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFHaEQ7SUFlQyw4QkFDUyxZQUF5QixFQUMxQixTQUFzQixFQUNJLElBQVM7UUFGbEMsaUJBQVksR0FBWixZQUFZLENBQWE7UUFDMUIsY0FBUyxHQUFULFNBQVMsQ0FBYTtRQUNJLFNBQUksR0FBSixJQUFJLENBQUs7UUFacEMsV0FBTSxHQUF3QixFQUFFLENBQUM7UUFHakMsZ0JBQVcsR0FBRyxXQUFXLENBQUM7O1FBRWpDLGVBQVUsR0FBRyxLQUFLLENBQUM7UUFVbEIsSUFBSSxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQ3BDO1lBQ0MsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1lBQzFCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQztZQUUvQixJQUFJ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QyxTQUFTLENBQUM7Z0NBQzVCLENBQUMsQ0FBQyxJQUFJOzRCQUNQLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUU7eUJBQ3BCO3dCQUNELEtBQUssRUFBRSxLQUFLO3FCQUNaO2lCQUNELENBQUM7U0FDSDtJQUNGLENBQUM7Ozs7O0lBRU8saURBQWtCOzs7O0lBQTFCO1FBRUMsUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFDckI7WUFDQyxLQUFLLDBCQUEwQixDQUFDLGlCQUFpQjtnQkFDaEQsT0FBTyxJQUFJLG1CQUFtQixFQUFFLENBQUM7WUFFbEMsS0FBSywwQkFBMEIsQ0FBQyxPQUFPO2dCQUN0QyxPQUFPLElBQUksYUFBYSxFQUFFLENBQUM7WUFFNUI7Z0JBQ0MsT0FBTyxJQUFJLFVBQVUsRUFBRSxDQUFDO1NBQ3pCO0lBQ0YsQ0FBQzs7Z0JBaFVELFNBQVMsU0FBQztvQkFDVixRQUFRLEVBQUUsbUJBQW1CO29CQUM3QixzUUFBNEM7O2lCQUU1Qzs7OztnQkFSUSxXQUFXO2dCQUNYLFdBQVc7Z0RBcUJqQixNQUFNLFNBQUMsZUFBZTs7SUErU3pCLDJCQUFDO0NBQUEsQUFqVUQsSUFpVUM7U0E1VFksb0JBQW9COzs7SUFDaEMsc0NBQXdDOztJQUN4Qyx5Q0FBNEI7O0lBQzVCLHNDQUFtQzs7SUFDbkMsMkNBQWlDOztJQUVqQywwQ0FBbUI7O0lBQ25CLHNDQUFPOztJQUNQLHFDQUFrQjs7Ozs7SUFHakIsNENBQWlDOztJQUNqQyx5Q0FBNkI7Ozs7O0lBQzdCLG9DQUEwQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgIENvcHlyaWdodCAoYykgMjAyMCBVbml2ZXJzaWRhZCBkZSBQaW5hciBkZWwgUsOtbyBcIkhlcm1hbm9zIFNhw616IE1vbnRlcyBkZSBPY2FcIlxuICogICBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICovXG5cbmltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbmplY3QgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgTUFUX0RJQUxPR19EQVRBIH0gZnJvbSBcIkBhbmd1bGFyL21hdGVyaWFsL2RpYWxvZ1wiO1xuXG5pbXBvcnQge1xuXHRQYW5lbENvbnRlbnRfRGVwcixcblx0Rm9ybUZpZWxkVHlwZSxcblx0Rm9ybUNvbnRhaW5lckFjdGlvbixcblx0SGludFZhbHVlLFxuXHRIaW50UG9zaXRpb24sXG5cdElucHV0Q29udGVudCxcblx0QWN0aW9uQ29udGVudFxufSBmcm9tIFwiLi4vLi4vZm9ybXMvcHVibGljLWFwaVwiO1xuaW1wb3J0IHtcblx0VGVybSxcblx0Vm9jYWJ1bGFyeSxcblx0VGVybUluc3RpdHV0aW9uRGF0YSxcblx0RW50aXR5QmFzZSxcblx0VGVybUluZGV4RGF0YSxcblx0Vm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXNcbn0gZnJvbSBcIi4uLy4uL2VudGl0aWVzL3B1YmxpYy1hcGlcIjtcblxuaW1wb3J0IHsgRm9ybUJ1aWxkZXIsIEZvcm1Hcm91cCB9IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xuaW1wb3J0IHsgTWF0U25hY2tCYXIgfSBmcm9tIFwiQGFuZ3VsYXIvbWF0ZXJpYWxcIjtcbmltcG9ydCB7IEZvcm1GaWVsZENvbnRlbnRfRXhwZXJpbWVudGFsIH0gZnJvbSAnLi4vLi4vZm9ybXMvZXhwZXJpbWVudGFsL2Zvcm0tZmllbGQuY29udHJvbC5leHBlcmltZW50YWwnO1xuXG5AQ29tcG9uZW50KHtcblx0c2VsZWN0b3I6IFwidG9jby10ZXJtLWdlbmVyaWNcIixcblx0dGVtcGxhdGVVcmw6IFwiLi90ZXJtLWdlbmVyaWMuY29tcG9uZW50Lmh0bWxcIixcblx0c3R5bGVVcmxzOiBbXCIuL3Rlcm0tZ2VuZXJpYy5jb21wb25lbnQuc2Nzc1wiXVxufSlcbmV4cG9ydCBjbGFzcyBUZXJtR2VuZXJpY0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cdHB1YmxpYyBwYW5lbHM6IFBhbmVsQ29udGVudF9EZXByW10gPSBbXTtcblx0cHVibGljIGZvcm1Hcm91cDogRm9ybUdyb3VwO1xuXHRwdWJsaWMgYWN0aW9uOiBGb3JtQ29udGFpbmVyQWN0aW9uO1xuXHRwdWJsaWMgYWN0aW9uTGFiZWwgPSBcIkFkaWNpb25hclwiO1xuXHQvLyB0ZXJtOiBUZXJtO1xuXHRoYXNTZXJ2aWNlID0gZmFsc2U7XG5cdGFjY2VwdDtcblx0dm9jYWI6IFZvY2FidWxhcnk7XG5cblx0cHVibGljIGNvbnN0cnVjdG9yKFxuXHRcdHByaXZhdGUgX2Zvcm1CdWlsZGVyOiBGb3JtQnVpbGRlcixcblx0XHRwdWJsaWMgX3NuYWNrQmFyOiBNYXRTbmFja0Jhcixcblx0XHRASW5qZWN0KE1BVF9ESUFMT0dfREFUQSkgcHJpdmF0ZSBkYXRhOiBhbnlcblx0KVxuXHR7XG5cdFx0aWYgKGRhdGEuYWNjZXB0ICYmIGRhdGEuY3VycmVudFZvY2FiKVxuXHRcdHtcblx0XHRcdHRoaXMuYWNjZXB0ID0gZGF0YS5hY2NlcHQ7XG5cdFx0XHR0aGlzLmhhc1NlcnZpY2UgPSB0cnVlO1xuXHRcdFx0dGhpcy52b2NhYiA9IGRhdGEuY3VycmVudFZvY2FiO1xuXG5cdFx0XHRpZiAoZGF0YS50ZXJtKVxuXHRcdFx0e1xuXHRcdFx0XHR0aGlzLmFjdGlvbkxhYmVsID0gXCJBY3R1YWxpemFyXCI7XG5cblx0XHRcdFx0aWYgKCF0aGlzLmRhdGEudGVybS5kYXRhKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhpcy5kYXRhLnRlcm0uZGF0YSA9IHRoaXMuX2dldFRlcm1EYXRhT2JqZWN0KCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0dGhpcy5kYXRhLnRlcm0gPSBuZXcgVGVybSgpO1xuXHRcdFx0XHR0aGlzLmRhdGEudGVybS5pc05ldyA9IHRydWU7XG5cdFx0XHRcdHRoaXMuZGF0YS50ZXJtLnZvY2FidWxhcnlfaWQgPSBkYXRhLmN1cnJlbnRWb2NhYi5pZDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgbmdPbkluaXQoKTogdm9pZFxuXHR7XG5cdFx0dGhpcy5mb3JtR3JvdXAgPSB0aGlzLl9mb3JtQnVpbGRlci5ncm91cCh7fSk7XG5cblx0XHR0aGlzLnBhbmVscyA9IFtcblx0XHRcdHtcblx0XHRcdFx0dGl0bGU6IFwiVMOpcm1pbm9cIixcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiXCIsXG5cdFx0XHRcdGljb25OYW1lOiBcIlwiLFxuXHRcdFx0XHRmb3JtU2VjdGlvbjogdGhpcy5mb3JtR3JvdXAsXG5cdFx0XHRcdGZvcm1TZWN0aW9uQ29udGVudDogdGhpcy5fZ2V0Q29udGVudCgpXG5cdFx0XHR9XG5cdFx0XTtcblxuXHRcdHRoaXMuYWN0aW9uID0ge1xuXHRcdFx0ZG9pdChkYXRhOiBhbnkpOiB2b2lkIHtcblx0XHRcdFx0aWYgKHRoaXMuZm9ybUdyb3VwLnZhbGlkKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Ly8gZ2V0IHRoZSByZXN1bHQgZnJvbSBmb3JtR3JvdXBcblx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBuZXcgVGVybSgpO1xuXHRcdFx0XHRcdHJlc3VsdC5kZWVwY29weSh0aGlzLmRhdGEudGVybSk7XG5cdFx0XHRcdFx0cmVzdWx0LmRlZXBjb3B5KHRoaXMuZm9ybUdyb3VwLnZhbHVlKTtcblx0XHRcdFx0XHRyZXN1bHQuZGF0YSA9IHRoaXMuX2dldFRlcm1EYXRhT2JqZWN0KCk7XG5cdFx0XHRcdFx0cmVzdWx0LmRhdGEuZGVlcGNvcHkodGhpcy5mb3JtR3JvdXAudmFsdWUpO1xuXG5cdFx0XHRcdFx0Ly8gU2V0IHRoZSBwYXJlbnQgdGVybSwgaWYgYW55XG5cdFx0XHRcdFx0Y29uc3QgcGFyZW50ID0gdGhpcy5mb3JtR3JvdXAudmFsdWVbXCJwYXJlbnRfaWRcIl07XG5cdFx0XHRcdFx0aWYgKHBhcmVudCAmJiBwYXJlbnRbMF0pIHtcblx0XHRcdFx0XHRcdHJlc3VsdC5wYXJlbnRfaWQgPSBwYXJlbnRbMF0uaWQ7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlc3VsdC5wYXJlbnRfaWQgPSBudWxsO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIGlmIHRoZSB0ZXJtIGlzIGFuIGluZGV4LCB0aGVuIHNldCBtaWFyX2NsYXNzIGFuZCBncm91cF9tZXNcblx0XHRcdFx0XHQvLyBjbGFzaWZpY2F0aW9uc1xuXHRcdFx0XHRcdGlmICh0aGlzLnZvY2FiLmlkID09IFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLklOREVYRVMpIHtcblx0XHRcdFx0XHRcdHJlc3VsdC5jbGFzc19pZHMgPSBbXTtcblxuXHRcdFx0XHRcdFx0Y29uc3QgbWlhciA9IHRoaXMuZm9ybUdyb3VwLnZhbHVlW1wibWlhcl9jbGFzc1wiXTtcblx0XHRcdFx0XHRcdGNvbnN0IG1lcyA9IHRoaXMuZm9ybUdyb3VwLnZhbHVlW1wiZ3JvdXBfbWVzXCJdO1xuXG5cdFx0XHRcdFx0XHRpZiAobWlhciAmJiBtaWFyWzBdKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdC5jbGFzc19pZHMucHVzaChtaWFyWzBdLmlkKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKG1lcyAmJiBtZXNbMF0pIHtcblx0XHRcdFx0XHRcdFx0cmVzdWx0LmNsYXNzX2lkcy5wdXNoKG1lc1swXS5pZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dGhpcy5hY2NlcHQocmVzdWx0IGFzIFRlcm0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcGFuZWwncyBjb250ZW50LlxuICAgICAqL1xuXHRwcml2YXRlIF9nZXRDb250ZW50KCk6IChJbnB1dENvbnRlbnQgfCBBY3Rpb25Db250ZW50IHwgRm9ybUZpZWxkQ29udGVudF9FeHBlcmltZW50YWwpW11cblx0e1xuXHRcdC8vIFRPRE86IHVzZSBUZXJtSGVscGVyXG5cdFx0c3dpdGNoICh0aGlzLnZvY2FiLmlkKSB7XG5cdFx0XHRjYXNlIFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLkNVQkFOX0lOVElUVVRJT05TOlxuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwibmFtZVwiLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiTm9tYnJlXCIsXG5cdFx0XHRcdFx0XHR0eXBlOiBGb3JtRmllbGRUeXBlLnRleHQsXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRcdHZhbHVlOiB0aGlzLmRhdGEudGVybS5uYW1lID8gdGhpcy5kYXRhLnRlcm0ubmFtZSA6IG51bGwsXG5cdFx0XHRcdFx0XHR3aWR0aDogXCIxMDAlXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwiZ3JpZFwiLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiSWRlbnRpZmljYWRvciBHUklEXCIsXG5cdFx0XHRcdFx0XHR0eXBlOiBGb3JtRmllbGRUeXBlLnRleHQsXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdGhpcy5kYXRhLnRlcm0uZGF0YS5ncmlkID8gdGhpcy5kYXRhLnRlcm0uZGF0YS5ncmlkIDogbnVsbCxcblx0XHRcdFx0XHRcdHdpZHRoOiBcIjUwJVwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBcImRlc2NyaXB0aW9uXCIsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJEZXNjcmlwY2nDs25cIixcblx0XHRcdFx0XHRcdHR5cGU6IEZvcm1GaWVsZFR5cGUudGV4dGFyZWEsXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdGhpcy5kYXRhLnRlcm0uZGVzY3JpcHRpb25cblx0XHRcdFx0XHRcdFx0PyB0aGlzLmRhdGEudGVybS5kZXNjcmlwdGlvblxuXHRcdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdFx0XHR3aWR0aDogXCIxMDAlXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwiZW1haWxcIixcblx0XHRcdFx0XHRcdGxhYmVsOiBcIkVtYWlsXCIsXG5cdFx0XHRcdFx0XHR0eXBlOiBGb3JtRmllbGRUeXBlLmVtYWlsLFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdGhpcy5kYXRhLnRlcm0uZGF0YS5lbWFpbCA/IHRoaXMuZGF0YS50ZXJtLmRhdGEuZW1haWwgOiBudWxsLFxuXHRcdFx0XHRcdFx0d2lkdGg6IFwiNDUlXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwid2Vic2l0ZVwiLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiU2l0aW8gV2ViIE9maWNpYWxcIixcblx0XHRcdFx0XHRcdHR5cGU6IEZvcm1GaWVsZFR5cGUudXJsLFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHRoaXMuZGF0YS50ZXJtLmRhdGEud2Vic2l0ZVxuXHRcdFx0XHRcdFx0XHQ/IHRoaXMuZGF0YS50ZXJtLmRhdGEud2Vic2l0ZVxuXHRcdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdFx0XHR3aWR0aDogXCI0NSVcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bmFtZTogXCJhZGRyZXNzXCIsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJEaXJlY2Npw7NuXCIsXG5cdFx0XHRcdFx0XHR0eXBlOiBGb3JtRmllbGRUeXBlLnRleHRhcmVhLFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHRoaXMuZGF0YS50ZXJtLmRhdGEuYWRkcmVzc1xuXHRcdFx0XHRcdFx0XHQ/IHRoaXMuZGF0YS50ZXJtLmRhdGEuYWRkcmVzc1xuXHRcdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdFx0XHR3aWR0aDogXCIxMDAlXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwicGFyZW50X2lkXCIsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJKZXJhcnF1w61hIEluc3RpdHVjaW9uYWwgKEluc3RpdHVjacOzbiBTdXBlcmlvcilcIixcblx0XHRcdFx0XHRcdHR5cGU6IEZvcm1GaWVsZFR5cGUudm9jYWJ1bGFyeSxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdGV4dHJhQ29udGVudDoge1xuXHRcdFx0XHRcdFx0XHRtdWx0aXBsZTogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdHNlbGVjdGVkVGVybXNJZHM6IHRoaXMuZGF0YS50ZXJtLnBhcmVudF9pZFxuXHRcdFx0XHRcdFx0XHRcdD8gW3RoaXMuZGF0YS50ZXJtLnBhcmVudF9pZF1cblx0XHRcdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdFx0XHRcdHZvY2FiOiB0aGlzLnZvY2FiLmlkXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0d2lkdGg6IFwiMTAwJVwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRdO1xuXG5cdFx0XHRjYXNlIFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLklOREVYRVM6XG5cdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bmFtZTogXCJuYW1lXCIsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJOb21icmVcIixcblx0XHRcdFx0XHRcdHR5cGU6IEZvcm1GaWVsZFR5cGUudGV4dCxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHRoaXMuZGF0YS50ZXJtLm5hbWUgPyB0aGlzLmRhdGEudGVybS5uYW1lIDogbnVsbCxcblx0XHRcdFx0XHRcdHdpZHRoOiBcIjEwMCVcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bmFtZTogXCJ1cmxcIixcblx0XHRcdFx0XHRcdGxhYmVsOiBcIlVSTFwiLFxuXHRcdFx0XHRcdFx0dHlwZTogRm9ybUZpZWxkVHlwZS51cmwsXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdGhpcy5kYXRhLnRlcm0uZGF0YS51cmwgPyB0aGlzLmRhdGEudGVybS5kYXRhLnVybCA6IG51bGwsXG5cdFx0XHRcdFx0XHR3aWR0aDogXCIxMDAlXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwiYWJyZXZcIixcblx0XHRcdFx0XHRcdGxhYmVsOiBcIklkZW50aWZpY2Fkb3Jlc1wiLFxuXHRcdFx0XHRcdFx0dHlwZTogRm9ybUZpZWxkVHlwZS50ZXh0LFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHRoaXMuZGF0YS50ZXJtLmRhdGEuYWJyZXYgPyB0aGlzLmRhdGEudGVybS5kYXRhLmFicmV2IDogbnVsbCxcblx0XHRcdFx0XHRcdHdpZHRoOiBcIjMwJVwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBcImluaXRpYWxfY292ZXJcIixcblx0XHRcdFx0XHRcdGxhYmVsOiBcIkNvYmVydHVyYSBpbmljaW9cIixcblx0XHRcdFx0XHRcdHR5cGU6IEZvcm1GaWVsZFR5cGUudGV4dCxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdHZhbHVlOiB0aGlzLmRhdGEudGVybS5kYXRhLmluaXRpYWxfY292ZXJcblx0XHRcdFx0XHRcdFx0PyB0aGlzLmRhdGEudGVybS5kYXRhLmluaXRpYWxfY292ZXJcblx0XHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdFx0d2lkdGg6IFwiMzAlXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwiZW5kX2NvdmVyXCIsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJDb2JlcnR1cmFcIixcblx0XHRcdFx0XHRcdHR5cGU6IEZvcm1GaWVsZFR5cGUudGV4dCxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdHZhbHVlOiB0aGlzLmRhdGEudGVybS5kYXRhLmVuZF9jb3ZlclxuXHRcdFx0XHRcdFx0XHQ/IHRoaXMuZGF0YS50ZXJtLmRhdGEuZW5kX2NvdmVyXG5cdFx0XHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0XHRcdHdpZHRoOiBcIjMwJVwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBcImRlc2NyaXB0aW9uXCIsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJEZXNjcmlwY2nDs25cIixcblx0XHRcdFx0XHRcdHR5cGU6IEZvcm1GaWVsZFR5cGUudGV4dGFyZWEsXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdGhpcy5kYXRhLnRlcm0uZGVzY3JpcHRpb25cblx0XHRcdFx0XHRcdFx0PyB0aGlzLmRhdGEudGVybS5kZXNjcmlwdGlvblxuXHRcdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdFx0XHR3aWR0aDogXCIxMDAlXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwibWlhcl9jbGFzc1wiLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiVGlwb2xvZ8OtYSBkZSBzaXN0ZW1hcyBkZSBpbmRpemFjacOzblwiLFxuXHRcdFx0XHRcdFx0dHlwZTogRm9ybUZpZWxkVHlwZS52b2NhYnVsYXJ5LFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0ZXh0cmFDb250ZW50OiB7XG5cdFx0XHRcdFx0XHRcdG11bHRpcGxlOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0c2VsZWN0ZWRUZXJtc0lkczogdGhpcy5kYXRhLnRlcm0uY2xhc3NfaWRzXG5cdFx0XHRcdFx0XHRcdFx0PyB0aGlzLmRhdGEudGVybS5jbGFzc19pZHNcblx0XHRcdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdFx0XHRcdHZvY2FiOiBWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcy5JTkRFWEVTX0NMQVNJRklDQVRJT05cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR3aWR0aDogXCI0OCVcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bmFtZTogXCJncm91cF9tZXNcIixcblx0XHRcdFx0XHRcdGxhYmVsOlxuXHRcdFx0XHRcdFx0XHRcIkdydXBvcywgQ2F0ZWdvcsOtYXMgc2Vnw7puIGNyaXRlcmlvcyBkZSDigJxjYWxpZGFk4oCdIGRlIGxhcyBwdWJsaWNhY2lvbmVzIFwiLFxuXHRcdFx0XHRcdFx0dHlwZTogRm9ybUZpZWxkVHlwZS52b2NhYnVsYXJ5LFxuXHRcdFx0XHRcdFx0c3RhcnRIaW50OiBuZXcgSGludFZhbHVlKEhpbnRQb3NpdGlvbi5zdGFydCwgXCJcIiksXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHRleHRyYUNvbnRlbnQ6IHtcblx0XHRcdFx0XHRcdFx0bXVsdGlwbGU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZFRlcm1zSWRzOiB0aGlzLmRhdGEudGVybS5jbGFzc19pZHNcblx0XHRcdFx0XHRcdFx0XHQ/IHRoaXMuZGF0YS50ZXJtLmNsYXNzX2lkc1xuXHRcdFx0XHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0XHRcdFx0dm9jYWI6IFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLklOREVYRVNfQ0xBU0lGSUNBVElPTlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHdpZHRoOiBcIjQ4JVwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRdO1xuXG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwibmFtZVwiLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiTm9tYnJlXCIsXG5cdFx0XHRcdFx0XHR0eXBlOiBGb3JtRmllbGRUeXBlLnRleHQsXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRcdHdpZHRoOiBcIjEwMCVcIixcblx0XHRcdFx0XHRcdHZhbHVlOiB0aGlzLmRhdGEudGVybS5uYW1lID8gdGhpcy5kYXRhLnRlcm0ubmFtZSA6IG51bGxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwiZGVzY3JpcHRpb25cIixcblx0XHRcdFx0XHRcdGxhYmVsOiBcIkRlc2NyaXBjacOzblwiLFxuXHRcdFx0XHRcdFx0dHlwZTogRm9ybUZpZWxkVHlwZS50ZXh0YXJlYSxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdHdpZHRoOiBcIjEwMCVcIixcblx0XHRcdFx0XHRcdHZhbHVlOiB0aGlzLmRhdGEudGVybS5kZXNjcmlwdGlvblxuXHRcdFx0XHRcdFx0XHQ/IHRoaXMuZGF0YS50ZXJtLmRlc2NyaXB0aW9uXG5cdFx0XHRcdFx0XHRcdDogbnVsbFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bmFtZTogXCJwYXJlbnRfaWRcIixcblx0XHRcdFx0XHRcdGxhYmVsOiBcIlTDqXJtaW5vIFBhZHJlXCIsXG5cdFx0XHRcdFx0XHR0eXBlOiBGb3JtRmllbGRUeXBlLnZvY2FidWxhcnksXG5cdFx0XHRcdFx0XHRzdGFydEhpbnQ6IG5ldyBIaW50VmFsdWUoSGludFBvc2l0aW9uLnN0YXJ0LCBcIlwiKSxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdGV4dHJhQ29udGVudDoge1xuXHRcdFx0XHRcdFx0XHRtdWx0aXBsZTogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdHNlbGVjdGVkVGVybXNJZHM6IHRoaXMuZGF0YS50ZXJtLnBhcmVudF9pZFxuXHRcdFx0XHRcdFx0XHRcdD8gW3RoaXMuZGF0YS50ZXJtLnBhcmVudF9pZF1cblx0XHRcdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdFx0XHRcdHZvY2FiOiB0aGlzLnZvY2FiLmlkXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0d2lkdGg6IFwiNTAlXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdF07XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBfZ2V0VGVybURhdGFPYmplY3QoKTogRW50aXR5QmFzZVxuXHR7XG5cdFx0c3dpdGNoICh0aGlzLnZvY2FiLmlkKVxuXHRcdHtcblx0XHRcdGNhc2UgVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXMuQ1VCQU5fSU5USVRVVElPTlM6XG5cdFx0XHRcdHJldHVybiBuZXcgVGVybUluc3RpdHV0aW9uRGF0YSgpO1xuXG5cdFx0XHRjYXNlIFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLklOREVYRVM6XG5cdFx0XHRcdHJldHVybiBuZXcgVGVybUluZGV4RGF0YSgpO1xuXG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRyZXR1cm4gbmV3IEVudGl0eUJhc2UoKTtcblx0XHR9XG5cdH1cbn1cbiJdfQ==