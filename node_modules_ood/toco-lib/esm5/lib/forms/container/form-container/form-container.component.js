/**
 * @fileoverview added by tsickle
 * Generated from: lib/forms/container/form-container/form-container.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input } from "@angular/core";
import { ContainerControl } from "../container.control";
/**
 * This interface is deprecated.
 * @record
 */
export function FormContainerAction() { }
if (false) {
    /**
     * @param {?} data
     * @return {?}
     */
    FormContainerAction.prototype.doit = function (data) { };
}
/**
 * This interface is deprecated.
 * An interface that represents the content of an expansion control.
 * @record
 */
export function PanelContent_Depr() { }
if (false) {
    /**
     * Returns the panel's title.
     * @type {?}
     */
    PanelContent_Depr.prototype.title;
    /**
     * Returns the panel's description.
     * @type {?}
     */
    PanelContent_Depr.prototype.description;
    /**
     * Returns the panel's icon name.
     * @type {?}
     */
    PanelContent_Depr.prototype.iconName;
    /**
     * Returns the action and action labels for each panel.
     * @type {?|undefined}
     */
    PanelContent_Depr.prototype.action;
    /** @type {?|undefined} */
    PanelContent_Depr.prototype.actionLabel;
    /**
     * Returns true is the panel is open; otherwise, false.
     * @type {?|undefined}
     */
    PanelContent_Depr.prototype.open;
}
/**
 * This component is deprecated.
 * Represents a control that contains a list of panels and sends that information to the server.
 */
var FormContainerComponent = /** @class */ (function (_super) {
    tslib_1.__extends(FormContainerComponent, _super);
    function FormContainerComponent() {
        var _this = _super.call(this) || this;
        _this.useAccordion = true;
        _this.useContainer = true;
        _this.actionButtonIsStepperNext = false;
        _this.deleteValuesAfterAction = true;
        /* By default, the first panel is expanded. */
        _this.step = 0;
        return _this;
    }
    /**
     * @private
     * @return {?}
     */
    FormContainerComponent.prototype.setFormGroupToPanels = /**
     * @private
     * @return {?}
     */
    function () {
        this.panelsContent.forEach((/**
         * @param {?} panel
         * @return {?}
         */
        function (panel) {
            panel.formSection = panel.formSection;
        }));
    };
    /**
     * @return {?}
     */
    FormContainerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        console.log("on INIT call", this.panelsContent);
        /* Sets the default values. */
        if (this.panelsContent.length > 0) {
            this.content = {
                formSection: this.panelsContent[0].formSection,
                name: "FormContainerComponent",
                label: "FormContainerComponent_Label",
                type: undefined,
                value: "FormContainerComponent",
                //            'width': '100%',
                ariaLabel: "FormContainerComponent",
                formSectionContent: this.panelsContent[0].formSectionContent,
            };
        }
        this.init(undefined);
        // if actionLabel is undefined, means that there is no actionLabel, the user must decide!!!
        // if (this.actionLabel == undefined) this.actionLabel = 'Adicionar';
        this.setFormGroupToPanels();
    };
    /**
     * @return {?}
     */
    FormContainerComponent.prototype.ngOnChanges = /**
     * @return {?}
     */
    function () {
        console.log("on CHANGES call", this.panelsContent);
        this.ngOnInit();
        // this.init(this.content.label, false, false);
        // this.setFormGroupToPanels();
    };
    /**
     * Sets the new expanded panel position.
     * @param newStep The new position.
     */
    /**
     * Sets the new expanded panel position.
     * @param {?} newStep The new position.
     * @return {?}
     */
    FormContainerComponent.prototype.setStep = /**
     * Sets the new expanded panel position.
     * @param {?} newStep The new position.
     * @return {?}
     */
    function (newStep) {
        this.step = newStep;
    };
    /**
     * Sets the expanded panel position to the next position.
     */
    /**
     * Sets the expanded panel position to the next position.
     * @return {?}
     */
    FormContainerComponent.prototype.nextStep = /**
     * Sets the expanded panel position to the next position.
     * @return {?}
     */
    function () {
        this.step++;
    };
    /**
     * Sets the expanded panel position to the previous position.
     */
    /**
     * Sets the expanded panel position to the previous position.
     * @return {?}
     */
    FormContainerComponent.prototype.prevStep = /**
     * Sets the expanded panel position to the previous position.
     * @return {?}
     */
    function () {
        this.step--;
    };
    /**
     * Sends data to the server. Collects all added information from the component.
     * Creates a JSON object based on `form.name` and `form.value` fields.
     */
    /**
     * Sends data to the server. Collects all added information from the component.
     * Creates a JSON object based on `form.name` and `form.value` fields.
     * @return {?}
     */
    FormContainerComponent.prototype.doAction = /**
     * Sends data to the server. Collects all added information from the component.
     * Creates a JSON object based on `form.name` and `form.value` fields.
     * @return {?}
     */
    function () {
        //TODO: poner este method in `ContainerControl`.
        //TODO: poner este method in `ContainerControl`.
        /* Prepares all data. */
        /** @type {?} */
        var data = {};
        this.panelsContent.forEach((/**
         * @param {?} panel
         * @return {?}
         */
        function (panel) {
            panel.formSectionContent.forEach((/**
             * @param {?} controlContent
             * @return {?}
             */
            function (controlContent) {
                data[controlContent.name] = controlContent.value;
            }));
        }));
        if (this.action) {
            this.action.doit(data);
        }
        if (this.deleteValuesAfterAction) {
            this.panelsContent.forEach((/**
             * @param {?} panel
             * @return {?}
             */
            function (panel) {
                panel.formSectionContent.forEach((/**
                 * @param {?} controlContent
                 * @return {?}
                 */
                function (controlContent) {
                    controlContent.value = undefined;
                }));
            }));
        }
    };
    FormContainerComponent.decorators = [
        { type: Component, args: [{
                    selector: "toco-form-container",
                    template: "\n<ng-container *ngIf=\"(panelsContent)\">\n\n    <ng-container *ngIf=\"useContainer\">\n        <mat-accordion *ngIf=\"(useAccordion)\" class=\"toco-form-container\" multi=\"true\">\n\n            <mat-expansion-panel *ngFor=\"let panel of panelsContent; let newStep = index; let count=count\"\n                [expanded]=\"panel.open\" (opened)=\"setStep(newStep)\">\n        \n                <mat-expansion-panel-header>\n                    <mat-panel-title>\n                        {{ panel.title }}\n                    </mat-panel-title>\n                    <mat-panel-description>\n                        {{ panel.description }}\n                        <mat-icon>{{ panel.iconName }}</mat-icon>\n                    </mat-panel-description>\n                </mat-expansion-panel-header>\n        \n                <component-factory-depr [componentsContent]=\"panel.formSectionContent\"></component-factory-depr>\n        \n                <mat-action-row *ngIf=\"panel.actionLabel\">\n                    <!-- <button mat-button *ngIf=\"newStep > 0\" color=\"warn\" (click)=\"prevStep()\">Anterior</button>\n                    <button mat-button *ngIf=\"newStep != count-1\" color=\"primary\" (click)=\"nextStep()\">Siguente</button> -->\n        \n                    <button *ngIf=\"panel.actionLabel\" mat-button color=\"accent\" (click)=\"panel.action.doit(newStep)\">{{ panel.actionLabel }}</button>\n                    <!-- <button *ngIf=\"i == l-1 && actionButtonIsStepperNext\" mat-button matStepperNext color=\"primary\" (click)=\"doAction()\">{{actionLabel}}</button> -->\n                </mat-action-row>\n\n            </mat-expansion-panel>\n\n            <button *ngIf=\"actionLabel\" mat-raised-button color=\"primary\" (click)=\"doAction()\">{{actionLabel}}</button>\n        </mat-accordion>\n        \n        <div *ngIf=\"(!useAccordion)\" class=\"toco-form-container\">\n            <div *ngFor=\"let panel of panelsContent; let i=index; let count=count\">\n                <mat-card [ngStyle]=\"{'margin-bottom': '1em'}\">\n                    <mat-card-header>\n                        <mat-card-title>\n                            {{ panel.title }}\n                        </mat-card-title>\n                        <mat-card-subtitle *ngIf=\"panel.description\">\n                            {{ panel.description }}\n                            <mat-icon>{{ panel.iconName }}</mat-icon>\n                        </mat-card-subtitle>\n                    </mat-card-header>\n            \n                    <mat-card-content>\n                        <component-factory-depr [componentsContent]=\"panel.formSectionContent\"></component-factory-depr>\n                    </mat-card-content>\n            \n                    <mat-card-actions *ngIf=\"i == count-1 && actionLabel\" fxLayout=\"row\" fxLayoutAlign=\"end center\">\n                        <button mat-button color=\"primary\" (click)=\"doAction()\">{{ actionLabel }}</button>\n                    </mat-card-actions>\n                </mat-card>\n            </div>\n        </div>\n    </ng-container>\n\n    <div fxLayout=\"column\" *ngIf=\"!useContainer\">\n        <div *ngFor=\"let panel of panelsContent; let i=index; let count=count\" class=\"toco-form-container\">\n            <component-factory-depr [componentsContent]=\"panel.formSectionContent\"></component-factory-depr>\n        </div>\n        <div  *ngIf=\"actionLabel\" fxLayout=\"row\" fxLayoutAlign=\"end center\">\n            <button mat-button color=\"primary\" (click)=\"doAction()\">{{ actionLabel }}</button>\n        </div>\n    </div>\n\n</ng-container>\n",
                    styles: [".toco-form-container{width:100%;margin-bottom:1em}"]
                }] }
    ];
    /** @nocollapse */
    FormContainerComponent.ctorParameters = function () { return []; };
    FormContainerComponent.propDecorators = {
        panelsContent: [{ type: Input }],
        useAccordion: [{ type: Input }],
        useContainer: [{ type: Input }],
        actionButtonIsStepperNext: [{ type: Input }],
        action: [{ type: Input }],
        actionLabel: [{ type: Input }],
        deleteValuesAfterAction: [{ type: Input }]
    };
    return FormContainerComponent;
}(ContainerControl));
export { FormContainerComponent };
if (false) {
    /**
     * Input field that contains the content of this class. The array of panels to show.
     * @type {?}
     */
    FormContainerComponent.prototype.panelsContent;
    /** @type {?} */
    FormContainerComponent.prototype.useAccordion;
    /** @type {?} */
    FormContainerComponent.prototype.useContainer;
    /** @type {?} */
    FormContainerComponent.prototype.actionButtonIsStepperNext;
    /** @type {?} */
    FormContainerComponent.prototype.action;
    /**
     * An string that represents the action label of the last panel.
     * @type {?}
     */
    FormContainerComponent.prototype.actionLabel;
    /** @type {?} */
    FormContainerComponent.prototype.deleteValuesAfterAction;
    /**
     * The current expanded panel position.
     * @type {?}
     */
    FormContainerComponent.prototype.step;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS1jb250YWluZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vdG9jby1saWIvIiwic291cmNlcyI6WyJsaWIvZm9ybXMvY29udGFpbmVyL2Zvcm0tY29udGFpbmVyL2Zvcm0tY29udGFpbmVyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBYSxNQUFNLGVBQWUsQ0FBQztBQUVwRSxPQUFPLEVBQW9CLGdCQUFnQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7Ozs7O0FBSzFFLHlDQUVDOzs7Ozs7SUFEQyx5REFBc0I7Ozs7Ozs7QUFPeEIsdUNBMEJDOzs7Ozs7SUF0QkMsa0NBQWM7Ozs7O0lBS2Qsd0NBQW9COzs7OztJQUtwQixxQ0FBaUI7Ozs7O0lBS2pCLG1DQUE2Qjs7SUFDN0Isd0NBQXFCOzs7OztJQUtyQixpQ0FBZTs7Ozs7O0FBT2pCO0lBSzRDLGtEQUFnQjtJQWtDMUQ7UUFBQSxZQUNFLGlCQUFPLFNBSVI7UUE5Qk0sa0JBQVksR0FBWSxJQUFJLENBQUM7UUFHN0Isa0JBQVksR0FBWSxJQUFJLENBQUM7UUFHN0IsK0JBQXlCLEdBQVksS0FBSyxDQUFDO1FBWTNDLDZCQUF1QixHQUFZLElBQUksQ0FBQztRQVU3Qyw4Q0FBOEM7UUFDOUMsS0FBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7O0lBQ2hCLENBQUM7Ozs7O0lBRU8scURBQW9COzs7O0lBQTVCO1FBQ0UsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPOzs7O1FBQUMsVUFBQyxLQUFLO1lBQy9CLEtBQUssQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDLFdBQVcsQ0FBQztRQUN4QyxDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7Ozs7SUFFTSx5Q0FBUTs7O0lBQWY7UUFDRSxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFaEQsOEJBQThCO1FB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T25DaGFuZ2VzIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcblxuaW1wb3J0IHsgQ29udGFpbmVyQ29udGVudCwgQ29udGFpbmVyQ29udHJvbCB9IGZyb20gXCIuLi9jb250YWluZXIuY29udHJvbFwiO1xuXG4vKipcbiAqIFRoaXMgaW50ZXJmYWNlIGlzIGRlcHJlY2F0ZWQuIFxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZvcm1Db250YWluZXJBY3Rpb24ge1xuICBkb2l0KGRhdGE6IGFueSk6IHZvaWQ7XG59XG5cbi8qKlxuICogVGhpcyBpbnRlcmZhY2UgaXMgZGVwcmVjYXRlZC4gXG4gKiBBbiBpbnRlcmZhY2UgdGhhdCByZXByZXNlbnRzIHRoZSBjb250ZW50IG9mIGFuIGV4cGFuc2lvbiBjb250cm9sLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBhbmVsQ29udGVudF9EZXByIGV4dGVuZHMgQ29udGFpbmVyQ29udGVudCB7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwYW5lbCdzIHRpdGxlLlxuICAgKi9cbiAgdGl0bGU6IHN0cmluZztcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcGFuZWwncyBkZXNjcmlwdGlvbi5cbiAgICovXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHBhbmVsJ3MgaWNvbiBuYW1lLlxuICAgKi9cbiAgaWNvbk5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYWN0aW9uIGFuZCBhY3Rpb24gbGFiZWxzIGZvciBlYWNoIHBhbmVsLlxuICAgKi9cbiAgYWN0aW9uPzogRm9ybUNvbnRhaW5lckFjdGlvbjtcbiAgYWN0aW9uTGFiZWw/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpcyB0aGUgcGFuZWwgaXMgb3Blbjsgb3RoZXJ3aXNlLCBmYWxzZS5cbiAgICovXG4gIG9wZW4/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRoaXMgY29tcG9uZW50IGlzIGRlcHJlY2F0ZWQuIFxuICogUmVwcmVzZW50cyBhIGNvbnRyb2wgdGhhdCBjb250YWlucyBhIGxpc3Qgb2YgcGFuZWxzIGFuZCBzZW5kcyB0aGF0IGluZm9ybWF0aW9uIHRvIHRoZSBzZXJ2ZXIuXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogXCJ0b2NvLWZvcm0tY29udGFpbmVyXCIsXG4gIHRlbXBsYXRlVXJsOiBcIi4vZm9ybS1jb250YWluZXIuY29tcG9uZW50Lmh0bWxcIixcbiAgc3R5bGVVcmxzOiBbXCIuL2Zvcm0tY29udGFpbmVyLmNvbXBvbmVudC5zY3NzXCJdLFxufSlcbmV4cG9ydCBjbGFzcyBGb3JtQ29udGFpbmVyQ29tcG9uZW50IGV4dGVuZHMgQ29udGFpbmVyQ29udHJvbFxuICBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcbiAgLyoqXG4gICAqIElucHV0IGZpZWxkIHRoYXQgY29udGFpbnMgdGhlIGNvbnRlbnQgb2YgdGhpcyBjbGFzcy4gVGhlIGFycmF5IG9mIHBhbmVscyB0byBzaG93LlxuICAgKi9cbiAgQElucHV0KClcbiAgcHVibGljIHBhbmVsc0NvbnRlbnQ6IFBhbmVsQ29udGVudF9EZXByW107XG5cbiAgQElucHV0KClcbiAgcHVibGljIHVzZUFjY29yZGlvbjogYm9vbGVhbiA9IHRydWU7XG5cbiAgQElucHV0KClcbiAgcHVibGljIHVzZUNvbnRhaW5lcjogYm9vbGVhbiA9IHRydWU7XG5cbiAgQElucHV0KClcbiAgcHVibGljIGFjdGlvbkJ1dHRvbklzU3RlcHBlck5leHQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBASW5wdXQoKVxuICBwdWJsaWMgYWN0aW9uOiBGb3JtQ29udGFpbmVyQWN0aW9uO1xuXG4gIC8qKlxuICAgKiBBbiBzdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBhY3Rpb24gbGFiZWwgb2YgdGhlIGxhc3QgcGFuZWwuXG4gICAqL1xuICBASW5wdXQoKVxuICBwdWJsaWMgYWN0aW9uTGFiZWw6IHN0cmluZztcblxuICBASW5wdXQoKVxuICBwdWJsaWMgZGVsZXRlVmFsdWVzQWZ0ZXJBY3Rpb246IGJvb2xlYW4gPSB0cnVlO1xuXG4gIC8qKlxuICAgKiBUaGUgY3VycmVudCBleHBhbmRlZCBwYW5lbCBwb3NpdGlvbi5cbiAgICovXG4gIHB1YmxpYyBzdGVwOiBudW1iZXI7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvKiBCeSBkZWZhdWx0LCB0aGUgZmlyc3QgcGFuZWwgaXMgZXhwYW5kZWQuICovXG4gICAgdGhpcy5zdGVwID0gMDtcbiAgfVxuXG4gIHByaXZhdGUgc2V0Rm9ybUdyb3VwVG9QYW5lbHMoKTogdm9pZCB7XG4gICAgdGhpcy5wYW5lbHNDb250ZW50LmZvckVhY2goKHBhbmVsKSA9PiB7XG4gICAgICBwYW5lbC5mb3JtU2VjdGlvbiA9IHBhbmVsLmZvcm1TZWN0aW9uO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwib24gSU5JVCBjYWxsXCIsIHRoaXMucGFuZWxzQ29udGVudCk7XG5cbiAgICAvKiBTZXRzIHRoZSBkZWZhdWx0IHZhbHVlcy4gKi9cbiAgICBpZiAodGhpcy5wYW5lbHNDb250ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuY29udGVudCA9IHtcbiAgICAgICAgZm9ybVNlY3Rpb246IHRoaXMucGFuZWxzQ29udGVudFswXS5mb3JtU2VjdGlvbixcbiAgICAgICAgbmFtZTogXCJGb3JtQ29udGFpbmVyQ29tcG9uZW50XCIsXG4gICAgICAgIGxhYmVsOiBcIkZvcm1Db250YWluZXJDb21wb25lbnRfTGFiZWxcIixcbiAgICAgICAgdHlwZTogdW5kZWZpbmVkLFxuICAgICAgICB2YWx1ZTogXCJGb3JtQ29udGFpbmVyQ29tcG9uZW50XCIsXG4gICAgICAgIC8vICAgICAgICAgICAgJ3dpZHRoJzogJzEwMCUnLFxuICAgICAgICBhcmlhTGFiZWw6IFwiRm9ybUNvbnRhaW5lckNvbXBvbmVudFwiLFxuICAgICAgICBmb3JtU2VjdGlvbkNvbnRlbnQ6IHRoaXMucGFuZWxzQ29udGVudFswXS5mb3JtU2VjdGlvbkNvbnRlbnQsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMuaW5pdCh1bmRlZmluZWQpO1xuXG4gICAgLy8gaWYgYWN0aW9uTGFiZWwgaXMgdW5kZWZpbmVkLCBtZWFucyB0aGF0IHRoZXJlIGlzIG5vIGFjdGlvbkxhYmVsLCB0aGUgdXNlciBtdXN0IGRlY2lkZSEhIVxuICAgIC8vIGlmICh0aGlzLmFjdGlvbkxhYmVsID09IHVuZGVmaW5lZCkgdGhpcy5hY3Rpb25MYWJlbCA9ICdBZGljaW9uYXInO1xuICAgIHRoaXMuc2V0Rm9ybUdyb3VwVG9QYW5lbHMoKTtcbiAgfVxuXG4gIHB1YmxpYyBuZ09uQ2hhbmdlcygpOiB2b2lkIHtcbiAgICBjb25zb2xlLmxvZyhcIm9uIENIQU5HRVMgY2FsbFwiLCB0aGlzLnBhbmVsc0NvbnRlbnQpO1xuICAgIHRoaXMubmdPbkluaXQoKTtcblxuICAgIC8vIHRoaXMuaW5pdCh0aGlzLmNvbnRlbnQubGFiZWwsIGZhbHNlLCBmYWxzZSk7XG4gICAgLy8gdGhpcy5zZXRGb3JtR3JvdXBUb1BhbmVscygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIG5ldyBleHBhbmRlZCBwYW5lbCBwb3NpdGlvbi5cbiAgICogQHBhcmFtIG5ld1N0ZXAgVGhlIG5ldyBwb3NpdGlvbi5cbiAgICovXG4gIHB1YmxpYyBzZXRTdGVwKG5ld1N0ZXA6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuc3RlcCA9IG5ld1N0ZXA7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZXhwYW5kZWQgcGFuZWwgcG9zaXRpb24gdG8gdGhlIG5leHQgcG9zaXRpb24uXG4gICAqL1xuICBwdWJsaWMgbmV4dFN0ZXAoKTogdm9pZCB7XG4gICAgdGhpcy5zdGVwKys7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZXhwYW5kZWQgcGFuZWwgcG9zaXRpb24gdG8gdGhlIHByZXZpb3VzIHBvc2l0aW9uLlxuICAgKi9cbiAgcHVibGljIHByZXZTdGVwKCk6IHZvaWQge1xuICAgIHRoaXMuc3RlcC0tO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGRhdGEgdG8gdGhlIHNlcnZlci4gQ29sbGVjdHMgYWxsIGFkZGVkIGluZm9ybWF0aW9uIGZyb20gdGhlIGNvbXBvbmVudC5cbiAgICogQ3JlYXRlcyBhIEpTT04gb2JqZWN0IGJhc2VkIG9uIGBmb3JtLm5hbWVgIGFuZCBgZm9ybS52YWx1ZWAgZmllbGRzLlxuICAgKi9cbiAgcHVibGljIGRvQWN0aW9uKCk6IHZvaWQge1xuICAgIC8vVE9ETzogcG9uZXIgZXN0ZSBtZXRob2QgaW4gYENvbnRhaW5lckNvbnRyb2xgLlxuXG4gICAgLyogUHJlcGFyZXMgYWxsIGRhdGEuICovXG5cbiAgICBjb25zdCBkYXRhID0ge307XG5cbiAgICB0aGlzLnBhbmVsc0NvbnRlbnQuZm9yRWFjaCgocGFuZWwpID0+IHtcbiAgICAgIHBhbmVsLmZvcm1TZWN0aW9uQ29udGVudC5mb3JFYWNoKChjb250cm9sQ29udGVudCkgPT4ge1xuICAgICAgICBkYXRhW2NvbnRyb2xDb250ZW50Lm5hbWVdID0gY29udHJvbENvbnRlbnQudmFsdWU7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmFjdGlvbikge1xuICAgICAgdGhpcy5hY3Rpb24uZG9pdChkYXRhKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kZWxldGVWYWx1ZXNBZnRlckFjdGlvbikge1xuICAgICAgdGhpcy5wYW5lbHNDb250ZW50LmZvckVhY2goKHBhbmVsKSA9PiB7XG4gICAgICAgIHBhbmVsLmZvcm1TZWN0aW9uQ29udGVudC5mb3JFYWNoKChjb250cm9sQ29udGVudCkgPT4ge1xuICAgICAgICAgIGNvbnRyb2xDb250ZW50LnZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIl19