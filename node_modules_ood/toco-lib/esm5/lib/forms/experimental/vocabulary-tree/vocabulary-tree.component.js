/**
 * @fileoverview added by tsickle
 * Generated from: lib/forms/experimental/vocabulary-tree/vocabulary-tree.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
/*
 *   Copyright (c) 2020 Universidad de Pinar del Río "Hermanos Saíz Montes de Oca"
 *   All rights reserved.
 */
import { Component } from "@angular/core";
import { FormControl, } from "@angular/forms";
import { startWith, map } from "rxjs/operators";
import { TaxonomyService } from '../../../backend/public-api';
import { InputControl } from '../../input/input.control';
/**
 * @record
 */
function VocabularyComponentExtraContent() { }
if (false) {
    /** @type {?} */
    VocabularyComponentExtraContent.prototype.multiple;
    /** @type {?} */
    VocabularyComponentExtraContent.prototype.selectedTermsIds;
    /** @type {?} */
    VocabularyComponentExtraContent.prototype.excludeTermsIds;
    /** @type {?} */
    VocabularyComponentExtraContent.prototype.level;
    /** @type {?} */
    VocabularyComponentExtraContent.prototype.vocab;
}
/**
 * A control to select a term or terms in a vocabulary.
 */
var VocabularyTreeComponent = /** @class */ (function (_super) {
    tslib_1.__extends(VocabularyTreeComponent, _super);
    function VocabularyTreeComponent(service) {
        var _this = _super.call(this) || this;
        _this.service = service;
        // internalControl = new FormControl();
        //this control is used by the chips,not necessary to expose it
        _this.chipsFormControl = new FormControl();
        _this.levelsOptions = null;
        _this.levelsSelection = new Array();
        _this.lastLevelTerm = null;
        _this.chipsList = [];
        _this.leafsOptions = null;
        _this.terms = [];
        _this.loading = true;
        // selectedTermsIds = [];
        _this.searchText = "Seleccione las opciones";
        return _this;
    }
    /**
     * @return {?}
     */
    VocabularyTreeComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.init('', '', false, true);
        // (this.content.parentFormSection as FormGroup).addControl(
        //   this.content.name,
        //   this.content.formControl
        // );
        if (this.content.required) {
            this.content.formControl.setValidators((/**
             * @param {?} control
             * @return {?}
             */
            function (control) {
                return !_this.content.value || _this.content.value.length == 0
                    ? { requiredTerms: "No Terms Selected" }
                    : null;
            }));
        }
        this.inputId = this.content.label.trim().toLowerCase();
        if (this.content.extraContent) {
            this.extraContent = this.content.extraContent;
            // already selected terms
            if (!this.extraContent.selectedTermsIds) {
                this.extraContent.selectedTermsIds = [];
            }
            // terms ids to exclude of the possible options.
            if (!this.extraContent.excludeTermsIds) {
                this.extraContent.excludeTermsIds = [];
            }
            this.content.value = [];
            this.content.formControl.setValue(this.content.value);
            if (this.extraContent.level == undefined) {
                this.extraContent.level = 10;
            }
            if (this.extraContent.vocab) {
                this.loading = true;
                this.service.getTermsTreeByVocab(this.extraContent.vocab, 0).subscribe((/**
                 * @param {?} response
                 * @return {?}
                 */
                function (response) {
                    _this.loading = false;
                    /** @type {?} */
                    var nextLevel = response.data.tree.term_node;
                    if (_this.extraContent.level > 0) {
                        _this.levelsOptions = new Array();
                        // this.levelsSelection = new Array<TermNode>();
                        _this._setLevelsOptions(nextLevel, 0);
                    }
                    else {
                        _this.leafsOptions = _this._get_terms(nextLevel);
                        _this._updateFilteredOptions();
                    }
                }), (/**
                 * @param {?} err
                 * @return {?}
                 */
                function (err) {
                    console.log("The observable got an error notification: " + err + ".");
                }), (/**
                 * @return {?}
                 */
                function () {
                    console.log("The observable got a complete notification.");
                    _this.loading = !_this.loading;
                }));
            }
            //   else if(this.extraContent.termID){
            //     this.service.getTermByUUID(this.extraContent.termID, this.extraContent.level)
            //     .subscribe(this.termsTreeObserver);
            // }
        }
    };
    /**
     * @private
     * @param {?} nextLevel
     * @param {?} level
     * @return {?}
     */
    VocabularyTreeComponent.prototype._setLevelsOptions = /**
     * @private
     * @param {?} nextLevel
     * @param {?} level
     * @return {?}
     */
    function (nextLevel, level) {
        var _this = this;
        console.log('VOCABULARY TREE *****');
        console.log(this.extraContent.selectedTermsIds, nextLevel);
        /** @type {?} */
        var result = [];
        nextLevel.forEach((/**
         * @param {?} node
         * @return {?}
         */
        function (node) {
            if (!((/** @type {?} */ (_this.extraContent.excludeTermsIds))).some((/**
             * @param {?} id
             * @return {?}
             */
            function (id) { return id === node.term.uuid; }))) {
                result.push(node);
            }
            if (((/** @type {?} */ (_this.extraContent.selectedTermsIds))).some((/**
             * @param {?} id
             * @return {?}
             */
            function (id) { return id === node.term.uuid; }))) {
                _this.onSelectionChange(level, node.term);
                // this.addTermToValue(node.term);
                // this.levelsSelection[level] = node.term;
            }
        }));
        this.levelsOptions.push(result);
    };
    /**
     * @param {?} level
     * @param {?} item
     * @return {?}
     */
    VocabularyTreeComponent.prototype.onSelectionChange = /**
     * @param {?} level
     * @param {?} item
     * @return {?}
     */
    function (level, item) {
        var _this = this;
        console.log(level, item);
        this.leafsOptions = null;
        this.chipsList = [];
        this.loading = true;
        this.lastLevelTerm = item;
        this.levelsOptions = this.levelsOptions.slice(0, level + 1);
        // this.removeTermFromValue(this.levelsSelection[level]);
        // this.levelsSelection[level] = item;
        // this.addTermToValue(this.levelsSelection[level]);
        this.content.value = [];
        this.levelsSelection = this.levelsSelection.slice(0, level);
        this.levelsSelection.push(item);
        this.levelsSelection.forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            _this.addTermToValue(element, false);
        }));
        this.service.getTermByUUID(item.uuid, 1).subscribe((/**
         * @param {?} response
         * @return {?}
         */
        function (response) {
            console.log(response);
            _this.loading = false;
            /** @type {?} */
            var nextLevel = response.data.term_node.children;
            if (_this.extraContent.level > level + 1) {
                _this._setLevelsOptions(nextLevel, level);
            }
            else {
                _this.leafsOptions = _this._get_terms(nextLevel);
                _this._updateFilteredOptions();
            }
        }), (/**
         * @param {?} err
         * @return {?}
         */
        function (err) {
            console.log("The observable got an error notification: " + err + ".");
        }), (/**
         * @return {?}
         */
        function () {
            console.log("The observable got a complete notification.");
            _this.loading = !_this.loading;
        }));
    };
    /**
     * @private
     * @return {?}
     */
    VocabularyTreeComponent.prototype.setValidation = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.content.formControl.valid) {
            this.chipsFormControl.setErrors(null);
        }
        else {
            this.chipsFormControl.setErrors({ requiered: true });
        }
    };
    /**
     * @private
     * @param {?} term
     * @param {?=} isLeaf
     * @return {?}
     */
    VocabularyTreeComponent.prototype.addTermToValue = /**
     * @private
     * @param {?} term
     * @param {?=} isLeaf
     * @return {?}
     */
    function (term, isLeaf) {
        var _this = this;
        if (isLeaf === void 0) { isLeaf = true; }
        if (this.extraContent.multiple) {
            this.content.value.unshift(term);
        }
        else {
            this.content.value = [];
            this.levelsSelection.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                _this.content.value.unshift(element);
            }));
            this.content.value.unshift(term);
        }
        console.log(this.content.value);
        this.content.formControl.setValue(this.content.value);
        this.setValidation();
        console.log(this.content.formControl);
    };
    /**
     * @private
     * @param {?} term
     * @return {?}
     */
    VocabularyTreeComponent.prototype.removeTermFromValue = /**
     * @private
     * @param {?} term
     * @return {?}
     */
    function (term) {
        this.content.value = ((/** @type {?} */ (this.content.value))).filter((/**
         * @param {?} e
         * @return {?}
         */
        function (e) { return e.id !== term.id; }));
        this.content.formControl.setValue(this.content.value);
        this.setValidation();
        console.log(this.content.formControl);
    };
    /**
     * @private
     * @return {?}
     */
    VocabularyTreeComponent.prototype._updateFilteredOptions = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.filteredOptions = this.chipsFormControl.valueChanges.pipe(startWith(""), map((/**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            /** @type {?} */
            var filterValue = value ? value.toLowerCase() : "";
            return _this.leafsOptions.filter((/**
             * @param {?} option
             * @return {?}
             */
            function (option) {
                return option.term.description.toLowerCase().includes(filterValue);
            }));
        })));
    };
    /**
     * @private
     * @param {?} nodes
     * @return {?}
     */
    VocabularyTreeComponent.prototype._get_terms = /**
     * @private
     * @param {?} nodes
     * @return {?}
     */
    function (nodes) {
        var _this = this;
        this.chipsList = [];
        /** @type {?} */
        var result = [];
        nodes.forEach((/**
         * @param {?} node
         * @return {?}
         */
        function (node) {
            if (((/** @type {?} */ (_this.extraContent.selectedTermsIds))).some((/**
             * @param {?} id
             * @return {?}
             */
            function (id) { return id === node.term.uuid; }))) {
                _this.addTermToValue(node.term);
                _this.chipsList.push(node);
            }
            else {
                // if is not in any of the exclude term ids, then push
                if (!((/** @type {?} */ (_this.extraContent.excludeTermsIds))).some((/**
                 * @param {?} id
                 * @return {?}
                 */
                function (id) { return id === node.term.uuid; }))) {
                    result.push(node);
                }
            }
        }));
        return result;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    VocabularyTreeComponent.prototype.addChips = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (this.extraContent.multiple) {
            this.chipsList.unshift(value);
        }
        else {
            // if not is multiple, then the element in the chipsList goes back to the options
            if (this.chipsList.length > 0) {
                this.leafsOptions.push(this.chipsList[0]);
            }
            this.chipsList = [value];
        }
        console.log(value, this.chipsList);
        this.addTermToValue(value.term);
        this.leafsOptions = this.leafsOptions.filter((/**
         * @param {?} option
         * @return {?}
         */
        function (option) { return option.term.id !== value.term.id; }));
        this.chipsFormControl.setValue("");
        // document.getElementById(this.inputId).blur();
        this._updateFilteredOptions();
    };
    /**
     * @param {?} index
     * @return {?}
     */
    VocabularyTreeComponent.prototype.removeChip = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        this.leafsOptions.push(this.chipsList[index]);
        this.removeTermFromValue(this.chipsList[index].term);
        this.chipsList.splice(index, 1);
        this._updateFilteredOptions();
    };
    /**
     * @param {?} node
     * @return {?}
     */
    VocabularyTreeComponent.prototype.getTermNameInATree = /**
     * @param {?} node
     * @return {?}
     */
    function (node) {
        if (node.parent != null) {
            return (this.getTermNameInATree(node.parent) + " / " + node.term.description);
        }
        else {
            return node.term.description;
        }
    };
    VocabularyTreeComponent.decorators = [
        { type: Component, args: [{
                    selector: "toco-vocabulary-tree",
                    template: "<mat-card>\n  <mat-card-header>\n\n    <mat-progress-bar *ngIf=\"!levelsOptions\" mode=\"indeterminate\"></mat-progress-bar>\n\n    <ng-template *ngIf=\"levelsOptions\" >\n\n      <mat-form-field\n      *ngFor=\"let level of levelsOptions; let i = index\"\n      class=\"select-mat-form-field\"\n      [appearance]=\"content.appearance\"\n      style=\"width: 100%;\"\n    >\n      <mat-label>{{ content.label }}</mat-label>\n      <mat-select\n        name=\"item\"\n        [required]=\"content.required\"\n        [multiple]=\"false\"\n        [(value)]=\"levelsSelection[i]\"\n        (selectionChange)=\"onSelectionChange(i, levelsSelection[i])\"\n      >\n        <mat-option *ngFor=\"let item of level\" [value]=\"item.term\">\n          {{ item.term.description }}\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n    </ng-template>\n  </mat-card-header>\n\n  <mat-card-content *ngIf=\"lastLevelTerm\">\n    <mat-progress-bar *ngIf=\"!leafsOptions\" mode=\"indeterminate\">\n    </mat-progress-bar>\n\n    <mat-form-field *ngIf=\"leafsOptions\" style=\"width: 100%;\">\n      <mat-label>\n        {{ lastLevelTerm.description }}\n        <span *ngIf=\"content.required\">*</span></mat-label\n      >\n      <input\n        matInput\n        id=\"'inputId-'{{ content.name }}\"\n        type=\"text\"\n        [formControl]=\"chipsFormControl\"\n        [matAutocomplete]=\"auto\"\n        aria-label=\"Number\"\n      />\n\n      <mat-hint *ngIf=\"content.startHint\" [align]=\"'start'\">{{\n        content.startHint.label\n      }}</mat-hint>\n      <mat-hint *ngIf=\"!content.startHint\" [align]=\"'start'\">{{\n        searchText\n      }}</mat-hint>\n\n      <mat-autocomplete #auto=\"matAutocomplete\">\n        <mat-option\n          *ngFor=\"let option of filteredOptions | async\"\n          [value]=\"option.term.description\"\n          (click)=\"addChips(option)\"\n          [title]=\"option.term.description\"\n        >\n          {{ option.term.description }}\n        </mat-option>\n      </mat-autocomplete>\n\n      <!-- <button mat-icon-button color=\"accent\" class=\"delete-filter\" (click)=\"remove_component()\">\n      <mat-icon>close</mat-icon>\n    </button> -->\n    </mat-form-field>\n\n    <mat-chip-list\n      class=\"mat-chip-list-stacked\"\n      fxLayout=\"row\"\n      fxLayoutAlign=\"start center\"\n      style=\"margin-bottom: 0.5em;\"\n      id=\"chiplist-{{ extraContent.vocab }}\"\n    >\n      <mat-chip\n        *ngFor=\"let item of chipsList; let i = index\"\n        (removed)=\"removeChip(i)\"\n        [removable]=\"true\"\n      >\n        {{ getTermNameInATree(item) }}\n        <mat-icon matChipRemove>cancel</mat-icon>\n      </mat-chip>\n    </mat-chip-list>\n  </mat-card-content>\n</mat-card>\n",
                    host: {
                        "[style.minWidth]": "content.minWidth",
                        "[style.width]": "content.width",
                    },
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    VocabularyTreeComponent.ctorParameters = function () { return [
        { type: TaxonomyService }
    ]; };
    return VocabularyTreeComponent;
}(InputControl));
export { VocabularyTreeComponent };
if (false) {
    /** @type {?} */
    VocabularyTreeComponent.prototype.chipsFormControl;
    /** @type {?} */
    VocabularyTreeComponent.prototype.levelsOptions;
    /** @type {?} */
    VocabularyTreeComponent.prototype.levelsSelection;
    /** @type {?} */
    VocabularyTreeComponent.prototype.lastLevelTerm;
    /** @type {?} */
    VocabularyTreeComponent.prototype.inputId;
    /** @type {?} */
    VocabularyTreeComponent.prototype.filteredOptions;
    /** @type {?} */
    VocabularyTreeComponent.prototype.chipsList;
    /** @type {?} */
    VocabularyTreeComponent.prototype.leafsOptions;
    /** @type {?} */
    VocabularyTreeComponent.prototype.terms;
    /** @type {?} */
    VocabularyTreeComponent.prototype.loading;
    /** @type {?} */
    VocabularyTreeComponent.prototype.extraContent;
    /** @type {?} */
    VocabularyTreeComponent.prototype.searchText;
    /**
     * @type {?}
     * @private
     */
    VocabularyTreeComponent.prototype.service;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidm9jYWJ1bGFyeS10cmVlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3RvY28tbGliLyIsInNvdXJjZXMiOlsibGliL2Zvcm1zL2V4cGVyaW1lbnRhbC92b2NhYnVsYXJ5LXRyZWUvdm9jYWJ1bGFyeS10cmVlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBS0EsT0FBTyxFQUFFLFNBQVMsRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUNsRCxPQUFPLEVBQ0wsV0FBVyxHQUlaLE1BQU0sZ0JBQWdCLENBQUM7QUFFeEIsT0FBTyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNoRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFHOUQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDOzs7O0FBS3pELDhDQVFDOzs7SUFQQyxtREFBa0I7O0lBQ2xCLDJEQUFxQjs7SUFDckIsMERBQW9COztJQUVwQixnREFBYzs7SUFFZCxnREFBa0M7Ozs7O0FBTXBDO0lBUzZDLG1EQUFZO0lBMkJ2RCxpQ0FBb0IsT0FBd0I7UUFBNUMsWUFDRSxpQkFBTyxTQUNSO1FBRm1CLGFBQU8sR0FBUCxPQUFPLENBQWlCOzs7UUF0QjVDLHNCQUFnQixHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7UUFFckMsbUJBQWEsR0FBc0IsSUFBSSxDQUFDO1FBQ3hDLHFCQUFlLEdBQWdCLElBQUksS0FBSyxFQUFRLENBQUM7UUFFakQsbUJBQWEsR0FBUyxJQUFJLENBQUM7UUFJM0IsZUFBUyxHQUFlLEVBQUUsQ0FBQztRQUMzQixrQkFBWSxHQUFlLElBQUksQ0FBQztRQUVoQyxXQUFLLEdBQWUsRUFBRSxDQUFDO1FBRXZCLGFBQU8sR0FBRyxJQUFJLENBQUM7O1FBTWYsZ0JBQVUsR0FBRyx5QkFBeUIsQ0FBQzs7SUFJdkMsQ0FBQzs7OztJQUVELDBDQUFROzs7SUFBUjtRQUFBLGlC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STlDLDZDQUF1Qzs7Ozs7SUFFM0IsMENBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICAgQ29weXJpZ2h0IChjKSAyMDIwIFVuaXZlcnNpZGFkIGRlIFBpbmFyIGRlbCBSw61vIFwiSGVybWFub3MgU2HDrXogTW9udGVzIGRlIE9jYVwiXG4gKiAgIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cblxuaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHtcbiAgRm9ybUNvbnRyb2wsXG4gIEFic3RyYWN0Q29udHJvbCxcbiAgVmFsaWRhdGlvbkVycm9ycyxcbiAgRm9ybUdyb3VwLFxufSBmcm9tIFwiQGFuZ3VsYXIvZm9ybXNcIjtcbmltcG9ydCB7IE9ic2VydmFibGUsIFBhcnRpYWxPYnNlcnZlciB9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQgeyBzdGFydFdpdGgsIG1hcCB9IGZyb20gXCJyeGpzL29wZXJhdG9yc1wiO1xuaW1wb3J0IHsgVGF4b25vbXlTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vYmFja2VuZC9wdWJsaWMtYXBpJztcbmltcG9ydCB7IFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLCBUZXJtTm9kZSwgVGVybSB9IGZyb20gJy4uLy4uLy4uL2VudGl0aWVzL3B1YmxpYy1hcGknO1xuXG5pbXBvcnQgeyBJbnB1dENvbnRyb2wgfSBmcm9tICcuLi8uLi9pbnB1dC9pbnB1dC5jb250cm9sJztcblxuaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICcuLi8uLi8uLi9jb3JlL3B1YmxpYy1hcGknO1xuXG5cbmludGVyZmFjZSBWb2NhYnVsYXJ5Q29tcG9uZW50RXh0cmFDb250ZW50IHtcbiAgbXVsdGlwbGU6IGJvb2xlYW47XG4gIHNlbGVjdGVkVGVybXNJZHM6IFtdO1xuICBleGNsdWRlVGVybXNJZHM6IFtdO1xuXG4gIGxldmVsOiBudW1iZXI7XG5cbiAgdm9jYWI6IFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzO1xufVxuXG4vKipcbiAqIEEgY29udHJvbCB0byBzZWxlY3QgYSB0ZXJtIG9yIHRlcm1zIGluIGEgdm9jYWJ1bGFyeS5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiBcInRvY28tdm9jYWJ1bGFyeS10cmVlXCIsXG4gIHRlbXBsYXRlVXJsOiBcIi4vdm9jYWJ1bGFyeS10cmVlLmNvbXBvbmVudC5odG1sXCIsXG4gIHN0eWxlVXJsczogW1wiLi92b2NhYnVsYXJ5LXRyZWUuY29tcG9uZW50LnNjc3NcIl0sXG4gIGhvc3Q6IHtcbiAgICBcIltzdHlsZS5taW5XaWR0aF1cIjogXCJjb250ZW50Lm1pbldpZHRoXCIsXG4gICAgXCJbc3R5bGUud2lkdGhdXCI6IFwiY29udGVudC53aWR0aFwiLFxuICB9LFxufSlcbmV4cG9ydCBjbGFzcyBWb2NhYnVsYXJ5VHJlZUNvbXBvbmVudCBleHRlbmRzIElucHV0Q29udHJvbFxuICBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIC8vIGludGVybmFsQ29udHJvbCA9IG5ldyBGb3JtQ29udHJvbCgpO1xuXG4gIC8vdGhpcyBjb250cm9sIGlzIHVzZWQgYnkgdGhlIGNoaXBzLG5vdCBuZWNlc3NhcnkgdG8gZXhwb3NlIGl0XG4gIGNoaXBzRm9ybUNvbnRyb2wgPSBuZXcgRm9ybUNvbnRyb2woKTtcblxuICBsZXZlbHNPcHRpb25zOiBBcnJheTxUZXJtTm9kZVtdPiA9IG51bGw7XG4gIGxldmVsc1NlbGVjdGlvbjogQXJyYXk8VGVybT4gPSBuZXcgQXJyYXk8VGVybT4oKTtcblxuICBsYXN0TGV2ZWxUZXJtOiBUZXJtID0gbnVsbDtcblxuICBpbnB1dElkOiBzdHJpbmc7XG4gIGZpbHRlcmVkT3B0aW9uczogT2JzZXJ2YWJsZTxUZXJtTm9kZVtdPjtcbiAgY2hpcHNMaXN0OiBUZXJtTm9kZVtdID0gW107XG4gIGxlYWZzT3B0aW9uczogVGVybU5vZGVbXSA9IG51bGw7XG5cbiAgdGVybXM6IFRlcm1Ob2RlW10gPSBbXTtcblxuICBsb2FkaW5nID0gdHJ1ZTtcblxuICBleHRyYUNvbnRlbnQ6IFZvY2FidWxhcnlDb21wb25lbnRFeHRyYUNvbnRlbnQ7XG5cbiAgLy8gc2VsZWN0ZWRUZXJtc0lkcyA9IFtdO1xuXG4gIHNlYXJjaFRleHQgPSBcIlNlbGVjY2lvbmUgbGFzIG9wY2lvbmVzXCI7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBzZXJ2aWNlOiBUYXhvbm9teVNlcnZpY2UpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5pbml0KCcnLCAnJywgZmFsc2UsIHRydWUpO1xuICAgIC8vICh0aGlzLmNvbnRlbnQucGFyZW50Rm9ybVNlY3Rpb24gYXMgRm9ybUdyb3VwKS5hZGRDb250cm9sKFxuICAgIC8vICAgdGhpcy5jb250ZW50Lm5hbWUsXG4gICAgLy8gICB0aGlzLmNvbnRlbnQuZm9ybUNvbnRyb2xcbiAgICAvLyApO1xuICAgIGlmICh0aGlzLmNvbnRlbnQucmVxdWlyZWQpIHtcbiAgICAgIHRoaXMuY29udGVudC5mb3JtQ29udHJvbC5zZXRWYWxpZGF0b3JzKFxuICAgICAgICAoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogVmFsaWRhdGlvbkVycm9ycyB8IG51bGwgPT4ge1xuICAgICAgICAgIHJldHVybiAhdGhpcy5jb250ZW50LnZhbHVlIHx8IHRoaXMuY29udGVudC52YWx1ZS5sZW5ndGggPT0gMFxuICAgICAgICAgICAgPyB7IHJlcXVpcmVkVGVybXM6IFwiTm8gVGVybXMgU2VsZWN0ZWRcIiB9XG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5pbnB1dElkID0gdGhpcy5jb250ZW50LmxhYmVsLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICh0aGlzLmNvbnRlbnQuZXh0cmFDb250ZW50KSB7XG4gICAgICB0aGlzLmV4dHJhQ29udGVudCA9IHRoaXMuY29udGVudC5leHRyYUNvbnRlbnQ7XG5cbiAgICAgIC8vIGFscmVhZHkgc2VsZWN0ZWQgdGVybXNcbiAgICAgIGlmICghdGhpcy5leHRyYUNvbnRlbnQuc2VsZWN0ZWRUZXJtc0lkcykge1xuICAgICAgICB0aGlzLmV4dHJhQ29udGVudC5zZWxlY3RlZFRlcm1zSWRzID0gW107XG4gICAgICB9XG5cbiAgICAgIC8vIHRlcm1zIGlkcyB0byBleGNsdWRlIG9mIHRoZSBwb3NzaWJsZSBvcHRpb25zLlxuICAgICAgaWYgKCF0aGlzLmV4dHJhQ29udGVudC5leGNsdWRlVGVybXNJZHMpIHtcbiAgICAgICAgdGhpcy5leHRyYUNvbnRlbnQuZXhjbHVkZVRlcm1zSWRzID0gW107XG4gICAgICB9XG4gICAgICB0aGlzLmNvbnRlbnQudmFsdWUgPSBbXTtcbiAgICAgIHRoaXMuY29udGVudC5mb3JtQ29udHJvbC5zZXRWYWx1ZSh0aGlzLmNvbnRlbnQudmFsdWUpO1xuXG4gICAgICBpZiAodGhpcy5leHRyYUNvbnRlbnQubGV2ZWwgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuZXh0cmFDb250ZW50LmxldmVsID0gMTA7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5leHRyYUNvbnRlbnQudm9jYWIpIHtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZXJ2aWNlLmdldFRlcm1zVHJlZUJ5Vm9jYWIodGhpcy5leHRyYUNvbnRlbnQudm9jYWIsIDApLnN1YnNjcmliZShcbiAgICAgICAgICAocmVzcG9uc2U6IFJlc3BvbnNlPGFueT4pID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgbmV4dExldmVsID0gcmVzcG9uc2UuZGF0YS50cmVlLnRlcm1fbm9kZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmV4dHJhQ29udGVudC5sZXZlbCA+IDApIHtcbiAgICAgICAgICAgICAgdGhpcy5sZXZlbHNPcHRpb25zID0gbmV3IEFycmF5PFRlcm1Ob2RlW10+KCk7XG4gICAgICAgICAgICAgIC8vIHRoaXMubGV2ZWxzU2VsZWN0aW9uID0gbmV3IEFycmF5PFRlcm1Ob2RlPigpO1xuICAgICAgICAgICAgICB0aGlzLl9zZXRMZXZlbHNPcHRpb25zKG5leHRMZXZlbCwgMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmxlYWZzT3B0aW9ucyA9IHRoaXMuX2dldF90ZXJtcyhuZXh0TGV2ZWwpO1xuICAgICAgICAgICAgICB0aGlzLl91cGRhdGVGaWx0ZXJlZE9wdGlvbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuXG4gICAgICAgICAgKGVycjogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgXCJUaGUgb2JzZXJ2YWJsZSBnb3QgYW4gZXJyb3Igbm90aWZpY2F0aW9uOiBcIiArIGVyciArIFwiLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRoZSBvYnNlcnZhYmxlIGdvdCBhIGNvbXBsZXRlIG5vdGlmaWNhdGlvbi5cIik7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSAhdGhpcy5sb2FkaW5nO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vICAgZWxzZSBpZih0aGlzLmV4dHJhQ29udGVudC50ZXJtSUQpe1xuICAgICAgLy8gICAgIHRoaXMuc2VydmljZS5nZXRUZXJtQnlVVUlEKHRoaXMuZXh0cmFDb250ZW50LnRlcm1JRCwgdGhpcy5leHRyYUNvbnRlbnQubGV2ZWwpXG4gICAgICAvLyAgICAgLnN1YnNjcmliZSh0aGlzLnRlcm1zVHJlZU9ic2VydmVyKTtcbiAgICAgIC8vIH1cbiAgICB9XG4gIH1cbiAgcHJpdmF0ZSBfc2V0TGV2ZWxzT3B0aW9ucyhuZXh0TGV2ZWw6IFRlcm1Ob2RlW10sIGxldmVsOiBudW1iZXIpIHtcbiAgICBjb25zb2xlLmxvZygnVk9DQUJVTEFSWSBUUkVFICoqKioqJylcbiAgICBjb25zb2xlLmxvZyh0aGlzLmV4dHJhQ29udGVudC5zZWxlY3RlZFRlcm1zSWRzLCBuZXh0TGV2ZWwpXG4gICAgbGV0IHJlc3VsdDogVGVybU5vZGVbXSA9IFtdO1xuICAgIG5leHRMZXZlbC5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgICEodGhpcy5leHRyYUNvbnRlbnQuZXhjbHVkZVRlcm1zSWRzIGFzIFtdKS5zb21lKFxuICAgICAgICAgIChpZCkgPT4gaWQgPT09IG5vZGUudGVybS51dWlkXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICByZXN1bHQucHVzaChub2RlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAodGhpcy5leHRyYUNvbnRlbnQuc2VsZWN0ZWRUZXJtc0lkcyBhcyBbXSkuc29tZShcbiAgICAgICAgICAoaWQpID0+IGlkID09PSBub2RlLnRlcm0udXVpZFxuXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICB0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlKGxldmVsLCBub2RlLnRlcm0pXG4gICAgICAgIC8vIHRoaXMuYWRkVGVybVRvVmFsdWUobm9kZS50ZXJtKTtcbiAgICAgICAgLy8gdGhpcy5sZXZlbHNTZWxlY3Rpb25bbGV2ZWxdID0gbm9kZS50ZXJtO1xuICAgICAgfVxuXG5cbiAgICB9KTtcbiAgICB0aGlzLmxldmVsc09wdGlvbnMucHVzaChyZXN1bHQpO1xuICB9XG4gIG9uU2VsZWN0aW9uQ2hhbmdlKGxldmVsLCBpdGVtOiBUZXJtKSB7XG4gICAgY29uc29sZS5sb2cobGV2ZWwsIGl0ZW0pO1xuICAgIHRoaXMubGVhZnNPcHRpb25zID0gbnVsbDtcbiAgICB0aGlzLmNoaXBzTGlzdCA9IFtdO1xuICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgdGhpcy5sYXN0TGV2ZWxUZXJtID0gaXRlbTtcbiAgICB0aGlzLmxldmVsc09wdGlvbnMgPSB0aGlzLmxldmVsc09wdGlvbnMuc2xpY2UoMCwgbGV2ZWwrMSk7XG5cbiAgICAvLyB0aGlzLnJlbW92ZVRlcm1Gcm9tVmFsdWUodGhpcy5sZXZlbHNTZWxlY3Rpb25bbGV2ZWxdKTtcbiAgICAvLyB0aGlzLmxldmVsc1NlbGVjdGlvbltsZXZlbF0gPSBpdGVtO1xuICAgIC8vIHRoaXMuYWRkVGVybVRvVmFsdWUodGhpcy5sZXZlbHNTZWxlY3Rpb25bbGV2ZWxdKTtcblxuICAgIHRoaXMuY29udGVudC52YWx1ZSA9IFtdO1xuXG4gICAgdGhpcy5sZXZlbHNTZWxlY3Rpb24gPSB0aGlzLmxldmVsc1NlbGVjdGlvbi5zbGljZSgwLCBsZXZlbCk7XG4gICAgdGhpcy5sZXZlbHNTZWxlY3Rpb24ucHVzaChpdGVtKTtcbiAgICB0aGlzLmxldmVsc1NlbGVjdGlvbi5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgdGhpcy5hZGRUZXJtVG9WYWx1ZShlbGVtZW50LCBmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnNlcnZpY2UuZ2V0VGVybUJ5VVVJRChpdGVtLnV1aWQsIDEpLnN1YnNjcmliZShcbiAgICAgIChyZXNwb25zZTogUmVzcG9uc2U8YW55PikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICBjb25zdCBuZXh0TGV2ZWwgPSByZXNwb25zZS5kYXRhLnRlcm1fbm9kZS5jaGlsZHJlbjtcbiAgICAgICAgaWYgKHRoaXMuZXh0cmFDb250ZW50LmxldmVsID4gbGV2ZWwgKyAxKSB7XG4gICAgICAgICAgdGhpcy5fc2V0TGV2ZWxzT3B0aW9ucyhuZXh0TGV2ZWwsIGxldmVsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmxlYWZzT3B0aW9ucyA9IHRoaXMuX2dldF90ZXJtcyhuZXh0TGV2ZWwpO1xuICAgICAgICAgIHRoaXMuX3VwZGF0ZUZpbHRlcmVkT3B0aW9ucygpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAoZXJyOiBhbnkpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJUaGUgb2JzZXJ2YWJsZSBnb3QgYW4gZXJyb3Igbm90aWZpY2F0aW9uOiBcIiArIGVyciArIFwiLlwiKTtcbiAgICAgIH0sXG5cbiAgICAgICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJUaGUgb2JzZXJ2YWJsZSBnb3QgYSBjb21wbGV0ZSBub3RpZmljYXRpb24uXCIpO1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSAhdGhpcy5sb2FkaW5nO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHNldFZhbGlkYXRpb24oKSB7XG4gICAgaWYgKHRoaXMuY29udGVudC5mb3JtQ29udHJvbC52YWxpZCkge1xuICAgICAgdGhpcy5jaGlwc0Zvcm1Db250cm9sLnNldEVycm9ycyhudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jaGlwc0Zvcm1Db250cm9sLnNldEVycm9ycyh7IHJlcXVpZXJlZDogdHJ1ZSB9KTtcbiAgICB9XG4gIH1cblxuXG4gIHByaXZhdGUgYWRkVGVybVRvVmFsdWUodGVybTogVGVybSwgaXNMZWFmPXRydWUpIHtcbiAgICBpZiAodGhpcy5leHRyYUNvbnRlbnQubXVsdGlwbGUpIHtcbiAgICAgIHRoaXMuY29udGVudC52YWx1ZS51bnNoaWZ0KHRlcm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbnRlbnQudmFsdWUgPSBbXTtcbiAgICAgIHRoaXMubGV2ZWxzU2VsZWN0aW9uLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIHRoaXMuY29udGVudC52YWx1ZS51bnNoaWZ0KGVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLmNvbnRlbnQudmFsdWUudW5zaGlmdCh0ZXJtKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2codGhpcy5jb250ZW50LnZhbHVlKVxuICAgIHRoaXMuY29udGVudC5mb3JtQ29udHJvbC5zZXRWYWx1ZSh0aGlzLmNvbnRlbnQudmFsdWUpO1xuICAgIHRoaXMuc2V0VmFsaWRhdGlvbigpO1xuICAgIGNvbnNvbGUubG9nKHRoaXMuY29udGVudC5mb3JtQ29udHJvbCk7XG5cbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlVGVybUZyb21WYWx1ZSh0ZXJtOiBUZXJtKSB7XG4gICAgdGhpcy5jb250ZW50LnZhbHVlID0gKHRoaXMuY29udGVudC52YWx1ZSBhcyBbXSkuZmlsdGVyKFxuICAgICAgKGU6IFRlcm0pID0+IGUuaWQgIT09IHRlcm0uaWRcbiAgICApO1xuICAgIHRoaXMuY29udGVudC5mb3JtQ29udHJvbC5zZXRWYWx1ZSh0aGlzLmNvbnRlbnQudmFsdWUpO1xuICAgIHRoaXMuc2V0VmFsaWRhdGlvbigpO1xuICAgIGNvbnNvbGUubG9nKHRoaXMuY29udGVudC5mb3JtQ29udHJvbCk7XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVGaWx0ZXJlZE9wdGlvbnMoKSB7XG4gICAgdGhpcy5maWx0ZXJlZE9wdGlvbnMgPSB0aGlzLmNoaXBzRm9ybUNvbnRyb2wudmFsdWVDaGFuZ2VzLnBpcGU8XG4gICAgICBzdHJpbmcsXG4gICAgICBUZXJtTm9kZVtdXG4gICAgPihcbiAgICAgIHN0YXJ0V2l0aChcIlwiKSxcbiAgICAgIG1hcCgodmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgZmlsdGVyVmFsdWUgPSB2YWx1ZSA/IHZhbHVlLnRvTG93ZXJDYXNlKCkgOiBcIlwiO1xuICAgICAgICByZXR1cm4gdGhpcy5sZWFmc09wdGlvbnMuZmlsdGVyKChvcHRpb24pID0+XG4gICAgICAgICAgb3B0aW9uLnRlcm0uZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXJWYWx1ZSlcbiAgICAgICAgKTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldF90ZXJtcyhub2RlczogVGVybU5vZGVbXSk6IFRlcm1Ob2RlW10ge1xuICAgIHRoaXMuY2hpcHNMaXN0ID0gW107XG4gICAgbGV0IHJlc3VsdDogVGVybU5vZGVbXSA9IFtdO1xuICAgIG5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgKHRoaXMuZXh0cmFDb250ZW50LnNlbGVjdGVkVGVybXNJZHMgYXMgW10pLnNvbWUoXG4gICAgICAgICAgKGlkKSA9PiBpZCA9PT0gbm9kZS50ZXJtLnV1aWRcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuYWRkVGVybVRvVmFsdWUobm9kZS50ZXJtKTtcbiAgICAgICAgdGhpcy5jaGlwc0xpc3QucHVzaChub2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlmIGlzIG5vdCBpbiBhbnkgb2YgdGhlIGV4Y2x1ZGUgdGVybSBpZHMsIHRoZW4gcHVzaFxuICAgICAgICBpZiAoXG4gICAgICAgICAgISh0aGlzLmV4dHJhQ29udGVudC5leGNsdWRlVGVybXNJZHMgYXMgW10pLnNvbWUoXG4gICAgICAgICAgICAoaWQpID0+IGlkID09PSBub2RlLnRlcm0udXVpZFxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBhZGRDaGlwcyh2YWx1ZTogVGVybU5vZGUpIHtcbiAgICBpZiAodGhpcy5leHRyYUNvbnRlbnQubXVsdGlwbGUpIHtcbiAgICAgIHRoaXMuY2hpcHNMaXN0LnVuc2hpZnQodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBpZiBub3QgaXMgbXVsdGlwbGUsIHRoZW4gdGhlIGVsZW1lbnQgaW4gdGhlIGNoaXBzTGlzdCBnb2VzIGJhY2sgdG8gdGhlIG9wdGlvbnNcbiAgICAgIGlmICh0aGlzLmNoaXBzTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMubGVhZnNPcHRpb25zLnB1c2godGhpcy5jaGlwc0xpc3RbMF0pO1xuICAgICAgfVxuICAgICAgdGhpcy5jaGlwc0xpc3QgPSBbdmFsdWVdO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZyh2YWx1ZSwgdGhpcy5jaGlwc0xpc3QpO1xuICAgIHRoaXMuYWRkVGVybVRvVmFsdWUodmFsdWUudGVybSk7XG4gICAgdGhpcy5sZWFmc09wdGlvbnMgPSB0aGlzLmxlYWZzT3B0aW9ucy5maWx0ZXIoXG4gICAgICAob3B0aW9uKSA9PiBvcHRpb24udGVybS5pZCAhPT0gdmFsdWUudGVybS5pZFxuICAgICk7XG5cbiAgICB0aGlzLmNoaXBzRm9ybUNvbnRyb2wuc2V0VmFsdWUoXCJcIik7XG4gICAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pbnB1dElkKS5ibHVyKCk7XG4gICAgdGhpcy5fdXBkYXRlRmlsdGVyZWRPcHRpb25zKCk7XG4gIH1cblxuICByZW1vdmVDaGlwKGluZGV4OiBudW1iZXIpIHtcbiAgICB0aGlzLmxlYWZzT3B0aW9ucy5wdXNoKHRoaXMuY2hpcHNMaXN0W2luZGV4XSk7XG4gICAgdGhpcy5yZW1vdmVUZXJtRnJvbVZhbHVlKHRoaXMuY2hpcHNMaXN0W2luZGV4XS50ZXJtKTtcbiAgICB0aGlzLmNoaXBzTGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHRoaXMuX3VwZGF0ZUZpbHRlcmVkT3B0aW9ucygpO1xuICB9XG5cbiAgZ2V0VGVybU5hbWVJbkFUcmVlKG5vZGU6IFRlcm1Ob2RlKSB7XG4gICAgaWYgKG5vZGUucGFyZW50ICE9IG51bGwpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuZ2V0VGVybU5hbWVJbkFUcmVlKG5vZGUucGFyZW50KSArIFwiIC8gXCIgKyBub2RlLnRlcm0uZGVzY3JpcHRpb25cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBub2RlLnRlcm0uZGVzY3JpcHRpb247XG4gICAgfVxuICB9XG59XG4iXX0=