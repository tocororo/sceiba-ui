/**
 * @fileoverview added by tsickle
 * Generated from: lib/filters/select-autocomplete-filter/select-autocomplete-filter.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input } from '@angular/core';
import { FormControl } from '@angular/forms';
import { startWith, map } from 'rxjs/operators';
import { FiltersService } from '../filters.service';
import { FilterContainerService } from '../filter-container.service';
var SelectAutocompleteFilterComponent = /** @class */ (function () {
    function SelectAutocompleteFilterComponent(filterService, filterContainerService) {
        this.filterService = filterService;
        this.filterContainerService = filterContainerService;
        this.type = '';
        this.placeholder = '';
        this.text = '';
        this.multiple = false;
        this.selectOptions = [];
        this.myControl = new FormControl();
        this.chipsList = [];
    }
    /**
     * @return {?}
     */
    SelectAutocompleteFilterComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.data.type)
            this.type = this.data.type;
        if (this.data.placeholder)
            this.placeholder = this.data.placeholder;
        if (this.multiple)
            this.multiple = true;
        if (this.data.selectOptions)
            this.selectOptions = this.data.selectOptions;
        this.data.value = '';
        this.filteredOptions = this.myControl.valueChanges.pipe(startWith(''), map((/**
         * @param {?} value
         * @return {?}
         */
        function (value) { return _this._filter(value); })));
        this.inputId = this.placeholder.trim().toLowerCase();
    };
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    SelectAutocompleteFilterComponent.prototype._filter = /**
     * @private
     * @param {?} value
     * @return {?}
     */
    function (value) {
        /** @type {?} */
        var filterValue = value.toLowerCase();
        return this.selectOptions.filter((/**
         * @param {?} option
         * @return {?}
         */
        function (option) { return option.name.toLowerCase().includes(filterValue); }));
    };
    /**
     * @return {?}
     */
    SelectAutocompleteFilterComponent.prototype.remove_component = /**
     * @return {?}
     */
    function () {
        this.filterService.deleteParameter(this.data.field);
        this.filterContainerService.filterDeleted(this.data.index);
        this.filterService.changeAutocompleteFilter(this.data.idVocab, 'OR');
    };
    /**
     * @return {?}
     */
    SelectAutocompleteFilterComponent.prototype.optionSelect = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var valueEmiter = 'OR';
        this.chipsList.forEach((/**
         * @param {?} chip
         * @return {?}
         */
        function (chip) {
            valueEmiter = valueEmiter + ',' + chip.id;
        }));
        this.filterService.changeAutocompleteFilter(this.data.idVocab, valueEmiter);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    SelectAutocompleteFilterComponent.prototype.addChips = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        var _this = this;
        this.chipsList.unshift(value);
        this.myControl.setValue('');
        this.filteredOptions = this.myControl.valueChanges.pipe(startWith(''), map((/**
         * @param {?} value
         * @return {?}
         */
        function (value) { return _this._filter(value); })));
        document.getElementById(this.inputId).blur();
        this.optionSelect();
    };
    /**
     * @param {?} index
     * @return {?}
     */
    SelectAutocompleteFilterComponent.prototype.removeChip = /**
     * @param {?} index
     * @return {?}
     */
    function (index) {
        this.chipsList.splice(index, 1);
        this.optionSelect();
    };
    SelectAutocompleteFilterComponent.decorators = [
        { type: Component, args: [{
                    selector: 'toco-select-autocomplete-filter',
                    template: "<div class=\"card-filter\" >\n  <mat-form-field style=\"width: 100%;\">\n    \n    <input type=\"text\" placeholder=\"{{placeholder}}\" aria-label=\"Number\" matInput [formControl]=\"myControl\" [matAutocomplete]=\"auto\" id=\"{{inputId}}\">\n    <mat-autocomplete #auto=\"matAutocomplete\" >\n      <mat-option *ngFor=\"let option of filteredOptions | async\" [value]=\"option.name\" (click)=\"addChips(option)\" title=\"{{option.name}}\">\n        {{option.name}}\n      </mat-option>\n    </mat-autocomplete>\n\n    <button mat-icon-button color=\"accent\" class=\"delete-filter\" (click)=\"remove_component()\">\n      <mat-icon>close</mat-icon>\n    </button>\n  </mat-form-field>\n  <mat-chip-list fxLayout=\"row\" fxLayoutAlign=\"start center\" style=\"margin-bottom: .5em\" id=\"chiplist\">\n    <mat-chip *ngFor=\"let item of chipsList; let i=index\" (click)=\"removeChip(i)\">{{item.name}}</mat-chip>\n  </mat-chip-list>\n</div>",
                    styles: [".card-filter{border:2px solid #e4e4e4;border-radius:5px;padding:5px .5em 0;position:relative;box-shadow:2px 3px 10px RGB(0,0,0,.053);width:15em;margin:.4em 0}.delete-filter{position:absolute;top:-1.9em;right:-1.4em;width:2em;height:2em}.delete-filter mat-icon{font-size:medium}.mat-option{line-height:35px;font-size:small;height:35px}#mat-chip-list-0>.mat-chip-list-wrapper{max-height:6em;overflow:auto}mat-chip{cursor:pointer}"]
                }] }
    ];
    /** @nocollapse */
    SelectAutocompleteFilterComponent.ctorParameters = function () { return [
        { type: FiltersService },
        { type: FilterContainerService }
    ]; };
    SelectAutocompleteFilterComponent.propDecorators = {
        data: [{ type: Input }]
    };
    return SelectAutocompleteFilterComponent;
}());
export { SelectAutocompleteFilterComponent };
if (false) {
    /** @type {?} */
    SelectAutocompleteFilterComponent.prototype.data;
    /** @type {?} */
    SelectAutocompleteFilterComponent.prototype.type;
    /** @type {?} */
    SelectAutocompleteFilterComponent.prototype.placeholder;
    /** @type {?} */
    SelectAutocompleteFilterComponent.prototype.text;
    /** @type {?} */
    SelectAutocompleteFilterComponent.prototype.multiple;
    /** @type {?} */
    SelectAutocompleteFilterComponent.prototype.selectValue;
    /** @type {?} */
    SelectAutocompleteFilterComponent.prototype.selectOptions;
    /** @type {?} */
    SelectAutocompleteFilterComponent.prototype.myControl;
    /** @type {?} */
    SelectAutocompleteFilterComponent.prototype.filteredOptions;
    /** @type {?} */
    SelectAutocompleteFilterComponent.prototype.chipsList;
    /** @type {?} */
    SelectAutocompleteFilterComponent.prototype.inputId;
    /**
     * @type {?}
     * @private
     */
    SelectAutocompleteFilterComponent.prototype.filterService;
    /**
     * @type {?}
     * @private
     */
    SelectAutocompleteFilterComponent.prototype.filterContainerService;
}
/**
 * @record
 */
export function ValueInformation() { }
if (false) {
    /** @type {?} */
    ValueInformation.prototype.id;
    /** @type {?} */
    ValueInformation.prototype.name;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LWF1dG9jb21wbGV0ZS1maWx0ZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vdG9jby1saWIvIiwic291cmNlcyI6WyJsaWIvZmlsdGVycy9zZWxlY3QtYXV0b2NvbXBsZXRlLWZpbHRlci9zZWxlY3QtYXV0b2NvbXBsZXRlLWZpbHRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN6RCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFN0MsT0FBTyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUdoRCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDcEQsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFckU7SUFrQkksMkNBQW9CLGFBQThCLEVBQ3RDLHNCQUE4QztRQUR0QyxrQkFBYSxHQUFiLGFBQWEsQ0FBaUI7UUFDdEMsMkJBQXNCLEdBQXRCLHNCQUFzQixDQUF3QjtRQVoxRCxTQUFJLEdBQVcsRUFBRSxDQUFDO1FBQ2xCLGdCQUFXLEdBQVksRUFBRSxDQUFDO1FBQzFCLFNBQUksR0FBVSxFQUFFLENBQUM7UUFDakIsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUVqQixrQkFBYSxHQUF1QixFQUFFLENBQUM7UUFDdkMsY0FBUyxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7UUFFOUIsY0FBUyxHQUF1QixFQUFFLENBQUM7SUFLakMsQ0FBQzs7OztJQUVILG9EQUFROzs7SUFBUjtRQUFBLGlCQVdDO1FBVkcsSUFBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7WUFBVyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ3ZELElBQUcsSUFBSSxDQUFDLElBQUks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QUFDLENBQUM7UUFDL0IsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO0lBQ3hCLENBQUM7O2dCQS9ESixTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFFLGlDQUFpQztvQkFDM0MsczdCQUEwRDs7aUJBRTdEOzs7O2dCQVBRLGNBQWM7Z0JBQ2Qsc0JBQXNCOzs7dUJBUTFCLEtBQUs7O0lBMkRWLHdDQUFDO0NBQUEsQUFqRUQsSUFpRUM7U0E1RFksaUNBQWlDOzs7SUFDMUMsaURBQW1COztJQUNuQixpREFBa0I7O0lBQ2xCLHdEQUEwQjs7SUFDMUIsaURBQWlCOztJQUNqQixxREFBaUI7O0lBQ2pCLHdEQUFrQjs7SUFDbEIsMERBQXVDOztJQUN2QyxzREFBOEI7O0lBQzlCLDREQUFnRDs7SUFDaEQsc0RBQW1DOztJQUNuQyxvREFBZ0I7Ozs7O0lBRUosMERBQXNDOzs7OztJQUM5QyxtRUFBc0Q7Ozs7O0FBZ0Q5RCxzQ0FHQzs7O0lBRkcsOEJBQVc7O0lBQ1gsZ0NBQVkiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUNvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBzdGFydFdpdGgsIG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHsgRmlsdGVyQ29tcG9uZW50IH0gZnJvbSAnLi4vZmlsdGVyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBGaWx0ZXJzU2VydmljZSB9IGZyb20gJy4uL2ZpbHRlcnMuc2VydmljZSc7XG5pbXBvcnQgeyBGaWx0ZXJDb250YWluZXJTZXJ2aWNlIH0gZnJvbSAnLi4vZmlsdGVyLWNvbnRhaW5lci5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICd0b2NvLXNlbGVjdC1hdXRvY29tcGxldGUtZmlsdGVyJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vc2VsZWN0LWF1dG9jb21wbGV0ZS1maWx0ZXIuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL3NlbGVjdC1hdXRvY29tcGxldGUtZmlsdGVyLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgU2VsZWN0QXV0b2NvbXBsZXRlRmlsdGVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBGaWx0ZXJDb21wb25lbnQge1xuICAgIEBJbnB1dCgpIGRhdGE6IGFueTtcbiAgICB0eXBlOiBzdHJpbmcgPSAnJztcbiAgICBwbGFjZWhvbGRlcjogIHN0cmluZyA9ICcnO1xuICAgIHRleHQ6c3RyaW5nID0gJyc7XG4gICAgbXVsdGlwbGUgPSBmYWxzZTtcbiAgICBzZWxlY3RWYWx1ZTpzdHJpbmdcbiAgICBzZWxlY3RPcHRpb25zOiBWYWx1ZUluZm9ybWF0aW9uW10gPSBbXTtcbiAgICBteUNvbnRyb2wgPSBuZXcgRm9ybUNvbnRyb2woKTtcbiAgICBmaWx0ZXJlZE9wdGlvbnM6IE9ic2VydmFibGU8VmFsdWVJbmZvcm1hdGlvbltdPjtcbiAgICBjaGlwc0xpc3Q6IFZhbHVlSW5mb3JtYXRpb25bXSA9IFtdO1xuICAgIGlucHV0SWQ6IHN0cmluZztcbiAgICBcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGZpbHRlclNlcnZpY2UgOiBGaWx0ZXJzU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBmaWx0ZXJDb250YWluZXJTZXJ2aWNlOiBGaWx0ZXJDb250YWluZXJTZXJ2aWNlICApXG4gICAgeyB9ICBcblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICBpZih0aGlzLmRhdGEudHlwZSkgICAgICAgICAgdGhpcy50eXBlID0gdGhpcy5kYXRhLnR5cGU7XG4gICAgICAgIGlmKHRoaXMuZGF0YS5wbGFjZWhvbGRlcikgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5kYXRhLnBsYWNlaG9sZGVyO1xuICAgICAgICBpZih0aGlzLm11bHRpcGxlKSAgICAgICAgICAgdGhpcy5tdWx0aXBsZSA9IHRydWU7XG4gICAgICAgIGlmKHRoaXMuZGF0YS5zZWxlY3RPcHRpb25zKSB0aGlzLnNlbGVjdE9wdGlvbnMgPSB0aGlzLmRhdGEuc2VsZWN0T3B0aW9ucztcbiAgICAgICAgdGhpcy5kYXRhLnZhbHVlPScnO1xuICAgICAgICB0aGlzLmZpbHRlcmVkT3B0aW9ucyA9IHRoaXMubXlDb250cm9sLnZhbHVlQ2hhbmdlcy5waXBlPHN0cmluZyxWYWx1ZUluZm9ybWF0aW9uW10+KFxuICAgICAgICAgICAgc3RhcnRXaXRoKCcnKSxcbiAgICAgICAgICAgIG1hcCh2YWx1ZSA9PiB0aGlzLl9maWx0ZXIodmFsdWUpKVxuICAgICAgICApO1xuICAgICAgICB0aGlzLmlucHV0SWQgPSB0aGlzLnBsYWNlaG9sZGVyLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICBwcml2YXRlIF9maWx0ZXIodmFsdWU6IHN0cmluZyk6IFZhbHVlSW5mb3JtYXRpb25bXSB7XG4gICAgICAgIGNvbnN0IGZpbHRlclZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0T3B0aW9ucy5maWx0ZXIob3B0aW9uID0+IG9wdGlvbi5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZmlsdGVyVmFsdWUpKTtcbiAgICB9XG4gICAgcmVtb3ZlX2NvbXBvbmVudCgpe1xuICAgICAgICB0aGlzLmZpbHRlclNlcnZpY2UuZGVsZXRlUGFyYW1ldGVyKHRoaXMuZGF0YS5maWVsZCk7XG4gICAgICAgIHRoaXMuZmlsdGVyQ29udGFpbmVyU2VydmljZS5maWx0ZXJEZWxldGVkKHRoaXMuZGF0YS5pbmRleClcbiAgICAgICAgdGhpcy5maWx0ZXJTZXJ2aWNlLmNoYW5nZUF1dG9jb21wbGV0ZUZpbHRlcih0aGlzLmRhdGEuaWRWb2NhYiwgJ09SJyk7XG4gICAgfVxuICAgIG9wdGlvblNlbGVjdCgpe1xuICAgICAgICB2YXIgdmFsdWVFbWl0ZXIgPSdPUic7XG4gICAgICAgIHRoaXMuY2hpcHNMaXN0LmZvckVhY2goY2hpcCA9PntcbiAgICAgICAgICAgIHZhbHVlRW1pdGVyPSB2YWx1ZUVtaXRlcisnLCcrY2hpcC5pZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZmlsdGVyU2VydmljZS5jaGFuZ2VBdXRvY29tcGxldGVGaWx0ZXIodGhpcy5kYXRhLmlkVm9jYWIsIHZhbHVlRW1pdGVyKTtcbiAgICB9XG4gICAgYWRkQ2hpcHModmFsdWU6IFZhbHVlSW5mb3JtYXRpb24pe1xuICAgICAgICB0aGlzLmNoaXBzTGlzdC51bnNoaWZ0KHZhbHVlKTtcbiAgICAgICAgdGhpcy5teUNvbnRyb2wuc2V0VmFsdWUoJycpO1xuICAgICAgICB0aGlzLmZpbHRlcmVkT3B0aW9ucyA9IHRoaXMubXlDb250cm9sLnZhbHVlQ2hhbmdlcy5waXBlKFxuICAgICAgICAgICAgc3RhcnRXaXRoKCcnKSxcbiAgICAgICAgICAgIG1hcCh2YWx1ZSA9PiB0aGlzLl9maWx0ZXIodmFsdWUpKVxuICAgICAgICApO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlucHV0SWQpLmJsdXIoKTtcbiAgICAgICAgdGhpcy5vcHRpb25TZWxlY3QoKVxuICAgIH1cbiAgICByZW1vdmVDaGlwKGluZGV4OiBudW1iZXIpe1xuICAgICAgICB0aGlzLmNoaXBzTGlzdC5zcGxpY2UoaW5kZXgsMSk7XG4gICAgICAgIHRoaXMub3B0aW9uU2VsZWN0KCk7XG4gICAgfVxuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsdWVJbmZvcm1hdGlvbntcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6c3RyaW5nO1xufVxuIl19