/**
 * @fileoverview added by tsickle
 * Generated from: lib/organizations/org-view/org-view.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input } from '@angular/core';
import { Organization } from '../../entities/public-api';
import { OrgViewAccordionType } from './org-view-accordion/org-view-accordion.component';
/**
 * @record
 */
export function RelationshipLink() { }
if (false) {
    /** @type {?} */
    RelationshipLink.prototype.url;
    /** @type {?} */
    RelationshipLink.prototype.name;
}
/**
 * @record
 */
export function RelationshipsValue() { }
if (false) {
    /** @type {?} */
    RelationshipsValue.prototype.links;
}
var OrgViewComponent = /** @class */ (function () {
    function OrgViewComponent() {
        this.showContent = true;
        this.orgViewAccordionType = OrgViewAccordionType;
        this.org = undefined;
    }
    /**
     * @return {?}
     */
    OrgViewComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // si se recibe un objeto que no tiene todos los campos.
        /** @type {?} */
        var org_full = new Organization();
        org_full.deepcopy(this.org);
        this.org = org_full;
        this._panelsTitle_Relationships = ['Organizaciones Padres', 'Organizaciones Hijas', 'Organizaciones Relacionadas'];
        this._relationshipsValue = this._createRelationshipsValue();
        this._addressesValue = this._createAddressesValue(); /* This initialization is first than the `_panelsTitle_Addresses` initialization. */
        // this._panelsTitle_Addresses = (this.org.addresses) ? this._createPanelsTitle_Generic(this.orgViewAccordionType.Addresses, this.org.addresses.length) : [ ];
        this._panelsTitle_Addresses = this._createPanelsTitle_Addresses();
    };
    /**
     * @return {?}
     */
    OrgViewComponent.prototype.ngOnChanges = /**
     * @return {?}
     */
    function () {
        this.ngOnInit();
    };
    /**
     * Creates a generic array of panels title.
     * Usage example:
     * this._panelsTitle_Addresses = (this.org.addresses) ? this._createPanelsTitle_Generic(this.orgViewAccordionType.Addresses, this.org.addresses.length) : [ ];
     * @param orgViewAccordionType The `OrgViewAccordionComponent` type.
     * @param panelsTitleCount Amount of panels title.
     */
    /**
     * Creates a generic array of panels title.
     * Usage example:
     * this._panelsTitle_Addresses = (this.org.addresses) ? this._createPanelsTitle_Generic(this.orgViewAccordionType.Addresses, this.org.addresses.length) : [ ];
     * @private
     * @param {?} orgViewAccordionType The `OrgViewAccordionComponent` type.
     * @param {?} panelsTitleCount Amount of panels title.
     * @return {?}
     */
    OrgViewComponent.prototype._createPanelsTitle_Generic = /**
     * Creates a generic array of panels title.
     * Usage example:
     * this._panelsTitle_Addresses = (this.org.addresses) ? this._createPanelsTitle_Generic(this.orgViewAccordionType.Addresses, this.org.addresses.length) : [ ];
     * @private
     * @param {?} orgViewAccordionType The `OrgViewAccordionComponent` type.
     * @param {?} panelsTitleCount Amount of panels title.
     * @return {?}
     */
    function (orgViewAccordionType, panelsTitleCount) {
        /** @type {?} */
        var panelsTitle = [];
        /* Initializae the `panelsTitle` array. */
        for (var i = 0; i < panelsTitleCount;) {
            panelsTitle.push(orgViewAccordionType + " (" + ++i + ") of (" + panelsTitleCount + ")");
        }
        return panelsTitle;
    };
    /**
     * @private
     * @return {?}
     */
    OrgViewComponent.prototype._createPanelsTitle_Addresses = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var panelsTitle = [];
        /** @type {?} */
        var panelsTitleCount = this._addressesValue.length;
        /* Initializae the `panelsTitle` array. */
        for (var i = 0; i < panelsTitleCount; i++) {
            panelsTitle.push(this._addressesValue[i].city + " | " + this._addressesValue[i].country + " " + ((this._addressesValue[i].primary) ? '(Principal)' : ''));
        }
        return panelsTitle;
    };
    /**
     * @private
     * @return {?}
     */
    OrgViewComponent.prototype._createRelationshipsValue = /**
     * @private
     * @return {?}
     */
    function () {
        var e_1, _a, e_2, _b;
        /* The positions represent:
             * pos = 0 --> Organizaciones Padres
             * pos = 1 --> Organizaciones Hijas
             * pos = 2 --> Organizaciones Relacionadas */
        /** @type {?} */
        var result = [];
        /** @type {?} */
        var pos = -1;
        /** @type {?} */
        var item;
        try {
            for (var _c = tslib_1.__values(this._panelsTitle_Relationships), _d = _c.next(); !_d.done; _d = _c.next()) {
                item = _d.value;
                result.push({
                    'links': []
                });
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
            }
            finally { if (e_1) throw e_1.error; }
        }
        if (this.org.relationships) {
            try {
                for (var _e = tslib_1.__values(this.org.relationships), _f = _e.next(); !_f.done; _f = _e.next()) {
                    item = _f.value;
                    switch (item.type) {
                        case 'parent':
                            {
                                pos = 0;
                                break;
                            }
                        case 'child':
                            {
                                pos = 1;
                                break;
                            }
                        default: /* 'related' */
                            {
                                pos = 2;
                                break;
                            }
                    }
                    result[pos].links.push({
                        // 'url': `${ item.id }/view`,
                        'url': '/' + item.id + '/view',
                        'name': item.label
                    });
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                }
                finally { if (e_2) throw e_2.error; }
            }
        }
        return result;
    };
    /**
     * Returns an array of addresses ordered by the `primary` field of its addresses,
     * the true values are first than the false values.
     */
    /**
     * Returns an array of addresses ordered by the `primary` field of its addresses,
     * the true values are first than the false values.
     * @private
     * @return {?}
     */
    OrgViewComponent.prototype._createAddressesValue = /**
     * Returns an array of addresses ordered by the `primary` field of its addresses,
     * the true values are first than the false values.
     * @private
     * @return {?}
     */
    function () {
        var e_3, _a;
        /** @type {?} */
        var result = [];
        /** @type {?} */
        var noPrimary = [];
        try {
            for (var _b = tslib_1.__values(this.org.addresses), _c = _b.next(); !_c.done; _c = _b.next()) {
                var item = _c.value;
                if (item.primary) {
                    result.push(item);
                }
                else {
                    noPrimary.push(item);
                }
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return result.concat(noPrimary);
    };
    Object.defineProperty(OrgViewComponent.prototype, "getPanelsTitle_Relationships", {
        get: /**
         * @return {?}
         */
        function () {
            return this._panelsTitle_Relationships;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrgViewComponent.prototype, "getValue_Relationships", {
        get: /**
         * @return {?}
         */
        function () {
            return this._relationshipsValue;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrgViewComponent.prototype, "getPanelsTitle_Addresses", {
        get: /**
         * @return {?}
         */
        function () {
            return this._panelsTitle_Addresses;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OrgViewComponent.prototype, "getValue_Addresses", {
        get: /**
         * @return {?}
         */
        function () {
            return this._addressesValue;
        },
        enumerable: true,
        configurable: true
    });
    OrgViewComponent.decorators = [
        { type: Component, args: [{
                    selector: 'toco-org-view',
                    template: "\n<mat-card *ngIf=\"org\" class=\"container-panel-mat-card\" [attr.aria-label]=\"'Muestra la organizaci\u00F3n seleccionada'\">\n  <mat-card-header>\n\n    <!-- <div mat-card-avatar class=\"example-header-image\"></div> -->\n    <mat-card-title class=\"title-padding\">{{ org.name }}</mat-card-title>\n    <mat-card-subtitle class=\"title-padding\">SceibaOrgID: {{ org.id }}</mat-card-subtitle>\n    <mat-card-subtitle *ngIf=\"org.status\" class=\"cursor-default title-padding\">\n      Estatus de la organizaci\u00F3n: {{ org.status }}\n    </mat-card-subtitle>\n\n  </mat-card-header>\n\n  <mat-card-content *ngIf=\"showContent\">\n\n    <static-table *ngIf=\"org.identifiers && org.identifiers.length\" [desc]=\"'Lista de los identificadores de la organizaci\u00F3n'\" [value]=\"org.identifiers\"\n      [columnsObjectProperty]=\"['idtype', 'value']\"\n      [columnsHeaderText]=\"['Identifier type', 'Identifier value']\"\n    >\n    </static-table>\n    <static-chips *ngIf=\"org.aliases && org.aliases.length\" [desc]=\"'Lista de otros nombres con los que se conoce la organizaci\u00F3n'\" [value]=\"org.aliases\"></static-chips>\n    <static-chips *ngIf=\"org.acronyms && org.acronyms.length\" [desc]=\"'Lista de los acr\u00F3nimos con que se conoce la organizaci\u00F3n'\" [value]=\"org.acronyms\"></static-chips>\n    <static-chips *ngIf=\"org.types && org.types.length\" [desc]=\"'Lista de los tipos que describen la organizaci\u00F3n'\" [value]=\"org.types\"></static-chips>\n    <static-text *ngIf=\"org.wikipedia_url\" [desc]=\"'URL de la p\u00E1gina de Wikipedia de la organizaci\u00F3n'\" [value]=\"org.wikipedia_url\"></static-text>\n    <static-text *ngIf=\"org.redirect\" [desc]=\"'URL de la p\u00E1gina originaria de la organizaci\u00F3n'\" [value]=\"org.redirect.properties.value\"></static-text>\n    <static-text *ngIf=\"org.email_address\" [desc]=\"'Correo electr\u00F3nico de contacto de la organizaci\u00F3n'\" [value]=\"org.email_address\"></static-text>\n    <!-- <static-chips *ngIf=\"org.ip_addresses && org.ip_addresses.length\" [desc]=\"'Lista de direcciones IP conocidas que pertenecen a la organizaci\u00F3n'\" [value]=\"org.ip_addresses\"></static-chips> -->\n    <static-text *ngIf=\"org.established\" [desc]=\"'A\u00F1o de fundada la organizaci\u00F3n'\" [value]=\"org.established\"></static-text>\n    <static-text *ngIf=\"org.onei_registry\" [desc]=\"'N\u00FAmero de registro en la ONEI'\" [value]=\"org.onei_registry\"></static-text>\n    <static-chips *ngIf=\"org.links && org.links.length\" [desc]=\"'Lista de los enlaces conocidos de la organizaci\u00F3n'\" [value]=\"org.links\"></static-chips>\n    <static-table *ngIf=\"org.labels && org.labels.length\" [desc]=\"'Nombre de la organizaci\u00F3n en diferentes lenguajes'\" [value]=\"org.labels\"\n      [columnsObjectProperty]=\"['label', 'iso639']\"\n      [columnsHeaderText]=\"['Institute name in a language variant', 'ISO-639-1 language code']\"\n    >\n    </static-table>\n    <toco-org-view-accordion *ngIf=\"org.relationships && org.relationships.length\" [desc]=\"'Relaciones con otras organizaciones'\" [value]=\"getValue_Relationships\"\n      [orgViewAccordionType]=\"orgViewAccordionType.Relationships\"\n      [panelsTitle] = \"getPanelsTitle_Relationships\"\n    >\n    </toco-org-view-accordion>\n    <toco-org-view-accordion *ngIf=\"org.addresses && org.addresses.length\" [desc]=\"'Direcciones conocidas de la organizaci\u00F3n'\" [value]=\"getValue_Addresses\"\n      [orgViewAccordionType]=\"orgViewAccordionType.Addresses\"\n      [panelsTitle] = \"getPanelsTitle_Addresses\"\n    >\n    </toco-org-view-accordion>\n\n  </mat-card-content>\n</mat-card>\n",
                    styles: [".cursor-default{cursor:default}.title-padding{padding:0 0 0 .1em}.example-header-image{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}.form-container{display:flex;flex-direction:column;justify-content:start;width:40%}"]
                }] }
    ];
    /** @nocollapse */
    OrgViewComponent.ctorParameters = function () { return []; };
    OrgViewComponent.propDecorators = {
        org: [{ type: Input }],
        showContent: [{ type: Input }]
    };
    return OrgViewComponent;
}());
export { OrgViewComponent };
if (false) {
    /**
     * Represents the `OrgViewAccordionType` enum for internal use.
     * @type {?}
     */
    OrgViewComponent.prototype.orgViewAccordionType;
    /**
     * Represents the current organization.
     * @type {?}
     */
    OrgViewComponent.prototype.org;
    /** @type {?} */
    OrgViewComponent.prototype.showContent;
    /**
     * @type {?}
     * @private
     */
    OrgViewComponent.prototype._panelsTitle_Relationships;
    /**
     * @type {?}
     * @private
     */
    OrgViewComponent.prototype._relationshipsValue;
    /**
     * @type {?}
     * @private
     */
    OrgViewComponent.prototype._panelsTitle_Addresses;
    /**
     * @type {?}
     * @private
     */
    OrgViewComponent.prototype._addressesValue;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JnLXZpZXcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vdG9jby1saWIvIiwic291cmNlcyI6WyJsaWIvb3JnYW5pemF0aW9ucy9vcmctdmlldy9vcmctdmlldy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQXFCLE1BQU0sZUFBZSxDQUFDO0FBQ3BFLE9BQU8sRUFBVyxZQUFZLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUNsRSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxtREFBbUQsQ0FBQzs7OztBQUl6RixzQ0FJQzs7O0lBRkMsK0JBQVk7O0lBQ1osZ0NBQWE7Ozs7O0FBR2Ysd0NBR0M7OztJQURDLG1DQUEwQjs7QUFHNUI7SUEyQkU7UUFSTyxnQkFBVyxHQUFZLElBQUksQ0FBQztRQVVqQyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsb0JBQW9CLENBQUM7UUFFakQsSUFBSSxDQUFDLEdBQUcsR0FBRyxTQUFTLENBQUM7SUFDdkIsQ0FBQzs7OztJQUVNLG1DQUFROzs7SUFBZjs7O1lBR00sUUFBUSxHQUFHLElBQUksWUFBWSxFQUFFO1FBQ2pDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxHQUFHLEdBQUcsUUFBUSxDQUFDO1FBRXBCLElBQUksQ0FBQywwQkFBMEIsR0FBRyxDQUFDLHVCQUF1QixFQUFFLHNCQUFzQixFQUFFLDZCQUE2QixDQUFDLENBQUM7UUFDbkgsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxDQUFDO1FBRTVELElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUMsQ0FBRSxvRkFBb0Y7UUFDMUksOEpBQThKO1FBQzlKLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxJQUFJLENBQUMsNEJBQTRCLEVBQUUsQ0FB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QUFPLEVBQ2hCO29CQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQ25CO3FCQUVEO29CQUNFLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQ3RCO2FBQ0Y7Ozs7Ozs7OztRQUVELE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNsQyxDQUFDO0lBRUQsc0JBQVcsMERBQTRCOzs7O1FBQXZDO1lBRUUsT0FBTyxJQUFJLENBQUMsMEJBQTBCLENBQUM7UUFDekMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBVyxvREFBc0I7Ozs7UUFBakM7WUFFRSxPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztRQUNsQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFXLHNEQUF3Qjs7OztRQUFuQztZQUVFLE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDO1FBQ3JDLENBQUM7OztPQUFBO0lBRUQsc0JBQVcsZ0RBQWtCOzs7O1FBQTdCO1lBRUUsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDO1FBQzlCLENBQUM7OztPQUFBOztnQkFyTEYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSxlQUFlO29CQUN6QixpbUhBQXdDOztpQkFFekM7Ozs7O3NCQVdFLEtBQUs7OEJBR0wsS0FBSzs7SUFvS1IsdUJBQUM7Q0FBQSxBQXRMRCxJQXNMQztTQWpMWSxnQkFBZ0I7Ozs7OztJQUszQixnREFBa0U7Ozs7O0lBS2xFLCtCQUN5Qjs7SUFFekIsdUNBQ21DOzs7OztJQUVuQyxzREFBNkM7Ozs7O0lBQzdDLCtDQUFrRDs7Ozs7SUFFbEQsa0RBQXlDOzs7OztJQUN6QywyQ0FBbUMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uQ2hhbmdlcywgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBZGRyZXNzLCBPcmdhbml6YXRpb24gfSBmcm9tICcuLi8uLi9lbnRpdGllcy9wdWJsaWMtYXBpJztcbmltcG9ydCB7IE9yZ1ZpZXdBY2NvcmRpb25UeXBlIH0gZnJvbSAnLi9vcmctdmlldy1hY2NvcmRpb24vb3JnLXZpZXctYWNjb3JkaW9uLmNvbXBvbmVudCc7XG5cblxuXG5leHBvcnQgaW50ZXJmYWNlIFJlbGF0aW9uc2hpcExpbmtcbntcbiAgdXJsOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWxhdGlvbnNoaXBzVmFsdWVcbntcbiAgbGlua3M6IFJlbGF0aW9uc2hpcExpbmtbXTtcbn1cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndG9jby1vcmctdmlldycsXG4gIHRlbXBsYXRlVXJsOiAnLi9vcmctdmlldy5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL29yZy12aWV3LmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgT3JnVmlld0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzXG57XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50cyB0aGUgYE9yZ1ZpZXdBY2NvcmRpb25UeXBlYCBlbnVtIGZvciBpbnRlcm5hbCB1c2UuXG4gICAgICovXG4gIHB1YmxpYyByZWFkb25seSBvcmdWaWV3QWNjb3JkaW9uVHlwZTogdHlwZW9mIE9yZ1ZpZXdBY2NvcmRpb25UeXBlO1xuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSBjdXJyZW50IG9yZ2FuaXphdGlvbi5cbiAgICovXG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBvcmc6IE9yZ2FuaXphdGlvbjtcblxuICBASW5wdXQoKVxuICBwdWJsaWMgc2hvd0NvbnRlbnQ6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHByaXZhdGUgX3BhbmVsc1RpdGxlX1JlbGF0aW9uc2hpcHM6IHN0cmluZ1tdO1xuICBwcml2YXRlIF9yZWxhdGlvbnNoaXBzVmFsdWU6IFJlbGF0aW9uc2hpcHNWYWx1ZVtdO1xuXG4gIHByaXZhdGUgX3BhbmVsc1RpdGxlX0FkZHJlc3Nlczogc3RyaW5nW107XG4gIHByaXZhdGUgX2FkZHJlc3Nlc1ZhbHVlOiBBZGRyZXNzW107XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKClcbiAge1xuICAgIHRoaXMub3JnVmlld0FjY29yZGlvblR5cGUgPSBPcmdWaWV3QWNjb3JkaW9uVHlwZTtcblxuICAgIHRoaXMub3JnID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgcHVibGljIG5nT25Jbml0KCk6IHZvaWRcbiAge1xuICAgIC8vIHNpIHNlIHJlY2liZSB1biBvYmpldG8gcXVlIG5vIHRpZW5lIHRvZG9zIGxvcyBjYW1wb3MuXG4gICAgbGV0IG9yZ19mdWxsID0gbmV3IE9yZ2FuaXphdGlvbigpO1xuICAgIG9yZ19mdWxsLmRlZXBjb3B5KHRoaXMub3JnKTtcbiAgICB0aGlzLm9yZyA9IG9yZ19mdWxsO1xuXG4gICAgdGhpcy5fcGFuZWxzVGl0bGVfUmVsYXRpb25zaGlwcyA9IFsnT3JnYW5pemFjaW9uZXMgUGFkcmVzJywgJ09yZ2FuaXphY2lvbmVzIEhpamFzJywgJ09yZ2FuaXphY2lvbmVzIFJlbGFjaW9uYWRhcyddO1xuICAgIHRoaXMuX3JlbGF0aW9uc2hpcHNWYWx1ZSA9IHRoaXMuX2NyZWF0ZVJlbGF0aW9uc2hpcHNWYWx1ZSgpO1xuXG4gICAgdGhpcy5fYWRkcmVzc2VzVmFsdWUgPSB0aGlzLl9jcmVhdGVBZGRyZXNzZXNWYWx1ZSgpOyAgLyogVGhpcyBpbml0aWFsaXphdGlvbiBpcyBmaXJzdCB0aGFuIHRoZSBgX3BhbmVsc1RpdGxlX0FkZHJlc3Nlc2AgaW5pdGlhbGl6YXRpb24uICovXG4gICAgLy8gdGhpcy5fcGFuZWxzVGl0bGVfQWRkcmVzc2VzID0gKHRoaXMub3JnLmFkZHJlc3NlcykgPyB0aGlzLl9jcmVhdGVQYW5lbHNUaXRsZV9HZW5lcmljKHRoaXMub3JnVmlld0FjY29yZGlvblR5cGUuQWRkcmVzc2VzLCB0aGlzLm9yZy5hZGRyZXNzZXMubGVuZ3RoKSA6IFsgXTtcbiAgICB0aGlzLl9wYW5lbHNUaXRsZV9BZGRyZXNzZXMgPSB0aGlzLl9jcmVhdGVQYW5lbHNUaXRsZV9BZGRyZXNzZXMoKTtcbiAgfVxuICBwdWJsaWMgbmdPbkNoYW5nZXMoKTogdm9pZFxuICB7XG4gICAgdGhpcy5uZ09uSW5pdCgpO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZ2VuZXJpYyBhcnJheSBvZiBwYW5lbHMgdGl0bGUuXG4gICAqIFVzYWdlIGV4YW1wbGU6XG4gICAqIHRoaXMuX3BhbmVsc1RpdGxlX0FkZHJlc3NlcyA9ICh0aGlzLm9yZy5hZGRyZXNzZXMpID8gdGhpcy5fY3JlYXRlUGFuZWxzVGl0bGVfR2VuZXJpYyh0aGlzLm9yZ1ZpZXdBY2NvcmRpb25UeXBlLkFkZHJlc3NlcywgdGhpcy5vcmcuYWRkcmVzc2VzLmxlbmd0aCkgOiBbIF07XG4gICAqIEBwYXJhbSBvcmdWaWV3QWNjb3JkaW9uVHlwZSBUaGUgYE9yZ1ZpZXdBY2NvcmRpb25Db21wb25lbnRgIHR5cGUuXG4gICAqIEBwYXJhbSBwYW5lbHNUaXRsZUNvdW50IEFtb3VudCBvZiBwYW5lbHMgdGl0bGUuXG4gICAqL1xuICBwcml2YXRlIF9jcmVhdGVQYW5lbHNUaXRsZV9HZW5lcmljKG9yZ1ZpZXdBY2NvcmRpb25UeXBlOiBPcmdWaWV3QWNjb3JkaW9uVHlwZSwgcGFuZWxzVGl0bGVDb3VudDogbnVtYmVyKTogc3RyaW5nW11cbiAge1xuICAgIGxldCBwYW5lbHNUaXRsZTogc3RyaW5nW10gPSBbIF07XG5cbiAgICAvKiBJbml0aWFsaXphZSB0aGUgYHBhbmVsc1RpdGxlYCBhcnJheS4gKi9cbiAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgcGFuZWxzVGl0bGVDb3VudDsgKVxuICAgIHtcbiAgICAgIHBhbmVsc1RpdGxlLnB1c2goYCR7IG9yZ1ZpZXdBY2NvcmRpb25UeXBlIH0gKCR7ICsraSB9KSBvZiAoJHsgcGFuZWxzVGl0bGVDb3VudCB9KWApO1xuICAgIH1cblxuICAgIHJldHVybiBwYW5lbHNUaXRsZTtcbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZVBhbmVsc1RpdGxlX0FkZHJlc3NlcygpOiBzdHJpbmdbXVxuICB7XG4gICAgbGV0IHBhbmVsc1RpdGxlOiBzdHJpbmdbXSA9IFsgXTtcbiAgICBsZXQgcGFuZWxzVGl0bGVDb3VudCA9IHRoaXMuX2FkZHJlc3Nlc1ZhbHVlLmxlbmd0aDtcblxuICAgIC8qIEluaXRpYWxpemFlIHRoZSBgcGFuZWxzVGl0bGVgIGFycmF5LiAqL1xuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBwYW5lbHNUaXRsZUNvdW50OyBpKyspXG4gICAge1xuICAgICAgcGFuZWxzVGl0bGUucHVzaChgJHsgdGhpcy5fYWRkcmVzc2VzVmFsdWVbaV0uY2l0eSB9IHwgJHsgdGhpcy5fYWRkcmVzc2VzVmFsdWVbaV0uY291bnRyeSB9ICR7ICh0aGlzLl9hZGRyZXNzZXNWYWx1ZVtpXS5wcmltYXJ5KSA/ICcoUHJpbmNpcGFsKScgOiAnJyB9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhbmVsc1RpdGxlO1xuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlUmVsYXRpb25zaGlwc1ZhbHVlKCk6IFJlbGF0aW9uc2hpcHNWYWx1ZVtdXG4gIHtcbiAgICAvKiBUaGUgcG9zaXRpb25zIHJlcHJlc2VudDpcbiAgICAgKiBwb3MgPSAwIC0tPiBPcmdhbml6YWNpb25lcyBQYWRyZXNcbiAgICAgKiBwb3MgPSAxIC0tPiBPcmdhbml6YWNpb25lcyBIaWphc1xuICAgICAqIHBvcyA9IDIgLS0+IE9yZ2FuaXphY2lvbmVzIFJlbGFjaW9uYWRhcyAqL1xuICAgIGxldCByZXN1bHQ6IFJlbGF0aW9uc2hpcHNWYWx1ZVtdID0gWyBdO1xuICAgIGxldCBwb3M6IG51bWJlciA9IC0xO1xuICAgIGxldCBpdGVtOiBhbnk7XG5cbiAgICBmb3IoaXRlbSBvZiB0aGlzLl9wYW5lbHNUaXRsZV9SZWxhdGlvbnNoaXBzKVxuICAgIHtcbiAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgJ2xpbmtzJzogWyBdXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcmcucmVsYXRpb25zaGlwcylcbiAgICB7XG4gICAgICBmb3IoaXRlbSBvZiB0aGlzLm9yZy5yZWxhdGlvbnNoaXBzKVxuICAgICAge1xuICAgICAgICBzd2l0Y2goaXRlbS50eXBlKVxuICAgICAgICB7XG4gICAgICAgICAgY2FzZSAncGFyZW50JzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBwb3MgPSAwO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAnY2hpbGQnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHBvcyA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkZWZhdWx0OiAgLyogJ3JlbGF0ZWQnICovXG4gICAgICAgICAge1xuICAgICAgICAgICAgcG9zID0gMjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdFtwb3NdLmxpbmtzLnB1c2goe1xuICAgICAgICAgIC8vICd1cmwnOiBgJHsgaXRlbS5pZCB9L3ZpZXdgLFxuICAgICAgICAgICd1cmwnOiAnLycgKyBpdGVtLmlkICArICcvdmlldycsXG4gICAgICAgICAgJ25hbWUnOiBpdGVtLmxhYmVsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBhcnJheSBvZiBhZGRyZXNzZXMgb3JkZXJlZCBieSB0aGUgYHByaW1hcnlgIGZpZWxkIG9mIGl0cyBhZGRyZXNzZXMsXG4gICAqIHRoZSB0cnVlIHZhbHVlcyBhcmUgZmlyc3QgdGhhbiB0aGUgZmFsc2UgdmFsdWVzLlxuICAgKi9cbiAgcHJpdmF0ZSBfY3JlYXRlQWRkcmVzc2VzVmFsdWUoKTogQWRkcmVzc1tdXG4gIHtcbiAgICBsZXQgcmVzdWx0OiBBZGRyZXNzW10gPSBbIF07XG4gICAgbGV0IG5vUHJpbWFyeTogQWRkcmVzc1tdID0gWyBdO1xuXG4gICAgZm9yKGxldCBpdGVtIG9mIHRoaXMub3JnLmFkZHJlc3NlcylcbiAgICB7XG4gICAgICBpZiAoaXRlbS5wcmltYXJ5KVxuICAgICAge1xuICAgICAgICByZXN1bHQucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICAgIGVsc2VcbiAgICAgIHtcbiAgICAgICAgbm9QcmltYXJ5LnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5jb25jYXQobm9QcmltYXJ5KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgZ2V0UGFuZWxzVGl0bGVfUmVsYXRpb25zaGlwcygpOiBzdHJpbmdbXVxuICB7XG4gICAgcmV0dXJuIHRoaXMuX3BhbmVsc1RpdGxlX1JlbGF0aW9uc2hpcHM7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGdldFZhbHVlX1JlbGF0aW9uc2hpcHMoKTogUmVsYXRpb25zaGlwc1ZhbHVlW11cbiAge1xuICAgIHJldHVybiB0aGlzLl9yZWxhdGlvbnNoaXBzVmFsdWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGdldFBhbmVsc1RpdGxlX0FkZHJlc3NlcygpOiBzdHJpbmdbXVxuICB7XG4gICAgcmV0dXJuIHRoaXMuX3BhbmVsc1RpdGxlX0FkZHJlc3NlcztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgZ2V0VmFsdWVfQWRkcmVzc2VzKCk6IEFkZHJlc3NbXVxuICB7XG4gICAgcmV0dXJuIHRoaXMuX2FkZHJlc3Nlc1ZhbHVlO1xuICB9XG59XG4iXX0=