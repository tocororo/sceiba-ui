/**
 * @fileoverview added by tsickle
 * Generated from: lib/taxonomy/term-generic/term-generic.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 *   Copyright (c) 2020 Universidad de Pinar del Río "Hermanos Saíz Montes de Oca"
 *   All rights reserved.
 */
import { Component, Inject } from "@angular/core";
import { MAT_DIALOG_DATA } from "@angular/material/dialog";
import { FormFieldType, HintValue, HintPosition } from "../../forms/public-api";
import { Term, TermInstitutionData, EntityBase, TermIndexData, VocabulariesInmutableNames } from "../../entities/public-api";
import { FormBuilder } from "@angular/forms";
import { MatSnackBar } from "@angular/material";
export class TermGenericComponent {
    /**
     * @param {?} _formBuilder
     * @param {?} _snackBar
     * @param {?} data
     */
    constructor(_formBuilder, _snackBar, data) {
        this._formBuilder = _formBuilder;
        this._snackBar = _snackBar;
        this.data = data;
        this.panels = [];
        this.actionLabel = "Adicionar";
        // term: Term;
        this.hasService = false;
        if (data.accept && data.currentVocab) {
            this.accept = data.accept;
            this.hasService = true;
            this.vocab = data.currentVocab;
            if (data.term) {
                this.actionLabel = "Actualizar";
                if (!this.data.term.data) {
                    this.data.term.data = this._getTermDataObject();
                }
            }
            else {
                this.data.term = new Term();
                this.data.term.isNew = true;
                this.data.term.vocabulary_id = data.currentVocab.id;
            }
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.formGroup = this._formBuilder.group({});
        this.panels = [
            {
                title: "Término",
                description: "",
                iconName: "",
                formSection: this.formGroup,
                formSectionContent: this._getContent()
            }
        ];
        this.action = {
            /**
             * @param {?} data
             * @return {?}
             */
            doit(data) {
                if (this.formGroup.valid) {
                    // get the result from formGroup
                    /** @type {?} */
                    const result = new Term();
                    result.deepcopy(this.data.term);
                    result.deepcopy(this.formGroup.value);
                    result.data = this._getTermDataObject();
                    result.data.deepcopy(this.formGroup.value);
                    // Set the parent term, if any
                    /** @type {?} */
                    const parent = this.formGroup.value["parent_id"];
                    if (parent && parent[0]) {
                        result.parent_id = parent[0].id;
                    }
                    else {
                        result.parent_id = null;
                    }
                    // if the term is an index, then set miar_class and group_mes
                    // clasifications
                    if (this.vocab.id == VocabulariesInmutableNames.INDEXES) {
                        result.class_ids = [];
                        /** @type {?} */
                        const miar = this.formGroup.value["miar_class"];
                        /** @type {?} */
                        const mes = this.formGroup.value["group_mes"];
                        if (miar && miar[0]) {
                            result.class_ids.push(miar[0].id);
                        }
                        if (mes && mes[0]) {
                            result.class_ids.push(mes[0].id);
                        }
                    }
                    this.accept((/** @type {?} */ (result)));
                }
            }
        };
    }
    /**
     * Returns the panel's content.
     * @private
     * @return {?}
     */
    _getContent() {
        // TODO: use TermHelper
        switch (this.vocab.id) {
            case VocabulariesInmutableNames.CUBAN_INTITUTIONS:
                return [
                    {
                        name: "name",
                        label: "Nombre",
                        type: FormFieldType.text,
                        required: true,
                        value: this.data.term.name ? this.data.term.name : null,
                        width: "100%"
                    },
                    {
                        name: "grid",
                        label: "Identificador GRID",
                        type: FormFieldType.text,
                        required: false,
                        value: this.data.term.data.grid ? this.data.term.data.grid : null,
                        width: "50%"
                    },
                    {
                        name: "description",
                        label: "Descripción",
                        type: FormFieldType.textarea,
                        required: false,
                        value: this.data.term.description
                            ? this.data.term.description
                            : null,
                        width: "100%"
                    },
                    {
                        name: "email",
                        label: "Email",
                        type: FormFieldType.email,
                        required: true,
                        value: this.data.term.data.email ? this.data.term.data.email : null,
                        width: "45%"
                    },
                    {
                        name: "website",
                        label: "Sitio Web Oficial",
                        type: FormFieldType.url,
                        required: false,
                        value: this.data.term.data.website
                            ? this.data.term.data.website
                            : null,
                        width: "45%"
                    },
                    {
                        name: "address",
                        label: "Dirección",
                        type: FormFieldType.textarea,
                        required: false,
                        value: this.data.term.data.address
                            ? this.data.term.data.address
                            : null,
                        width: "100%"
                    },
                    {
                        name: "parent_id",
                        label: "Jerarquía Institucional (Institución Superior)",
                        type: FormFieldType.vocabulary,
                        required: false,
                        extraContent: {
                            multiple: false,
                            selectedTermsIds: this.data.term.parent_id
                                ? [this.data.term.parent_id]
                                : null,
                            vocab: this.vocab.id
                        },
                        width: "100%"
                    }
                ];
            case VocabulariesInmutableNames.INDEXES:
                return [
                    {
                        name: "name",
                        label: "Nombre",
                        type: FormFieldType.text,
                        required: true,
                        value: this.data.term.name ? this.data.term.name : null,
                        width: "100%"
                    },
                    {
                        name: "url",
                        label: "URL",
                        type: FormFieldType.url,
                        required: false,
                        value: this.data.term.data.url ? this.data.term.data.url : null,
                        width: "100%"
                    },
                    {
                        name: "abrev",
                        label: "Identificadores",
                        type: FormFieldType.text,
                        required: false,
                        value: this.data.term.data.abrev ? this.data.term.data.abrev : null,
                        width: "30%"
                    },
                    {
                        name: "initial_cover",
                        label: "Cobertura inicio",
                        type: FormFieldType.text,
                        required: false,
                        value: this.data.term.data.initial_cover
                            ? this.data.term.data.initial_cover
                            : null,
                        width: "30%"
                    },
                    {
                        name: "end_cover",
                        label: "Cobertura",
                        type: FormFieldType.text,
                        required: false,
                        value: this.data.term.data.end_cover
                            ? this.data.term.data.end_cover
                            : null,
                        width: "30%"
                    },
                    {
                        name: "description",
                        label: "Descripción",
                        type: FormFieldType.textarea,
                        required: false,
                        value: this.data.term.description
                            ? this.data.term.description
                            : null,
                        width: "100%"
                    },
                    {
                        name: "miar_class",
                        label: "Tipología de sistemas de indización",
                        type: FormFieldType.vocabulary,
                        required: false,
                        extraContent: {
                            multiple: false,
                            selectedTermsIds: this.data.term.class_ids
                                ? this.data.term.class_ids
                                : null,
                            vocab: VocabulariesInmutableNames.INDEXES_CLASIFICATION
                        },
                        width: "48%"
                    },
                    {
                        name: "group_mes",
                        label: "Grupos, Categorías según criterios de “calidad” de las publicaciones ",
                        type: FormFieldType.vocabulary,
                        startHint: new HintValue(HintPosition.start, ""),
                        required: false,
                        extraContent: {
                            multiple: false,
                            selectedTermsIds: this.data.term.class_ids
                                ? this.data.term.class_ids
                                : null,
                            vocab: VocabulariesInmutableNames.INDEXES_CLASIFICATION
                        },
                        width: "48%"
                    }
                ];
            default:
                return [
                    {
                        name: "name",
                        label: "Nombre",
                        type: FormFieldType.text,
                        required: true,
                        width: "100%",
                        value: this.data.term.name ? this.data.term.name : null
                    },
                    {
                        name: "description",
                        label: "Descripción",
                        type: FormFieldType.textarea,
                        required: false,
                        width: "100%",
                        value: this.data.term.description
                            ? this.data.term.description
                            : null
                    },
                    {
                        name: "parent_id",
                        label: "Término Padre",
                        type: FormFieldType.vocabulary,
                        startHint: new HintValue(HintPosition.start, ""),
                        required: false,
                        extraContent: {
                            multiple: false,
                            selectedTermsIds: this.data.term.parent_id
                                ? [this.data.term.parent_id]
                                : null,
                            vocab: this.vocab.id
                        },
                        width: "50%"
                    }
                ];
        }
    }
    /**
     * @private
     * @return {?}
     */
    _getTermDataObject() {
        switch (this.vocab.id) {
            case VocabulariesInmutableNames.CUBAN_INTITUTIONS:
                return new TermInstitutionData();
            case VocabulariesInmutableNames.INDEXES:
                return new TermIndexData();
            default:
                return new EntityBase();
        }
    }
}
TermGenericComponent.decorators = [
    { type: Component, args: [{
                selector: "toco-term-generic",
                template: "\n<toco-form-container\n    [panelsContent]=\"panels\"\n    [useAccordion]=\"'false'\"\n    [action]=\"action\"\n    [actionLabel]=\"actionLabel\"\n    [formGroup]=\"formGroup\"\n></toco-form-container>\n\n<h2 *ngIf=\"!hasService\"> No Service</h2>\n",
                styles: [""]
            }] }
];
/** @nocollapse */
TermGenericComponent.ctorParameters = () => [
    { type: FormBuilder },
    { type: MatSnackBar },
    { type: undefined, decorators: [{ type: Inject, args: [MAT_DIALOG_DATA,] }] }
];
if (false) {
    /** @type {?} */
    TermGenericComponent.prototype.panels;
    /** @type {?} */
    TermGenericComponent.prototype.formGroup;
    /** @type {?} */
    TermGenericComponent.prototype.action;
    /** @type {?} */
    TermGenericComponent.prototype.actionLabel;
    /** @type {?} */
    TermGenericComponent.prototype.hasService;
    /** @type {?} */
    TermGenericComponent.prototype.accept;
    /** @type {?} */
    TermGenericComponent.prototype.vocab;
    /**
     * @type {?}
     * @private
     */
    TermGenericComponent.prototype._formBuilder;
    /** @type {?} */
    TermGenericComponent.prototype._snackBar;
    /**
     * @type {?}
     * @private
     */
    TermGenericComponent.prototype.data;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVybS1nZW5lcmljLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3RvY28tbGliLyIsInNvdXJjZXMiOlsibGliL3RheG9ub215L3Rlcm0tZ2VuZXJpYy90ZXJtLWdlbmVyaWMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUtBLE9BQU8sRUFBRSxTQUFTLEVBQVUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzFELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUUzRCxPQUFPLEVBRU4sYUFBYSxFQUViLFNBQVMsRUFDVCxZQUFZLEVBR1osTUFBTSx3QkFBd0IsQ0FBQztBQUNoQyxPQUFPLEVBQ04sSUFBSSxFQUVKLG1CQUFtQixFQUNuQixVQUFVLEVBQ1YsYUFBYSxFQUNiLDBCQUEwQixFQUMxQixNQUFNLDJCQUEyQixDQUFDO0FBRW5DLE9BQU8sRUFBRSxXQUFXLEVBQWEsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4RCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFRaEQsTUFBTSxPQUFPLG9CQUFvQjs7Ozs7O0lBVWhDLFlBQ1MsWUFBeUIsRUFDMUIsU0FBc0IsRUFDSSxJQUFTO1FBRmxDLGlCQUFZLEdBQVosWUFBWSxDQUFhO1FBQzFCLGNBQVMsR0FBVCxTQUFTLENBQWE7UUFDSSxTQUFJLEdBQUosSUFBSSxDQUFLO1FBWnBDLFdBQU0sR0FBd0IsRUFBRSxDQUFDO1FBR2pDLGdCQUFXLEdBQUcsV0FBVyxDQUFDOztRQUVqQyxlQUFVLEdBQUcsS0FBSyxDQUFDO1FBVWxCLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsWUFBWSxFQUNwQztZQUNDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUMxQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztZQUN2QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FB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O2dDQUM1QixDQUFDLENBQUMsSUFBSTs0QkFDUCxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO3lCQUNwQjt3QkFDRCxLQUFLLEVBQUUsS0FBSztxQkFDWjtpQkFDRCxDQUFDO1NBQ0g7SUFDRixDQUFDOzs7OztJQUVPLGtCQUFrQjtRQUV6QixRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUNyQjtZQUNDLEtBQUssMEJBQTBCLENBQUMsaUJBQWlCO2dCQUNoRCxPQUFPLElBQUksbUJBQW1CLEVBQUUsQ0FBQztZQUVsQyxLQUFLLDBCQUEwQixDQUFDLE9BQU87Z0JBQ3RDLE9BQU8sSUFBSSxhQUFhLEVBQUUsQ0FBQztZQUU1QjtnQkFDQyxPQUFPLElBQUksVUFBVSxFQUFFLENBQUM7U0FDekI7SUFDRixDQUFDOzs7WUFoVUQsU0FBUyxTQUFDO2dCQUNWLFFBQVEsRUFBRSxtQkFBbUI7Z0JBQzdCLHNRQUE0Qzs7YUFFNUM7Ozs7WUFSUSxXQUFXO1lBQ1gsV0FBVzs0Q0FxQmpCLE1BQU0sU0FBQyxlQUFlOzs7O0lBWnhCLHNDQUF3Qzs7SUFDeEMseUNBQTRCOztJQUM1QixzQ0FBbUM7O0lBQ25DLDJDQUFpQzs7SUFFakMsMENBQW1COztJQUNuQixzQ0FBTzs7SUFDUCxxQ0FBa0I7Ozs7O0lBR2pCLDRDQUFpQzs7SUFDakMseUNBQTZCOzs7OztJQUM3QixvQ0FBMEMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogICBDb3B5cmlnaHQgKGMpIDIwMjAgVW5pdmVyc2lkYWQgZGUgUGluYXIgZGVsIFLDrW8gXCJIZXJtYW5vcyBTYcOteiBNb250ZXMgZGUgT2NhXCJcbiAqICAgQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqL1xuXG5pbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5qZWN0IH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IE1BVF9ESUFMT0dfREFUQSB9IGZyb20gXCJAYW5ndWxhci9tYXRlcmlhbC9kaWFsb2dcIjtcblxuaW1wb3J0IHtcblx0UGFuZWxDb250ZW50X0RlcHIsXG5cdEZvcm1GaWVsZFR5cGUsXG5cdEZvcm1Db250YWluZXJBY3Rpb24sXG5cdEhpbnRWYWx1ZSxcblx0SGludFBvc2l0aW9uLFxuXHRJbnB1dENvbnRlbnQsXG5cdEFjdGlvbkNvbnRlbnRcbn0gZnJvbSBcIi4uLy4uL2Zvcm1zL3B1YmxpYy1hcGlcIjtcbmltcG9ydCB7XG5cdFRlcm0sXG5cdFZvY2FidWxhcnksXG5cdFRlcm1JbnN0aXR1dGlvbkRhdGEsXG5cdEVudGl0eUJhc2UsXG5cdFRlcm1JbmRleERhdGEsXG5cdFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzXG59IGZyb20gXCIuLi8uLi9lbnRpdGllcy9wdWJsaWMtYXBpXCI7XG5cbmltcG9ydCB7IEZvcm1CdWlsZGVyLCBGb3JtR3JvdXAgfSBmcm9tIFwiQGFuZ3VsYXIvZm9ybXNcIjtcbmltcG9ydCB7IE1hdFNuYWNrQmFyIH0gZnJvbSBcIkBhbmd1bGFyL21hdGVyaWFsXCI7XG5pbXBvcnQgeyBGb3JtRmllbGRDb250ZW50X0V4cGVyaW1lbnRhbCB9IGZyb20gJy4uLy4uL2Zvcm1zL2V4cGVyaW1lbnRhbC9mb3JtLWZpZWxkLmNvbnRyb2wuZXhwZXJpbWVudGFsJztcblxuQENvbXBvbmVudCh7XG5cdHNlbGVjdG9yOiBcInRvY28tdGVybS1nZW5lcmljXCIsXG5cdHRlbXBsYXRlVXJsOiBcIi4vdGVybS1nZW5lcmljLmNvbXBvbmVudC5odG1sXCIsXG5cdHN0eWxlVXJsczogW1wiLi90ZXJtLWdlbmVyaWMuY29tcG9uZW50LnNjc3NcIl1cbn0pXG5leHBvcnQgY2xhc3MgVGVybUdlbmVyaWNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXHRwdWJsaWMgcGFuZWxzOiBQYW5lbENvbnRlbnRfRGVwcltdID0gW107XG5cdHB1YmxpYyBmb3JtR3JvdXA6IEZvcm1Hcm91cDtcblx0cHVibGljIGFjdGlvbjogRm9ybUNvbnRhaW5lckFjdGlvbjtcblx0cHVibGljIGFjdGlvbkxhYmVsID0gXCJBZGljaW9uYXJcIjtcblx0Ly8gdGVybTogVGVybTtcblx0aGFzU2VydmljZSA9IGZhbHNlO1xuXHRhY2NlcHQ7XG5cdHZvY2FiOiBWb2NhYnVsYXJ5O1xuXG5cdHB1YmxpYyBjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIF9mb3JtQnVpbGRlcjogRm9ybUJ1aWxkZXIsXG5cdFx0cHVibGljIF9zbmFja0JhcjogTWF0U25hY2tCYXIsXG5cdFx0QEluamVjdChNQVRfRElBTE9HX0RBVEEpIHByaXZhdGUgZGF0YTogYW55XG5cdClcblx0e1xuXHRcdGlmIChkYXRhLmFjY2VwdCAmJiBkYXRhLmN1cnJlbnRWb2NhYilcblx0XHR7XG5cdFx0XHR0aGlzLmFjY2VwdCA9IGRhdGEuYWNjZXB0O1xuXHRcdFx0dGhpcy5oYXNTZXJ2aWNlID0gdHJ1ZTtcblx0XHRcdHRoaXMudm9jYWIgPSBkYXRhLmN1cnJlbnRWb2NhYjtcblxuXHRcdFx0aWYgKGRhdGEudGVybSlcblx0XHRcdHtcblx0XHRcdFx0dGhpcy5hY3Rpb25MYWJlbCA9IFwiQWN0dWFsaXphclwiO1xuXG5cdFx0XHRcdGlmICghdGhpcy5kYXRhLnRlcm0uZGF0YSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRoaXMuZGF0YS50ZXJtLmRhdGEgPSB0aGlzLl9nZXRUZXJtRGF0YU9iamVjdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlXG5cdFx0XHR7XG5cdFx0XHRcdHRoaXMuZGF0YS50ZXJtID0gbmV3IFRlcm0oKTtcblx0XHRcdFx0dGhpcy5kYXRhLnRlcm0uaXNOZXcgPSB0cnVlO1xuXHRcdFx0XHR0aGlzLmRhdGEudGVybS52b2NhYnVsYXJ5X2lkID0gZGF0YS5jdXJyZW50Vm9jYWIuaWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIG5nT25Jbml0KCk6IHZvaWRcblx0e1xuXHRcdHRoaXMuZm9ybUdyb3VwID0gdGhpcy5fZm9ybUJ1aWxkZXIuZ3JvdXAoe30pO1xuXG5cdFx0dGhpcy5wYW5lbHMgPSBbXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlOiBcIlTDqXJtaW5vXCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlwiLFxuXHRcdFx0XHRpY29uTmFtZTogXCJcIixcblx0XHRcdFx0Zm9ybVNlY3Rpb246IHRoaXMuZm9ybUdyb3VwLFxuXHRcdFx0XHRmb3JtU2VjdGlvbkNvbnRlbnQ6IHRoaXMuX2dldENvbnRlbnQoKVxuXHRcdFx0fVxuXHRcdF07XG5cblx0XHR0aGlzLmFjdGlvbiA9IHtcblx0XHRcdGRvaXQoZGF0YTogYW55KTogdm9pZCB7XG5cdFx0XHRcdGlmICh0aGlzLmZvcm1Hcm91cC52YWxpZClcblx0XHRcdFx0e1xuXHRcdFx0XHRcdC8vIGdldCB0aGUgcmVzdWx0IGZyb20gZm9ybUdyb3VwXG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gbmV3IFRlcm0oKTtcblx0XHRcdFx0XHRyZXN1bHQuZGVlcGNvcHkodGhpcy5kYXRhLnRlcm0pO1xuXHRcdFx0XHRcdHJlc3VsdC5kZWVwY29weSh0aGlzLmZvcm1Hcm91cC52YWx1ZSk7XG5cdFx0XHRcdFx0cmVzdWx0LmRhdGEgPSB0aGlzLl9nZXRUZXJtRGF0YU9iamVjdCgpO1xuXHRcdFx0XHRcdHJlc3VsdC5kYXRhLmRlZXBjb3B5KHRoaXMuZm9ybUdyb3VwLnZhbHVlKTtcblxuXHRcdFx0XHRcdC8vIFNldCB0aGUgcGFyZW50IHRlcm0sIGlmIGFueVxuXHRcdFx0XHRcdGNvbnN0IHBhcmVudCA9IHRoaXMuZm9ybUdyb3VwLnZhbHVlW1wicGFyZW50X2lkXCJdO1xuXHRcdFx0XHRcdGlmIChwYXJlbnQgJiYgcGFyZW50WzBdKSB7XG5cdFx0XHRcdFx0XHRyZXN1bHQucGFyZW50X2lkID0gcGFyZW50WzBdLmlkO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXN1bHQucGFyZW50X2lkID0gbnVsbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBpZiB0aGUgdGVybSBpcyBhbiBpbmRleCwgdGhlbiBzZXQgbWlhcl9jbGFzcyBhbmQgZ3JvdXBfbWVzXG5cdFx0XHRcdFx0Ly8gY2xhc2lmaWNhdGlvbnNcblx0XHRcdFx0XHRpZiAodGhpcy52b2NhYi5pZCA9PSBWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcy5JTkRFWEVTKSB7XG5cdFx0XHRcdFx0XHRyZXN1bHQuY2xhc3NfaWRzID0gW107XG5cblx0XHRcdFx0XHRcdGNvbnN0IG1pYXIgPSB0aGlzLmZvcm1Hcm91cC52YWx1ZVtcIm1pYXJfY2xhc3NcIl07XG5cdFx0XHRcdFx0XHRjb25zdCBtZXMgPSB0aGlzLmZvcm1Hcm91cC52YWx1ZVtcImdyb3VwX21lc1wiXTtcblxuXHRcdFx0XHRcdFx0aWYgKG1pYXIgJiYgbWlhclswXSkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHQuY2xhc3NfaWRzLnB1c2gobWlhclswXS5pZCk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChtZXMgJiYgbWVzWzBdKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3VsdC5jbGFzc19pZHMucHVzaChtZXNbMF0uaWQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHRoaXMuYWNjZXB0KHJlc3VsdCBhcyBUZXJtKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHBhbmVsJ3MgY29udGVudC5cbiAgICAgKi9cblx0cHJpdmF0ZSBfZ2V0Q29udGVudCgpOiAoSW5wdXRDb250ZW50IHwgQWN0aW9uQ29udGVudCB8IEZvcm1GaWVsZENvbnRlbnRfRXhwZXJpbWVudGFsKVtdXG5cdHtcblx0XHQvLyBUT0RPOiB1c2UgVGVybUhlbHBlclxuXHRcdHN3aXRjaCAodGhpcy52b2NhYi5pZCkge1xuXHRcdFx0Y2FzZSBWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcy5DVUJBTl9JTlRJVFVUSU9OUzpcblx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBcIm5hbWVcIixcblx0XHRcdFx0XHRcdGxhYmVsOiBcIk5vbWJyZVwiLFxuXHRcdFx0XHRcdFx0dHlwZTogRm9ybUZpZWxkVHlwZS50ZXh0LFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdGhpcy5kYXRhLnRlcm0ubmFtZSA/IHRoaXMuZGF0YS50ZXJtLm5hbWUgOiBudWxsLFxuXHRcdFx0XHRcdFx0d2lkdGg6IFwiMTAwJVwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBcImdyaWRcIixcblx0XHRcdFx0XHRcdGxhYmVsOiBcIklkZW50aWZpY2Fkb3IgR1JJRFwiLFxuXHRcdFx0XHRcdFx0dHlwZTogRm9ybUZpZWxkVHlwZS50ZXh0LFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHRoaXMuZGF0YS50ZXJtLmRhdGEuZ3JpZCA/IHRoaXMuZGF0YS50ZXJtLmRhdGEuZ3JpZCA6IG51bGwsXG5cdFx0XHRcdFx0XHR3aWR0aDogXCI1MCVcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bmFtZTogXCJkZXNjcmlwdGlvblwiLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiRGVzY3JpcGNpw7NuXCIsXG5cdFx0XHRcdFx0XHR0eXBlOiBGb3JtRmllbGRUeXBlLnRleHRhcmVhLFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHRoaXMuZGF0YS50ZXJtLmRlc2NyaXB0aW9uXG5cdFx0XHRcdFx0XHRcdD8gdGhpcy5kYXRhLnRlcm0uZGVzY3JpcHRpb25cblx0XHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdFx0d2lkdGg6IFwiMTAwJVwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBcImVtYWlsXCIsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJFbWFpbFwiLFxuXHRcdFx0XHRcdFx0dHlwZTogRm9ybUZpZWxkVHlwZS5lbWFpbCxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHRoaXMuZGF0YS50ZXJtLmRhdGEuZW1haWwgPyB0aGlzLmRhdGEudGVybS5kYXRhLmVtYWlsIDogbnVsbCxcblx0XHRcdFx0XHRcdHdpZHRoOiBcIjQ1JVwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBcIndlYnNpdGVcIixcblx0XHRcdFx0XHRcdGxhYmVsOiBcIlNpdGlvIFdlYiBPZmljaWFsXCIsXG5cdFx0XHRcdFx0XHR0eXBlOiBGb3JtRmllbGRUeXBlLnVybCxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdHZhbHVlOiB0aGlzLmRhdGEudGVybS5kYXRhLndlYnNpdGVcblx0XHRcdFx0XHRcdFx0PyB0aGlzLmRhdGEudGVybS5kYXRhLndlYnNpdGVcblx0XHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdFx0d2lkdGg6IFwiNDUlXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwiYWRkcmVzc1wiLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiRGlyZWNjacOzblwiLFxuXHRcdFx0XHRcdFx0dHlwZTogRm9ybUZpZWxkVHlwZS50ZXh0YXJlYSxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdHZhbHVlOiB0aGlzLmRhdGEudGVybS5kYXRhLmFkZHJlc3Ncblx0XHRcdFx0XHRcdFx0PyB0aGlzLmRhdGEudGVybS5kYXRhLmFkZHJlc3Ncblx0XHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdFx0d2lkdGg6IFwiMTAwJVwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBcInBhcmVudF9pZFwiLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiSmVyYXJxdcOtYSBJbnN0aXR1Y2lvbmFsIChJbnN0aXR1Y2nDs24gU3VwZXJpb3IpXCIsXG5cdFx0XHRcdFx0XHR0eXBlOiBGb3JtRmllbGRUeXBlLnZvY2FidWxhcnksXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHRleHRyYUNvbnRlbnQ6IHtcblx0XHRcdFx0XHRcdFx0bXVsdGlwbGU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZFRlcm1zSWRzOiB0aGlzLmRhdGEudGVybS5wYXJlbnRfaWRcblx0XHRcdFx0XHRcdFx0XHQ/IFt0aGlzLmRhdGEudGVybS5wYXJlbnRfaWRdXG5cdFx0XHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdFx0XHR2b2NhYjogdGhpcy52b2NhYi5pZFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHdpZHRoOiBcIjEwMCVcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XTtcblxuXHRcdFx0Y2FzZSBWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcy5JTkRFWEVTOlxuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwibmFtZVwiLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiTm9tYnJlXCIsXG5cdFx0XHRcdFx0XHR0eXBlOiBGb3JtRmllbGRUeXBlLnRleHQsXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdFx0XHRcdHZhbHVlOiB0aGlzLmRhdGEudGVybS5uYW1lID8gdGhpcy5kYXRhLnRlcm0ubmFtZSA6IG51bGwsXG5cdFx0XHRcdFx0XHR3aWR0aDogXCIxMDAlXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwidXJsXCIsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJVUkxcIixcblx0XHRcdFx0XHRcdHR5cGU6IEZvcm1GaWVsZFR5cGUudXJsLFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHRoaXMuZGF0YS50ZXJtLmRhdGEudXJsID8gdGhpcy5kYXRhLnRlcm0uZGF0YS51cmwgOiBudWxsLFxuXHRcdFx0XHRcdFx0d2lkdGg6IFwiMTAwJVwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBcImFicmV2XCIsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJJZGVudGlmaWNhZG9yZXNcIixcblx0XHRcdFx0XHRcdHR5cGU6IEZvcm1GaWVsZFR5cGUudGV4dCxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdHZhbHVlOiB0aGlzLmRhdGEudGVybS5kYXRhLmFicmV2ID8gdGhpcy5kYXRhLnRlcm0uZGF0YS5hYnJldiA6IG51bGwsXG5cdFx0XHRcdFx0XHR3aWR0aDogXCIzMCVcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bmFtZTogXCJpbml0aWFsX2NvdmVyXCIsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJDb2JlcnR1cmEgaW5pY2lvXCIsXG5cdFx0XHRcdFx0XHR0eXBlOiBGb3JtRmllbGRUeXBlLnRleHQsXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdGhpcy5kYXRhLnRlcm0uZGF0YS5pbml0aWFsX2NvdmVyXG5cdFx0XHRcdFx0XHRcdD8gdGhpcy5kYXRhLnRlcm0uZGF0YS5pbml0aWFsX2NvdmVyXG5cdFx0XHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0XHRcdHdpZHRoOiBcIjMwJVwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBcImVuZF9jb3ZlclwiLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiQ29iZXJ0dXJhXCIsXG5cdFx0XHRcdFx0XHR0eXBlOiBGb3JtRmllbGRUeXBlLnRleHQsXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdGhpcy5kYXRhLnRlcm0uZGF0YS5lbmRfY292ZXJcblx0XHRcdFx0XHRcdFx0PyB0aGlzLmRhdGEudGVybS5kYXRhLmVuZF9jb3ZlclxuXHRcdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdFx0XHR3aWR0aDogXCIzMCVcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bmFtZTogXCJkZXNjcmlwdGlvblwiLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiRGVzY3JpcGNpw7NuXCIsXG5cdFx0XHRcdFx0XHR0eXBlOiBGb3JtRmllbGRUeXBlLnRleHRhcmVhLFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHRoaXMuZGF0YS50ZXJtLmRlc2NyaXB0aW9uXG5cdFx0XHRcdFx0XHRcdD8gdGhpcy5kYXRhLnRlcm0uZGVzY3JpcHRpb25cblx0XHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdFx0d2lkdGg6IFwiMTAwJVwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBcIm1pYXJfY2xhc3NcIixcblx0XHRcdFx0XHRcdGxhYmVsOiBcIlRpcG9sb2fDrWEgZGUgc2lzdGVtYXMgZGUgaW5kaXphY2nDs25cIixcblx0XHRcdFx0XHRcdHR5cGU6IEZvcm1GaWVsZFR5cGUudm9jYWJ1bGFyeSxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdGV4dHJhQ29udGVudDoge1xuXHRcdFx0XHRcdFx0XHRtdWx0aXBsZTogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdHNlbGVjdGVkVGVybXNJZHM6IHRoaXMuZGF0YS50ZXJtLmNsYXNzX2lkc1xuXHRcdFx0XHRcdFx0XHRcdD8gdGhpcy5kYXRhLnRlcm0uY2xhc3NfaWRzXG5cdFx0XHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdFx0XHR2b2NhYjogVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXMuSU5ERVhFU19DTEFTSUZJQ0FUSU9OXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0d2lkdGg6IFwiNDglXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwiZ3JvdXBfbWVzXCIsXG5cdFx0XHRcdFx0XHRsYWJlbDpcblx0XHRcdFx0XHRcdFx0XCJHcnVwb3MsIENhdGVnb3LDrWFzIHNlZ8O6biBjcml0ZXJpb3MgZGUg4oCcY2FsaWRhZOKAnSBkZSBsYXMgcHVibGljYWNpb25lcyBcIixcblx0XHRcdFx0XHRcdHR5cGU6IEZvcm1GaWVsZFR5cGUudm9jYWJ1bGFyeSxcblx0XHRcdFx0XHRcdHN0YXJ0SGludDogbmV3IEhpbnRWYWx1ZShIaW50UG9zaXRpb24uc3RhcnQsIFwiXCIpLFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0ZXh0cmFDb250ZW50OiB7XG5cdFx0XHRcdFx0XHRcdG11bHRpcGxlOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0c2VsZWN0ZWRUZXJtc0lkczogdGhpcy5kYXRhLnRlcm0uY2xhc3NfaWRzXG5cdFx0XHRcdFx0XHRcdFx0PyB0aGlzLmRhdGEudGVybS5jbGFzc19pZHNcblx0XHRcdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdFx0XHRcdHZvY2FiOiBWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcy5JTkRFWEVTX0NMQVNJRklDQVRJT05cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR3aWR0aDogXCI0OCVcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XTtcblxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBcIm5hbWVcIixcblx0XHRcdFx0XHRcdGxhYmVsOiBcIk5vbWJyZVwiLFxuXHRcdFx0XHRcdFx0dHlwZTogRm9ybUZpZWxkVHlwZS50ZXh0LFxuXHRcdFx0XHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRcdFx0XHR3aWR0aDogXCIxMDAlXCIsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdGhpcy5kYXRhLnRlcm0ubmFtZSA/IHRoaXMuZGF0YS50ZXJtLm5hbWUgOiBudWxsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRuYW1lOiBcImRlc2NyaXB0aW9uXCIsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJEZXNjcmlwY2nDs25cIixcblx0XHRcdFx0XHRcdHR5cGU6IEZvcm1GaWVsZFR5cGUudGV4dGFyZWEsXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHR3aWR0aDogXCIxMDAlXCIsXG5cdFx0XHRcdFx0XHR2YWx1ZTogdGhpcy5kYXRhLnRlcm0uZGVzY3JpcHRpb25cblx0XHRcdFx0XHRcdFx0PyB0aGlzLmRhdGEudGVybS5kZXNjcmlwdGlvblxuXHRcdFx0XHRcdFx0XHQ6IG51bGxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG5hbWU6IFwicGFyZW50X2lkXCIsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJUw6lybWlubyBQYWRyZVwiLFxuXHRcdFx0XHRcdFx0dHlwZTogRm9ybUZpZWxkVHlwZS52b2NhYnVsYXJ5LFxuXHRcdFx0XHRcdFx0c3RhcnRIaW50OiBuZXcgSGludFZhbHVlKEhpbnRQb3NpdGlvbi5zdGFydCwgXCJcIiksXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHRleHRyYUNvbnRlbnQ6IHtcblx0XHRcdFx0XHRcdFx0bXVsdGlwbGU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZFRlcm1zSWRzOiB0aGlzLmRhdGEudGVybS5wYXJlbnRfaWRcblx0XHRcdFx0XHRcdFx0XHQ/IFt0aGlzLmRhdGEudGVybS5wYXJlbnRfaWRdXG5cdFx0XHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdFx0XHR2b2NhYjogdGhpcy52b2NhYi5pZFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHdpZHRoOiBcIjUwJVwiXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRdO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgX2dldFRlcm1EYXRhT2JqZWN0KCk6IEVudGl0eUJhc2Vcblx0e1xuXHRcdHN3aXRjaCAodGhpcy52b2NhYi5pZClcblx0XHR7XG5cdFx0XHRjYXNlIFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLkNVQkFOX0lOVElUVVRJT05TOlxuXHRcdFx0XHRyZXR1cm4gbmV3IFRlcm1JbnN0aXR1dGlvbkRhdGEoKTtcblxuXHRcdFx0Y2FzZSBWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcy5JTkRFWEVTOlxuXHRcdFx0XHRyZXR1cm4gbmV3IFRlcm1JbmRleERhdGEoKTtcblxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cmV0dXJuIG5ldyBFbnRpdHlCYXNlKCk7XG5cdFx0fVxuXHR9XG59XG4iXX0=