/**
 * @fileoverview added by tsickle
 * Generated from: lib/sources/journal-view/journal-view-info.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ViewChild } from "@angular/core";
import { MatSnackBar } from '@angular/material';
import { SourceService } from '../../backend/public-api';
import { IdentifierSchemas } from '../../entities/common';
import { JournalVersion, JournalData, SourceTypes, SourceSystems, VocabulariesInmutableNames } from '../../entities/public-api';
import { SourceIndexesComponent } from '../source-edit/source-indexes/source-indexes.component';
import { SourceOrganizationsComponent } from '../source-edit/source-organizations/source-organizations.component';
/**
 * This component share the same scss that `JournalViewComponent`.
 * His goal, shows a Journal
 */
export class JournalViewInfoComponent {
    /**
     * @param {?} _sourveService
     * @param {?} _snackBar
     */
    constructor(_sourveService, _snackBar) {
        this._sourveService = _sourveService;
        this._snackBar = _snackBar;
        this.showVersionLabel = true;
        this.tipos = SourceTypes;
        this.sistemas = SourceSystems;
        this.panelOpenState = false;
        this.IdentifierSchemas = IdentifierSchemas;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.loadJournalData();
    }
    /**
     * @return {?}
     */
    ngOnChanges() {
        console.log("changes....");
        this.loadJournalData();
    }
    /**
     * @return {?}
     */
    loadJournalData() {
        if (this.journalData == undefined)
            this.journalData = new JournalData();
        this.journalData.deepcopy(this.journalVersion.data);
        this.dataBaseTerms = new Array();
        this.groupTerms = new Array();
        this.institutionTerms = new Array();
        this.licenceTerms = new Array();
        this.provinceTerms = new Array();
        this.subjectTerms = new Array();
        this.vocabularies = VocabulariesInmutableNames;
        if (this.journalData.classifications) {
            this.journalData.classifications.forEach((/**
             * @param {?} term
             * @return {?}
             */
            (term) => {
                switch (term.vocabulary.toString()) {
                    case VocabulariesInmutableNames.CUBAN_INTITUTIONS:
                    case VocabulariesInmutableNames.EXTRA_INSTITUTIONS:
                        this.institutionTerms.push(term);
                        break;
                    case VocabulariesInmutableNames.INDEXES:
                        this.dataBaseTerms.push(term);
                        break;
                    case VocabulariesInmutableNames.INDEXES_CLASIFICATION:
                        this.groupTerms.push(term);
                        break;
                    case VocabulariesInmutableNames.LICENCES:
                        this.licenceTerms.push(term);
                        break;
                    case VocabulariesInmutableNames.CUBAN_PROVINCES:
                        this.provinceTerms.push(term);
                        break;
                    case VocabulariesInmutableNames.SUBJECTS:
                        this.subjectTerms.push(term);
                        break;
                }
            }));
        }
    }
    /**
     * @param {?} idtype
     * @return {?}
     */
    getIdentifier(idtype) {
        /** @type {?} */
        var r = this.journalData
            ? this.journalData.getIdentifierValue(idtype)
            : "";
        return r;
    }
    /**
     * @param {?} newVersion
     * @return {?}
     */
    editingJournalChange(newVersion) {
        console.log("*****llego....", newVersion, this.journalData);
        this.loadJournalData();
        this.orgs.ngOnInit();
        this.indexes.initIndexes();
    }
}
JournalViewInfoComponent.decorators = [
    { type: Component, args: [{
                selector: "toco-journal-view-info",
                template: "<!-- Journal Information -->\n<mat-card *ngIf=\"journalVersion && journalData\">\n  <mat-card-header *ngIf=\"showVersionLabel\">\n    <!-- <img mat-card-avatar *ngIf=\"journal.data.logo; else logotemplate\" [style.background-size]=\"'cover'\" src=\"journal.data.logo\">\n        <ng-template #logotemplate>\n            <img mat-card-avatar [src]=\"defaultLogo\" alt=\"\">\n        </ng-template> -->\n\n    <mat-card-title> </mat-card-title>\n\n    <mat-card-subtitle> Revisi\u00F3n actual </mat-card-subtitle>\n  </mat-card-header>\n\n  <mat-divider  *ngIf=\"showVersionLabel\" [inset]=\"true\" style=\"margin-bottom: 1em\"></mat-divider>\n\n  <mat-card-content>\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'T\u00EDtulo'\"\n        [value]=\"journalData.title\"\n      ></toco-journal-view-info-field>\n    </p>\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'Subt\u00EDtulo'\"\n        [value]=\"journalData.subtitle\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'Nombre Abreviado'\"\n        [value]=\"journalData.shortname\"\n      ></toco-journal-view-info-field>\n    </p>\n    <p>\n      <toco-journal-view-info-field *ngIf=\"journalData.source_type\"\n        [label]=\"'Tipo'\"\n        [value]=\"tipos[journalData.source_type].label\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <mat-label style=\"font-weight: bold\">ISSN: </mat-label>\n    <div style=\"margin-left: 0.8em\">\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Impreso'\"\n          [value]=\"getIdentifier(IdentifierSchemas.issn_p)\"\n        ></toco-journal-view-info-field>\n      </p>\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Electr\u00F3nico'\"\n          [value]=\"getIdentifier(IdentifierSchemas.issn_e)\"\n        ></toco-journal-view-info-field>\n      </p>\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'De enlace'\"\n          [value]=\"getIdentifier(IdentifierSchemas.issn_l)\"\n        ></toco-journal-view-info-field>\n      </p>\n    </div>\n    <mat-label style=\"font-weight: bold\">RNPS: </mat-label>\n    <div style=\"margin-left: 0.8em\">\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Impreso'\"\n          [value]=\"getIdentifier(IdentifierSchemas.prnps)\"\n        ></toco-journal-view-info-field>\n      </p>\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Electr\u00F3nico'\"\n          [value]=\"getIdentifier(IdentifierSchemas.ernps)\"\n        ></toco-journal-view-info-field>\n      </p>\n    </div>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'URL'\"\n        [value]=\"getIdentifier(IdentifierSchemas.url)\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'OAIURL'\"\n        [value]=\"getIdentifier(IdentifierSchemas.oaiurl)\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field *ngIf=\"journalData.source_system\"\n        [label]=\"'Sistema'\"\n        [value]=\"sistemas[journalData.source_system].label\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'Email'\"\n        [value]=\"journalData.email\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'Seriadas Cubanas'\"\n        [value]=\"journalData.seriadas_cubanas\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'Prop\u00F3sito'\"\n        [value]=\"journalData.purpose\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'A\u00F1o de Inicio'\"\n        [value]=\"journalData.start_year | date\"\n      ></toco-journal-view-info-field>\n      <!-- <mat-label style=\"font-weight: bold;\"> A\u00F1o de Inicio: </mat-label>\n      <mat-label *ngIf=\"journalData.start_year\">\n        {{ journalData.start_year | date }}\n      </mat-label>\n      <mat-label\n        *ngIf=\"!journalData.start_year\"\n        class=\"text-muted text-through\"\n        >Vac\u00EDo</mat-label\n      > -->\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'A\u00F1o de Fin'\"\n        [value]=\"journalData.end_year | date\"\n      ></toco-journal-view-info-field>\n    </p>\n\n    <p>\n      <toco-journal-view-info-field\n        [label]=\"'Frecuencia de Publicaci\u00F3n'\"\n        [value]=\"journalData.frequency\"\n      ></toco-journal-view-info-field>\n    </p>\n    <mat-label style=\"font-weight: bold\"> Descripci\u00F3n:</mat-label>\n    <mat-label *ngIf=\"!journalData.description\" class=\"text-muted text-through\"\n      >Vac\u00EDo</mat-label\n    >\n    <div\n      *ngIf=\"journalData.description\"\n      class=\"e2e-inner-html-bound text-align-justify\"\n      [innerHTML]=\"journalData.description\"\n    ></div>\n\n    <mat-label style=\"font-weight: bold\">Redes Sociales:</mat-label>\n    <div style=\"margin-left: 0.8em\">\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Facebook'\"\n          [value]=\"journalData.socialNetworks.facebook\"\n        ></toco-journal-view-info-field>\n      </p>\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Twitter'\"\n          [value]=\"journalData.socialNetworks.twitter\"\n        ></toco-journal-view-info-field>\n      </p>\n      <p>\n        <toco-journal-view-info-field\n          [label]=\"'Linkedin'\"\n          [value]=\"journalData.socialNetworks.linkedin\"\n        ></toco-journal-view-info-field>\n      </p>\n    </div>\n\n    <!-- show terms -->\n\n    <mat-divider\n      [inset]=\"true\"\n      style=\"margin-bottom: 1em; margin-top: 1em\"\n    ></mat-divider>\n\n    <!-- <toco-journal-view-term\n      title=\"Grupo:\"\n      [terms]=\"groupTerms\"\n      [vocab_id]=\"vocabularies.INDEXES_CLASIFICATION\"\n    ></toco-journal-view-term>\n\n    <toco-journal-view-term\n      title=\"Provincia:\"\n      [terms]=\"provinceTerms\"\n      [vocab_id]=\"vocabularies.CUBAN_PROVINCES\"\n    ></toco-journal-view-term> -->\n\n    <toco-journal-view-term\n      title=\"Licencia:\"\n      [terms]=\"licenceTerms\"\n      [vocab_id]=\"vocabularies.LICENCES\"\n    ></toco-journal-view-term>\n\n    <toco-journal-view-term\n      title=\"Materias:\"\n      [terms]=\"subjectTerms\"\n      [vocab_id]=\"vocabularies.SUBJECTS\"\n    ></toco-journal-view-term>\n\n    <mat-card style=\"margin: 1em; background-color: whitesmoke\">\n      <mat-card-header>\n        <mat-card-title>Organizaciones:</mat-card-title>\n      </mat-card-header>\n      <mat-card-content>\n        <toco-source-organizations\n          [sourceData]=\"journalData\"\n          [editable]=\"false\"\n          [ngStyle]=\"{ margin: '1em' }\"\n        >\n        </toco-source-organizations>\n      </mat-card-content>\n    </mat-card>\n\n    <mat-card style=\"margin: 1em; background-color: whitesmoke\">\n      <mat-card-header>\n        <mat-card-title> Indizaciones:</mat-card-title>\n      </mat-card-header>\n      <mat-card-content>\n        <toco-source-indexes\n          [sourceData]=\"journalData\"\n          [editable]=\"false\"\n          [ngStyle]=\"{ margin: '1em' }\"\n        >\n        </toco-source-indexes>\n        <!-- <mat-accordion>\n          <ng-container *ngFor=\"let termSource of dataBaseTerms\">\n            <mat-expansion-panel\n              *ngIf=\"termSource.term.vocabulary == vocabularies.INDEXES\"\n              (opened)=\"panelOpenState = true\"\n              (closed)=\"panelOpenState = false\"\n            >\n              <mat-expansion-panel-header>\n                <mat-panel-title>\n                  {{ termSource.term.description }}\n                </mat-panel-title>\n                <mat-panel-description> </mat-panel-description>\n              </mat-expansion-panel-header>\n              <p *ngIf=\"termSource.data\">\n                <strong>URL: </strong> {{ termSource.data.url }}\n              </p>\n              <p *ngIf=\"termSource.data && termSource.data['initial_cover']\">\n                <strong>Cobertura inicio: </strong>\n                {{ termSource.data[\"initial_cover\"] }}\n              </p>\n              <p *ngIf=\"termSource.data && termSource.data['end_cover']\">\n                <strong>Cobertura hasta: </strong>\n                {{ termSource.data[\"end_cover\"] }}\n              </p>\n            </mat-expansion-panel>\n          </ng-container>\n        </mat-accordion> -->\n      </mat-card-content>\n    </mat-card>\n  </mat-card-content>\n\n  <mat-divider [inset]=\"true\"></mat-divider>\n</mat-card>\n",
                styles: [".text-muted{color:rgba(0,0,0,.54);padding-left:.2em}.text-through{text-decoration:line-through}.notification-position{position:absolute;top:0;right:0}p{padding-top:.8em}.overlay{opacity:.4;background:#000;width:100%;height:100%;z-index:10;top:0;left:0;position:fixed}"]
            }] }
];
/** @nocollapse */
JournalViewInfoComponent.ctorParameters = () => [
    { type: SourceService },
    { type: MatSnackBar }
];
JournalViewInfoComponent.propDecorators = {
    journalVersion: [{ type: Input }],
    showVersionLabel: [{ type: Input }],
    orgs: [{ type: ViewChild, args: [SourceOrganizationsComponent, { static: false },] }],
    indexes: [{ type: ViewChild, args: [SourceIndexesComponent, { static: false },] }]
};
if (false) {
    /** @type {?} */
    JournalViewInfoComponent.prototype.journalVersion;
    /** @type {?} */
    JournalViewInfoComponent.prototype.showVersionLabel;
    /** @type {?} */
    JournalViewInfoComponent.prototype.journalData;
    /** @type {?} */
    JournalViewInfoComponent.prototype.tipos;
    /** @type {?} */
    JournalViewInfoComponent.prototype.sistemas;
    /**
     * TODO: In the future databaseTerms and subjectTerms will be changes by
     *  miarTerms and subjectsUnescoTerms
     *  public miarTerms: Array<SourceClasification>;
     *  public subjectsUnescoTerms: Array<SourceClasification>;
     * @type {?}
     */
    JournalViewInfoComponent.prototype.institutionTerms;
    /** @type {?} */
    JournalViewInfoComponent.prototype.dataBaseTerms;
    /** @type {?} */
    JournalViewInfoComponent.prototype.groupTerms;
    /** @type {?} */
    JournalViewInfoComponent.prototype.provinceTerms;
    /** @type {?} */
    JournalViewInfoComponent.prototype.subjectTerms;
    /** @type {?} */
    JournalViewInfoComponent.prototype.licenceTerms;
    /** @type {?} */
    JournalViewInfoComponent.prototype.vocabularies;
    /** @type {?} */
    JournalViewInfoComponent.prototype.panelOpenState;
    /** @type {?} */
    JournalViewInfoComponent.prototype.IdentifierSchemas;
    /** @type {?} */
    JournalViewInfoComponent.prototype.orgs;
    /** @type {?} */
    JournalViewInfoComponent.prototype.indexes;
    /**
     * @type {?}
     * @private
     */
    JournalViewInfoComponent.prototype._sourveService;
    /**
     * @type {?}
     * @private
     */
    JournalViewInfoComponent.prototype._snackBar;
}
export class JournalViewInfoFieldComponent {
    constructor() {
        this.emptyLabel = 'Vacío';
    }
}
JournalViewInfoFieldComponent.decorators = [
    { type: Component, args: [{
                selector: "toco-journal-view-info-field",
                template: `
    <mat-label style="font-weight: bold;">{{label}}: </mat-label>
    <mat-label *ngIf="value">
      {{ value }}
    </mat-label>
    <mat-label
      *ngIf="!value"
      class="text-muted text-through"
      >{{emptyLabel}}
    </mat-label
    >`,
                styles: [".text-muted{color:rgba(0,0,0,.54);padding-left:.2em}.text-through{text-decoration:line-through}.notification-position{position:absolute;top:0;right:0}p{padding-top:.8em}.overlay{opacity:.4;background:#000;width:100%;height:100%;z-index:10;top:0;left:0;position:fixed}"]
            }] }
];
JournalViewInfoFieldComponent.propDecorators = {
    label: [{ type: Input }],
    value: [{ type: Input }],
    emptyLabel: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    JournalViewInfoFieldComponent.prototype.label;
    /** @type {?} */
    JournalViewInfoFieldComponent.prototype.value;
    /** @type {?} */
    JournalViewInfoFieldComponent.prototype.emptyLabel;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiam91cm5hbC12aWV3LWluZm8uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vdG9jby1saWIvIiwic291cmNlcyI6WyJsaWIvc291cmNlcy9qb3VybmFsLXZpZXcvam91cm5hbC12aWV3LWluZm8uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBcUIsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMvRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDaEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzFELE9BQU8sRUFBRSxjQUFjLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxhQUFhLEVBQXVCLDBCQUEwQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDckosT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sd0RBQXdELENBQUM7QUFDaEcsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sb0VBQW9FLENBQUM7Ozs7O0FBV2xILE1BQU0sT0FBTyx3QkFBd0I7Ozs7O0lBZ0NuQyxZQUNVLGNBQTZCLEVBQzdCLFNBQXNCO1FBRHRCLG1CQUFjLEdBQWQsY0FBYyxDQUFlO1FBQzdCLGNBQVMsR0FBVCxTQUFTLENBQWE7UUFoQ2hCLHFCQUFnQixHQUFZLElBQUksQ0FBQztRQUcxQyxVQUFLLEdBQUcsV0FBVyxDQUFDO1FBQ3BCLGFBQVEsR0FBRyxhQUFhLENBQUM7UUFlekIsbUJBQWMsR0FBRyxLQUFLLENBQUM7UUFFdkIsc0JBQWlCLEdBQUcsaUJBQWlCLENBQUM7SUFZMUMsQ0FBQzs7OztJQUVKLFFBQVE7UUFDTixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDekIsQ0FBQzs7OztJQUNELFdBQVc7UUFDVCxPQUFPLENBQUMsR0FBRyxD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QWRRLGFBQWE7WUFEYixXQUFXOzs7NkJBaUJqQixLQUFLOytCQUNMLEtBQUs7bUJBdUJMLFNBQVMsU0FBQyw0QkFBNEIsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7c0JBR3pELFNBQVMsU0FBQyxzQkFBc0IsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7Ozs7SUEzQnBELGtEQUErQzs7SUFDL0Msb0RBQWlEOztJQUNqRCwrQ0FBZ0M7O0lBRWhDLHlDQUEyQjs7SUFDM0IsNENBQWdDOzs7Ozs7OztJQU9oQyxvREFBb0Q7O0lBQ3BELGlEQUFpRDs7SUFDakQsOENBQThDOztJQUM5QyxpREFBaUQ7O0lBQ2pELGdEQUFnRDs7SUFDaEQsZ0RBQWdEOztJQUVoRCxnREFBdUQ7O0lBQ3ZELGtEQUE4Qjs7SUFFOUIscURBQTZDOztJQUU3Qyx3Q0FDbUM7O0lBRW5DLDJDQUNnQzs7Ozs7SUFJOUIsa0RBQXFDOzs7OztJQUNyQyw2Q0FBOEI7O0FBd0ZoQyxNQUFNLE9BQU8sNkJBQTZCO0lBZjVDO1FBcUJJLGVBQVUsR0FBVyxPQUFPLENBQUM7SUFDL0IsQ0FBQzs7O1lBdEJGLFNBQVMsU0FBQztnQkFDUCxRQUFRLEVBQUUsOEJBQThCO2dCQUV4QyxRQUFRLEVBQUU7Ozs7Ozs7Ozs7TUFVUjs7YUFDSDs7O29CQUVFLEtBQUs7b0JBRUwsS0FBSzt5QkFFTCxLQUFLOzs7O0lBSk4sOENBQ2M7O0lBQ2QsOENBQ2M7O0lBQ2QsbURBQzZCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIE9uQ2hhbmdlcywgSW5wdXQsIFZpZXdDaGlsZCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBNYXRTbmFja0JhciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IFNvdXJjZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9iYWNrZW5kL3B1YmxpYy1hcGknO1xuaW1wb3J0IHsgSWRlbnRpZmllclNjaGVtYXMgfSBmcm9tICcuLi8uLi9lbnRpdGllcy9jb21tb24nO1xuaW1wb3J0IHsgSm91cm5hbFZlcnNpb24sIEpvdXJuYWxEYXRhLCBTb3VyY2VUeXBlcywgU291cmNlU3lzdGVtcywgU291cmNlQ2xhc2lmaWNhdGlvbiwgVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXMgfSBmcm9tICcuLi8uLi9lbnRpdGllcy9wdWJsaWMtYXBpJztcbmltcG9ydCB7IFNvdXJjZUluZGV4ZXNDb21wb25lbnQgfSBmcm9tICcuLi9zb3VyY2UtZWRpdC9zb3VyY2UtaW5kZXhlcy9zb3VyY2UtaW5kZXhlcy5jb21wb25lbnQnO1xuaW1wb3J0IHsgU291cmNlT3JnYW5pemF0aW9uc0NvbXBvbmVudCB9IGZyb20gJy4uL3NvdXJjZS1lZGl0L3NvdXJjZS1vcmdhbml6YXRpb25zL3NvdXJjZS1vcmdhbml6YXRpb25zLmNvbXBvbmVudCc7XG5cbi8qKlxuICogVGhpcyBjb21wb25lbnQgc2hhcmUgdGhlIHNhbWUgc2NzcyB0aGF0IGBKb3VybmFsVmlld0NvbXBvbmVudGAuXG4gKiBIaXMgZ29hbCwgc2hvd3MgYSBKb3VybmFsXG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogXCJ0b2NvLWpvdXJuYWwtdmlldy1pbmZvXCIsXG4gIHRlbXBsYXRlVXJsOiBcIi4vam91cm5hbC12aWV3LWluZm8uY29tcG9uZW50Lmh0bWxcIixcbiAgc3R5bGVVcmxzOiBbXCIuL2pvdXJuYWwtdmlldy5jb21wb25lbnQuc2Nzc1wiXSxcbn0pXG5leHBvcnQgY2xhc3MgSm91cm5hbFZpZXdJbmZvQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMge1xuICBASW5wdXQoKSBwdWJsaWMgam91cm5hbFZlcnNpb246IEpvdXJuYWxWZXJzaW9uO1xuICBASW5wdXQoKSBwdWJsaWMgc2hvd1ZlcnNpb25MYWJlbDogYm9vbGVhbiA9IHRydWU7XG4gIHB1YmxpYyBqb3VybmFsRGF0YTogSm91cm5hbERhdGE7XG5cbiAgcHVibGljIHRpcG9zID0gU291cmNlVHlwZXM7XG4gIHB1YmxpYyBzaXN0ZW1hcyA9IFNvdXJjZVN5c3RlbXM7XG5cbiAgLyoqIFRPRE86IEluIHRoZSBmdXR1cmUgZGF0YWJhc2VUZXJtcyBhbmQgc3ViamVjdFRlcm1zIHdpbGwgYmUgY2hhbmdlcyBieVxuICAgKiAgbWlhclRlcm1zIGFuZCBzdWJqZWN0c1VuZXNjb1Rlcm1zXG4gICAqICBwdWJsaWMgbWlhclRlcm1zOiBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPjtcbiAgICogIHB1YmxpYyBzdWJqZWN0c1VuZXNjb1Rlcm1zOiBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPjtcbiAgICovXG4gIHB1YmxpYyBpbnN0aXR1dGlvblRlcm1zOiBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPjtcbiAgcHVibGljIGRhdGFCYXNlVGVybXM6IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+O1xuICBwdWJsaWMgZ3JvdXBUZXJtczogQXJyYXk8U291cmNlQ2xhc2lmaWNhdGlvbj47XG4gIHB1YmxpYyBwcm92aW5jZVRlcm1zOiBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPjtcbiAgcHVibGljIHN1YmplY3RUZXJtczogQXJyYXk8U291cmNlQ2xhc2lmaWNhdGlvbj47XG4gIHB1YmxpYyBsaWNlbmNlVGVybXM6IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+O1xuXG4gIHB1YmxpYyB2b2NhYnVsYXJpZXM6IHR5cGVvZiBWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcztcbiAgcHVibGljIHBhbmVsT3BlblN0YXRlID0gZmFsc2U7XG5cbiAgcHVibGljIElkZW50aWZpZXJTY2hlbWFzID0gSWRlbnRpZmllclNjaGVtYXM7XG5cbiAgQFZpZXdDaGlsZChTb3VyY2VPcmdhbml6YXRpb25zQ29tcG9uZW50LCB7IHN0YXRpYzogZmFsc2UgfSlcbiAgb3JnczogU291cmNlT3JnYW5pemF0aW9uc0NvbXBvbmVudDtcblxuICBAVmlld0NoaWxkKFNvdXJjZUluZGV4ZXNDb21wb25lbnQsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBpbmRleGVzOiBTb3VyY2VJbmRleGVzQ29tcG9uZW50O1xuXG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfc291cnZlU2VydmljZTogU291cmNlU2VydmljZSxcbiAgICBwcml2YXRlIF9zbmFja0JhcjogTWF0U25hY2tCYXJcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMubG9hZEpvdXJuYWxEYXRhKCk7XG4gIH1cbiAgbmdPbkNoYW5nZXMoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJjaGFuZ2VzLi4uLlwiKTtcbiAgICB0aGlzLmxvYWRKb3VybmFsRGF0YSgpO1xuICB9XG4gIGxvYWRKb3VybmFsRGF0YSgpIHtcbiAgICBpZiAodGhpcy5qb3VybmFsRGF0YSA9PSB1bmRlZmluZWQpXG4gICAgICB0aGlzLmpvdXJuYWxEYXRhID0gbmV3IEpvdXJuYWxEYXRhKCk7XG5cbiAgICB0aGlzLmpvdXJuYWxEYXRhLmRlZXBjb3B5KHRoaXMuam91cm5hbFZlcnNpb24uZGF0YSk7XG5cbiAgICB0aGlzLmRhdGFCYXNlVGVybXMgPSBuZXcgQXJyYXk8U291cmNlQ2xhc2lmaWNhdGlvbj4oKTtcbiAgICB0aGlzLmdyb3VwVGVybXMgPSBuZXcgQXJyYXk8U291cmNlQ2xhc2lmaWNhdGlvbj4oKTtcbiAgICB0aGlzLmluc3RpdHV0aW9uVGVybXMgPSBuZXcgQXJyYXk8U291cmNlQ2xhc2lmaWNhdGlvbj4oKTtcbiAgICB0aGlzLmxpY2VuY2VUZXJtcyA9IG5ldyBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPigpO1xuICAgIHRoaXMucHJvdmluY2VUZXJtcyA9IG5ldyBBcnJheTxTb3VyY2VDbGFzaWZpY2F0aW9uPigpO1xuICAgIHRoaXMuc3ViamVjdFRlcm1zID0gbmV3IEFycmF5PFNvdXJjZUNsYXNpZmljYXRpb24+KCk7XG5cbiAgICB0aGlzLnZvY2FidWxhcmllcyA9IFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzO1xuXG4gICAgaWYgKHRoaXMuam91cm5hbERhdGEuY2xhc3NpZmljYXRpb25zKSB7XG4gICAgICB0aGlzLmpvdXJuYWxEYXRhLmNsYXNzaWZpY2F0aW9ucy5mb3JFYWNoKFxuICAgICAgICAodGVybTogU291cmNlQ2xhc2lmaWNhdGlvbikgPT4ge1xuICAgICAgICAgIHN3aXRjaCAodGVybS52b2NhYnVsYXJ5LnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgIGNhc2UgVm9jYWJ1bGFyaWVzSW5tdXRhYmxlTmFtZXMuQ1VCQU5fSU5USVRVVElPTlM6XG4gICAgICAgICAgICBjYXNlIFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLkVYVFJBX0lOU1RJVFVUSU9OUzpcbiAgICAgICAgICAgICAgdGhpcy5pbnN0aXR1dGlvblRlcm1zLnB1c2godGVybSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcy5JTkRFWEVTOlxuICAgICAgICAgICAgICB0aGlzLmRhdGFCYXNlVGVybXMucHVzaCh0ZXJtKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLklOREVYRVNfQ0xBU0lGSUNBVElPTjpcbiAgICAgICAgICAgICAgdGhpcy5ncm91cFRlcm1zLnB1c2godGVybSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcy5MSUNFTkNFUzpcbiAgICAgICAgICAgICAgdGhpcy5saWNlbmNlVGVybXMucHVzaCh0ZXJtKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFZvY2FidWxhcmllc0lubXV0YWJsZU5hbWVzLkNVQkFOX1BST1ZJTkNFUzpcbiAgICAgICAgICAgICAgdGhpcy5wcm92aW5jZVRlcm1zLnB1c2godGVybSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBWb2NhYnVsYXJpZXNJbm11dGFibGVOYW1lcy5TVUJKRUNUUzpcbiAgICAgICAgICAgICAgdGhpcy5zdWJqZWN0VGVybXMucHVzaCh0ZXJtKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG5cbiAgZ2V0SWRlbnRpZmllcihpZHR5cGU6IElkZW50aWZpZXJTY2hlbWFzKSB7XG4gICAgICB2YXIgciA9IHRoaXMuam91cm5hbERhdGFcbiAgICAgID8gdGhpcy5qb3VybmFsRGF0YS5nZXRJZGVudGlmaWVyVmFsdWUoaWR0eXBlKVxuICAgICAgOiBcIlwiO1xuXG4gICAgcmV0dXJuIHI7XG4gIH1cblxuICBlZGl0aW5nSm91cm5hbENoYW5nZShuZXdWZXJzaW9uOiBKb3VybmFsVmVyc2lvbik6IHZvaWQge1xuICAgIGNvbnNvbGUubG9nKFwiKioqKipsbGVnby4uLi5cIiwgbmV3VmVyc2lvbiwgdGhpcy5qb3VybmFsRGF0YSk7XG5cbiAgICB0aGlzLmxvYWRKb3VybmFsRGF0YSgpO1xuICAgIHRoaXMub3Jncy5uZ09uSW5pdCgpO1xuICAgIHRoaXMuaW5kZXhlcy5pbml0SW5kZXhlcygpO1xuICB9XG59XG5cblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6IFwidG9jby1qb3VybmFsLXZpZXctaW5mby1maWVsZFwiLFxuICAgIHN0eWxlVXJsczogW1wiLi9qb3VybmFsLXZpZXcuY29tcG9uZW50LnNjc3NcIl0sXG4gICAgdGVtcGxhdGU6IGBcbiAgICA8bWF0LWxhYmVsIHN0eWxlPVwiZm9udC13ZWlnaHQ6IGJvbGQ7XCI+e3tsYWJlbH19OiA8L21hdC1sYWJlbD5cbiAgICA8bWF0LWxhYmVsICpuZ0lmPVwidmFsdWVcIj5cbiAgICAgIHt7IHZhbHVlIH19XG4gICAgPC9tYXQtbGFiZWw+XG4gICAgPG1hdC1sYWJlbFxuICAgICAgKm5nSWY9XCIhdmFsdWVcIlxuICAgICAgY2xhc3M9XCJ0ZXh0LW11dGVkIHRleHQtdGhyb3VnaFwiXG4gICAgICA+e3tlbXB0eUxhYmVsfX1cbiAgICA8L21hdC1sYWJlbFxuICAgID5gXG4gIH0pXG4gIGV4cG9ydCBjbGFzcyBKb3VybmFsVmlld0luZm9GaWVsZENvbXBvbmVudCB7XG4gICAgQElucHV0KClcbiAgICBsYWJlbDogc3RyaW5nO1xuICAgIEBJbnB1dCgpXG4gICAgdmFsdWU6IHN0cmluZztcbiAgICBASW5wdXQoKVxuICAgIGVtcHR5TGFiZWw6IHN0cmluZyA9ICdWYWPDrW8nO1xuICB9XG4iXX0=