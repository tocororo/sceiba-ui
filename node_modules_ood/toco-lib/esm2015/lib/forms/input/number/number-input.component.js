/**
 * @fileoverview added by tsickle
 * Generated from: lib/forms/input/number/number-input.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component } from '@angular/core';
import { FormControl, Validators } from '@angular/forms';
import { TranslateService } from '@ngx-translate/core';
import { InputControl } from '../input.control';
/**
 * Represents a control that allows the writing of a number.
 */
export class InputNumberComponent extends InputControl {
    /**
     * @param {?} _transServ
     */
    constructor(_transServ) {
        super();
        this._transServ = _transServ;
        /* The translation is built by the control. */
        this.isTranslationBuiltByControl = true;
    }
    // TODO: Puedo hacer que este control sea más general, que permita la entrada de valores 
    // enteros y doubles haciendo las siguientes modificaciones: 
    //  * Inicializar el `Validators.pattern('----')` con un patrón para double values según valor que recibe en 
    //    `validatorArguments` que dice si integer o double. 
    //  * Hacer tratamiento de error correctamente em método `getErrorMessage()`. 
    /**
     * Returns a `FormControl` by default.
     * It is used to initialized the `InputNumberComponent`'s `content.formControl` value by default.
     * @param {?=} validatorArguments A collection of key/value elements, where the key is the validator name
     * and the value is the value that the validator needs to check.
     * In the `validatorArguments` argument, you can specify an object with the minimum and maximum possible
     * values for the number that holds the control.
     * For example: If the minimum possible value is 0 and maximum is 50, you can call the `getFormControlByDefault`
     * method in this way:
     * InputNumberComponent.getFormControlByDefault({ 'min': 0, 'max': 50 });
     * @return {?}
     */
    static getFormControlByDefault(validatorArguments = undefined) {
        return new FormControl(0, [
            Validators.pattern('^-?[0-9]+$'),
            Validators.min(((validatorArguments) && (validatorArguments.min != undefined)) ? validatorArguments.min : Number.MIN_SAFE_INTEGER),
            Validators.max(((validatorArguments) && (validatorArguments.max != undefined)) ? validatorArguments.max : Number.MAX_SAFE_INTEGER),
        ]);
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        /* This needs to be called at first. */
        this.setNewLanguage(this._transServ);
        /* Sets the default values. */
        this.init('', '', false, false);
        /* Changes the translation when the language changes. */
        this._transServ.onLangChange.subscribe((/**
         * @param {?} params
         * @return {?}
         */
        (params) => {
            this.setNewLanguage(this._transServ);
        }));
    }
    /**
     * Sets the new language.
     * @protected
     * @param {?} transServ The `TranslateService` instance injected.
     * @return {?}
     */
    setNewLanguage(transServ) {
        /* First, do this test for optimization. */
        if (InputNumberComponent.currentLang != transServ.currentLang) {
            super.setNewLanguage(transServ);
            /* The `InputNumberComponent.currentLang` value is updated correctly in the parent class. */
            transServ.get(['TOCO_NG_ERROR_MSG_NUM_INVAL', 'TOCO_NG_ERROR_MSG_NUM_MINIMO', 'TOCO_NG_ERROR_MSG_NUM_MAXIMO']).subscribe((/**
             * @param {?} res
             * @return {?}
             */
            (res) => {
                InputNumberComponent.toco_ng_Error_Msg_Num_Inval = res.TOCO_NG_ERROR_MSG_NUM_INVAL;
                InputNumberComponent.toco_ng_Error_Msg_Num_Minimo = res.TOCO_NG_ERROR_MSG_NUM_MINIMO;
                InputNumberComponent.toco_ng_Error_Msg_Num_Maximo = res.TOCO_NG_ERROR_MSG_NUM_MAXIMO;
            }));
        }
    }
    /**
     * Returns an error string if the control is in an error state; otherwise, empty string.
     * @return {?}
     */
    getErrorMessage() {
        /** @type {?} */
        let validationErrors = this.content.formControl.errors;
        /* Shows the code errors. */
        if (validationErrors) {
            if (validationErrors[Validators.required.name]) {
                return InputNumberComponent.toco_ng_Error_Msg_Requerido;
            }
            if (validationErrors[Validators.pattern.name]) {
                return InputNumberComponent.toco_ng_Error_Msg_Num_Inval;
            }
            if (validationErrors[Validators.min.name]) {
                return InputNumberComponent.toco_ng_Error_Msg_Num_Minimo + validationErrors[Validators.min.name].min + '.';
            }
            if (validationErrors[Validators.max.name]) {
                return InputNumberComponent.toco_ng_Error_Msg_Num_Maximo + validationErrors[Validators.max.name].max + '.';
            }
        }
        return '';
    }
}
InputNumberComponent.toco_ng_Error_Msg_Num_Inval = '';
InputNumberComponent.toco_ng_Error_Msg_Num_Minimo = '';
InputNumberComponent.toco_ng_Error_Msg_Num_Maximo = '';
InputNumberComponent.decorators = [
    { type: Component, args: [{
                selector: 'input-number',
                template: "\n<mat-form-field class=\"text-mat-form-field\" [appearance]=\"content.appearance\">\n<!-- <mat-form-field class=\"text-mat-form-field\" [appearance]=\"content.appearance\" [formGroup]=\"content.parentFormSection\"> -->\n\n    <mat-label>{{ content.label | translate }}</mat-label>\n\n    <input matInput [formControl]=\"content.formControl\" [required]=\"content.required\" [placeholder]=\"content.placeholder | translate\" [style.textAlign]=\"content.textAlign\" [attr.aria-label]=\"content.ariaLabel | translate\" (input)=\"handleInput()\" />\n    <!-- <input matInput id=\"inputId-{{ content.name }}\" class=\"input-text-element\" [formControl]=\"content.formControl\" [required]=\"content.required\" [placeholder]=\"content.placeholder | translate\" [style.textAlign]=\"content.textAlign\" [attr.aria-label]=\"content.ariaLabel | translate\" (input)=\"handleInput()\" [formControlName]=\"content.name\" /> -->\n\n    <!-- At the moment of writing this code (2019-08-03), I think that there is an error in `ng-container` or \n        `mat-icon` or something related because I can not put the `mat-icon` tag within an `ng-container` tag \n        because the normal layout of `mat-icon` is modified. This is a contradiction because the `ng-container` \n        does not interfere with styles or layout. -->\n\n    <!-- Only renders one of these two `mat-icon` or nothing. -->\n    <mat-icon *ngIf=\"content.prefixIcon && iconSourceState(content.prefixIcon, iconSource.internal)\" class=\"text-mat-icon-prefix mat-icon {{ content.appearance }} notranslate\" matPrefix [svgIcon]=\"content.prefixIcon.name\"></mat-icon>\n    <mat-icon *ngIf=\"content.prefixIcon && iconSourceState(content.prefixIcon, iconSource.external)\" class=\"text-mat-icon-prefix mat-icon {{ content.appearance }} notranslate\" matPrefix>{{ content.prefixIcon.name }}</mat-icon>\n\n    <!-- Only renders one of these two `mat-icon` or nothing. -->\n    <mat-icon *ngIf=\"content.suffixIcon && iconSourceState(content.suffixIcon, iconSource.internal)\" class=\"text-mat-icon-suffix mat-icon {{ content.appearance }} notranslate\" matSuffix [svgIcon]=\"content.suffixIcon.name\"></mat-icon>\n    <mat-icon *ngIf=\"content.suffixIcon && iconSourceState(content.suffixIcon, iconSource.external)\" class=\"text-mat-icon-suffix mat-icon {{ content.appearance }} notranslate\" matSuffix>{{ content.suffixIcon.name }}</mat-icon>\n\n    <span *ngIf=\"content.prefixText\" matPrefix><pre class=\"content.appearance\">{{ content.prefixText }}</pre></span>\n    <span *ngIf=\"content.suffixText\" matSuffix><pre class=\"content.appearance\">{{ content.suffixText }}</pre></span>\n\n    <mat-hint *ngIf=\"hintState && content.startHint\" [align]=\"'start'\">{{ content.startHint.label | translate }}</mat-hint>\n    <mat-hint *ngIf=\"hintState && content.endHint\" [align]=\"'end'\">{{ content.endHint.label | translate }}</mat-hint>\n    <mat-error *ngIf=\"errorState\">\n        <ng-container *ngIf=\"isTranslationBuiltByControl; then thenTemplate_BuildTranslation; else elseTemplate_NotBuildTranslation\"></ng-container>\n\n        <ng-template #thenTemplate_BuildTranslation>{{ getErrorMessage() }}</ng-template>\n\n        <ng-template #elseTemplate_NotBuildTranslation>{{ getErrorMessage() | translate }}</ng-template>\n    </mat-error>\n\n</mat-form-field>\n",
                host: {
                    '[style.minWidth]': 'content.minWidth',
                    '[style.width]': 'content.width'
                },
                styles: [".text-mat-form-field{width:100%;cursor:text}.text-mat-icon-prefix{margin-right:8px}.text-mat-icon-prefix.standard{position:relative;top:4px}.text-mat-icon-suffix{margin-left:8px}.text-mat-icon-suffix.standard{position:relative;top:4px}pre{margin:0}pre.outline{position:relative;bottom:4px}"]
            }] }
];
/** @nocollapse */
InputNumberComponent.ctorParameters = () => [
    { type: TranslateService }
];
if (false) {
    /**
     * @type {?}
     * @protected
     */
    InputNumberComponent.toco_ng_Error_Msg_Num_Inval;
    /**
     * @type {?}
     * @protected
     */
    InputNumberComponent.toco_ng_Error_Msg_Num_Minimo;
    /**
     * @type {?}
     * @protected
     */
    InputNumberComponent.toco_ng_Error_Msg_Num_Maximo;
    /**
     * @type {?}
     * @private
     */
    InputNumberComponent.prototype._transServ;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibnVtYmVyLWlucHV0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3RvY28tbGliLyIsInNvdXJjZXMiOlsibGliL2Zvcm1zL2lucHV0L251bWJlci9udW1iZXItaW5wdXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQ0EsT0FBTyxFQUFFLFNBQVMsRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUNsRCxPQUFPLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBb0IsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzRSxPQUFPLEVBQW1CLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFJeEUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGtCQUFrQixDQUFDOzs7O0FBY2hELE1BQU0sT0FBTyxvQkFBcUIsU0FBUSxZQUFZOzs7O0lBZ0NsRCxZQUEyQixVQUE0QjtRQUVuRCxLQUFLLEVBQUUsQ0FBQztRQUZlLGVBQVUsR0FBVixVQUFVLENBQWtCO1FBSW5ELDhDQUE4QztRQUM5QyxJQUFJLENBQUMsMkJBQTJCLEdBQUcsSUFBSSxDQUFDO0lBQzVDLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQW5CTSxNQUFNLENBQUMsdUJBQXVCLENBQUMscUJBQXlDLFNBQVM7UUFFcEYsT0FBTyxJQUFJLFdBQVcsQ0FBQyxDQUFDLEVBQUU7WUFDdEIsVUFBVSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUM7WUFDaEMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsSUFBSSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQztZQUNsSSxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsR0FBRyxJQUFJLFNBQVMsQ0FB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MEQ7Ozs7O0lBQzFELGtEQUEyRDs7Ozs7SUFDM0Qsa0RBQTJEOzs7OztJQUV4QywwQ0FBb0MiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtQ29udHJvbCwgVmFsaWRhdG9ycywgVmFsaWRhdGlvbkVycm9ycyB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IExhbmdDaGFuZ2VFdmVudCwgVHJhbnNsYXRlU2VydmljZSB9IGZyb20gJ0BuZ3gtdHJhbnNsYXRlL2NvcmUnO1xuXG5pbXBvcnQgeyBWYWxpZGF0b3JBcmd1bWVudHMgfSBmcm9tICcuLi8uLi9mb3JtLWZpZWxkLmNvbnRyb2wnO1xuXG5pbXBvcnQgeyBJbnB1dENvbnRyb2wgfSBmcm9tICcuLi9pbnB1dC5jb250cm9sJztcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY29udHJvbCB0aGF0IGFsbG93cyB0aGUgd3JpdGluZyBvZiBhIG51bWJlci4gXG4gKi9cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnaW5wdXQtbnVtYmVyJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4uL3RleHQvdGV4dC1pbnB1dC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4uL3RleHQvdGV4dC1pbnB1dC5jb21wb25lbnQuc2NzcyddLFxuICAgIGhvc3Q6IHtcbiAgICAgICAgJ1tzdHlsZS5taW5XaWR0aF0nOiAnY29udGVudC5taW5XaWR0aCcsXG4gICAgICAgICdbc3R5bGUud2lkdGhdJzogJ2NvbnRlbnQud2lkdGgnXG4gICAgfVxufSlcbmV4cG9ydCBjbGFzcyBJbnB1dE51bWJlckNvbXBvbmVudCBleHRlbmRzIElucHV0Q29udHJvbCBpbXBsZW1lbnRzIE9uSW5pdFxue1xuICAgIC8vIFRPRE86IFB1ZWRvIGhhY2VyIHF1ZSBlc3RlIGNvbnRyb2wgc2VhIG3DoXMgZ2VuZXJhbCwgcXVlIHBlcm1pdGEgbGEgZW50cmFkYSBkZSB2YWxvcmVzIFxuICAgIC8vIGVudGVyb3MgeSBkb3VibGVzIGhhY2llbmRvIGxhcyBzaWd1aWVudGVzIG1vZGlmaWNhY2lvbmVzOiBcbiAgICAvLyAgKiBJbmljaWFsaXphciBlbCBgVmFsaWRhdG9ycy5wYXR0ZXJuKCctLS0tJylgIGNvbiB1biBwYXRyw7NuIHBhcmEgZG91YmxlIHZhbHVlcyBzZWfDum4gdmFsb3IgcXVlIHJlY2liZSBlbiBcbiAgICAvLyAgICBgdmFsaWRhdG9yQXJndW1lbnRzYCBxdWUgZGljZSBzaSBpbnRlZ2VyIG8gZG91YmxlLiBcbiAgICAvLyAgKiBIYWNlciB0cmF0YW1pZW50byBkZSBlcnJvciBjb3JyZWN0YW1lbnRlIGVtIG3DqXRvZG8gYGdldEVycm9yTWVzc2FnZSgpYC4gXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgYEZvcm1Db250cm9sYCBieSBkZWZhdWx0LiBcbiAgICAgKiBJdCBpcyB1c2VkIHRvIGluaXRpYWxpemVkIHRoZSBgSW5wdXROdW1iZXJDb21wb25lbnRgJ3MgYGNvbnRlbnQuZm9ybUNvbnRyb2xgIHZhbHVlIGJ5IGRlZmF1bHQuIFxuICAgICAqIEBwYXJhbSB2YWxpZGF0b3JBcmd1bWVudHMgQSBjb2xsZWN0aW9uIG9mIGtleS92YWx1ZSBlbGVtZW50cywgd2hlcmUgdGhlIGtleSBpcyB0aGUgdmFsaWRhdG9yIG5hbWUgXG4gICAgICogYW5kIHRoZSB2YWx1ZSBpcyB0aGUgdmFsdWUgdGhhdCB0aGUgdmFsaWRhdG9yIG5lZWRzIHRvIGNoZWNrLiBcbiAgICAgKiBJbiB0aGUgYHZhbGlkYXRvckFyZ3VtZW50c2AgYXJndW1lbnQsIHlvdSBjYW4gc3BlY2lmeSBhbiBvYmplY3Qgd2l0aCB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBwb3NzaWJsZSBcbiAgICAgKiB2YWx1ZXMgZm9yIHRoZSBudW1iZXIgdGhhdCBob2xkcyB0aGUgY29udHJvbC4gXG4gICAgICogRm9yIGV4YW1wbGU6IElmIHRoZSBtaW5pbXVtIHBvc3NpYmxlIHZhbHVlIGlzIDAgYW5kIG1heGltdW0gaXMgNTAsIHlvdSBjYW4gY2FsbCB0aGUgYGdldEZvcm1Db250cm9sQnlEZWZhdWx0YCBcbiAgICAgKiBtZXRob2QgaW4gdGhpcyB3YXk6IFxuICAgICAqIElucHV0TnVtYmVyQ29tcG9uZW50LmdldEZvcm1Db250cm9sQnlEZWZhdWx0KHsgJ21pbic6IDAsICdtYXgnOiA1MCB9KTtcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldEZvcm1Db250cm9sQnlEZWZhdWx0KHZhbGlkYXRvckFyZ3VtZW50czogVmFsaWRhdG9yQXJndW1lbnRzID0gdW5kZWZpbmVkKTogRm9ybUNvbnRyb2xcbiAgICB7XG4gICAgICAgIHJldHVybiBuZXcgRm9ybUNvbnRyb2woMCwgW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5wYXR0ZXJuKCdeLT9bMC05XSskJyksXG4gICAgICAgICAgICBWYWxpZGF0b3JzLm1pbigoKHZhbGlkYXRvckFyZ3VtZW50cykgJiYgKHZhbGlkYXRvckFyZ3VtZW50cy5taW4gIT0gdW5kZWZpbmVkKSkgPyB2YWxpZGF0b3JBcmd1bWVudHMubWluIDogTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIpLFxuICAgICAgICAgICAgVmFsaWRhdG9ycy5tYXgoKCh2YWxpZGF0b3JBcmd1bWVudHMpICYmICh2YWxpZGF0b3JBcmd1bWVudHMubWF4ICE9IHVuZGVmaW5lZCkpID8gdmFsaWRhdG9yQXJndW1lbnRzLm1heCA6IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSxcbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHN0YXRpYyB0b2NvX25nX0Vycm9yX01zZ19OdW1fSW52YWw6IHN0cmluZyA9ICcnO1xuICAgIHByb3RlY3RlZCBzdGF0aWMgdG9jb19uZ19FcnJvcl9Nc2dfTnVtX01pbmltbzogc3RyaW5nID0gJyc7XG4gICAgcHJvdGVjdGVkIHN0YXRpYyB0b2NvX25nX0Vycm9yX01zZ19OdW1fTWF4aW1vOiBzdHJpbmcgPSAnJztcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIF90cmFuc1NlcnY6IFRyYW5zbGF0ZVNlcnZpY2UpXG4gICAge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIC8qIFRoZSB0cmFuc2xhdGlvbiBpcyBidWlsdCBieSB0aGUgY29udHJvbC4gKi9cbiAgICAgICAgdGhpcy5pc1RyYW5zbGF0aW9uQnVpbHRCeUNvbnRyb2wgPSB0cnVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBuZ09uSW5pdCgpOiB2b2lkXG4gICAge1xuICAgICAgICAvKiBUaGlzIG5lZWRzIHRvIGJlIGNhbGxlZCBhdCBmaXJzdC4gKi9cbiAgICAgICAgdGhpcy5zZXROZXdMYW5ndWFnZSh0aGlzLl90cmFuc1NlcnYpO1xuXG4gICAgICAgIC8qIFNldHMgdGhlIGRlZmF1bHQgdmFsdWVzLiAqL1xuICAgICAgICB0aGlzLmluaXQoJycsICcnLCBmYWxzZSwgZmFsc2UpO1xuXG5cdFx0LyogQ2hhbmdlcyB0aGUgdHJhbnNsYXRpb24gd2hlbiB0aGUgbGFuZ3VhZ2UgY2hhbmdlcy4gKi9cblx0XHR0aGlzLl90cmFuc1NlcnYub25MYW5nQ2hhbmdlLnN1YnNjcmliZSgocGFyYW1zOiBMYW5nQ2hhbmdlRXZlbnQpID0+IHtcblx0XHRcdHRoaXMuc2V0TmV3TGFuZ3VhZ2UodGhpcy5fdHJhbnNTZXJ2KTtcblx0XHR9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBuZXcgbGFuZ3VhZ2UuIFxuICAgICAqIEBwYXJhbSB0cmFuc1NlcnYgVGhlIGBUcmFuc2xhdGVTZXJ2aWNlYCBpbnN0YW5jZSBpbmplY3RlZC4gXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHNldE5ld0xhbmd1YWdlKHRyYW5zU2VydjogVHJhbnNsYXRlU2VydmljZSk6IHZvaWRcbiAgICB7XG4gICAgICAgIC8qIEZpcnN0LCBkbyB0aGlzIHRlc3QgZm9yIG9wdGltaXphdGlvbi4gKi9cbiAgICAgICAgaWYgKElucHV0TnVtYmVyQ29tcG9uZW50LmN1cnJlbnRMYW5nICE9IHRyYW5zU2Vydi5jdXJyZW50TGFuZylcbiAgICAgICAge1xuICAgICAgICAgICAgc3VwZXIuc2V0TmV3TGFuZ3VhZ2UodHJhbnNTZXJ2KTtcblxuICAgICAgICAgICAgLyogVGhlIGBJbnB1dE51bWJlckNvbXBvbmVudC5jdXJyZW50TGFuZ2AgdmFsdWUgaXMgdXBkYXRlZCBjb3JyZWN0bHkgaW4gdGhlIHBhcmVudCBjbGFzcy4gKi9cblxuICAgICAgICAgICAgdHJhbnNTZXJ2LmdldChbJ1RPQ09fTkdfRVJST1JfTVNHX05VTV9JTlZBTCcsICdUT0NPX05HX0VSUk9SX01TR19OVU1fTUlOSU1PJywgJ1RPQ09fTkdfRVJST1JfTVNHX05VTV9NQVhJTU8nXSkuc3Vic2NyaWJlKChyZXM6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIElucHV0TnVtYmVyQ29tcG9uZW50LnRvY29fbmdfRXJyb3JfTXNnX051bV9JbnZhbCA9IHJlcy5UT0NPX05HX0VSUk9SX01TR19OVU1fSU5WQUw7XG4gICAgICAgICAgICAgICAgSW5wdXROdW1iZXJDb21wb25lbnQudG9jb19uZ19FcnJvcl9Nc2dfTnVtX01pbmltbyA9IHJlcy5UT0NPX05HX0VSUk9SX01TR19OVU1fTUlOSU1PO1xuICAgICAgICAgICAgICAgIElucHV0TnVtYmVyQ29tcG9uZW50LnRvY29fbmdfRXJyb3JfTXNnX051bV9NYXhpbW8gPSByZXMuVE9DT19OR19FUlJPUl9NU0dfTlVNX01BWElNTztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlcnJvciBzdHJpbmcgaWYgdGhlIGNvbnRyb2wgaXMgaW4gYW4gZXJyb3Igc3RhdGU7IG90aGVyd2lzZSwgZW1wdHkgc3RyaW5nLiBcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0RXJyb3JNZXNzYWdlKCk6IHN0cmluZ1xuICAgIHtcbiAgICAgICAgbGV0IHZhbGlkYXRpb25FcnJvcnM6IFZhbGlkYXRpb25FcnJvcnMgPSB0aGlzLmNvbnRlbnQuZm9ybUNvbnRyb2wuZXJyb3JzO1xuXG4gICAgICAgIC8qIFNob3dzIHRoZSBjb2RlIGVycm9ycy4gKi9cbiAgICAgICAgaWYgKHZhbGlkYXRpb25FcnJvcnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzW1ZhbGlkYXRvcnMucmVxdWlyZWQubmFtZV0pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIElucHV0TnVtYmVyQ29tcG9uZW50LnRvY29fbmdfRXJyb3JfTXNnX1JlcXVlcmlkbztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHZhbGlkYXRpb25FcnJvcnNbVmFsaWRhdG9ycy5wYXR0ZXJuLm5hbWVdKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBJbnB1dE51bWJlckNvbXBvbmVudC50b2NvX25nX0Vycm9yX01zZ19OdW1fSW52YWw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzW1ZhbGlkYXRvcnMubWluLm5hbWVdKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBJbnB1dE51bWJlckNvbXBvbmVudC50b2NvX25nX0Vycm9yX01zZ19OdW1fTWluaW1vICsgdmFsaWRhdGlvbkVycm9yc1tWYWxpZGF0b3JzLm1pbi5uYW1lXS5taW4gKyAnLic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uRXJyb3JzW1ZhbGlkYXRvcnMubWF4Lm5hbWVdKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiBJbnB1dE51bWJlckNvbXBvbmVudC50b2NvX25nX0Vycm9yX01zZ19OdW1fTWF4aW1vICsgdmFsaWRhdGlvbkVycm9yc1tWYWxpZGF0b3JzLm1heC5uYW1lXS5tYXggKyAnLic7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuIl19