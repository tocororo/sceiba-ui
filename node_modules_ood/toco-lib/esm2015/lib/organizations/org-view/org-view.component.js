/**
 * @fileoverview added by tsickle
 * Generated from: lib/organizations/org-view/org-view.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input } from '@angular/core';
import { Organization } from '../../entities/public-api';
import { OrgViewAccordionType } from './org-view-accordion/org-view-accordion.component';
/**
 * @record
 */
export function RelationshipLink() { }
if (false) {
    /** @type {?} */
    RelationshipLink.prototype.url;
    /** @type {?} */
    RelationshipLink.prototype.name;
}
/**
 * @record
 */
export function RelationshipsValue() { }
if (false) {
    /** @type {?} */
    RelationshipsValue.prototype.links;
}
export class OrgViewComponent {
    constructor() {
        this.showContent = true;
        this.orgViewAccordionType = OrgViewAccordionType;
        this.org = undefined;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // si se recibe un objeto que no tiene todos los campos.
        /** @type {?} */
        let org_full = new Organization();
        org_full.deepcopy(this.org);
        this.org = org_full;
        this._panelsTitle_Relationships = ['Organizaciones Padres', 'Organizaciones Hijas', 'Organizaciones Relacionadas'];
        this._relationshipsValue = this._createRelationshipsValue();
        this._addressesValue = this._createAddressesValue(); /* This initialization is first than the `_panelsTitle_Addresses` initialization. */
        // this._panelsTitle_Addresses = (this.org.addresses) ? this._createPanelsTitle_Generic(this.orgViewAccordionType.Addresses, this.org.addresses.length) : [ ];
        this._panelsTitle_Addresses = this._createPanelsTitle_Addresses();
    }
    /**
     * @return {?}
     */
    ngOnChanges() {
        this.ngOnInit();
    }
    /**
     * Creates a generic array of panels title.
     * Usage example:
     * this._panelsTitle_Addresses = (this.org.addresses) ? this._createPanelsTitle_Generic(this.orgViewAccordionType.Addresses, this.org.addresses.length) : [ ];
     * @private
     * @param {?} orgViewAccordionType The `OrgViewAccordionComponent` type.
     * @param {?} panelsTitleCount Amount of panels title.
     * @return {?}
     */
    _createPanelsTitle_Generic(orgViewAccordionType, panelsTitleCount) {
        /** @type {?} */
        let panelsTitle = [];
        /* Initializae the `panelsTitle` array. */
        for (let i = 0; i < panelsTitleCount;) {
            panelsTitle.push(`${orgViewAccordionType} (${++i}) of (${panelsTitleCount})`);
        }
        return panelsTitle;
    }
    /**
     * @private
     * @return {?}
     */
    _createPanelsTitle_Addresses() {
        /** @type {?} */
        let panelsTitle = [];
        /** @type {?} */
        let panelsTitleCount = this._addressesValue.length;
        /* Initializae the `panelsTitle` array. */
        for (let i = 0; i < panelsTitleCount; i++) {
            panelsTitle.push(`${this._addressesValue[i].city} | ${this._addressesValue[i].country} ${(this._addressesValue[i].primary) ? '(Principal)' : ''}`);
        }
        return panelsTitle;
    }
    /**
     * @private
     * @return {?}
     */
    _createRelationshipsValue() {
        /* The positions represent:
             * pos = 0 --> Organizaciones Padres
             * pos = 1 --> Organizaciones Hijas
             * pos = 2 --> Organizaciones Relacionadas */
        /** @type {?} */
        let result = [];
        /** @type {?} */
        let pos = -1;
        /** @type {?} */
        let item;
        for (item of this._panelsTitle_Relationships) {
            result.push({
                'links': []
            });
        }
        if (this.org.relationships) {
            for (item of this.org.relationships) {
                switch (item.type) {
                    case 'parent':
                        {
                            pos = 0;
                            break;
                        }
                    case 'child':
                        {
                            pos = 1;
                            break;
                        }
                    default: /* 'related' */
                        {
                            pos = 2;
                            break;
                        }
                }
                result[pos].links.push({
                    // 'url': `${ item.id }/view`,
                    'url': '/' + item.id + '/view',
                    'name': item.label
                });
            }
        }
        return result;
    }
    /**
     * Returns an array of addresses ordered by the `primary` field of its addresses,
     * the true values are first than the false values.
     * @private
     * @return {?}
     */
    _createAddressesValue() {
        /** @type {?} */
        let result = [];
        /** @type {?} */
        let noPrimary = [];
        for (let item of this.org.addresses) {
            if (item.primary) {
                result.push(item);
            }
            else {
                noPrimary.push(item);
            }
        }
        return result.concat(noPrimary);
    }
    /**
     * @return {?}
     */
    get getPanelsTitle_Relationships() {
        return this._panelsTitle_Relationships;
    }
    /**
     * @return {?}
     */
    get getValue_Relationships() {
        return this._relationshipsValue;
    }
    /**
     * @return {?}
     */
    get getPanelsTitle_Addresses() {
        return this._panelsTitle_Addresses;
    }
    /**
     * @return {?}
     */
    get getValue_Addresses() {
        return this._addressesValue;
    }
}
OrgViewComponent.decorators = [
    { type: Component, args: [{
                selector: 'toco-org-view',
                template: "\n<mat-card *ngIf=\"org\" class=\"container-panel-mat-card\" [attr.aria-label]=\"'Muestra la organizaci\u00F3n seleccionada'\">\n  <mat-card-header>\n\n    <!-- <div mat-card-avatar class=\"example-header-image\"></div> -->\n    <mat-card-title class=\"title-padding\">{{ org.name }}</mat-card-title>\n    <mat-card-subtitle class=\"title-padding\">SceibaOrgID: {{ org.id }}</mat-card-subtitle>\n    <mat-card-subtitle *ngIf=\"org.status\" class=\"cursor-default title-padding\">\n      Estatus de la organizaci\u00F3n: {{ org.status }}\n    </mat-card-subtitle>\n\n  </mat-card-header>\n\n  <mat-card-content *ngIf=\"showContent\">\n\n    <static-table *ngIf=\"org.identifiers && org.identifiers.length\" [desc]=\"'Lista de los identificadores de la organizaci\u00F3n'\" [value]=\"org.identifiers\"\n      [columnsObjectProperty]=\"['idtype', 'value']\"\n      [columnsHeaderText]=\"['Identifier type', 'Identifier value']\"\n    >\n    </static-table>\n    <static-chips *ngIf=\"org.aliases && org.aliases.length\" [desc]=\"'Lista de otros nombres con los que se conoce la organizaci\u00F3n'\" [value]=\"org.aliases\"></static-chips>\n    <static-chips *ngIf=\"org.acronyms && org.acronyms.length\" [desc]=\"'Lista de los acr\u00F3nimos con que se conoce la organizaci\u00F3n'\" [value]=\"org.acronyms\"></static-chips>\n    <static-chips *ngIf=\"org.types && org.types.length\" [desc]=\"'Lista de los tipos que describen la organizaci\u00F3n'\" [value]=\"org.types\"></static-chips>\n    <static-text *ngIf=\"org.wikipedia_url\" [desc]=\"'URL de la p\u00E1gina de Wikipedia de la organizaci\u00F3n'\" [value]=\"org.wikipedia_url\"></static-text>\n    <static-text *ngIf=\"org.redirect\" [desc]=\"'URL de la p\u00E1gina originaria de la organizaci\u00F3n'\" [value]=\"org.redirect.properties.value\"></static-text>\n    <static-text *ngIf=\"org.email_address\" [desc]=\"'Correo electr\u00F3nico de contacto de la organizaci\u00F3n'\" [value]=\"org.email_address\"></static-text>\n    <!-- <static-chips *ngIf=\"org.ip_addresses && org.ip_addresses.length\" [desc]=\"'Lista de direcciones IP conocidas que pertenecen a la organizaci\u00F3n'\" [value]=\"org.ip_addresses\"></static-chips> -->\n    <static-text *ngIf=\"org.established\" [desc]=\"'A\u00F1o de fundada la organizaci\u00F3n'\" [value]=\"org.established\"></static-text>\n    <static-text *ngIf=\"org.onei_registry\" [desc]=\"'N\u00FAmero de registro en la ONEI'\" [value]=\"org.onei_registry\"></static-text>\n    <static-chips *ngIf=\"org.links && org.links.length\" [desc]=\"'Lista de los enlaces conocidos de la organizaci\u00F3n'\" [value]=\"org.links\"></static-chips>\n    <static-table *ngIf=\"org.labels && org.labels.length\" [desc]=\"'Nombre de la organizaci\u00F3n en diferentes lenguajes'\" [value]=\"org.labels\"\n      [columnsObjectProperty]=\"['label', 'iso639']\"\n      [columnsHeaderText]=\"['Institute name in a language variant', 'ISO-639-1 language code']\"\n    >\n    </static-table>\n    <toco-org-view-accordion *ngIf=\"org.relationships && org.relationships.length\" [desc]=\"'Relaciones con otras organizaciones'\" [value]=\"getValue_Relationships\"\n      [orgViewAccordionType]=\"orgViewAccordionType.Relationships\"\n      [panelsTitle] = \"getPanelsTitle_Relationships\"\n    >\n    </toco-org-view-accordion>\n    <toco-org-view-accordion *ngIf=\"org.addresses && org.addresses.length\" [desc]=\"'Direcciones conocidas de la organizaci\u00F3n'\" [value]=\"getValue_Addresses\"\n      [orgViewAccordionType]=\"orgViewAccordionType.Addresses\"\n      [panelsTitle] = \"getPanelsTitle_Addresses\"\n    >\n    </toco-org-view-accordion>\n\n  </mat-card-content>\n</mat-card>\n",
                styles: [".cursor-default{cursor:default}.title-padding{padding:0 0 0 .1em}.example-header-image{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}.form-container{display:flex;flex-direction:column;justify-content:start;width:40%}"]
            }] }
];
/** @nocollapse */
OrgViewComponent.ctorParameters = () => [];
OrgViewComponent.propDecorators = {
    org: [{ type: Input }],
    showContent: [{ type: Input }]
};
if (false) {
    /**
     * Represents the `OrgViewAccordionType` enum for internal use.
     * @type {?}
     */
    OrgViewComponent.prototype.orgViewAccordionType;
    /**
     * Represents the current organization.
     * @type {?}
     */
    OrgViewComponent.prototype.org;
    /** @type {?} */
    OrgViewComponent.prototype.showContent;
    /**
     * @type {?}
     * @private
     */
    OrgViewComponent.prototype._panelsTitle_Relationships;
    /**
     * @type {?}
     * @private
     */
    OrgViewComponent.prototype._relationshipsValue;
    /**
     * @type {?}
     * @private
     */
    OrgViewComponent.prototype._panelsTitle_Addresses;
    /**
     * @type {?}
     * @private
     */
    OrgViewComponent.prototype._addressesValue;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JnLXZpZXcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vdG9jby1saWIvIiwic291cmNlcyI6WyJsaWIvb3JnYW5pemF0aW9ucy9vcmctdmlldy9vcmctdmlldy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBcUIsTUFBTSxlQUFlLENBQUM7QUFDcEUsT0FBTyxFQUFXLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLG1EQUFtRCxDQUFDOzs7O0FBSXpGLHNDQUlDOzs7SUFGQywrQkFBWTs7SUFDWixnQ0FBYTs7Ozs7QUFHZix3Q0FHQzs7O0lBREMsbUNBQTBCOztBQVE1QixNQUFNLE9BQU8sZ0JBQWdCO0lBc0IzQjtRQVJPLGdCQUFXLEdBQVksSUFBSSxDQUFDO1FBVWpDLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxvQkFBb0IsQ0FBQztRQUVqRCxJQUFJLENBQUMsR0FBRyxHQUFHLFNBQVMsQ0FBQztJQUN2QixDQUFDOzs7O0lBRU0sUUFBUTs7O1lBR1QsUUFBUSxHQUFHLElBQUksWUFBWSxFQUFFO1FBQ2pDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxHQUFHLEdBQUcsUUFBUSxDQUFDO1FBRXBCLElBQUksQ0FBQywwQkFBMEIsR0FBRyxDQUFDLHVCQUF1QixFQUFFLHNCQUFzQixFQUFFLDZCQUE2QixDQUFDLENBQUM7UUFDbkgsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxDQUFDO1FBRTVELElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUMsQ0FBRSxvRkFBb0Y7UUFDMUksOEpBQThKO1FBQzlKLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxJQUFJLENBQUMsNEJBQTRC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QUE0QjtRQUVyQyxPQUFPLElBQUksQ0FBQywwQkFBMEIsQ0FBQztJQUN6QyxDQUFDOzs7O0lBRUQsSUFBVyxzQkFBc0I7UUFFL0IsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUM7SUFDbEMsQ0FBQzs7OztJQUVELElBQVcsd0JBQXdCO1FBRWpDLE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDO0lBQ3JDLENBQUM7Ozs7SUFFRCxJQUFXLGtCQUFrQjtRQUUzQixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7SUFDOUIsQ0FBQzs7O1lBckxGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsZUFBZTtnQkFDekIsaW1IQUF3Qzs7YUFFekM7Ozs7O2tCQVdFLEtBQUs7MEJBR0wsS0FBSzs7Ozs7OztJQVJOLGdEQUFrRTs7Ozs7SUFLbEUsK0JBQ3lCOztJQUV6Qix1Q0FDbUM7Ozs7O0lBRW5DLHNEQUE2Qzs7Ozs7SUFDN0MsK0NBQWtEOzs7OztJQUVsRCxrREFBeUM7Ozs7O0lBQ3pDLDJDQUFtQyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25DaGFuZ2VzLCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFkZHJlc3MsIE9yZ2FuaXphdGlvbiB9IGZyb20gJy4uLy4uL2VudGl0aWVzL3B1YmxpYy1hcGknO1xuaW1wb3J0IHsgT3JnVmlld0FjY29yZGlvblR5cGUgfSBmcm9tICcuL29yZy12aWV3LWFjY29yZGlvbi9vcmctdmlldy1hY2NvcmRpb24uY29tcG9uZW50JztcblxuXG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVsYXRpb25zaGlwTGlua1xue1xuICB1cmw6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlbGF0aW9uc2hpcHNWYWx1ZVxue1xuICBsaW5rczogUmVsYXRpb25zaGlwTGlua1tdO1xufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd0b2NvLW9yZy12aWV3JyxcbiAgdGVtcGxhdGVVcmw6ICcuL29yZy12aWV3LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vb3JnLXZpZXcuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBPcmdWaWV3Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXNcbntcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRzIHRoZSBgT3JnVmlld0FjY29yZGlvblR5cGVgIGVudW0gZm9yIGludGVybmFsIHVzZS5cbiAgICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IG9yZ1ZpZXdBY2NvcmRpb25UeXBlOiB0eXBlb2YgT3JnVmlld0FjY29yZGlvblR5cGU7XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgdGhlIGN1cnJlbnQgb3JnYW5pemF0aW9uLlxuICAgKi9cbiAgQElucHV0KClcbiAgcHVibGljIG9yZzogT3JnYW5pemF0aW9uO1xuXG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBzaG93Q29udGVudDogYm9vbGVhbiA9IHRydWU7XG5cbiAgcHJpdmF0ZSBfcGFuZWxzVGl0bGVfUmVsYXRpb25zaGlwczogc3RyaW5nW107XG4gIHByaXZhdGUgX3JlbGF0aW9uc2hpcHNWYWx1ZTogUmVsYXRpb25zaGlwc1ZhbHVlW107XG5cbiAgcHJpdmF0ZSBfcGFuZWxzVGl0bGVfQWRkcmVzc2VzOiBzdHJpbmdbXTtcbiAgcHJpdmF0ZSBfYWRkcmVzc2VzVmFsdWU6IEFkZHJlc3NbXTtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoKVxuICB7XG4gICAgdGhpcy5vcmdWaWV3QWNjb3JkaW9uVHlwZSA9IE9yZ1ZpZXdBY2NvcmRpb25UeXBlO1xuXG4gICAgdGhpcy5vcmcgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBwdWJsaWMgbmdPbkluaXQoKTogdm9pZFxuICB7XG4gICAgLy8gc2kgc2UgcmVjaWJlIHVuIG9iamV0byBxdWUgbm8gdGllbmUgdG9kb3MgbG9zIGNhbXBvcy5cbiAgICBsZXQgb3JnX2Z1bGwgPSBuZXcgT3JnYW5pemF0aW9uKCk7XG4gICAgb3JnX2Z1bGwuZGVlcGNvcHkodGhpcy5vcmcpO1xuICAgIHRoaXMub3JnID0gb3JnX2Z1bGw7XG5cbiAgICB0aGlzLl9wYW5lbHNUaXRsZV9SZWxhdGlvbnNoaXBzID0gWydPcmdhbml6YWNpb25lcyBQYWRyZXMnLCAnT3JnYW5pemFjaW9uZXMgSGlqYXMnLCAnT3JnYW5pemFjaW9uZXMgUmVsYWNpb25hZGFzJ107XG4gICAgdGhpcy5fcmVsYXRpb25zaGlwc1ZhbHVlID0gdGhpcy5fY3JlYXRlUmVsYXRpb25zaGlwc1ZhbHVlKCk7XG5cbiAgICB0aGlzLl9hZGRyZXNzZXNWYWx1ZSA9IHRoaXMuX2NyZWF0ZUFkZHJlc3Nlc1ZhbHVlKCk7ICAvKiBUaGlzIGluaXRpYWxpemF0aW9uIGlzIGZpcnN0IHRoYW4gdGhlIGBfcGFuZWxzVGl0bGVfQWRkcmVzc2VzYCBpbml0aWFsaXphdGlvbi4gKi9cbiAgICAvLyB0aGlzLl9wYW5lbHNUaXRsZV9BZGRyZXNzZXMgPSAodGhpcy5vcmcuYWRkcmVzc2VzKSA/IHRoaXMuX2NyZWF0ZVBhbmVsc1RpdGxlX0dlbmVyaWModGhpcy5vcmdWaWV3QWNjb3JkaW9uVHlwZS5BZGRyZXNzZXMsIHRoaXMub3JnLmFkZHJlc3Nlcy5sZW5ndGgpIDogWyBdO1xuICAgIHRoaXMuX3BhbmVsc1RpdGxlX0FkZHJlc3NlcyA9IHRoaXMuX2NyZWF0ZVBhbmVsc1RpdGxlX0FkZHJlc3NlcygpO1xuICB9XG4gIHB1YmxpYyBuZ09uQ2hhbmdlcygpOiB2b2lkXG4gIHtcbiAgICB0aGlzLm5nT25Jbml0KCk7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBnZW5lcmljIGFycmF5IG9mIHBhbmVscyB0aXRsZS5cbiAgICogVXNhZ2UgZXhhbXBsZTpcbiAgICogdGhpcy5fcGFuZWxzVGl0bGVfQWRkcmVzc2VzID0gKHRoaXMub3JnLmFkZHJlc3NlcykgPyB0aGlzLl9jcmVhdGVQYW5lbHNUaXRsZV9HZW5lcmljKHRoaXMub3JnVmlld0FjY29yZGlvblR5cGUuQWRkcmVzc2VzLCB0aGlzLm9yZy5hZGRyZXNzZXMubGVuZ3RoKSA6IFsgXTtcbiAgICogQHBhcmFtIG9yZ1ZpZXdBY2NvcmRpb25UeXBlIFRoZSBgT3JnVmlld0FjY29yZGlvbkNvbXBvbmVudGAgdHlwZS5cbiAgICogQHBhcmFtIHBhbmVsc1RpdGxlQ291bnQgQW1vdW50IG9mIHBhbmVscyB0aXRsZS5cbiAgICovXG4gIHByaXZhdGUgX2NyZWF0ZVBhbmVsc1RpdGxlX0dlbmVyaWMob3JnVmlld0FjY29yZGlvblR5cGU6IE9yZ1ZpZXdBY2NvcmRpb25UeXBlLCBwYW5lbHNUaXRsZUNvdW50OiBudW1iZXIpOiBzdHJpbmdbXVxuICB7XG4gICAgbGV0IHBhbmVsc1RpdGxlOiBzdHJpbmdbXSA9IFsgXTtcblxuICAgIC8qIEluaXRpYWxpemFlIHRoZSBgcGFuZWxzVGl0bGVgIGFycmF5LiAqL1xuICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBwYW5lbHNUaXRsZUNvdW50OyApXG4gICAge1xuICAgICAgcGFuZWxzVGl0bGUucHVzaChgJHsgb3JnVmlld0FjY29yZGlvblR5cGUgfSAoJHsgKytpIH0pIG9mICgkeyBwYW5lbHNUaXRsZUNvdW50IH0pYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhbmVsc1RpdGxlO1xuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlUGFuZWxzVGl0bGVfQWRkcmVzc2VzKCk6IHN0cmluZ1tdXG4gIHtcbiAgICBsZXQgcGFuZWxzVGl0bGU6IHN0cmluZ1tdID0gWyBdO1xuICAgIGxldCBwYW5lbHNUaXRsZUNvdW50ID0gdGhpcy5fYWRkcmVzc2VzVmFsdWUubGVuZ3RoO1xuXG4gICAgLyogSW5pdGlhbGl6YWUgdGhlIGBwYW5lbHNUaXRsZWAgYXJyYXkuICovXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHBhbmVsc1RpdGxlQ291bnQ7IGkrKylcbiAgICB7XG4gICAgICBwYW5lbHNUaXRsZS5wdXNoKGAkeyB0aGlzLl9hZGRyZXNzZXNWYWx1ZVtpXS5jaXR5IH0gfCAkeyB0aGlzLl9hZGRyZXNzZXNWYWx1ZVtpXS5jb3VudHJ5IH0gJHsgKHRoaXMuX2FkZHJlc3Nlc1ZhbHVlW2ldLnByaW1hcnkpID8gJyhQcmluY2lwYWwpJyA6ICcnIH1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFuZWxzVGl0bGU7XG4gIH1cblxuICBwcml2YXRlIF9jcmVhdGVSZWxhdGlvbnNoaXBzVmFsdWUoKTogUmVsYXRpb25zaGlwc1ZhbHVlW11cbiAge1xuICAgIC8qIFRoZSBwb3NpdGlvbnMgcmVwcmVzZW50OlxuICAgICAqIHBvcyA9IDAgLS0+IE9yZ2FuaXphY2lvbmVzIFBhZHJlc1xuICAgICAqIHBvcyA9IDEgLS0+IE9yZ2FuaXphY2lvbmVzIEhpamFzXG4gICAgICogcG9zID0gMiAtLT4gT3JnYW5pemFjaW9uZXMgUmVsYWNpb25hZGFzICovXG4gICAgbGV0IHJlc3VsdDogUmVsYXRpb25zaGlwc1ZhbHVlW10gPSBbIF07XG4gICAgbGV0IHBvczogbnVtYmVyID0gLTE7XG4gICAgbGV0IGl0ZW06IGFueTtcblxuICAgIGZvcihpdGVtIG9mIHRoaXMuX3BhbmVsc1RpdGxlX1JlbGF0aW9uc2hpcHMpXG4gICAge1xuICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAnbGlua3MnOiBbIF1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9yZy5yZWxhdGlvbnNoaXBzKVxuICAgIHtcbiAgICAgIGZvcihpdGVtIG9mIHRoaXMub3JnLnJlbGF0aW9uc2hpcHMpXG4gICAgICB7XG4gICAgICAgIHN3aXRjaChpdGVtLnR5cGUpXG4gICAgICAgIHtcbiAgICAgICAgICBjYXNlICdwYXJlbnQnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHBvcyA9IDA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlICdjaGlsZCc6XG4gICAgICAgICAge1xuICAgICAgICAgICAgcG9zID0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRlZmF1bHQ6ICAvKiAncmVsYXRlZCcgKi9cbiAgICAgICAgICB7XG4gICAgICAgICAgICBwb3MgPSAyO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0W3Bvc10ubGlua3MucHVzaCh7XG4gICAgICAgICAgLy8gJ3VybCc6IGAkeyBpdGVtLmlkIH0vdmlld2AsXG4gICAgICAgICAgJ3VybCc6ICcvJyArIGl0ZW0uaWQgICsgJy92aWV3JyxcbiAgICAgICAgICAnbmFtZSc6IGl0ZW0ubGFiZWxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGFkZHJlc3NlcyBvcmRlcmVkIGJ5IHRoZSBgcHJpbWFyeWAgZmllbGQgb2YgaXRzIGFkZHJlc3NlcyxcbiAgICogdGhlIHRydWUgdmFsdWVzIGFyZSBmaXJzdCB0aGFuIHRoZSBmYWxzZSB2YWx1ZXMuXG4gICAqL1xuICBwcml2YXRlIF9jcmVhdGVBZGRyZXNzZXNWYWx1ZSgpOiBBZGRyZXNzW11cbiAge1xuICAgIGxldCByZXN1bHQ6IEFkZHJlc3NbXSA9IFsgXTtcbiAgICBsZXQgbm9QcmltYXJ5OiBBZGRyZXNzW10gPSBbIF07XG5cbiAgICBmb3IobGV0IGl0ZW0gb2YgdGhpcy5vcmcuYWRkcmVzc2VzKVxuICAgIHtcbiAgICAgIGlmIChpdGVtLnByaW1hcnkpXG4gICAgICB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xuICAgICAgfVxuICAgICAgZWxzZVxuICAgICAge1xuICAgICAgICBub1ByaW1hcnkucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0LmNvbmNhdChub1ByaW1hcnkpO1xuICB9XG5cbiAgcHVibGljIGdldCBnZXRQYW5lbHNUaXRsZV9SZWxhdGlvbnNoaXBzKCk6IHN0cmluZ1tdXG4gIHtcbiAgICByZXR1cm4gdGhpcy5fcGFuZWxzVGl0bGVfUmVsYXRpb25zaGlwcztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgZ2V0VmFsdWVfUmVsYXRpb25zaGlwcygpOiBSZWxhdGlvbnNoaXBzVmFsdWVbXVxuICB7XG4gICAgcmV0dXJuIHRoaXMuX3JlbGF0aW9uc2hpcHNWYWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgZ2V0UGFuZWxzVGl0bGVfQWRkcmVzc2VzKCk6IHN0cmluZ1tdXG4gIHtcbiAgICByZXR1cm4gdGhpcy5fcGFuZWxzVGl0bGVfQWRkcmVzc2VzO1xuICB9XG5cbiAgcHVibGljIGdldCBnZXRWYWx1ZV9BZGRyZXNzZXMoKTogQWRkcmVzc1tdXG4gIHtcbiAgICByZXR1cm4gdGhpcy5fYWRkcmVzc2VzVmFsdWU7XG4gIH1cbn1cbiJdfQ==