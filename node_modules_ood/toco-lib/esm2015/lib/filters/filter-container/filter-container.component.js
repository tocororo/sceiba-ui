/**
 * @fileoverview added by tsickle
 * Generated from: lib/filters/filter-container/filter-container.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 *   Copyright (c) 2020 Universidad de Pinar del Río "Hermanos Saíz Montes de Oca"
 *   All rights reserved.
 */
import { Component, ComponentFactoryResolver, ViewChild, Output, EventEmitter } from '@angular/core';
import { FilterItem } from '../filter-item';
import { FilterDirective } from '../filter.directive';
import { TitleFilterComponent } from '../title-filter/title-filter.component';
import { BooleanFilterComponent } from '../boolean-filter/boolean-filter.component';
import { SelectFilterOldComponent } from '../select-filter/select-filter.component';
import { SelectAutocompleteFilterComponent } from '../select-autocomplete-filter/select-autocomplete-filter.component';
import { FilterContainerService } from '../filter-container.service';
import { TreeFilterComponent } from '../tree-filter/tree-filter.component';
export class FilterContainerComponent {
    /**
     * @param {?} componentFactoryResolver
     * @param {?} childrenService
     */
    constructor(componentFactoryResolver, childrenService) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.childrenService = childrenService;
        this.filter_url = new EventEmitter();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.filters_data = [];
        this.childrenService.emitter.subscribe((/**
         * @param {?} filterIndex
         * @return {?}
         */
        filterIndex => {
            this.deleteFilter(filterIndex);
        }));
    }
    /**
     * @param {?} index
     * @return {?}
     */
    addFilter(index) {
        /** @type {?} */
        let data = this.filters_data[index];
        /** @type {?} */
        let viewContainerRef = this.adHost.viewContainerRef;
        data.pos = viewContainerRef.length;
        /** @type {?} */
        let f = this.newFilter(data);
        // this.current_filters.push(f);
        /** @type {?} */
        let componentFactory = this.componentFactoryResolver.resolveComponentFactory(f.component);
        /** @type {?} */
        let componentRef = viewContainerRef.createComponent(componentFactory);
        ((/** @type {?} */ (componentRef.instance))).data = f.data;
        //this.delete_item_of_filters(pos);
        this.filters_data[index].is_enabled = false;
    }
    /**
     * @param {?} data_filter
     * @return {?}
     */
    newFilter(data_filter) {
        data_filter.viewContainerRef = this.adHost.viewContainerRef;
        /** @type {?} */
        let f = null;
        switch (data_filter.type) {
            case 'select': {
                f = new FilterItem(SelectFilterOldComponent, data_filter);
                break;
            }
            case 'boolean': {
                f = new FilterItem(BooleanFilterComponent, data_filter);
                break;
            }
            case 'select-autocomplete': {
                f = new FilterItem(SelectAutocompleteFilterComponent, data_filter);
                break;
            }
            case 'tree': {
                f = new FilterItem(TreeFilterComponent, data_filter);
                break;
            }
            default: f = new FilterItem(TitleFilterComponent, data_filter);
        }
        return f;
    }
    /**
     * @param {?} index
     * @return {?}
     */
    deleteFilter(index) {
        /** @type {?} */
        let last_pos = this.filters_data[index].pos;
        this.adHost.viewContainerRef.remove(this.filters_data[index].pos);
        this.filters_data[index].pos = -1;
        this.filters_data[index].is_enabled = true;
        for (let i = 0; i < this.filters_data.length; i++) {
            if (!this.filters_data[i].is_enabled && this.filters_data[i].pos > last_pos) {
                this.filters_data[i].pos = this.filters_data[i].pos - 1;
            }
        }
    }
}
FilterContainerComponent.decorators = [
    { type: Component, args: [{
                selector: 'toco-filter-container',
                template: "<!-- <div fxLayout=\"row wrap\" fxLayoutAlign=\"start center\" fxLayoutAlign.xs=\"center center\" fxLayoutGap=\"1em\" fxLayoutGap.xs=\"0\"> -->\n\n  <ng-template toco-Filter></ng-template>\n\n<!-- </div> -->\n\n<button mat-icon-button [matMenuTriggerFor]=\"menu\">\n    <mat-icon>add</mat-icon>\n</button>\n  <mat-menu #menu=\"matMenu\" >\n    <ng-container *ngFor=\"let item of filters_data,let i=index\">\n        <ng-container *ngIf=\"item.is_enabled\">\n          <button mat-menu-item (click)=\"addFilter(i)\">\n            {{item.name}}\n          </button>\n        </ng-container>\n    </ng-container>\n    \n\n    \n  </mat-menu>",
                styles: [".width-100{width:100%}.mat-menu-item{height:37px}"]
            }] }
];
/** @nocollapse */
FilterContainerComponent.ctorParameters = () => [
    { type: ComponentFactoryResolver },
    { type: FilterContainerService }
];
FilterContainerComponent.propDecorators = {
    filter_url: [{ type: Output }],
    adHost: [{ type: ViewChild, args: [FilterDirective, { static: true },] }]
};
if (false) {
    /** @type {?} */
    FilterContainerComponent.prototype.filters_data;
    /** @type {?} */
    FilterContainerComponent.prototype.filter_url;
    /** @type {?} */
    FilterContainerComponent.prototype.adHost;
    /**
     * @type {?}
     * @protected
     */
    FilterContainerComponent.prototype.componentFactoryResolver;
    /**
     * @type {?}
     * @protected
     */
    FilterContainerComponent.prototype.childrenService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyLWNvbnRhaW5lci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly90b2NvLWxpYi8iLCJzb3VyY2VzIjpbImxpYi9maWx0ZXJzL2ZpbHRlci1jb250YWluZXIvZmlsdGVyLWNvbnRhaW5lci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBTUEsT0FBTyxFQUFFLFNBQVMsRUFBVSx3QkFBd0IsRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUc3RyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDNUMsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHdDQUF3QyxDQUFDO0FBQzlFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDRDQUE0QyxDQUFDO0FBQ3BGLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDBDQUEwQyxDQUFDO0FBQ3BGLE9BQU8sRUFBRSxpQ0FBaUMsRUFBRSxNQUFNLG9FQUFvRSxDQUFDO0FBQ3ZILE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQ3JFLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBTzNFLE1BQU0sT0FBTyx3QkFBd0I7Ozs7O0lBU25DLFlBQXNCLHdCQUFrRCxFQUM1RCxlQUF1QztRQUQ3Qiw2QkFBd0IsR0FBeEIsd0JBQXdCLENBQTBCO1FBQzVELG9CQUFlLEdBQWYsZUFBZSxDQUF3QjtRQUx6QyxlQUFVLEdBQXlCLElBQUksWUFBWSxFQUFFLENBQUM7SUFLVCxDQUFDOzs7O0lBRXhELFFBQVE7UUFDTixJQUFJLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQztRQUN2QixJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxTQUFTOzs7O1FBQUMsV0FBVyxDQUFDLEVB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Q0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFBO2FBQ3hEO1NBRUY7SUFDSCxDQUFDOzs7WUFwRUYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSx1QkFBdUI7Z0JBQ2pDLDBvQkFBZ0Q7O2FBRWpEOzs7O1lBaEIyQix3QkFBd0I7WUFTM0Msc0JBQXNCOzs7eUJBYTVCLE1BQU07cUJBRU4sU0FBUyxTQUFDLGVBQWUsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7Ozs7SUFKNUMsZ0RBQWE7O0lBRWIsOENBQWdFOztJQUVoRSwwQ0FBc0U7Ozs7O0lBRTFELDREQUE0RDs7Ozs7SUFDdEUsbURBQWlEIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICAgQ29weXJpZ2h0IChjKSAyMDIwIFVuaXZlcnNpZGFkIGRlIFBpbmFyIGRlbCBSw61vIFwiSGVybWFub3MgU2HDrXogTW9udGVzIGRlIE9jYVwiXG4gKiAgIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKi9cblxuXG5pbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBWaWV3Q2hpbGQsIE91dHB1dCwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IEZpbHRlckNvbXBvbmVudCB9IGZyb20gJy4uL2ZpbHRlci5jb21wb25lbnQnO1xuaW1wb3J0IHsgRmlsdGVySXRlbSB9IGZyb20gJy4uL2ZpbHRlci1pdGVtJztcbmltcG9ydCB7IEZpbHRlckRpcmVjdGl2ZSB9IGZyb20gJy4uL2ZpbHRlci5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgVGl0bGVGaWx0ZXJDb21wb25lbnQgfSBmcm9tICcuLi90aXRsZS1maWx0ZXIvdGl0bGUtZmlsdGVyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBCb29sZWFuRmlsdGVyQ29tcG9uZW50IH0gZnJvbSAnLi4vYm9vbGVhbi1maWx0ZXIvYm9vbGVhbi1maWx0ZXIuY29tcG9uZW50JztcbmltcG9ydCB7IFNlbGVjdEZpbHRlck9sZENvbXBvbmVudCB9IGZyb20gJy4uL3NlbGVjdC1maWx0ZXIvc2VsZWN0LWZpbHRlci5jb21wb25lbnQnO1xuaW1wb3J0IHsgU2VsZWN0QXV0b2NvbXBsZXRlRmlsdGVyQ29tcG9uZW50IH0gZnJvbSAnLi4vc2VsZWN0LWF1dG9jb21wbGV0ZS1maWx0ZXIvc2VsZWN0LWF1dG9jb21wbGV0ZS1maWx0ZXIuY29tcG9uZW50JztcbmltcG9ydCB7IEZpbHRlckNvbnRhaW5lclNlcnZpY2UgfSBmcm9tICcuLi9maWx0ZXItY29udGFpbmVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgVHJlZUZpbHRlckNvbXBvbmVudCB9IGZyb20gJy4uL3RyZWUtZmlsdGVyL3RyZWUtZmlsdGVyLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3RvY28tZmlsdGVyLWNvbnRhaW5lcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9maWx0ZXItY29udGFpbmVyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vZmlsdGVyLWNvbnRhaW5lci5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIEZpbHRlckNvbnRhaW5lckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgLy8gY3VycmVudF9maWx0ZXJzOiBBcnJheTxGaWx0ZXJJdGVtPjtcbiAgZmlsdGVyc19kYXRhO1xuXG4gIEBPdXRwdXQoKSBmaWx0ZXJfdXJsOiBFdmVudEVtaXR0ZXI8c3RyaW5nPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICBAVmlld0NoaWxkKEZpbHRlckRpcmVjdGl2ZSwgeyBzdGF0aWM6IHRydWUgfSkgYWRIb3N0OiBGaWx0ZXJEaXJlY3RpdmU7XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIGNvbXBvbmVudEZhY3RvcnlSZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxuICAgIHByb3RlY3RlZCBjaGlsZHJlblNlcnZpY2U6IEZpbHRlckNvbnRhaW5lclNlcnZpY2UpIHsgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuZmlsdGVyc19kYXRhID0gW107XG4gICAgdGhpcy5jaGlsZHJlblNlcnZpY2UuZW1pdHRlci5zdWJzY3JpYmUoZmlsdGVySW5kZXggPT4ge1xuICAgICAgdGhpcy5kZWxldGVGaWx0ZXIoZmlsdGVySW5kZXgpXG4gICAgfSk7XG5cbiAgfVxuXG4gIGFkZEZpbHRlcihpbmRleCkge1xuICAgIGxldCBkYXRhID0gdGhpcy5maWx0ZXJzX2RhdGFbaW5kZXhdO1xuXG4gICAgbGV0IHZpZXdDb250YWluZXJSZWYgPSB0aGlzLmFkSG9zdC52aWV3Q29udGFpbmVyUmVmO1xuICAgIGRhdGEucG9zID0gdmlld0NvbnRhaW5lclJlZi5sZW5ndGhcblxuICAgIGxldCBmID0gdGhpcy5uZXdGaWx0ZXIoZGF0YSk7XG4gICAgLy8gdGhpcy5jdXJyZW50X2ZpbHRlcnMucHVzaChmKTtcbiAgICBsZXQgY29tcG9uZW50RmFjdG9yeSA9IHRoaXMuY29tcG9uZW50RmFjdG9yeVJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KGYuY29tcG9uZW50KTtcblxuICAgIGxldCBjb21wb25lbnRSZWYgPSB2aWV3Q29udGFpbmVyUmVmLmNyZWF0ZUNvbXBvbmVudChjb21wb25lbnRGYWN0b3J5KTtcbiAgICAoPEZpbHRlckNvbXBvbmVudD5jb21wb25lbnRSZWYuaW5zdGFuY2UpLmRhdGEgPSBmLmRhdGE7XG4gICAgLy90aGlzLmRlbGV0ZV9pdGVtX29mX2ZpbHRlcnMocG9zKTtcblxuICAgIHRoaXMuZmlsdGVyc19kYXRhW2luZGV4XS5pc19lbmFibGVkID0gZmFsc2VcbiAgfVxuXG4gIG5ld0ZpbHRlcihkYXRhX2ZpbHRlcik6IEZpbHRlckl0ZW0ge1xuICAgIGRhdGFfZmlsdGVyLnZpZXdDb250YWluZXJSZWYgPSB0aGlzLmFkSG9zdC52aWV3Q29udGFpbmVyUmVmO1xuICAgIGxldCBmID0gbnVsbDtcbiAgICBzd2l0Y2ggKGRhdGFfZmlsdGVyLnR5cGUpIHtcbiAgICAgIGNhc2UgJ3NlbGVjdCc6IHsgZiA9IG5ldyBGaWx0ZXJJdGVtKFNlbGVjdEZpbHRlck9sZENvbXBvbmVudCwgZGF0YV9maWx0ZXIpOyBicmVhazsgfVxuICAgICAgY2FzZSAnYm9vbGVhbic6IHsgZiA9IG5ldyBGaWx0ZXJJdGVtKEJvb2xlYW5GaWx0ZXJDb21wb25lbnQsIGRhdGFfZmlsdGVyKTsgYnJlYWs7IH1cbiAgICAgIGNhc2UgJ3NlbGVjdC1hdXRvY29tcGxldGUnOiB7IGYgPSBuZXcgRmlsdGVySXRlbShTZWxlY3RBdXRvY29tcGxldGVGaWx0ZXJDb21wb25lbnQsIGRhdGFfZmlsdGVyKTsgYnJlYWs7IH1cbiAgICAgIGNhc2UgJ3RyZWUnOiB7IGYgPSBuZXcgRmlsdGVySXRlbShUcmVlRmlsdGVyQ29tcG9uZW50LCBkYXRhX2ZpbHRlcik7IGJyZWFrOyB9XG4gICAgICBkZWZhdWx0OiBmID0gbmV3IEZpbHRlckl0ZW0oVGl0bGVGaWx0ZXJDb21wb25lbnQsIGRhdGFfZmlsdGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIGY7XG4gIH1cblxuICBkZWxldGVGaWx0ZXIoaW5kZXgpIHtcbiAgICBsZXQgbGFzdF9wb3MgPSB0aGlzLmZpbHRlcnNfZGF0YVtpbmRleF0ucG9zXG5cbiAgICB0aGlzLmFkSG9zdC52aWV3Q29udGFpbmVyUmVmLnJlbW92ZSh0aGlzLmZpbHRlcnNfZGF0YVtpbmRleF0ucG9zKTtcbiAgICB0aGlzLmZpbHRlcnNfZGF0YVtpbmRleF0ucG9zID0gLTFcbiAgICB0aGlzLmZpbHRlcnNfZGF0YVtpbmRleF0uaXNfZW5hYmxlZCA9IHRydWVcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5maWx0ZXJzX2RhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghdGhpcy5maWx0ZXJzX2RhdGFbaV0uaXNfZW5hYmxlZCAmJiB0aGlzLmZpbHRlcnNfZGF0YVtpXS5wb3MgPiBsYXN0X3Bvcykge1xuICAgICAgICB0aGlzLmZpbHRlcnNfZGF0YVtpXS5wb3MgPSB0aGlzLmZpbHRlcnNfZGF0YVtpXS5wb3MgLSAxXG4gICAgICB9XG5cbiAgICB9XG4gIH1cbn1cbiJdfQ==