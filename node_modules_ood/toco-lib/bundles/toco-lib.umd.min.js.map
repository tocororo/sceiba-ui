{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","ng://toco-lib/lib/toco-lib.service.ts","ng://toco-lib/lib/toco-lib.component.ts","ng://toco-lib/lib/toco-lib.module.ts","ng://toco-lib/lib/angular-material/angular-material.module.ts","ng://toco-lib/lib/shared/shared.module.ts","ng://toco-lib/lib/core/env.ts","ng://toco-lib/lib/core/body/body.component.ts","ng://toco-lib/lib/core/error404/error404.component.ts","ng://toco-lib/lib/core/footer/footer.component.ts","ng://toco-lib/lib/core/metadata.service.ts","ng://toco-lib/lib/core/home/home.component.ts","ng://toco-lib/lib/entities/entities.module.ts","ng://toco-lib/lib/entities/common.ts","ng://toco-lib/lib/entities/evaluation.entity.ts","ng://toco-lib/lib/entities/inst-repo.entity.ts","ng://toco-lib/lib/entities/journal_reference.entity.ts","ng://toco-lib/lib/entities/organization.entity.ts","ng://toco-lib/lib/entities/person.entity.ts","ng://toco-lib/lib/entities/source.entity.ts","ng://toco-lib/lib/entities/journal.entity.ts","ng://toco-lib/lib/entities/record.entity.ts","ng://toco-lib/lib/entities/repository.entity.ts","ng://toco-lib/lib/entities/taxonomy.entity.ts","ng://toco-lib/lib/core/info-card/info-card.component.ts","ng://toco-lib/lib/core/journal-card/journal-card.component.ts","ng://toco-lib/lib/core/nav/nav.component.ts","ng://toco-lib/lib/core/page-header/page-header.component.ts","ng://toco-lib/lib/core/page-not-found/page-not-found.component.ts","ng://toco-lib/lib/core/core-routing.module.ts","ng://toco-lib/lib/core/utils/road-map/road-map.component.ts","ng://toco-lib/lib/core/utils/road-map-sceiba/road-map-sceiba.component.ts","ng://toco-lib/lib/core/utils/get-view-container.directive.ts","ng://toco-lib/lib/core/utils/validator.ts","ng://toco-lib/lib/core/utils/message-handler.ts","ng://toco-lib/lib/core/utils/progress.ts","ng://toco-lib/lib/core/sceiba-apps/sceiba-apps.component.ts","ng://toco-lib/lib/core/core.module.ts","ng://toco-lib/lib/core/utils/helpers.ts","ng://toco-lib/lib/core/services/backend-data-source.ts","ng://toco-lib/lib/core/services/http-interceptor.order.ts","ng://toco-lib/lib/core/services/request-cache.service.ts","ng://toco-lib/lib/core/services/http.interceptor.ts","ng://toco-lib/lib/core/services/http.service.ts","ng://toco-lib/lib/core/services/icon.service.ts","ng://toco-lib/lib/core/services/message.service.ts","ng://toco-lib/lib/core/services/request-cache-different-time.service.ts","ng://toco-lib/lib/core/services/test-backend-data-source.service.ts","ng://toco-lib/lib/backend/user-profile.service.ts","ng://toco-lib/lib/authentication/authentication.service.ts","ng://toco-lib/lib/authentication/authentication.component.ts","ng://toco-lib/lib/authentication/authentication.module.ts","ng://toco-lib/lib/backend/taxonomy.service.ts","ng://toco-lib/lib/backend/catalog.service.ts","ng://toco-lib/lib/backend/backend.module.ts","ng://toco-lib/lib/backend/notification.service.ts","ng://toco-lib/lib/backend/organization.service.ts","ng://toco-lib/lib/backend/search.service.ts","ng://toco-lib/lib/backend/source.service.ts","ng://toco-lib/lib/filters/filter-item.ts","ng://toco-lib/lib/filters/filters.service.ts","ng://toco-lib/lib/filters/filter-container.service.ts","ng://toco-lib/lib/filters/boolean-filter/boolean-filter.component.ts","ng://toco-lib/lib/filters/filter.directive.ts","ng://toco-lib/lib/filters/title-filter/title-filter.component.ts","ng://toco-lib/lib/filters/select-filter/select-filter.component.ts","ng://toco-lib/lib/filters/select-autocomplete-filter/select-autocomplete-filter.component.ts","ng://toco-lib/lib/filters/tree-filter/tree-filter.component.ts","ng://toco-lib/lib/filters/filter-container/filter-container.component.ts","ng://toco-lib/lib/filters/filters.module.ts","ng://toco-lib/lib/forms/form-field.control.ts","ng://toco-lib/lib/forms/action/action.control.ts","ng://toco-lib/lib/forms/action/button/button-action.component.ts","ng://toco-lib/lib/forms/component-factory-depr/component-factory-depr.component.ts","ng://toco-lib/lib/forms/container/container.control.ts","ng://toco-lib/lib/forms/container/form-container/form-container.component.ts","ng://toco-lib/lib/forms/container/panel/panel-container.component.ts","ng://toco-lib/lib/forms/container/simple/simple-container.component.ts","ng://toco-lib/lib/forms/container/table/table.component.ts","ng://toco-lib/lib/forms/container-specific/label-diff-lang/label-diff-lang-container.component.ts","ng://toco-lib/lib/forms/input/input.control.ts","ng://toco-lib/lib/forms/input/bool/bool-input.component.ts","ng://toco-lib/lib/forms/input/email/email-value.ts","ng://toco-lib/lib/forms/input/email/email-input.component.ts","ng://toco-lib/lib/forms/input/identifier/identifier-value.ts","ng://toco-lib/lib/forms/input/identifier/identifier-input.component.ts","ng://toco-lib/lib/forms/input/issn/issn-value.ts","ng://toco-lib/lib/forms/input/issn/issn-input.component.ts","ng://toco-lib/lib/forms/input/number/number-input.component.ts","ng://toco-lib/lib/forms/input/rnps/rnps-value.ts","ng://toco-lib/lib/forms/input/rnps/rnps-input.component.ts","ng://toco-lib/lib/forms/input/select/select-input.component.ts","ng://toco-lib/lib/forms/input/text/text-input.component.ts","ng://toco-lib/lib/forms/input/url/url-value.ts","ng://toco-lib/lib/forms/input/url/url-input.component.ts","ng://toco-lib/lib/forms/experimental/vocabulary/vocabulary.component.ts","ng://toco-lib/lib/forms/experimental/vocabulary-tree/vocabulary-tree.component.ts","ng://toco-lib/lib/forms/experimental/term-parent/term-parent.component.ts","ng://toco-lib/lib/forms/experimental/select/select.component.ts","ng://toco-lib/lib/forms/experimental/textarea/textarea.component.ts","ng://toco-lib/lib/forms/experimental/select-filter/select-filter.component.ts","ng://toco-lib/lib/forms/experimental/select-tree/select-tree.component.ts","ng://toco-lib/lib/forms/experimental/datepicker/datepicker.component.ts","ng://toco-lib/lib/forms/experimental/checkbox/checkbox.component.ts","ng://toco-lib/lib/forms/container/panel-action/panel-action-container.component.ts","ng://toco-lib/lib/forms/experimental/datepicker-year/datepicker-year.component.ts","ng://toco-lib/lib/forms/experimental/select-orgs/select-orgs.component.ts","ng://toco-lib/lib/forms/forms.module.ts","ng://toco-lib/lib/forms/container/form-container/form-container.service.ts","ng://toco-lib/lib/harvester/harvester/harvester.component.ts","ng://toco-lib/lib/harvester/harvester-filters/harvester-filters.component.ts","ng://toco-lib/lib/harvester/repositories/repositories.component.ts","ng://toco-lib/lib/harvester/harvester-routing.module.ts","ng://toco-lib/lib/harvester/repository/repository.component.ts","ng://toco-lib/lib/harvester/harvester.service.ts","ng://toco-lib/lib/harvester/harvester.module.ts","ng://toco-lib/lib/notification/notification-button/notification-button.component.ts","ng://toco-lib/lib/notification/notification-list/notification-list.component.ts","ng://toco-lib/lib/notification/notification.module.ts","ng://toco-lib/lib/statics/chips/chips-static.component.ts","ng://toco-lib/lib/statics/table/table-static.component.ts","ng://toco-lib/lib/statics/text/text-static.component.ts","ng://toco-lib/lib/statics/statics.module.ts","ng://toco-lib/lib/organizations/org-view/org-view-accordion/org-view-accordion.component.ts","ng://toco-lib/lib/organizations/org-view/org-view.component.ts","ng://toco-lib/lib/organizations/org-view/org-view-address/org-view-address.component.ts","ng://toco-lib/lib/organizations/org-view/org-view-geo-names-city/org-view-geo-names-city.component.ts","ng://toco-lib/lib/organizations/org-view/org-view-relationship/org-view-relationship.component.ts","ng://toco-lib/lib/organizations/org-edit/org-edit.component.ts","ng://toco-lib/lib/organizations/org-add/org-add.component.ts","ng://toco-lib/lib/organizations/org-search/org-search.component.ts","ng://toco-lib/lib/organizations/org-table-edit/org-table-edit.component.ts","ng://toco-lib/lib/organizations/org-tree-viewer/org-tree-viewer.component.ts","ng://toco-lib/lib/organizations/organizations.module.ts","ng://toco-lib/lib/person/person/person.component.ts","ng://toco-lib/lib/person/person-view/person-view.component.ts","ng://toco-lib/lib/person/person.module.ts","ng://toco-lib/lib/search/record/record.component.ts","ng://toco-lib/lib/search/aggregations/aggregations.component.ts","ng://toco-lib/lib/search/query-input/query-input.component.ts","ng://toco-lib/lib/search/record-list/record-list.component.ts","ng://toco-lib/lib/search/search.module.ts","ng://toco-lib/lib/sources/journal-view/journal-view.component.ts","ng://toco-lib/lib/sources/source-edit/journal-edit/journal-edit.component.ts","ng://toco-lib/lib/sources/journal-view/journal-view-version-term.component.ts","ng://toco-lib/lib/sources/source-edit/source-indexes/source-indexes.component.ts","ng://toco-lib/lib/sources/source-edit/source-organizations/source-organizations.component.ts","ng://toco-lib/lib/sources/journal-view/journal-view-info.component.ts","ng://toco-lib/lib/sources/journal-view/journal-view-version-field.component.ts","ng://toco-lib/lib/sources/journal-view/journal-view-version.component.ts","ng://toco-lib/lib/sources/catalog-filters/catalog-filters.component.ts","ng://toco-lib/lib/sources/catalog/catalog.component.ts","ng://toco-lib/lib/sources/sources-list/sources-list.component.ts","ng://toco-lib/lib/sources/sources.module.ts","ng://toco-lib/lib/taxonomy/vocabularies/vocabularies.component.ts","ng://toco-lib/lib/taxonomy/term-generic/term-generic.component.ts","ng://toco-lib/lib/taxonomy/terms/terms.component.ts","ng://toco-lib/lib/taxonomy/taxonomy/taxonomy.component.ts","ng://toco-lib/lib/taxonomy/terms-viewer/terms-viewer.component.ts","ng://toco-lib/lib/taxonomy/taxonomy.module.ts","ng://toco-lib/lib/taxonomy/utils.ts","ng://toco-lib/lib/search/search-utils.ts","ng://toco-lib/lib/authentication/auth-config.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__values","o","Symbol","iterator","m","next","value","done","TypeError","__read","r","e","ar","push","error","__spread","concat","TocoLibService","Injectable","args","providedIn","TocoLibComponent","ngOnInit","Component","selector","template","TocoLibModule","NgModule","declarations","imports","exports","AngularMaterialModule","LayoutModule","MatButtonModule","MatButtonToggleModule","MatMenuModule","MatToolbarModule","MatTooltipModule","MatIconModule","MatCardModule","MatInputModule","MatCheckboxModule","MatFormFieldModule","MatDialogModule","MatGridListModule","MatSnackBarModule","MatProgressBarModule","MatProgressSpinnerModule","MatSidenavModule","MatTabsModule","MatChipsModule","MatTableModule","MatSortModule","MatPaginatorModule","MatSlideToggleModule","MatSelectModule","MatOptionModule","MatAutocompleteModule","MatExpansionModule","MatDatepickerModule","MatNativeDateModule","MatListModule","MatTreeModule","MatBadgeModule","MatStepperModule","MatRippleModule","MatDividerModule","SharedModule","CommonModule","HttpClientModule","FormsModule","FlexLayoutModule","schemas","CUSTOM_ELEMENTS_SCHEMA","BodyComponent","ngOnChanges","doReplace","body","str","replace","processed","Input","Error404Component","FooterComponent","undefined","sites","information","MetadataService","bodyTitle","meta","_router","env","setStandardMeta","title","description","image","url","appHost","setTitle","appName","updateTag","name","content","itemprop","websiteUsername_Twitter","property","Title","Meta","Router","Environment","HomeComponent","metadata","EntitiesModule","EntityBase","tslib_1.__extends","deepcopy","data","exclude","keys","keys_1","tslib_1.__values","keys_1_1","key","includes","console","log","toBoolean","String","toLowerCase","Entity","_this","_super","id","isNew","identifiers","getIdentifierValue","idtype","find","setIdentifierValue","added","index","Identifier","entitystringify","JSON","stringify","k","v","IdentifierSchemas","ark","arxiv","doi","bibcode","ean8","ean13","handle","isbn","issn_p","issn_l","issn_e","issn_c","issn_o","istc","lsid","pmid","pmcid","purl","upc","urn","orcid","gnd","ads","oai","prnps","ernps","oaiurl","grid","wkdata","ror","isni","fudref","orgref","reup","Links","self","prev","AggrBucket","doc_count","AggrMeta","order","Aggr","buckets","doc_count_error_upper_bound","sum_other_doc_count","Hit","created","updated","links","revision","HitList","hits","SearchResponse","aggregations","CategoryQuestion","_inputContent","SectionCategory","SurveySection","JournalGeneralData","Evaluation","EvaluationOnlyAnswer","MainInstitution","InstitutionalRepository","mainInstEmpty","instRepoEmpty","mainInst","url_oai","JournalReference","Reference","OrganizationRelationships","PARENT","label","CHILD","RELATED","LabelDiffLang","iso639","Redirected","Relationship","type","GeoNamesAdmin","ascii_name","GeoNamesCity","city","geonames_admin1","geonames_admin2","nuts_level1","nuts_level2","nuts_level3","Address","country","country_code","lat","lng","line_1","line_2","line_3","postcode","primary","state","state_code","municipality","municipality_dpa","geonames_city","RedirectPropertiesIdtype","enum","RedirectProperties","Redirect","additionalProperties","properties","Organization","status","aliases","acronyms","types","wikipedia_url","email_address","ip_addresses","established","onei_registry","exportable","labels","relationships","addresses","redirect","Person","Role","User","email","confirmed_at","last_login_at","roles","UserSourcesRoles","source_uuid","role","UserProfile","biography","full_name","institution","institution_id","institution_rol","username","avatar","sources","user","identify","SourceSystems","OJS","CMS","DSPACE","OTHER","SourceTypes","JOURNAL","SERIAL","STUDENT","POPULARIZATION","REPOSITORY","WEBSITE","SourceOrganizationRole","MAIN","COLABORATOR","SourceOrganization","SourceClasification","vocabulary","SavingInfoSchema","user_id","comment","SourceData","source_system","source_type","source_status","organizations","classifications","_save_info","reviewed","SourceVersion","created_at","Date","is_current","userprofile","Source","uuid","clasifications","version_to_review","versions","SocialNetworks","facebook","twitter","linkedin","IssnOrg","ISSN","l","issn_org","RNPS","JournalData","subtitle","shortname","issn","rnps","logo","purpose","start_year","end_year","frequency","seriadas_cubanas","socialNetworks","Journal","JournalVersion","Record","source_repo","spec","creators","keywords","publisher","rights","formats","language","publication_date","contributors","references","iroko_terms","Repository","RepositorySet","HarvestedItem","VocabulariesInmutableNames","CUBAN_INTITUTIONS","SUBJECTS","CUBAN_PROVINCES","LICENCES","INDEXES_CLASIFICATION","INDEXES","UNESCO_VOCAB","RECOD_SETS","RECORD_TYPES","EXTRA_INSTITUTIONS","SUBJECT_COVER","COUNTRIES","Term","identifier","vocabulary_id","parent_id","clasified_ids","class_ids","TermInstitutionData","website","address","TermIndexData","abrev","initial_cover","end_cover","Vocabulary","human_name","InfoCardComponent","is_avatar_card","is_title_card","is_subtitle_card","is_content_card","is_img_card","is_actions_card","content_card","title_card","subtitle_card","JournalCardComponent","NavComponent","PageHeaderComponent","info","is_show_icon","function","drawer","toggle","change_icon_show","PageNotFoundComponent","routerLink","imgSource","routes","path","component","CoreRoutingModule","RouterModule","forChild","RoadMapComponent","removeChart_PosFlag","withoutProductText","_isChartVertical","tabLabel_CW","tabLabel_FW","_selectedTabPos","chartTitle_P","_isUsingTrick_RepaintChart","_products","_currentProducts","_futureProducts","_products_Internal","_currentProducts_Internal","_futureProducts_Internal","_featuresTotal_Internal","_currentFeaturesTotal_Internal","_futureFeaturesTotal_Internal","_features_Internal","_currentFeatures_Internal","_futureFeatures_Internal","_activeEntries_P_CW","_activeEntries_P_FW","view","colorScheme_CW","domain","colorScheme_FW","gradient","barPadding","showXAxis","showXAxisLabel","xAxisLabel_P","maxAxisTickLength","showYAxis","showYAxisLabel","yAxisLabel_P","showLegend","legendTitle","legendPosition","_selectedProductPos","_selectedProductPos_CW","_selectedProductPos_FW","_chartTitle_F","_chartTitle_F_CW","_chartTitle_F_FW","xAxisLabel_F","yAxisLabel_F","defineProperty","temp","_gridHeight","map","_createsInternalArrays","_set_activeEntries_P_CW","_setData_CW","_set_activeEntries_P_FW","_setData_FW","setEmpty","selectedProduct","series","_legendPosition","onSelectTab","newPos","currentProducts","futureProducts","onSelect","eventInfo","isObject","tempPos","len","posAsString","_updateProductPos","onActivate","onDeactivate","_isFeaturesChartShowed","newSelectedPosition","products","products_Internal","featuresTotal_Internal","j","len_j","tempCurrentFeatures_Internal","tempFeatures","tempAchieved","achievedPercentage_P","maxPercentage_F","achievedPercentage_F","len_i","features","achieved","click_RemoveChart","RoadMapSceibaComponent","GetViewContainerDirective","_viewContainerRef","_componentFactoryResolver","Directive","ViewContainerRef","ComponentFactoryResolver","ExtraValidators","equalLength","control","requiredLength","actualLength","minLength","controls","requiredAndNotEmpty","requiredProperty","childControls","controlsGroupLength","required","pos","hasControlNotEmpty","minEmptyPos","issnConfirmCheckDigitOneField","codeLength","code","result","charCodeAt","issnConfirmCheckDigitTwoField","firstGroup","secondGroup","groupLength","groupValue","issnValidator","internalFormGroup","valid","requiredValid","EqualLengthDirective","changes","_validator","parseInt","_onChange","validate","registerOnValidatorChange","fn","providers","provide","NG_VALIDATORS","useExisting","multi","HandlerComponent","snackBar","dialog","StatusCode","OK","serverError","notFound","DialogContentComponent","DialogMessageData","decorators","Inject","MAT_DIALOG_DATA","DialogDeleteConfirmComponent","DialogDeleteConfirmMessageData","MessageHandler","_snackBar","showMessage","message","width","componentHandler","handlercomponent","open","duration","verticalPosition","ProgressComponent","loading","position","SceibaAppsComponent","CoreModule","parentModule","ReactiveFormsModule","TranslateModule","NgxChartsModule","entryComponents","Optional","SkipSelf","LanguageTexts","Español","English","LanguageAbbrs","es","en","LANGUAGE_TEXTS_LIST","LANGUAGE_ABBRS_LIST","_cloneValue","target","container","prop","isArray","isRegExp","isDate","isError","_cloneValueToUndefined","SortDirection","asc","desc","orig","sortingDataAccessor","sortHeaderId","_isNumberValue","numberValue","Number","sortData","sort","active","direction","a","valueA","valueB","comparatorResult","CachingInterceptor","_cachable","_cache","intercept","req","maxAgeInCache","isCachable","headers","get","_sendRequest","cachedResponse","of","hasRefreshXCache","reqWithoutCustomHeader","clone","delete","pipe","tap","event","HttpResponse","set","Cachable","RequestCache","HttpService","http","HttpClient","IconService","_matIconRegistry","_domSanitizer","registerIcons","iconNames","iconUrl","forEach","iconName","addSvgIcon","bypassSecurityTrustResourceUrl","defaultIconName","MatIconRegistry","DomSanitizer","MessageService","messages","add","msg","clear","CachableUrl","_env","method","cachableUrls","indexOf","RequestCacheDifferentTimeWithMap","_messageService","Map","cached","urlWithParams","lastRead","now","response","entry","size","CACHABLE_URL_PROVIDER","useClass","REQUEST_CACHE_DIFFERENT_TIME_WITH_MAP_PROVIDER","UserService","users","registrationDate","street","suite","zipcode","geo","phone","company","catchPhrase","bs","page","pageRequest","filteredUsers","slice","_a","filter","search","registration","toString","getFullYear","getMonth","getDate","newPageIndex","paginator","pageIndex","pageSize","start","end","totalData","delay","UserProfileService","getUserInfo","sceibaApi","getUsers","query","params","HttpParams","options","AuthBackend","sceiba","cuor","OauthAuthenticationService","oauthStorage","oauthService","errorHandler","moduleConfig","authenticationSubject","Subject","authenticationSubjectObservable","asObservable","login","logout","userInfoEndpoint","canActivate","getItem","navigate","token","catchError","err","initImplicitFlow","throwError","configure","authConfig","tokenValidationHandler","JwksValidationHandler","loadDiscoveryDocumentAndTryLogin","OAuthStorage","OAuthService","OAuthResourceServerErrorHandler","OAuthModuleConfig","SimpleAuthenticationService","authBackend","logguedChange","islogged","cuorApi","AuthenticationComponent","userProfileService","router","authenticationService","_transServ","timerAuthenticateSuscription","timerAuthenticateObserver","_","subscribe","setItem","complete","isButtonLogin","isButtonLoginIcon","isButtonLoginText","res","oauthInfo","loginUrl","serverHost","tokenEndpoint","ngOnDestroy","unsubscribe","ngAfterViewInit","timer","redirectUri","oauthRedirectUri","clientId","oauthClientId","oidc","sessionChecksEnabled","scope","oauthScope","tryLogin","onTokenReceived","onLoginError","logoff","logOut","TranslateService","storageFactory","localStorage","AuthenticationModule","OAuthModule","forRoot","useFactory","HTTP_INTERCEPTORS","TaxonomyService","prefix","httpOptions","HttpHeaders","Content-Type","getVocabulary","getTermListByIDs","ids","substring","getTermByID","termID","level","getTermByUUID","termUUID","getTermsTreeByVocab","vocabId","newVocabulary","vocab","post","editVocabulary","getVocabularies","newTerm","term","editTerm","getCurrentUserPermissions","CatalogService","getJournalsPage","count","parameters","field","getJournalsCount","getJournalsVocab","getTerminosByVocab","getSourceByUUID","getSourcesOrgAggregation","BackendModule","NotificationService","getNotificationsList","setNotificationViewed","ENDPOINT_APIS","ROOT_API","OrganizationService","_http","_httpOptions","Authorization","optionalResult","update","put","OrganizationServiceNoAuth","handler","getOrganizationByUUID","getOrganizationRelationships","relType","getOrganizationByPID","pid","getOrganizations","HttpBackend","SearchService","getAggregation","getRecords","getSources","getOrganizationById","updateOrganizations","SourceService","httpSearch","getMySources","getMySourcesAllRoles","adhocstringgify","source","orgs","all","from","p1","substr","p2","count_to_len","p3","editSource","makeSourceAsApproved","makeSourceAsUnApproved","newSource","getIssnInfo","getSourcesByTermUUID","getSourceVersions","countSourcesByTerm","permissionGetSourceEditors","permissionSetSourceEditor","allow","permissionGetSourceManagers","permissionSetSourceManager","permissionGetOrganizationManagers","permissionSetOrganizationManager","permissionGetTermManagers","permissionSetTermManager","SourceServiceNoAuth","getSourceByISSN","getSourceByPID","getSourcesStats","topOrgId","FilterItem","FilterHttpMap","FiltersService","autocompleteFilter","paramsChanged","EventEmitter","changeFilter","emitEvent","x","emit","deleteParameter","splice","changeAutocompleteFilter","isexist","AutocompleteFilter","createAutocompleteFilterValue","deleteAutocompleteFilter","emitValue","Output","FilterContainerService","emitter","filterDeleted","filterIndex","BooleanFilterComponent","filterService","filterContainerService","operator","operator_name","classDireccion","remove_component","change_operator_name","changeInterruptor","FilterDirective","viewContainerRef","TitleFilterComponent","placeholder","onChange","SelectFilterOldComponent","text","multiple","selectOptions","optionSelect","SelectAutocompleteFilterComponent","myControl","FormControl","chipsList","filteredOptions","valueChanges","startWith","_filter","inputId","trim","filterValue","option","idVocab","valueEmiter","chip","addChips","unshift","setValue","document","getElementById","blur","removeChip","TreeFilterComponent","checklistSelection","SelectionModel","treeFlattener","MatTreeFlattener","transformer","getLevel","isExpandable","getChildren","treeControl","FlatTreeControl","dataSource","MatTreeFlatDataSource","newData","node","_include_node","_fix_selection","children","_b","_c","child","dataNodes","emitSelection","selected","expandable","hasChild","descendantsAllSelected","getDescendants","every","isSelected","descendantsPartiallySelected","some","itemSelectionToggle","descendants","select","deselect","checkAllParentsSelection","leafItemSelectionToggle","parent","getParentNode","checkRootNodeSelection","nodeSelected","descAllSelected","currentLevel","currentNode","FilterContainerComponent","componentFactoryResolver","childrenService","filter_url","filters_data","deleteFilter","addFilter","adHost","f","newFilter","componentFactory","resolveComponentFactory","createComponent","is_enabled","data_filter","last_pos","remove","ViewChild","static","FiltersModule","TextAlign","left","center","right","justify","ContentPosition","suffix","none","IconSource","internal","external","IconValue","setDefaultValueIfUndefined","setDefaultValueIfUndefined_setPosition","iconPosition","HintPosition","HintValue","hintPosition","FormFieldType","action_button","container_panel","container_simple","container_label_diff_lang","textarea","datepicker","checkbox","vocabulary_tree","term_parent","select_expr","select_filter","select_tree","cloneFormControl","validator","asyncValidator","cloneFormSection","FormGroup","ctr","addControl","FormArray","FormFieldControl","contentPosition","iconSource","isTranslationBuiltByControl","setNewLanguage","transServ","currentLang","init","Error","controlType","minWidth","textAlign","ariaLabel","initValue","parentContainerControl","addAsChildControl","internalControl","containerControlChildren","isFormArray","iconPositionState","icon","iconSourceState","OperationAction","back","cancel","reset","submit","isDisabledDefault","sender","clickDefault","ActionControl","alwaysHint","tooltip","isDisabled","click","ActionButtonComponent","host","[style.minWidth]","[style.width]","ComponentFactory_Depr","formFieldType","componentsContent","ContainerControl","_isFormArray","_formArrayPatternContent","_formArrayPatternValue","_formArrayLength","getFormGroupByDefault","getFormArrayByDefault","formSection","formSectionContent","isDynamic","_componentHost","initFormSectionContentToFormArray","setParentToChildren","parentFormSection","createChildComponents","createValueToUndefined","val","_initElemFormSectionContentToFormArray","setParentToChild","ffc","alreadyHasFormSection","formControl","_createValueToUndefined","refContent","_cloneContent","canClone","e_5","componentsContent_1","componentsContent_1_1","componentContent","createChildComponent","_cr","addToFormArray","removeFromFormArray","formArrayPatternContentLength","removeAt","clearFormArray","FormContainerComponent","useAccordion","useContainer","actionButtonIsStepperNext","deleteValuesAfterAction","step","setFormGroupToPanels","panelsContent","panel","setStep","newStep","nextStep","prevStep","doAction","controlContent","action","doit","ContainerPanelComponent","ContainerSimpleComponent","CellContentWrap","break","ellipsis","responsible","TableComponent","_activatedRoute","_countBackendSubscriptions","_page","_pageAsObservable","_dataSource","MatTableDataSource","_selectedRow","_filterValuesChange","_filterValues","_filterValuesSubscription","_renderChangesSubscription","Subscription","EMPTY","_content","_initContent","_updateChangeSubscription","columnsObjectProperty","columnsHeaderText","columnsWidth","columnContentWrap","createCssClassesForRow","defaultCreateCssClassesForRow","bind","propertyNameToIdentify","pageSizeOptions","hidePageSize","showFirstLastButtons","checkColumn","_updateFilter","filterName","debounceTime","distinctUntilChanged","applyFilter","_updateSort","sortEvent","_setMatSortInitialValue","_sort","_updatePaginator","newPage","_disabledSortPaginator","disabled","_paginator","endpoint","combineLatest","sortChange","switchMap","filterEvent","pageEvent","_setDataBeforeCallEndpoint","finalize","_setDataAfterCallEndpoint","rowData","selected-row","_createCssStylesForHeader","_addCssStyles_CellWidth","_createCssStylesForCell","_addCssStyles_CellContentWrap","cssStyles","newContent","isEmpty","_defaultDataSource","warn","navigateTo","relativeUrl","selectRow","relativeTo","applyFilters","ActivatedRoute","MatSort","MatPaginator","ContainerLabelDiffLangComponent","TextInputAppearance","standard","fill","outline","InputControl","validationError_required","getFormControlByDefault","validatorArguments","toco_ng_Error_Msg_Requerido","isAbbreviation","internalComponent","appearance","prefixIcon","suffixIcon","startHint","endHint","markAsTouched","onlySelf","isNullOrUndefined","empty","dirty","touched","errorState","handleInput","handleSpecificInput","untouched","getErrorMessage","validationErrors","errors","Validators","InputBoolComponent","onSelectionChange","isBoolean","extraContent","selectionChange","EmailValue","email_Label","email_Placeholder","InputEmailComponent","IdentifierValue","identifier_Label","InputIdentifierComponent","pattern","IssnType_Abbreviation","p_ISSN","e_ISSN","ISSN_L","IssnValue","c","convertIssnToLength_11","fg","sg","codeGroupSeparator","convertIssnToLength_9","convertIssnToLength_8","isComplete","acronym","issn_Placeholder","codeLengthAsString","codeGroupSeparatorWithSpace","regExpIssnWithLength_11","regExpIssnWithLength_9","regExpIssnWithLength_8","InputIssnComponent","_codeOldValue","result_alreadyHaveErrorInfo","tempCode","newCode","alreadyHasSpace","InputNumberComponent","min","MIN_SAFE_INTEGER","max","MAX_SAFE_INTEGER","onLangChange","toco_ng_Error_Msg_Num_Inval","TOCO_NG_ERROR_MSG_NUM_INVAL","toco_ng_Error_Msg_Num_Minimo","TOCO_NG_ERROR_MSG_NUM_MINIMO","toco_ng_Error_Msg_Num_Maximo","TOCO_NG_ERROR_MSG_NUM_MAXIMO","RnpsValue","rnps_Abbreviation","rnps_Placeholder","rnps_Label","InputRnpsComponent","InputSelectComponent","_selectOptionsSubscription","selectTooltip","_selectOptions_Unsubscription","_setSelectTooltip","showTooltip","selectTooltipPosition","optionsTooltipPosition","toUpperCase","Observable","_doTranslation","translationKeys","translationRes","_findLabel","value_1","value_1_1","_d","e_2","_e","opt","_f","_g","InputTextComponent","UrlValue","u","url_Label","url_Placeholder","InputUrlComponent","VocabularyComponent","service","chipsFormControl","terms","searchText","termsTreeObserver","tree","term_node","element","_get_terms","setValidators","requiredTerms","selectedTermsIds","excludeTermsIds","_updateFilteredOptions","setValidation","setErrors","requiered","addTermToValue","removeTermFromValue","getTermNameInATree","VocabularyTreeComponent","levelsOptions","levelsSelection","lastLevelTerm","leafsOptions","nextLevel","_setLevelsOptions","item","isLeaf","nodes","TermParentComponent","currentTerm","parentTerm","setValueToInternalControl","addParent","removeParent","SelectComponent","observable","getOptions","TextareaComponent","SelectFilterComponent","selectOptionsLoaded","SelectTreeComponent","DatepickerComponent","CheckboxComponent","ContainerPanelActionComponent","YEAR_MODE_FORMATS","parse","dateInput","display","monthYearLabel","dateA11yLabel","monthYearA11yLabel","DatepickerYearComponent","touchUi","year","onTouched","_max","momentDate","moment","isValid","_min","minYear","maxYear","writeValue","date","_isYearEnabled","registerOnChange","registerOnTouched","setDisabledState","_picker","disable","enable","_yearSelectedHandler","chosenDate","toDate","close","_openDatepickerOnClick","opened","_openDatepickerOnFocus","setTimeout","DateAdapter","MomentDateAdapter","deps","MAT_DATE_LOCALE","MAT_DATE_FORMATS","useValue","NG_VALUE_ACCESSOR","forwardRef","MatDatepicker","SelectOrgsComponent","_orgService","orgCtrl","filteredOrg","cleaning","selectedOrg","toSearch","selectedOrgsIds","orgFilter","orgValueChanges","displayFn","org","todelete","TocoFormsModule","_iconService","FormContainerService","httpClient","sendPostData","endPoint","HarvesterComponent","HarvesterFiltersComponent","default_filters","vocabularies","termsResponse","RepositoriesComponent","journalList","columnsToDisplay","sceibaHost","currentlayout","layout","aling","firstPage","fetchJournalData","arr","merge","harvest_endpoint","observableOf","onScrollUp","isLoading","currentJournals","animations","trigger","style","height","minHeight","transition","animate","HarvesterRoutingModule","RepositoryComponent","onIdentify","repostitory","onHarvest","onRecord","HarvesterService","HarvesterModule","NotificationButtonComponent","timerSuscription","timerObserver","total_not_view","notifications","classification","color","viewed","buttonType","notificationsCount","MatSnackBar","NotificationInfo","NotificationListComponent","columnsLabels","getNotificationsListData","setnotificationViewed","NotificationModule","StaticChipsComponent","StaticTableComponent","StaticTextComponent","valueByDefault","input_static","StaticsModule","OrgViewAccordionType","Relationships","Addresses","OrgViewAccordionComponent","orgViewAccordion_Type","orgViewAccordionType","panelsTitle","_accordion","panelHasElement","MatAccordion","OrgViewComponent","showContent","org_full","_panelsTitle_Relationships","_relationshipsValue","_createRelationshipsValue","_addressesValue","_createAddressesValue","_panelsTitle_Addresses","_createPanelsTitle_Addresses","_createPanelsTitle_Generic","panelsTitleCount","noPrimary","OrgViewAddressComponent","OrgViewGeoNamesCityComponent","_geonames_admin1","_geonames_admin2","_nuts_level1","_nuts_level2","_nuts_level3","_createValueAsArray","objFromCopy","arrayToFill","OrgViewRelationshipComponent","OrgEditComponent","operationAction","panelFormSection","panelContent","_initPanelContent","_initIdentifiersContent","_initLabelsSimpleContent","_initRelationshipsSimpleContent","_initAddressesSimpleContent","_initRemoveButtonContent","doOperationAction","op","invalid","OrgAddComponent","operation","OrgSearchComponent","filter_array","filter_array_1","filter_array_1_1","OrgTableEditComponent","_organizationService","tableContent","_initTableContent","_initSearchContent","_tableControl","selectedRow","_getMySources","actions","route","doOperation","OrganizationDataSource","_treeControl","orgService","dataChange","BehaviorSubject","orgRelationshipType","connect","collectionViewer","expansionModel","change","removed","handleTreeControl","viewChange","toggleNode","reverse","expand","OrganizationFlatNode","OrgTreeViewerComponent","iconAction","labelAction","ngStyle","_nodeData","emitAction","OrganizationsModule","PersonComponent","PersonViewComponent","PersonModule","RecordComponent","AggregationsComponent","selectedAggr","keySelect","sp","_translate","aggrKey","bucket","QueryInputComponent","minWordCount","inputColor","buttonColor","showButton","queryChange","queryCtrl","riseQuery","RecordListComponent","hitList","SearchModule","JournalDataType","default","issnP","issnE","issnL","rnpsP","rnpsE","JournalViewComponent","topMainOrganization","panelOpenState","defaultLogo","journalDataType","showVersions","editVersion","isDisabledNavigatePrevious","isDisabledNavigateNext","lengthVersion","selectedVersion","getSelectedJournalPosition","SelectJournalVersion","editingJournal","nextVersion","previousVersion","version","selectedJournal","journalVersion","sourceEditDone","toogleShowVersions","MatDialog","JournalEditComponent","sourceService","catalogService","taxonomyService","formBuilder","pageTitle","journalData","showEditHeader","showFinalStep","identifiersPanel","informationPanel","finalPanel","journalEditDone","editCanceled","resetStepper","initStep2","initStep0Identifiers","initStep1","initStep3","initStepFinal","identifiersFormGroup","informationFormGroup","informationSocialFormGroup","organizationFormGroup","indexesFormGroup","group","termSource","institutions","indexerStepper","finalFormGroup","fillJournalFields","rnps_p","rnps_e","indexes","ts","finishStepper","cancelStepper","FormBuilder","JournalViewTermComponent","vocab_id","SourceIndexesComponent","editable","databases","selectedDatabases","initIndexes","_setSelectedDatabses","_setIndexesToSource","this_1","dbclass","dblist","sourceData","db","parent_1","addIndexAction","dbclassIndex","SourceEditAddIndexComponent","editing","addIndex","closeAll","editIndexAction","newSelected","deleteIndexAction","toDelete","_formBuilder","indexPanel","indexFormGroup","opts","SourceOrganizationsComponent","addOrg","cuban","topMain","SourceOrganizationSelectTopDialog","selectOrg","parents","addOrgToSource","SourceOrganizationSelectDialog","canSelectRole","setAsMain","organization","removeInst","childToRemove","getOrgToDelete","childIndex","getIndexByPid","parentIndex","pidindex","dialogRef","toSelect","onNoClick","ok","MatDialogRef","JournalViewInfoComponent","_sourveService","showVersionLabel","tipos","sistemas","loadJournalData","dataBaseTerms","groupTerms","institutionTerms","licenceTerms","provinceTerms","subjectTerms","getIdentifier","editingJournalChange","newVersion","JournalViewInfoFieldComponent","emptyLabel","JournalViewFieldComponent","currentJournal","JournalViewVersionComponent","currentJournalChecked","currentDataBaseTerms","currentGroupTerms","currentInstitutionTerms","currentLicenceTerms","currentProvinceTerms","currentSubjectTerms","markAsViewed","fieldEditingJournalChange","replaceSubjects","replaceClassifications","replaceIndexes","newts","replaceOrganizations","CatalogFiltersComponent","addOperator","topOrganizationPID","CatalogComponent","hasErrors","layoutPosition","openme","navigator","userAgent","match","apple","changeLayoutPosition","viewJournal","DialogCatalogJournalInfoDialog","journalUUID","afterClosed","SourcesListComponent","displayDefaultIndicatorType","SourcesModule","STEPPER_GLOBAL_OPTIONS","ɵ0$2","VocabularyDialogComponent","actionLabel","hasService","accept","formGroup","panels","acceptAction","VocabulariesComponent","oautheStorage","vocabulariesChangeObserver","loadVocabularies","voc","selectVocab","vocabCtrl","selectedVocab","currentVocab","emiterShowTerms","getAuthenticatedUserPermissions","filteredVocabularies","newVocab","openVocabDialog","editVocab","deleteVocab","request","permJson","permissions","hasPermission","permission","userPermission","taxonomy_full_editor_actions","vocabulary_editor_actions","TermGenericComponent","_getTermDataObject","_getContent","miar","mes","TermsComponent","termChangeObserver","addTerm","openTermDialog","deleteTerm","TaxonomyComponent","vocabs","cols","rows","current_vocab","vocabChange","TermsViewerComponent","TaxonomyModule","TermHelper","getPanelContentToEdit","edit","bool","integer","lang","q","aggrsSel","SUCCESS","ERROR","ADMINISTRATOR","JOURNALMANAGER","AUTHOR","EDITOR","SECTIONEDITOR","REVIEWER","COPYEDITOR","LAYOUTEDITOR","PROOFREADER","READER","APPROVED","TO_REVIEW","UNOFFICIAL","timeoutFactor","dataStr","reduce","transformedFilter","httpEventType","HttpEventType","Sent","UploadProgress","ResponseHeader","DownloadProgress","Response","possDescendant","ancestorName","place"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TocoLibService {\n\n  constructor() { }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-toco-lib',\n  template: `\n    <p>\n      toco-lib works!\n    </p>\n  `,\n  styles: []\n})\nexport class TocoLibComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { TocoLibComponent } from './toco-lib.component';\n\n\n\n@NgModule({\n  declarations: [TocoLibComponent],\n  imports: [\n  ],\n  exports: [TocoLibComponent]\n})\nexport class TocoLibModule { }\n","\nimport { NgModule } from '@angular/core';\n\nimport { LayoutModule } from '@angular/cdk/layout';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { MatOptionModule, MatNativeDateModule } from '@angular/material/core';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatPaginatorModule } from '@angular/material/paginator';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatSortModule } from '@angular/material';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatExpansionModule } from '@angular/material/expansion';\nimport { MatDatepickerModule } from '@angular/material/datepicker';\nimport { MatListModule } from '@angular/material/list';\nimport { MatTreeModule } from '@angular/material/tree';\nimport { MatBadgeModule } from '@angular/material/badge';\nimport { MatStepperModule } from '@angular/material/stepper'\nimport { MatRippleModule } from '@angular/material/core';\nimport { MatDividerModule } from '@angular/material/divider';\n\n/**\n * A module that contains all angular material modules that are needed. \n */\n@NgModule({\n    imports: [\n        LayoutModule,\n        MatButtonModule,\n        MatButtonToggleModule,\n        MatMenuModule,\n        MatToolbarModule,\n        MatTooltipModule,\n        MatIconModule,\n        MatCardModule,\n        MatInputModule,\n        MatCheckboxModule,\n        MatFormFieldModule,\n        MatDialogModule,\n        MatGridListModule,\n        MatSnackBarModule,\n        MatProgressBarModule,\n        MatProgressSpinnerModule,\n        MatSidenavModule,\n        MatTabsModule,\n        MatChipsModule,\n        MatTableModule,\n        MatSortModule,\n        MatPaginatorModule,\n        MatSlideToggleModule,\n        MatSelectModule,\n        MatOptionModule,\n        MatAutocompleteModule,\n        MatExpansionModule,\n        MatDatepickerModule,\n        MatNativeDateModule,\n        MatListModule,\n        MatTreeModule,\n        MatBadgeModule,\n        MatStepperModule,\n        MatRippleModule,\n        MatDividerModule,\n    ],\n\n    exports: [\n        LayoutModule,\n        MatButtonModule,\n        MatButtonToggleModule,\n        MatMenuModule,\n        MatToolbarModule,\n        MatTooltipModule,\n        MatIconModule,\n        MatCardModule,\n        MatInputModule,\n        MatCheckboxModule,\n        MatFormFieldModule,\n        MatDialogModule,\n        MatGridListModule,\n        MatSnackBarModule,\n        MatProgressSpinnerModule,\n        MatProgressBarModule,\n        MatSidenavModule,\n        MatTabsModule,\n        MatChipsModule,\n        MatTableModule,\n        MatSortModule,\n        MatPaginatorModule,\n        MatSlideToggleModule,\n        MatSelectModule,\n        MatOptionModule,\n        MatAutocompleteModule,\n        MatExpansionModule,\n        MatDatepickerModule,\n        MatNativeDateModule,\n        MatListModule,\n        MatTreeModule,\n        MatBadgeModule,\n        MatStepperModule,\n        MatRippleModule,\n        MatDividerModule,\n    ]\n})\nexport class AngularMaterialModule\n{ }\n","\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { FormsModule } from '@angular/forms';\nimport { FlexLayoutModule } from '@angular/flex-layout';\n\nimport { AngularMaterialModule } from '../angular-material/public-api';\n\n/**\n * A module that contains all shared modules.\n */\n@NgModule({\n    declarations: [\n    ],\n\n    imports: [\n        CommonModule,\n        HttpClientModule,\n        FormsModule,\n        FlexLayoutModule,\n        AngularMaterialModule\n    ],\n\n    exports: [\n        CommonModule,\n        HttpClientModule,\n        FormsModule,\n        FlexLayoutModule,\n        AngularMaterialModule\n    ],\n\n    schemas: [\n        CUSTOM_ELEMENTS_SCHEMA\n    ]\n})\nexport class SharedModule\n{ }\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nexport abstract class Environment {\n  abstract readonly production: boolean;\n\n  abstract readonly sceibaHost: string;\n  abstract readonly sceibaApi: string;\n  abstract readonly cuorHost: string;\n  abstract readonly cuorApi: string;\n\n  abstract readonly appHost: string;\n  abstract readonly appName: string;\n\n  abstract readonly websiteUsername_Twitter: string;\n  abstract readonly websiteUsername_Facebook: string;\n\n  abstract readonly oauthRedirectUri: string;\n  abstract readonly oauthClientId: string;\n  abstract readonly oauthScope: string;\n\n  abstract readonly topOrganizationPID: string;\n\n  abstract readonly cachableUrls: Array<string>;\n\n  abstract readonly matomoUrl : string;\n  abstract readonly matomoSiteId : number;\n}\n\n// import { Injectable } from '@angular/core';\n\n// import { Params } from '../core/public-api';\n\n// @Injectable({\n//     providedIn: 'root'\n// })\n// export class Environment {\n\n//     public sceibaApi = '';\n//     public cuorApi = '';\n//     public sceibaHost = '';\n//     public cuorHost = '';\n//     public appHost = '';\n//     public appName = '';\n//     public pagesApi = '';\n//     public oauthRedirectUri = '';\n//     public oauthClientId = '';\n//     public oauthScope = '';\n//     public topOrganizationPID = '';\n//     public extraArgs: any = null;\n//     public user = null;\n\n//     /**\n//      * A collection of key/value elements, where the keys are cachable URLs,\n//      * and the values are maximum cache ages in milliseconds.\n//      */\n//     public cachableUrls: Params<number>;\n\n//     public constructor()\n//     { }\n// }\n","\nimport { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n    selector: 'toco-body',\n    templateUrl: './body.component.html',\n    styleUrls: ['./body.component.scss']\n})\nexport class BodyComponent implements OnInit {\n\n    @Input()\n    body: string;\n\n    processed: string;\n\n    constructor()\n    { }\n\n    ngOnChanges(): void {\n        this.doReplace();\n    }\n\n    ngOnInit() {\n        if (this.body) {\n            this.doReplace();\n        }\n    }\n\n    doReplace() {\n        var find = \"/public/inline-images/\";\n        var replace = \"/public/inline-images/\";\n        var str = this.body.replace(find, replace);\n        this.processed = str;\n    }\n}\n","\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'toco-error404',\n    templateUrl: './error404.component.html',\n    styleUrls: ['./error404.component.scss']\n})\nexport class Error404Component implements OnInit\n{\n    constructor()\n    { }\n\n    ngOnInit()\n    { }\n}\n","\nimport { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n    selector: 'toco-footer',\n    templateUrl: './footer.component.html',\n    styleUrls: ['./footer.component.scss']\n})\nexport class FooterComponent implements OnInit {\n\n    @Input()\n    public sites: Array< { name: string, url: string, useRouterLink: boolean } >;\n\n    @Input()\n    public information: Array< { name: string, url: string, useRouterLink: boolean } >;\n\n    @Input()\n    public image: string\n\n    public constructor() { }\n\n    public ngOnInit(): void {\n        if ( this.sites == undefined ) this.sites = new Array();\n        if ( this.information == undefined ) this.information = new Array();\n    }\n}\n","\nimport { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Title, Meta } from '@angular/platform-browser';\n\nimport { Environment } from './env'\n\n/**\n * A service that is used to set the title and metadata of a route. \n * This service is important for things like configuring a Content Security Policy, \n * defining browser compatibility and security settings, setting HTTP Headers, \n * defining rich content for social sharing, and Search Engine Optimization (SEO). \n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class MetadataService\n{\n    public constructor(public bodyTitle: Title, public meta: Meta, private _router: Router, public env: Environment)\n    { }\n\n    /**\n     * Sets the page metadata for SEO and standard social networks. \n     * @param title The title to set. Maximum length 60-70 characters. \n     * @param description The description to set. Maximum length 155 characters. \n     * @param image The image to set. If the value is empty, then the image is not set. \n     * The image must be at least 280px in width and 150px in height; and must be less than 1Mb in size. \n     */\n    public setStandardMeta(title: string, description: string, image: string = \"\"): void\n    {\n        /* The canonical URL for your page. This should be the undecorated URL, \n        without session variables, user identifying parameters, or counters. */\n        let url: string = this.env.appHost + this._router.url;\n        //console.log('The URL for metadata is: ', url);\n        image = this.env.appHost + image;\n\n        /* Primary metadata. */\n\n        /* Maximum length 60-70 characters. */\n        this.bodyTitle.setTitle(title + \" | \" + this.env.appName);  /* Sets the title of the current HTML document. */\n        /* Maximum length 155 characters. */\n        this.meta.updateTag({ name: \"description\", content: description });\n\n        /* Schema.org markup for Google+. */\n\n        this.meta.updateTag({ itemprop: \"name\", title });\n        this.meta.updateTag({ itemprop: \"description\", content: description });\n        if (image) this.meta.updateTag({ itemprop: \"image\", content: image });\n\n        /* Twitter Card data */\n\n        this.meta.updateTag({ name: \"twitter:card\", content:\"summary_large_image\" });\n        /* Non-Essential, but required for analytics tool. */\n        this.meta.updateTag({ name: \"twitter:site\", content: this.env.websiteUsername_Twitter });  /* @website-username */\n        this.meta.updateTag({ name: \"twitter:title\", content: title });\n        this.meta.updateTag({ name: \"twitter:description\", content: description });\n        /* Twitter summary card with large image must be at least 280px x 150px. */\n        if (image) this.meta.updateTag({ name: \"twitter:image:src\", content: image });\n//        this.meta.updateTag({ name: \"twitter:image:alt\", content: \"Alt text for image...\" });\n\n        /* Open Graph data, Twitter, Facebook, and Linkedin. */\n\n        this.meta.updateTag({ property: \"og:title\", content: title });\n        this.meta.updateTag({ property: \"og:type\", content: \"website\" });\n        this.meta.updateTag({ property: \"og:url\", content: url });\n        if (image) this.meta.updateTag({ property: \"og:image\", content: image });\n        this.meta.updateTag({ property: \"og:description\", content: description });\n        this.meta.updateTag({ property: \"og:site_name\", content: this.env.appName });\n    }\n}\n","\nimport { Component, OnInit } from '@angular/core';\n\nimport { MetadataService } from '../metadata.service';\n\n@Component({\n    selector: 'toco-home',\n    templateUrl: './home.component.html',\n    styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent implements OnInit\n{\n    constructor(private metadata: MetadataService)\n    { }\n    \n    ngOnInit()\n    {\n        this.metadata.setStandardMeta(\"Inicio\", \"\", \"\");\n    }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { NgModule } from '@angular/core';\n\n@NgModule({ })\nexport class EntitiesModule\n{ }\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n/*** La idea de esta clase es tener un deserializador. */\nexport class EntityBase extends Object {\n  public deepcopy(data: any, exclude: string[] = []): void {\n    const keys: string[] = Object.keys(this);\n\n    for (const key of keys) {\n      if (data[key] && !exclude.includes(key)) {\n        // console.log('DEEEPCOPY OF : ', key, data[key])\n        // if(this.toBoolean(data[key])){\n        //   console.log('TO BOOLEAN IS TRUE !!!!!! ');\n        //   this[key] = data[key].toLowerCase() === 'true';\n        // } else {\n          // if (this[key] instanceof EntityBaseList) {\n          //   console.log('RECUSIVE CALL ON EntityBaseList',  this[key]);\n          //   this[key].deepcopy(data[key], exclude);\n          // } else{\n            if (this[key] instanceof EntityBase) {\n              console.log('RECUSIVE CALL ON EntityBase',  this[key]);\n              this[key].deepcopy(data[key], exclude);\n            }  else {\n              this[key] = data[key];\n            }\n          // }\n\n      }\n    }\n  }\n  private toBoolean(value){\n    if(typeof value === 'string' || value instanceof String){\n      console.log('DEEPCOPY ----------  TO BOOLEAN ------------ VAL=',value)\n      console.log(value.toLowerCase() === 'true' || value.toLowerCase() === 'false')\n      return value.toLowerCase() === 'true' || value.toLowerCase() === 'false';\n    }\n    return false;\n  }\n}\n\n// export class EntityBaseList<T extends EntityBase> extends Array<T> {\n\n//   constructor(private entityType: new () => T ){\n//     super();\n//   }\n\n//   getNew() : T {\n//     return new this.entityType();\n//   }\n\n//   public deepcopy(data: any[]): void {\n//     for (let i = 0; i < data.length; i++) {\n//       const element = data[i];\n//       let e  = this.getNew();\n//       e.deepcopy(element);\n//       this.push(e);\n//     }\n//   }\n//   public concat(list: EntityBaseList<T>){\n//     this.concat(list);\n//     return this;\n//   }\n// }\n\n/**\n * Created by Edel on 02/04/2018.\n */\nexport class Entity extends EntityBase {\n  id: string = '';\n\n  /** By default is FALSE. If TRUE, means that the entity does not have valid identifiers or has not been saved to the backend.  */\n  isNew = false;\n  // raw_data: String;\n  // created_at: String;\n  // updated_at: String;\n\n  identifiers:Array<Identifier> = new Array<Identifier>();\n  getIdentifierValue(idtype: IdentifierSchemas): string {\n    const id = this.identifiers.find((value) => value.idtype == idtype);\n    return id != undefined ? id.value : '';\n  }\n\n  setIdentifierValue(idtype: IdentifierSchemas, value: string) {\n    if(value != ''){\n      let added = false;\n      for (let index = 0; index < this.identifiers.length; index++) {\n        if(this.identifiers[index].idtype == idtype){\n          this.identifiers[index].value = value;\n          added = true;\n        }\n      }\n      if (!added) {\n        const id = new Identifier();\n        id.idtype = idtype;\n        id.value = value;\n        this.identifiers.push(id)\n      }\n    }\n  }\n\n  constructor() {\n    super();\n  }\n\n\n  /**\n   * return JSON.stringify, using a function to exclude object fields id and uuid\n   */\n  entitystringify(): string {\n    return JSON.stringify(this, (k, v) => {\n      // if (k !== \"id\" && k !== \"uuid\" && k !== \"isNew\") {\n      if (k !== \"isNew\" && k !== \"entityType\" && (v != null && v != '' && v != undefined && v != [])) {\n        return v;\n      }\n    });\n  }\n}\n\n/**\n * Entity for `Identifier` based on schema `organization-v1.0.0.json`.\n * Organization Identifier, different from GRID mapping.\n */\nexport class Identifier extends EntityBase {\n  /**\n   * Identifier type.\n   */\n  idtype: IdentifierSchemas;\n\n  /**\n   * Identifier value.\n   */\n  value: string = \"\";\n}\n\n\nexport enum IdentifierSchemas {\n  ark = \"ark\",\n  arxiv = \"arxiv\",\n  doi = \"doi\",\n  bibcode = \"bibcode\",\n  ean8 = \"ean8\",\n  ean13 = \"ean13\",\n  handle = \"handle\",\n  isbn = \"isbn\",\n  issn_p = \"issn_p\",\n  issn_l = \"issn_l\",\n  issn_e = \"issn_e\",\n  issn_c = \"issn_c\",\n  issn_o = \"issn_o\",\n  istc = \"istc\",\n  lsid = \"lsid\",\n  pmid = \"pmid\",\n  pmcid = \"pmcid\",\n  purl = \"purl\",\n  upc = \"upc\",\n  url = \"url\",\n  urn = \"urn\",\n  orcid = \"orcid\",\n  gnd = \"gnd\",\n  ads = \"ads\",\n  oai = \"oai\",\n  prnps = \"prnps\",\n  ernps = \"ernps\",\n  oaiurl = \"oaiurl\",\n  grid = \"grid\",\n  wkdata = \"wkdata\",\n  ror = \"ror\",\n  isni = \"isni\",\n  fudref = \"fudref\",\n  orgref = \"orgref\",\n  reup = \"reup\",\n}\n\nexport class Links extends EntityBase {\n  self = \"\";\n  next = \"\";\n  prev = \"\";\n}\n\nexport class AggrBucket extends EntityBase {\n  doc_count = 0;\n  key = \"\";\n}\nclass AggrMeta extends EntityBase {\n  order = 0;\n  title = \"\";\n}\n\nexport class Aggr extends EntityBase {\n  buckets: Array<AggrBucket> = new Array<AggrBucket>();\n  meta? = new AggrMeta();\n  doc_count_error_upper_bound = 0;\n  sum_other_doc_count = 0;\n}\n\nexport class Hit<T> extends EntityBase {\n  id = \"\";\n  created = \"\";\n  updated = \"\";\n  links = new Links();\n  metadata: T;\n  revision = 0;\n\n  revisions? : Array<Hit<T>>;\n}\n\nexport class HitList<T> extends EntityBase {\n  hits = new Array<Hit<T>>();\n  total: 0;\n}\n\nexport class SearchResponse<T> extends EntityBase {\n  aggregations: { [id: string]: Aggr } = {};\n  hits = new HitList<T>();\n  links = new Links();\n}\n","\nimport { Params } from '../core/utils/helpers';\nimport { SelectOption } from '../forms/input/select/select-input.component';\nimport { InputContent } from '../forms/input/input.control';\nimport { EntityBase, Entity } from './common';\n/**\n * An enum that represents the type of an `CategoryQuestion`. \n */\n export enum CategoryQuestionType\n {\n    /**\n     * The `bool` type is the default type. It shows a boolean control. \n     */\n    bool = 'bool',\n\n    /**\n     * It shows a numeric control. \n     */\n    integer = 'integer',\n\n    /**\n     * It shows a select control. \n     */\n    select = 'select'\n}\n\n/**\n * Entity for CategoryQuestion based on schema `...-v1.0.0.json`. \n * Represents a survey section category question. \n */\nexport class CategoryQuestion extends EntityBase\n{\n    /**\n     * Question type. \n     */\n    type: CategoryQuestionType;\n    /**\n     * Question id. \n     */\n    id: string;\n    /**\n     * Question description. \n     */\n    desc: string;\n    /**\n     * Question hint. \n     */\n    hint: string;\n    /**\n     * Question answer. \n     */\n    answer: any;\n    /**\n     * Possible minimum value. It is used if `type` == CategoryQuestionType.integer. \n     */\n    min?: number;\n    /**\n     * Possible maximum value. It is used if `type` == CategoryQuestionType.integer. \n     */\n    max?: number;\n\t/**\n     * Options list that can be selected. It is used if `type` == CategoryQuestionType.select. \n\t */\n    selectOptions?: SelectOption[];\n    /**\n     * This field is filled internally. \n     * For internal use only. \n     */\n    _inputContent?: InputContent = undefined;\n}\n\n/**\n * Entity for SectionCategory based on schema `...-v1.0.0.json`. \n * Represents a survey section category. \n */\nexport class SectionCategory extends EntityBase\n{\n    /**\n     * Category title. \n     */\n    title: string;\n    /**\n     * Category desription. \n     */\n    desc: string;\n    /**\n     * An array of questions associated with the category. \n     */\n    questions: Array<CategoryQuestion>;\n}\n\n/**\n * Entity for SurveySection based on schema `...-v1.0.0.json`. \n * Represents a survey section. \n */\nexport class SurveySection extends EntityBase\n{\n    /**\n     * Section title. \n     */\n    title: string;\n    /**\n     * An array of categories associated with the section. \n     */\n    categories: Array<SectionCategory>;\n}\n\n/**\n * Entity for JournalGeneralData based on schema `...-v1.0.0.json`. \n * Represents the journal general data that a user fills in the first step. \n */\n export class JournalGeneralData extends EntityBase\n {\n    /**\n     * Journal name. \n     */\n     name: string;\n     /**\n      * Journal URL page. \n      */\n     url: string;\n     /**\n      * Journal ISSN. \n      */\n     issn: string;\n }\n\n/**\n * Entity for Evaluation based on schema `...-v1.0.0.json`. \n */\n export class Evaluation extends Entity\n {\n    /**\n     * User who made the evaluation. \n     */\n    user: string;\n    /**\n     * Evaluation date. \n     */\n    date: Date;\n\n    /************************************* Journal Data ***************************/\n\n    /**\n     * Journal Data. \n     */\n    journalData: JournalGeneralData;\n\n    /**************************************** Survey ******************************/\n\n    /**\n     * An array of sections associated with the survey. \n     */\n    sections: Array<SurveySection>;\n\n    /****************************** Result and Recommendations ********************/\n    // TODO: ... \n }\n\n/**\n * Entity for EvaluationOnlyAnswer based on schema `...-v1.0.0.json`. \n */\nexport class EvaluationOnlyAnswer extends Entity\n{\n    /**\n     * User who made the evaluation. \n     */\n    user: string;\n    /**\n     * Evaluation date. \n     */\n    date: Date;\n\n    /************************************* Journal Data ***************************/\n\n    /**\n     * Journal Data. \n     */\n     journalData: JournalGeneralData;\n\n    /**************************************** Survey ******************************/\n\n    /**\n     * Journal survey. \n     */\n    survey: Params<any>;\n\n    /****************************** Result and Recommendations ********************/\n    // TODO: ... \n}\n","\nimport { EntityBase, Entity, Identifier } from './common';\n\n/**\n * Entity for main Institution based on schema `...-v1.0.0.json`. \n */\nexport class MainInstitution extends EntityBase\n{\n    /**\n     * The name typically used to refer to the institute. \n     */\n    name: string;\n    /**\n     * Organization Identifiers, different from GRID mapping. \n     */\n    identifiers: Array<Identifier>;\n}\n\n/**\n * Entity for Institutional Repository based on schema `...-v1.0.0.json`. \n */\nexport class InstitutionalRepository extends Entity\n{\n    /**\n     * Name of the region. \n     */\n    name: string;\n    /**\n     * Main Institution. \n     */\n    mainInst: MainInstitution;\n    /**\n     * URL page for the institute. \n     */\n    url: string;\n    /**\n     * URL-OAI page for the institute. \n     */\n    url_oai: string;\n}\n\n/**\n * Represents an object of `MainInstitution` type with all its values set to empty. \n * The `identifiers` array field must have one empty value at least. \n */\nexport const mainInstEmpty: any = {\n    'name': '',\n    'identifiers': [{\n        'idtype': '',\n        'value': ''\n    }]\n};\n\n/**\n * Represents an object of `InstitutionalRepository` type with all its values set to empty. \n */\nexport const instRepoEmpty: any = {\n    'id': '',\n    'name': '',\n    'mainInst': mainInstEmpty,\n    'url': '',\n    'url_oai': ''\n};\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Entity } from \"./common\";\n\nexport class JournalReference extends Entity\n{\n    reference: Reference;\n    startdate: string;\n    enddate: string;\n    url: string;\n}\n\nexport class Reference\n{\n    name: string\n}\n","import { EntityBase, Entity, Identifier } from './common';\n\n\nexport const OrganizationRelationships = {\n  PARENT: { label: 'Padre', value: 'parent' },\n  CHILD: { label: 'Hija', value: 'child' },\n  RELATED: { label: 'Relacionada', value: 'related' },\n  };\n\n\n/**\n * Entity for `LabelDiffLang` based on schema `organization-v1.0.0.json`.\n * Name of the institute in different language.\n */\nexport class LabelDiffLang extends EntityBase\n{\n  /**\n   * Institute name in a language variant.\n   */\n  label: string = '';\n\n  /**\n   * ISO-639-1 language code.\n   */\n  iso639: string = '';\n}\n\n/**\n * Entity for `Redirected` based on schema `organization-v1.0.0.json`.\n * Which organization redirects.\n */\n export class Redirected extends EntityBase\n {\n    /**\n      * Institute name in a language variant.\n    */\n    idtype: string = '';\n \n    /**\n      * ISO-639-1 language code.\n    */\n    value: string = '';\n }\n \n\n/**\n * Entity for `Relationship` based on schema `organization-v1.0.0.json`.\n * A relationship the institute has to other.\n */\nexport class Relationship extends Entity\n{\n  /**\n   * Organization Identifiers, different from GRID mapping.\n   */\n  identifiers: Array<Identifier> = new Array<Identifier>();\n\n  /**\n   * Relationship type.\n   */\n  type: string = '';\n\n  /**\n   * Name of the related institute.\n   */\n  label: string = '';\n}\n\n/**\n * Entity for `GeoNamesAdmin` based on schema `organization-v1.0.0.json`.\n */\nexport class GeoNamesAdmin extends EntityBase\n{\n  /**\n   * ID in the region format.\n   */\n  id: string = '';\n\n  /**\n   * Name of the region.\n   */\n  name: string = '';\n\n  /**\n   * Preferred ASCII encoded name for the region.\n   */\n  ascii_name: string = '';\n}\n\n/**\n * Entity for `GeoNamesCity` based on schema `organization-v1.0.0.json`.\n * The linked GeoNames data.\n */\nexport class GeoNamesCity extends EntityBase\n{\n  /**\n   * GeoNames ID.\n   */\n  id: number = 0;\n\n  /**\n   * Name of the city.\n   */\n  city: string = '';\n\n  /**\n   * geonames_admin1.\n   */\n  geonames_admin1: GeoNamesAdmin = undefined;\n\n  /**\n   * geonames_admin2.\n   */\n  geonames_admin2?: GeoNamesAdmin = undefined;\n\n  /**\n   * nuts_level1.\n   */\n  nuts_level1: GeoNamesAdmin = undefined;\n\n  /**\n   * nuts_level2.\n   */\n  nuts_level2?: GeoNamesAdmin = undefined;\n\n  /**\n   * nuts_level3.\n   */\n  nuts_level3?: GeoNamesAdmin = undefined;\n}\n\n/**\n * Entity for `Address` based on schema `organization-v1.0.0.json`.\n * An address associated with the institute.\n */\nexport class Address extends EntityBase\n{\n  /**\n   * Name of the city.\n   */\n  city: string = '';\n\n  /**\n   * Name of the country.\n   */\n  country: string = '';\n\n  /**\n   * ISO 3166-1 alpha-2 code of the country.\n   */\n  country_code: string = '';\n\n  /**\n   * Latitute of the institute.\n   */\n  lat: number = 0;\n\n  /**\n   * Longitude of the institute.\n   */\n  lng: number = 0;\n\n  /**\n   * First line of the address.\n   */\n  line_1: string = '';\n\n  /**\n   * Second line of the address.\n   */\n  line_2?: string = '';\n\n  /**\n   * Third line of the address.\n   */\n  line_3?: string = '';\n\n  /**\n   * Postcode/zipcode.\n   */\n  postcode: string = '';\n\n  /**\n   * If there is more than one address, identifies the main location.\n   * This address identifies the main location.\n   */\n  primary: boolean = false;\n\n  /**\n   * Name of the state/region.\n   */\n  state: string = '';\n\n  /**\n   * ISO 3166-2 region code.\n   */\n  state_code: string = '';\n\n  /**\n   * Name of the municipality.\n   */\n  municipality: string = '';\n\n  /**\n   * dpa municipality code.\n   */\n  municipality_dpa: string = '';\n\n  /**\n   * Linked GeoNames data.\n   */\n  geonames_city: GeoNamesCity = undefined;\n}\n\n/**\n * Entity for `RedirectPropertiesIdtype` based on schema `organization-v1.0.0.json`.\n * An address associated with the institute.\n */\nexport class RedirectPropertiesIdtype extends EntityBase {\n  /**\n   * description for RedirectPropertiesIdtype.\n   */\n  description: string = '';\n\n  /**\n   * type of RedirectPropertiesIdtype.\n   */\n  type: string = '';\n\n  /**\n   * enum for RedirectPropertiesIdtype.\n   */\n  enum: Array<string> = new Array<string>();\n}\n\n/**\n * Entity for `RedirectProperties` based on schema `organization-v1.0.0.json`.\n * An address associated with the institute.\n */\nexport class RedirectProperties extends EntityBase {\n  /**\n   * Name of the city.\n   */\n  idtype: RedirectPropertiesIdtype = undefined;\n\n  /**\n   * Name of the country.\n   */\n  value: { type: string } = undefined;\n}\n\n/**\n * Entity for `Redirect` based on schema `organization-v1.0.0.json`.\n * An address associated with the institute.\n */\nexport class Redirect extends EntityBase\n{\n  /**\n   * Type of redirect.\n   */\n  type: string = '';\n\n  /**\n   * Show additional properties for redirect if true.\n   */\n  additionalProperties: boolean = false;\n\n  /**\n   * Properties for redirect.\n   */\n  properties: RedirectProperties = undefined;\n}\n\n/**\n * Entity for `Organizations` based on schema `organization-v1.0.0.json`.\n */\nexport class Organization extends Entity\n{\n  /**\n   * Organization Identifiers, different from GRID mapping.\n   */\n  identifiers: Array <Identifier> = new Array <Identifier>();\n\n  /**\n   * The name typically used to refer to the institute.\n   */\n  name: string = '';\n\n  /**\n   * For an active institute, this is always set to active.\n   */\n  status: string = '';\n\n  /**\n   * The list of other names the institute is known as.\n   */\n  aliases: Array<string> = new Array<string>();\n\n  /**\n   * The list of short acronyms the institute is known as (e.g. MRC for the Medical Research Council).\n   */\n  acronyms: Array<string> = new Array<string>();\n\n  /**\n   * The list of types describing the institute.\n   */\n  types: Array<string> = new Array<string>();\n\n  /**\n   * URL of the wikipedia page for the institute.\n   */\n  wikipedia_url: string = '';\n\n  /**\n   * Contact email address for the institute.\n   */\n  email_address: string = '';\n\n  /**\n   * The list of IP addresses known to belong to the institute.\n   */\n  ip_addresses: Array<string> = new Array<string>();\n\n  /**\n   * Year the institute opened, CE.\n   */\n  established: number = -1;\n\n  /**\n   * Year the institute registered on ONEI.\n   */\n   onei_registry: number = -1;\n\n   /**\n    * If its able for exporting to international organizations systems.\n    */\n   exportable: boolean = false;\n\n  /**\n   * The list of URLs linking to things like the homepage for the institute.\n   */\n  links: Array<string> = new Array<string>();\n\n  /**\n   * Name of the institute in different languages.\n   */\n  labels: Array<LabelDiffLang> = new Array <LabelDiffLang>();\n\n  /**\n   * Any relationships the institute has to others.\n   */\n  relationships: Array <Relationship> = new Array <Relationship>();\n\n  /**\n   * An array of addresses associated with the institute.\n   */\n  addresses: Array <Address> = new Array<Address>();\n\n  /**\n   * An array of addresses associated with the institute.\n   */\n  redirect: Redirect = undefined;\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Entity } from \"./common\";\n\nexport class Person extends Entity\n{\n    institution_id: string;\n    name: String;\n    secondName: String;\n    lastName: String;\n    sex: String;\n    inicialsName: String;\n    userName: String;\n    email: String;\n    orcid: String;\n    phone: String;\n    bio: String;\n    street: String;\n    number: String;\n    city: String;\n    province: String;\n    country: String;\n}\n\nexport class Role {\n  id = '';\n  name = '';\n  description = '';\n}\nexport class User{\n  id: string = '';\n  email: string = '';\n  confirmed_at =  '';\n  last_login_at = '';\n  roles: Array<Role> = new Array<Role>();\n}\nexport class UserSourcesRoles{\n    source_uuid: string = '';\n    role: string = '';\n}\n\nexport class UserProfile extends Entity {\n    biography: string = '';\n    email: string = '';\n    full_name: string = '';\n    id: string = '';\n    institution: string = '';\n    institution_id: number = -1;\n    institution_rol: string = '';\n    username: string = '';\n    avatar: string = '';\n    sources: Array<UserSourcesRoles> = new Array<UserSourcesRoles>();\n    user: User = new User();\n\n    identify(){\n      return this.full_name + '<' + this.user.email + '>';\n    }\n}\n\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\n\n\nimport { Entity, EntityBase } from './common';\nimport { Organization } from './organization.entity';\nimport { UserProfile } from './person.entity';\n\nexport const SourceSystems = {\n  OJS: { label: 'Open Journal System', value: 'OJS' },\n  CMS: { label: 'Content Management System (Wordpress, Joomla, Drupal, etc)', value: 'CMS' },\n  DSPACE: { label: 'Dspace', value: 'DSPACE' },\n  OTHER: { label: 'Otro', value: 'OTHER' },\n};\n\nexport const SourceTypes = {\n    JOURNAL: { label: 'Revista Científica', value: 'JOURNAL' },\n    SERIAL: { label: 'Publicación Seriada', value: 'SERIAL' },\n    STUDENT: { label: 'Revista Científico Estudiantil', value: 'STUDENT' },\n    POPULARIZATION: { label: 'Revista de Divulgación', value: 'POPULARIZATION' },\n    REPOSITORY: { label: 'Repositorio Institucional', value: 'REPOSITORY' },\n    WEBSITE: { label: 'Sitio Web', value: 'WEBSITE' },\n    OTHER: { label: 'Otro', value: 'OTHER' },\n};\n\nexport const SourceOrganizationRole = {\n  MAIN: {label: 'Principal', value: 'MAIN'},\n  COLABORATOR: {label: 'Colaborador', value: 'COLABORATOR'}\n};\n\n\nexport const SourcePersonRole = {\n  ADMINISTRATOR: {label: 'Administrador', value: 'ADMINISTRATOR'},\n  JOURNALMANAGER: {label: 'Gestor de Revista', value: 'JOURNALMANAGER'},\n  AUTHOR: {label: 'Autor', value: 'AUTHOR'},\n  EDITOR: {label: 'Editor', value: 'EDITOR'},\n  SECTIONEDITOR: {label: 'Editor de Sección', value: 'SECTIONEDITOR'},\n  REVIEWER: {label: 'Revisor', value: 'REVIEWER'},\n  COPYEDITOR: {label: 'Editor de Copias', value: 'COPYEDITOR'},\n  LAYOUTEDITOR: {label: 'Editor de Formato', value: 'LAYOUTEDITOR'},\n  PROOFREADER: {label: 'Corrector de Pruebas', value: 'PROOFREADER'},\n  READER: {label: 'Lector', value: 'READER'}\n};\n\nexport const SourceStatus = {\n    APPROVED: { label: 'Aprobado', value: 'APPROVED' },\n    TO_REVIEW: { label: 'En revision', value: 'TO_REVIEW'},\n    UNOFFICIAL: { label: 'Incluido Extraoficialmente', value: 'UNOFFICIAL'}\n};\n\nexport class SourceOrganization extends Organization {\n  role: string = '';\n}\nexport class SourceClasification extends EntityBase {\n  id: string = '';\n  description: string = '';\n  vocabulary: string = '';\n  data =  new Object();\n}\n\nexport class  SavingInfoSchema extends EntityBase {\n  user_id: string = '';\n  comment: string = '';\n}\n\nexport class SourceData extends Entity {\n    name = '';\n    title = '';\n    description ?= '';\n    // term_sources ?: Array<TermSource> = new Array<TermSource>();\n    oaiurl ? = '';\n    source_system ? = '';\n    source_type = '';\n    source_status = '';\n    organizations?: Array<SourceOrganization> = new Array<SourceOrganization>();\n    classifications?: Array<SourceClasification> = new Array<SourceClasification>();\n\n\n    _save_info: SavingInfoSchema = new SavingInfoSchema();\n\n    reviewed = false;\n\n    versions? : Array<SourceVersion>;\n\n    // public deepcopy(data: any, exclude: string[] = []): void {\n\n    //   if (data['organizations'] && data['organizations'].length > 0){\n    //     for (let index = 0; index < data['organizations'].length; index++) {\n    //       const element = data['organizations'][index];\n    //       this.organizations.push(new SourceOrganization());\n    //     }\n    //   }\n    //   if (data['classifications'] && data['classifications'].length > 0){\n    //     for (let index = 0; index < data['classifications'].length; index++) {\n    //       const element = data['classifications'][index];\n    //       this.classifications.push(new SourceClasification());\n    //     }\n    //   }\n    //   super.deepcopy(data, exclude);\n    // }\n}\n\n// export class TermSource extends EntityBase {\n//     term_id = '';\n//     source_id = '';\n//     data =  new Object();\n//     term ?: Term  = null;\n// }\n\nexport class SourceVersion extends Entity {\n    user_id = '';\n    source_uuid = '';\n    comment = '';\n    created_at = new Date();\n    is_current = false;\n    reviewed = false;\n\n    data: SourceData = new SourceData();\n\n    userprofile: UserProfile = new UserProfile();\n}\n\n\n\nexport class Source extends Entity {\n    uuid = '';\n    name = '';\n\n    clasifications?: Array<SourceClasification> = new Array<SourceClasification>(0);\n    organizations?: Array<SourceOrganization> = new Array<SourceOrganization>();\n\n    aliases: Array<string> = new Array<string>();\n\n    source_type = '';\n    source_status = '';\n\n    version_to_review = false;\n\n    versions: Array<SourceVersion> = new Array<SourceVersion>();\n\n    data: SourceData = new SourceData();\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\nimport { EntityBase } from './common';\nimport { Source, SourceData, SourceVersion } from './source.entity';\n\n\nexport class SocialNetworks  extends EntityBase {\n  facebook = '';\n  twitter = '';\n  linkedin = '';\n}\n\nexport class IssnOrg extends EntityBase {\n  issn: '';\n  title: '';\n}\n\nexport class ISSN extends EntityBase {\n    p  = '';\n    e  = '';\n    l  = '';\n    issn_org = new IssnOrg();\n}\n\nexport class RNPS extends EntityBase {\n  p  = '';\n  e  = '';\n}\n\nexport class JournalData extends SourceData {\n\n    subtitle  = '';\n    shortname  = '';\n    issn: ISSN = new ISSN();\n    rnps: RNPS = new RNPS();\n    url = '';\n    email = '';\n    logo ? = '';\n    purpose ? = '';\n    start_year ? = '';\n    end_year ? = '';\n    frequency ? = '';\n    seriadas_cubanas ? = '';\n\n    socialNetworks: SocialNetworks = new SocialNetworks();\n\n}\n\nexport class Journal extends Source {\n  data: JournalData = new JournalData();\n  versions: Array<JournalVersion> = new Array<JournalVersion>();\n}\n\nexport class JournalVersion extends SourceVersion {\n  data: JournalData = new JournalData();\n  // /** WARNING: helper variable in the client side. Do not rely on this unless you know what you are doing */\n  // organization?: Term = null;\n  // /** WARNING: helper variable in the client side. Do not rely on this unless you know what you are doing */\n  // institution?: Term = null;\n  // /** WARNING: helper variable in the client side. Do not rely on this unless you know what you are doing */\n  // entity?: Term = null;\n\n  // entitystringify(): string  {\n  //   return JSON.stringify(this, (k, v) => {\n  //     if (k !== 'id' &&\n  //         k !== 'uuid' &&\n  //         k !== 'isNew' &&\n  //         k !== 'organization' &&\n  //         k !== 'institution' &&\n  //         k !== 'entity' ) {\n  //       return v;\n  //     }\n  //   });\n  // }\n}\n","import { EntityBase } from './common';\nimport { Source } from './source.entity';\n\n\n\nexport class Record extends EntityBase {\n  id = '';\n  identifiers = new Array<Object>();\n  source_repo = new Source();\n  spec = new Object();\n  title = '';\n  creators = new Array<Object>();\n  keywords = new Array<string>();\n  description = '';\n  publisher = '';\n  sources = new Array<string>();\n  rights = new Array<string>();\n  types = new Array<string>();\n  formats = new Array<string>();\n  language = '';\n  publication_date = '';\n  contributors = new Array<Object>();\n  references = new Object();\n  iroko_terms = new Array<string>();\n  status = '';\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Entity } from \"./common\";\n\nexport class Repository extends Entity {\n    source_id: string;\n    last_run: Date;\n    identifier: string;\n    metadata_formats: Array<string>;\n    status: string\n    error_log: string\n    sets: Array<RepositorySet>\n    jobId: string\n}\n\nexport class RepositorySet extends Entity {\n    setSpec: string\n    setName: string\n}\n\nexport class HarvestedItem extends Entity {\n    repository_id: string;\n    identifier: string;\n    record_uuid: string;\n    status: string;\n    error_log: string;\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Entity, EntityBase } from './common';\n\n// TODO: Esto esta bastante feo... hay que agregarle a vocabulario un nombre inmutable y referirse a este por aqui, no por los ids\nexport enum VocabulariesInmutableNames {\n    CUBAN_INTITUTIONS = 'CUBAN_INTITUTIONS',\n    SUBJECTS = 'SUBJECTS',\n    CUBAN_PROVINCES = 'CUBAN_PROVINCES',\n    // DATABASES = '3',\n    // MES_GROUPS = 'MES_GROUPS',\n    LICENCES = 'LICENCES',\n    INDEXES_CLASIFICATION = 'INDEXES_CLASIFICATION',\n    INDEXES = 'INDEXES',\n    UNESCO_VOCAB = 'UNESCO_VOCAB',\n    RECOD_SETS = 'RECOD_SETS',\n    RECORD_TYPES = 'RECORD_TYPES',\n    EXTRA_INSTITUTIONS = 'EXTRA_INSTITUTIONS',\n    SUBJECT_COVER = 'SUBJECT_COVER',\n    COUNTRIES = 'COUNTRIES'\n  }\n\nexport class Term extends Entity {\n    uuid = '';\n    identifier = '';\n    description = '';\n    data = new EntityBase();\n    vocabulary_id = '';\n    parent_id = '';\n    clasified_ids: number[] = [];\n    class_ids: number[] = [];\n\n    // deepcopy(data: any){\n    //     switch (data['vocabulary_id']) {\n    //         case VocabulariesInmutableNames.INTITUTION:\n    //             this.data = new TermInstitutionData();\n    //             break;\n    //         case VocabulariesInmutableNames.LICENCES:\n    //             this.data = new TermIndexData();\n    //         default:\n    //             this.data = new EntityBase();\n    //     }\n    //     super.deepcopy(data);\n    // }\n}\n\n\nexport class TermInstitutionData extends EntityBase {\n    grid = '';\n    email = '';\n    website = '';\n    address = '';\n\n}\n\nexport class TermIndexData extends EntityBase {\n  url = '';\n  abrev = '';\n  initial_cover = '';\n  end_cover = '';\n}\n\nexport class Vocabulary extends Entity {\n    name = '';\n    description = '';\n    human_name = '';\n    identifier = '';\n}\n\n/** File node data with possible child nodes. */\nexport interface TermNode {\n    term: Term;\n    parent: TermNode;\n    children?: TermNode[];\n}\n","\nimport { Component, OnInit, Input } from '@angular/core';\n\nimport { Entity } from '../../entities/public-api';\n\n@Component({\n    selector: 'toco-info-card',\n    templateUrl: './info-card.component.html',\n    styleUrls: ['./info-card.component.scss']\n})\nexport class InfoCardComponent implements OnInit {\n\n    @Input() avatar_card ;\n    @Input() title_card: String ;\n    @Input() subtitle_card: String ;\n    @Input() content_card: String ;\n    @Input() img_card: String;\n    @Input() router : String ;\n    @Input() entity: Entity;\n    \n    is_avatar_card: Boolean = false;\n    is_title_card: Boolean = false;\n    is_subtitle_card: Boolean = false;\n    is_content_card: Boolean = false;\n    is_img_card: Boolean = false;\n    @Input() is_actions_card: Boolean = false;\n\n    constructor()\n    { }\n\n    ngOnInit() {\n        if (typeof(this.avatar_card) != 'undefined') this.is_avatar_card = true;\n        if (this.content_card != ' ') this.is_content_card = true;\n        if (this.title_card != ' ') this.is_title_card = true;\n        if (this.subtitle_card != ' ') this.is_subtitle_card = true;\n        if (typeof(this.img_card) != 'undefined') this.is_img_card = true;\n    }\n\n    // show_people(){\n    //   var p = new PeopleShowComponent();\n    //   p.people = this.object_to_show;\n    // }\n}\n","\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'toco-journal-card',\n    templateUrl: './journal-card.component.html',\n    styleUrls: ['./journal-card.component.scss']\n})\nexport class JournalCardComponent implements OnInit\n{\n    constructor()\n    { }\n\n    ngOnInit()\n    { }\n}\n","\nimport { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n    selector: 'toco-nav',\n    templateUrl: './nav.component.html',\n    styleUrls: ['./nav.component.scss']\n})\nexport class NavComponent implements OnInit\n{\n    @Input()\n    menuItems: MenuItem[];\n\n    constructor()\n    { }\n\n    ngOnInit()\n    { }\n}\n\nexport interface MenuItem\n{\n    link: string;\n    label: string;\n}\n","\nimport { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n    selector: 'toco-page-header',\n    templateUrl: './page-header.component.html',\n    styleUrls: ['./page-header.component.scss']\n})\nexport class PageHeaderComponent implements OnInit {\n\n    @Input() drawer;\n    @Input() info:String[] = [];\n    is_show_icon:Boolean = false;\n    \n    constructor() { }\n\n    ngOnInit() {\n        //this.info = ['Listado de Personas','estas estan en el sitio','esta es otra fila'];\n    }\n\n    function(){\n        this.drawer.toggle();\n    }\n    \n    change_icon_show(){\n        this.is_show_icon = false;\n        console.log(this.is_show_icon);\n    }\n}\n","\nimport { Component, Input, OnInit } from '@angular/core';\n\n/**\n * Component that shows information for a page-not-found view. \n */\n@Component({\n    selector: 'toco-page-not-found',\n    templateUrl: './page-not-found.component.html',\n    styleUrls: ['./page-not-found.component.scss']\n})\nexport class PageNotFoundComponent implements OnInit\n{\n    /**\n     * Input field that contains the router link to reditect. \n     * By default, its value is `['/']`. \n     */\n    @Input()\n    public routerLink: string[];\n\n    /**\n     * Input field that contains the image source to show underneath the redirect link. \n     * By default, its value is `undefined`. \n     */\n    @Input()\n    public imgSource: string;\n\n    public constructor()\n    {\n        this.routerLink = undefined;\n        this.imgSource = undefined;\n    }\n\n    public ngOnInit(): void\n    {\n        /* Specifies the default values. */\n\n        if (this.routerLink == undefined) this.routerLink = ['/'];\n        /* The default value for `imgSource` is `undefined`. */\n    }\n}\n","\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HomeComponent } from './home/home.component';\n\nconst routes: Routes = [{\n    path: 'home',\n    component: HomeComponent,\n    data: {\n        title: 'Inicio'\n    }\n}\n];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule]\n})\nexport class CoreRoutingModule\n{ }\n","\nimport { Component, OnInit, Input } from '@angular/core';\nimport { isObject } from 'util';\n\nconst seriesName_English: string[] = ['achieved', 'unresolved'];\nconst seriesName_Spanish: string[] = ['realizado', 'pendiente'];\n\n/**\n * An interface that represents the content of a feature object. \n */\nexport interface Feature\n{\n\t/**\n\t * The feature's name. \n\t */\n\tname: string;\n\n\t/**\n\t * The feature's achieved percentage. \n\t */\n\tachieved: number;\n}\n\n/**\n * An interface that represents the content of a product object. \n * Its achieved percentage value is calculated from its `features` array field. \n */\nexport interface Product\n{\n\t/**\n\t * The product's name. \n\t */\n\tname: string;\n\n\t/**\n\t * The product's features array. \n\t */\n\tfeatures: Feature[];\n}\n\n/**\n * An interface that represents the content of a result object. \n */\nexport interface Result\n{\n\t/**\n\t * The result's name. \n\t */\n\tname: string;\n\n\t/**\n\t * The result's value. \n\t */\n\tvalue: number;\n}\n\n/**\n * An interface that represents the content of a chart bar object. \n * Its `series` field is an array of length 2 that contains \n * the achieved/unresolved results; for example, \n\t`'series': [\n  \t\t{\n  \t\t\t'name': 'achieved',\n \t\t\t'value': 20\n \t\t},\n \t\t{\n \t\t\t'name': 'unresolved',\n \t\t\t'value': 80\n \t\t}\n \t]` \n */\nexport interface ChartBar\n{\n\t/**\n\t * The chart's bar name. \n\t */\n\tname: string;\n\n\t/**\n\t * The results array that makes up the chart's bar. \n\t */\n\tseries: Result[];\n}\n\n/**\n * An interface that represents the content of an entry element object. \n */\nexport interface EntryElement\n{\n\tname: string;\n\tvalue?: number;\n\tlabel?: string;\n\tseries?: string;\n}\n\n/**\n * Component for displaying a roadmap. It basically displays the products \n * that we are currently working, and the products that we will work in the future. \n * Besides, when a product is selected, its features are displayed. \n * It always shows the achieved/unresolved work in percentage. \n */\n@Component({\n\tselector: 'toco-road-map',\n\ttemplateUrl: './road-map.component.html',\n\tstyleUrls: ['./road-map.component.scss']\n})\nexport class RoadMapComponent implements OnInit\n{\n\t/**\n\t * Returns the -1 value that is used to remove a chart. \n\t */\n\tpublic readonly removeChart_PosFlag = -1;\n\n\t/**************************************************************************\n\t **************************************************************************\n\t * Options for displaying the products list. \n\t **************************************************************************\n\t *************************************************************************/\n\n\t/**\n\t * Input field that contains the text that is displayed when there is not any product. \n\t * By default, its value is `'¡No hay ningún producto!'`. \n\t */\n\t@Input()\n\tpublic withoutProductText: string;\n\n\t/**\n\t * Returns the chart's visualization direction. \n\t * It is true if the chart is visualized vertically; otherwise, false (horizontally). \n\t * By default, its value is `true`. \n\t */\n\tprivate _isChartVertical: boolean;\n\n\t/**\n\t * Input field that contains the tab's label of current works. \n\t * By default, its value is `'Trabajos Actuales'`. \n\t */\n\t@Input()\n\tpublic tabLabel_CW: string;\n\t/**\n\t * Input field that contains the tab's label of future works. \n\t * By default, its value is `'Trabajos Futuros o Pendientes'`. \n\t */\n\t@Input()\n\tpublic tabLabel_FW: string;\n\n\t/**\n\t * Returns the selected tab position. Its value is set internally. \n\t */\n\tprivate _selectedTabPos: number;\n\n\t/**\n\t * Returns the grid height. \n\t * Its value is set depending on the `legendPosition` value. \n\t */\n\tprivate _gridHeight: number;\n\n\t/**\n\t * Input field that contains the chart's title of products. \n\t * By default, its value is `'Lista de productos'`. \n\t */\n\t@Input()\n\tpublic chartTitle_P: string;\n\n\t/**\n\t * Returns true if it is using a trick to obligate repainting the chart; otherwise, false. \n\t */\n\tprivate _isUsingTrick_RepaintChart: boolean;\n\t/**\n\t * Returns the working products array introduced by the user. \n\t * It references the `_currentProducts` or `_futureProducts` array. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _products: Product[];\n\t/**\n\t * Returns the current products array introduced by the user. \n\t * From this array is created the `_currentProducts_Internal` and `_currentFeatures_Internal` arrays. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _currentProducts: Product[];\n\t/**\n\t * Returns the future products array introduced by the user. \n\t * From this array is created the `_futureProducts_Internal` and `_futureFeatures_Internal` arrays. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _futureProducts: Product[];\n\n\t/**\n\t * Returns the working products array displayed in the chart. \n\t * It references the `_currentProducts_Internal` or `_futureProducts_Internal` array. \n\t * It is created from the `_products` array. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _products_Internal: ChartBar[];\n\t/**\n\t * Returns the current products array displayed in the chart. \n\t * It is created from the `_currentProducts` array. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _currentProducts_Internal: ChartBar[];\n\t/**\n\t * Returns the future products array displayed in the chart. \n\t * It is created from the `_futureProducts` array. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _futureProducts_Internal: ChartBar[];\n\n\t/**\n\t * Returns the array that contains all working features arrays that can be displayed in the chart. \n\t * This array contains the same length than `_products_Internal` array because \n\t * each position contains the working features array for a product. \n\t * It references the `_currentFeaturesTotal_Internal` or `_futureFeaturesTotal_Internal` array. \n\t * It is created from the `_products` array. \n\t * This array is for internal use only. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _featuresTotal_Internal: ChartBar[][];\n\t/**\n\t * Returns the array that contains all current features arrays that can be displayed in the chart. \n\t * This array contains the same length than `_currentProducts_Internal` array because \n\t * each position contains the current features array for a product. \n\t * It is created from the `_currentProducts` array. \n\t * This array is for internal use only. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _currentFeaturesTotal_Internal: ChartBar[][];\n\t/**\n\t * Returns the array that contains all future features arrays that can be displayed in the chart. \n\t * This array contains the same length than `_futureProducts_Internal` array because \n\t * each position contains the future features array for a product. \n\t * It is created from the `_futureProducts` array. \n\t * This array is for internal use only. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _futureFeaturesTotal_Internal: ChartBar[][];\n\n\t/**\n\t * Returns the working features array of a selected product displayed in the chart. \n\t * It references an element in the `_featuresTotal_Internal` array. This element \n\t * represents the features of a selected product in the `_products_Internal` array. \n\t * It references the `_currentFeatures_Internal` or `_futureFeatures_Internal` array. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _features_Internal: ChartBar[];\n\t/**\n\t * Returns the current features array of a selected product displayed in the chart. \n\t * It references an element in the `_currentFeaturesTotal_Internal` array. This element \n\t * represents the features of a selected product in the `_currentProducts_Internal` array. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _currentFeatures_Internal: ChartBar[];\n\t/**\n\t * Returns the future features array of a selected product displayed in the chart. \n\t * It references an element in the `_futureFeaturesTotal_Internal` array. This element \n\t * represents the features of a selected product in the `_futureProducts_Internal` array. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _futureFeatures_Internal: ChartBar[];\n\n\t/**\n\t * Returns the current product elements array to highlight displayed in the chart. \n\t * It is modified dynamically. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _activeEntries_P_CW: EntryElement[];\n\t/**\n\t * Returns the future product elements array to highlight displayed in the chart. \n\t * It is modified dynamically. \n\t * By default, its value is `[]`. \n\t */\n\tprivate _activeEntries_P_FW: EntryElement[];\n\n\t/**\n\t * Input field that contains the chart's dimensions [width, height]. \n\t * By default, its value is `[900, 350]`. \n\t */\n\t@Input()\n\tpublic view: number[];\n\n\t/**\n\t * Input field that contains the chart's color scheme of current works. \n\t * By default, its value is the following object: \n\t\t`{\n\t \t\tdomain: [ \n\t\t\t\t'#6EE9B5',  // light green \n\t\t\t\t'#E96E70'   // red\n\t\t\t] \n\t\t}` \n\t */\n\t@Input()\n\tpublic colorScheme_CW: any;\n\t/**\n\t * Input field that contains the chart's color scheme of future works. \n\t * By default, its value is the following object: \n\t\t`{\n\t \t\tdomain: [ \n\t\t\t\t'#6F6EE9',  // blue\n\t\t\t\t'#6EBBE9'   // light blue\n\t\t\t] \n\t\t}` \n\t */\n\t@Input()\n\tpublic colorScheme_FW: any;\n\n\t/**\n\t * Input field that indicates to fill chart's elements with a gradient or a solid color. \n\t * It is true if the chart's elements are filled with a gradient color; otherwise, false (filled with a solid color). \n\t * By default, its value is `false`. \n\t */\n\t@Input()\n\tpublic gradient: boolean;\n\n\t/**\n\t * Input field that contains the chart's padding between bars in px. \n\t * By default, its value is `12`. \n\t */\n\t@Input()\n\tpublic barPadding: number;\n\n\t/**\n\t * Shows the chart's x axis. \n\t */\n\tpublic readonly showXAxis: boolean;\n\t/**\n\t * Shows the chart's x axis label. \n\t */\n\tpublic readonly showXAxisLabel: boolean;\n\t/**\n\t * Input field that contains the chart's x axis label text of products. \n\t * By default, its value is `'Producto'`. \n\t */\n\t@Input()\n\tpublic xAxisLabel_P: string;\n\n\t/**\n\t * Input field that contains the chart's max length of the ticks (ticks over this length will be trimmed). \n\t * By default, its value is `16`. \n\t */\n\t@Input()\n\tpublic maxAxisTickLength: number;\n\n\t/**\n\t * Shows the chart's y axis. \n\t */\n\tpublic readonly showYAxis: boolean;\n\t/**\n\t * Shows the chart's y axis label. \n\t */\n\tpublic readonly showYAxisLabel: boolean;\n\t/**\n\t * Input field that contains the chart's y axis label text of products. \n\t * By default, its value is `'Realizado / Pendiente En Por Ciento'`. \n\t */\n\t@Input()\n\tpublic yAxisLabel_P: string;\n\n\t/**\n\t * Shows the chart's legend. \n\t */\n\tpublic readonly showLegend: boolean;\n\t/**\n\t * Input field that contains the chart's legend title. \n\t * By default, its value is `'Leyenda'`. \n\t */\n\t@Input()\n\tpublic legendTitle: string;\n\t/**\n\t * Input field that contains the chart's legend position. Its value is `'right'` or `'below'`. \n\t * By default, its value is `'right'`. \n\t */\n\tprivate _legendPosition: string;\n\n\t/**************************************************************************\n\t **************************************************************************\n\t * Options for displaying the features list of a selected product. \n\t **************************************************************************\n\t *************************************************************************/\n\n\t/**\n\t * Returns the working product position. Contains the `removeChart_PosFlag` value when \n\t * there is not any selected working product position. \n\t * It has the `_selectedProductPos_CW` or `_selectedProductPos_FW` value. \n\t */\n\tprivate _selectedProductPos: number;\n\t/**\n\t * Returns the selected current product position. Contains the `removeChart_PosFlag` value when \n\t * there is not any selected current product position. \n\t */\n\tprivate _selectedProductPos_CW: number;\n\t/**\n\t * Returns the selected future product position. Contains the `removeChart_PosFlag` value when \n\t * there is not any selected future product position. \n\t */\n\tprivate _selectedProductPos_FW: number;\n\n\t/**\n\t * Returns the chart's title of features. \n\t * This field is updated a little different. \n\t * By default, its value is `'Lista de características del producto seleccionado'`. \n\t */\n\tprivate _chartTitle_F: string;\n\t/**\n\t * Returns the chart's title of working current features. \n\t * This field is updated a little different. \n\t * By default, its value is `'Lista de características del producto seleccionado'`. \n\t */\n\tprivate _chartTitle_F_CW: string;\n\t/**\n\t * Returns the chart's title of working future features. \n\t * This field is updated a little different. \n\t * By default, its value is `'Lista de características del producto seleccionado'`. \n\t */\n\tprivate _chartTitle_F_FW: string;\n\n\t/**\n\t * Input field that contains the chart's x axis label text of features. \n\t * By default, its value is `'Característica'`. \n\t */\n\t@Input()\n\tpublic xAxisLabel_F: string;\n\n\t/**\n\t * Input field that contains the chart's y axis label text of features. \n\t * By default, its value is `'Realizado / Pendiente En Por Ciento'`. \n\t */\n\t@Input()\n\tpublic yAxisLabel_F: string;\n\n\tpublic constructor()\n\t{\n\t\tthis.withoutProductText = '¡No hay ningún producto!';\n\n\t\tthis._isChartVertical = true;\n\n\t\tthis.tabLabel_CW = 'Trabajos Actuales';\n\t\tthis.tabLabel_FW = 'Trabajos Futuros o Pendientes';\n\t\tthis._selectedTabPos = 0;\n\t\t/* The `_gridHeight` value is set when the `legendPosition` value is set. */\n\n\t\tthis.chartTitle_P = 'Lista de productos';\n\n\t\tthis._isUsingTrick_RepaintChart = false;\n\t\tthis._products = this._currentProducts = [ ];\n\t\tthis._futureProducts = [ ];\n\t\tthis._products_Internal = this._currentProducts_Internal = [ ];\n\t\tthis._futureProducts_Internal = [ ];\n\t\tthis._featuresTotal_Internal = this._currentFeaturesTotal_Internal = [ ];\n\t\tthis._futureFeaturesTotal_Internal = [ ];\n\t\tthis._features_Internal = this._currentFeatures_Internal = [ ];\n\t\tthis._futureFeatures_Internal = [ ];\n\n\t\tthis._activeEntries_P_CW = [ ];\n\t\tthis._activeEntries_P_FW = [ ];\n\n\t\tthis.view = [900, 350];\n\t\tthis.colorScheme_CW = {\n\t\t\tdomain: [  // all colors light\n\t\t\t\t// '#85E96E',  // green\n\t\t\t\t'#6EE9B5',  // light green\n\t\t\t\t'#E96E70',  // red\n\t\t\t\t// '#6F6EE9',  // blue\n\t\t\t\t// '#6EBBE9',  // light blue\n\t\n\t\t\t\t// '#A9A9A9',\n\t\t\t\t// '#85E96E',\n\t\t\t\t// '#E3E96E',\n\t\t\t\t// '#E9AC6E',\n\t\t\t\t// '#E96E70',\n\t\t\t\t// '#E96EB6',\n\t\t\t\t// '#AE6EE9',\n\t\t\t\t// '#6F6EE9',\n\t\t\t\t// '#6EBBE9',\n\t\t\t\t// '#6EE9B5'\n\t\t\t]\n//\t\t\tdomain: [  // all colors dark\n\t\t\t//   '#2F6E6F',\n//\t\t\t  '#2F6F40',  // green\n\t\t\t//   '#6B6F2F',  // light green\n//\t\t\t  '#6F432F',  // red\n\t\t\t//   '#6F2F4F',\n\t\t\t//   '#562F6F',\n\t\t\t//   '#302F6F',\n\t\t\t//   '#2F466F'\n//\t\t\t]\n\t\t\t// domain: [  // all colors grey\n\t\t\t//\t '#a6a6a6',\n\t\t\t//   '#828282',\n\t\t\t//   '#686868',\n\t\t\t//\t '#555555',\n\t\t\t//   '#4d4d4d',\n\t\t\t//   '#464646',\n\t\t\t//   '#434343',\n\t\t\t//   '#3d3d3d',\n\t\t\t//   '#343434',\n\t\t\t//   '#262626',\n\t\t\t//   '#252525',\n\t\t\t//   '#000000'\n\t\t\t// ]\n\t\t};\n\t\tthis.colorScheme_FW = {\n\t\t\tdomain: [\n\t\t\t\t'#6F6EE9',  // blue\n\t\t\t\t'#6EBBE9'   // light blue\n\t\t\t]\n\t\t};\n\t\tthis.gradient = false;\n\t\tthis.barPadding = 12;\n\n\t\tthis.showXAxis = true;\n\t\tthis.showXAxisLabel = true;\t\n\t\tthis.xAxisLabel_P = 'Producto';\n\t\tthis.maxAxisTickLength = 16;\n\n\t\tthis.showYAxis = true;\n\t\tthis.showYAxisLabel = true;\n\t\tthis.yAxisLabel_P = 'Realizado / Pendiente En Por Ciento';\n\n\t\tthis.showLegend = true;\n\t\tthis.legendTitle = 'Leyenda';\n\t\tthis.legendPosition = 'right';\n\n\n\t\tthis._selectedProductPos = this._selectedProductPos_CW = this._selectedProductPos_FW = this.removeChart_PosFlag;\n\n\t\tthis._chartTitle_F = this._chartTitle_F_CW = this._chartTitle_F_FW = 'Lista de características del producto seleccionado';\n\t\tthis.xAxisLabel_F = 'Característica';\n\t\tthis.yAxisLabel_F = 'Realizado / Pendiente En Por Ciento';\n\t}\n\n\tpublic ngOnInit(): void\n\t{ }\n\n\t/**\n\t * Returns the input field that contains the chart's visualization direction. \n\t * It is true if the chart is visualized vertically; otherwise, false (horizontally). \n\t * When this value is set, the `xAxisLabel_P`/`yAxisLabel_P` and `xAxisLabel_F`/`yAxisLabel_F` values are set accordingly. \n\t * By default, its value is `true`. \n\t */\n\t@Input()\n\tpublic get isChartVertical(): boolean\n\t{\n\t\treturn this._isChartVertical;\n\t}\n\n\t/**\n\t * Sets the input field that contains the chart's visualization direction. \n\t * It is true if the chart is visualized vertically; otherwise, false (horizontally). \n\t * When this value is set, the `xAxisLabel_P`/`yAxisLabel_P` and `xAxisLabel_F`/`yAxisLabel_F` values are set accordingly. \n\t * By default, its value is `true`. \n\t * @param value The new chart's visualization direction to set. \n\t */\n\tpublic set isChartVertical(value: boolean)\n\t{\n\t\tif (this._isChartVertical != value)\n\t\t{\n\t\t\tlet temp: string = this.xAxisLabel_P;\n\t\t\tthis.xAxisLabel_P = this.yAxisLabel_P;\n\t\t\tthis.yAxisLabel_P = temp;\n\n\t\t\ttemp = this.xAxisLabel_F;\n\t\t\tthis.xAxisLabel_F = this.yAxisLabel_F;\n\t\t\tthis.yAxisLabel_F = temp;\n\n\t\t\tthis._isChartVertical = value\n\t\t}\n\t}\n\n\t/**\n\t * Returns the grid height. \n\t * Its value is set depending on the `legendPosition` value. \n\t */\n\tpublic get gridHeight(): number\n\t{\n\t\treturn this._gridHeight;\n\t}\n\n\t/**\n\t * Returns the input field that contains the current products array introduced by the user. \n\t * From this array is created the `currentProducts_Internal` and `currentFeatures_Internal` arrays. \n\t * By default, its value is `[]`. \n\t */\n\t@Input()\n\tpublic get currentProducts(): Product[]\n\t{\n\t\treturn this._currentProducts;\n\t}\n\n\t/**\n\t * Sets the input field that contains the current products array. \n\t * By default, its value is `[]`. \n\t * @param value The new current products array to set. \n\t */\n\tpublic set currentProducts(value: Product[])\n\t{\n\t\t// console.log('currentProducts: ', value);\n\n\t\t/* Updates the current products/features arrays. */\n\t\tthis._currentProducts = value || [ ];\n\t\tif (this._isUsingTrick_RepaintChart)\n\t\t{\n\t\t\tthis._isUsingTrick_RepaintChart = false;\n\n\t\t\tthis._currentProducts_Internal = this._currentProducts_Internal.map(value => value);\n\t\t\tthis._currentFeaturesTotal_Internal = this._currentFeaturesTotal_Internal.map(value => value.map(value => value));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._currentProducts_Internal = [ ];\n\t\t\tthis._currentFeaturesTotal_Internal = [ ];\n\n\t\t\t/* Creates the internal arrays that are going to be passed in the template; \n\t\t\t`_currentProducts_Internal` and `_currentFeaturesTotal_Internal` arrays. \n\t\t\tThe `_currentFeatures_Internal` array references an element in \n\t\t\tthe `_currentFeaturesTotal_Internal` array. This element represents the features \n\t\t\tof a selected product in the `_currentProducts_Internal` array. */\n\t\t\tthis._createsInternalArrays(this._currentProducts, this._currentProducts_Internal, this._currentFeaturesTotal_Internal);\n\t\t}\n\t\tthis._currentFeatures_Internal = [ ];\n\n\t\t/* Updates the fields whether there is a selected current product. */\n\t\tif (this._selectedProductPos_CW != this.removeChart_PosFlag)\n\t\t{\n\t\t\tif (this._selectedProductPos_CW < this._currentProducts.length)\n\t\t\t{\n\t\t\t\t/* Updates the fields whether the new `_currentProducts` array has the enough length. */\n\n\t\t\t\t/* The `_selectedProductPos_CW` value is already correct. */\n\t\t\t\tthis._currentFeatures_Internal = this._currentFeaturesTotal_Internal[this._selectedProductPos_CW];\n\t\t\t\tthis._set_activeEntries_P_CW(false);\n\t\t\t\tthis._chartTitle_F_CW = this._chartTitle_F \n\t\t\t\t\t+ ((this._chartTitle_F.length == 0) ? '' : ' ') \n\t\t\t\t\t+ `“${ this._currentProducts_Internal[this._selectedProductPos_CW].name }”`;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t/* Removes the selected current product because the `_currentProducts` array has not the enough length. */\n\n\t\t\t\tthis._selectedProductPos_CW = this.removeChart_PosFlag;\n\t\t\t\t/* The `_currentFeatures_Internal` array is already correct (an empty array). */\n\t\t\t\tthis._set_activeEntries_P_CW(true);\n\t\t\t\tthis._chartTitle_F_CW = this._chartTitle_F;\n\t\t\t}\n\t\t}\n\n\t\t/* Updates the fields whether the selected tab is the current works. */\n\t\tif (this._selectedTabPos == 0)\n\t\t{\n\t\t\tthis._setData_CW();\n\t\t}\n\t}\n\n\t/**\n\t * Returns the current products array displayed in the chart. \n\t * It is created from the `currentProducts` array. \n\t * By default, its value is `[]`. \n\t */\n\tpublic get currentProducts_Internal(): ChartBar[]\n\t{\n\t\treturn this._currentProducts_Internal;\n\t}\n\n\t/**\n\t * Returns the current features array of a selected product displayed in the chart. \n\t * It is created from the `currentProducts` array. \n\t * By default, its value is `[]`. \n\t */\n\tpublic get currentFeatures_Internal(): ChartBar[]\n\t{\n\t\treturn this._currentFeatures_Internal;\n\t}\n\n\t/**\n\t * Returns the input field that contains the future products array introduced by the user. \n\t * From this array is created the `futureProducts_Internal` and `futureFeatures_Internal` arrays. \n\t * By default, its value is `[]`. \n\t */\n\t@Input()\n\tpublic get futureProducts(): Product[]\n\t{\n\t\treturn this._futureProducts;\n\t}\n\n\t/**\n\t * Sets the input field that contains the future products array. \n\t * By default, its value is `[]`. \n\t * @param value The new future products array to set. \n\t */\n\tpublic set futureProducts(value: Product[])\n\t{\n\t\t// console.log('futureProducts: ', value);\n\n\t\t/* Updates the future products/features arrays. */\n\t\tthis._futureProducts = value || [ ];\n\t\tif (this._isUsingTrick_RepaintChart)\n\t\t{\n\t\t\tthis._isUsingTrick_RepaintChart = false;\n\n\t\t\tthis._futureProducts_Internal = this._futureProducts_Internal.map(value => value);\n\t\t\tthis._futureFeaturesTotal_Internal = this._futureFeaturesTotal_Internal.map(value => value.map(value => value));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._futureProducts_Internal = [ ];\n\t\t\tthis._futureFeaturesTotal_Internal = [ ];\n\n\t\t\t/* Creates the internal arrays that are going to be passed in the template; \n\t\t\t`_futureProducts_Internal` and `_futureFeaturesTotal_Internal` arrays. \n\t\t\tThe `_futureFeatures_Internal` array references an element in \n\t\t\tthe `_futureFeaturesTotal_Internal` array. This element represents the features \n\t\t\tof a selected product in the `_futureProducts_Internal` array. */\n\t\t\tthis._createsInternalArrays(this._futureProducts, this._futureProducts_Internal, this._futureFeaturesTotal_Internal);\n\t\t}\n\t\tthis._futureFeatures_Internal = [ ];\n\n\t\t/* Updates the fields whether there is a selected future product. */\n\t\tif (this._selectedProductPos_FW != this.removeChart_PosFlag)\n\t\t{\n\t\t\tif (this._selectedProductPos_FW < this._futureProducts.length)\n\t\t\t{\n\t\t\t\t/* Updates the fields whether the new `_futureProducts` array has the enough length. */\n\n\t\t\t\t/* The `_selectedProductPos_FW` value is already correct. */\n\t\t\t\tthis._futureFeatures_Internal = this._futureFeaturesTotal_Internal[this._selectedProductPos_FW];\n\t\t\t\tthis._set_activeEntries_P_FW(false);\n\t\t\t\tthis._chartTitle_F_FW = this._chartTitle_F \n\t\t\t\t\t+ ((this._chartTitle_F.length == 0) ? '' : ' ') \n\t\t\t\t\t+ `“${ this._futureProducts_Internal[this._selectedProductPos_FW].name }”`;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t/* Removes the selected future product because the `_futureProducts` array has not the enough length. */\n\n\t\t\t\tthis._selectedProductPos_FW = this.removeChart_PosFlag;\n\t\t\t\t/* The `_futureFeatures_Internal` array is already correct (an empty array). */\n\t\t\t\tthis._set_activeEntries_P_FW(true);\n\t\t\t\tthis._chartTitle_F_FW = this._chartTitle_F;\n\t\t\t}\n\t\t}\n\n\t\t/* Updates the fields whether the selected tab is the future works. */\n\t\tif (this._selectedTabPos == 1)\n\t\t{\n\t\t\tthis._setData_FW();\n\t\t}\n\t}\n\n\t/**\n\t * Returns the future products array displayed in the chart. \n\t * It is created from the `futureProducts` array. \n\t * By default, its value is `[]`. \n\t */\n\tpublic get futureProducts_Internal(): ChartBar[]\n\t{\n\t\treturn this._futureProducts_Internal;\n\t}\n\n\t/**\n\t * Returns the future features array of a selected product displayed in the chart. \n\t * It is created from the `futureProducts` array. \n\t * By default, its value is `[]`. \n\t */\n\tpublic get futureFeatures_Internal(): ChartBar[]\n\t{\n\t\treturn this._futureFeatures_Internal;\n\t}\n\n\t/**\n\t * Returns the current product elements array to highlight displayed in the chart. \n\t * It is modified dynamically. \n\t * By default, its value is `[]`. \n\t */\n\tpublic get activeEntries_P_CW(): EntryElement[]\n\t{\n\t\treturn this._activeEntries_P_CW;\n\t}\n\n\t/**\n\t * Sets the current product elements array to highlight displayed in the chart. \n\t * @param setEmpty If it is true, then sets the `_activeEntries_P_CW` array to empty. \n\t */\n\tprivate _set_activeEntries_P_CW(setEmpty: boolean): void\n\t{\n\t\t// console.log('Called \"_set_activeEntries_P_CW\": setEmpty = ', setEmpty);\n\n\t\tif (setEmpty)\n\t\t{\n\t\t\tthis._activeEntries_P_CW = [ ];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet selectedProduct: ChartBar = this._currentProducts_Internal[this._selectedProductPos_CW];\n\n\t\t\tthis._activeEntries_P_CW = [\n\t\t\t\t{\n\t\t\t\t\t'name': selectedProduct.series[0].name,\n\t\t\t\t\t'value': selectedProduct.series[0].value,\n\t\t\t\t\t'label': selectedProduct.series[0].name,\n\t\t\t\t\t'series': selectedProduct.name\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'name': selectedProduct.series[1].name,\n\t\t\t\t\t'value': selectedProduct.series[1].value,\n\t\t\t\t\t'label': selectedProduct.series[1].name,\n\t\t\t\t\t'series': selectedProduct.name\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t}\n\n\t/**\n\t * Returns the future product elements array to highlight displayed in the chart. \n\t * It is modified dynamically. \n\t * By default, its value is `[]`. \n\t */\n\tpublic get activeEntries_P_FW(): EntryElement[]\n\t{\n\t\treturn this._activeEntries_P_FW;\n\t}\n\n\t/**\n\t * Sets the future product elements array to highlight displayed in the chart. \n\t * @param setEmpty If it is true, then sets the `_activeEntries_P_FW` array to empty. \n\t */\n\tprivate _set_activeEntries_P_FW(setEmpty: boolean): void\n\t{\n\t\t// console.log('Called \"_set_activeEntries_P_FW\": setEmpty = ', setEmpty);\n\n\t\tif (setEmpty)\n\t\t{\n\t\t\tthis._activeEntries_P_FW = [ ];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet selectedProduct: ChartBar = this._futureProducts_Internal[this._selectedProductPos_FW];\n\n\t\t\tthis._activeEntries_P_FW = [\n\t\t\t\t{\n\t\t\t\t\t'name': selectedProduct.series[0].name,\n\t\t\t\t\t'value': selectedProduct.series[0].value,\n\t\t\t\t\t'label': selectedProduct.series[0].name,\n\t\t\t\t\t'series': selectedProduct.name\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'name': selectedProduct.series[1].name,\n\t\t\t\t\t'value': selectedProduct.series[1].value,\n\t\t\t\t\t'label': selectedProduct.series[1].name,\n\t\t\t\t\t'series': selectedProduct.name\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t}\n\n\t/**\n\t * Returns the input field that contains the chart's legend position. Its value is `'right'` or `'below'`. \n\t * By default, its value is `'right'`. \n\t */\n\t@Input()\n\tpublic get legendPosition(): string\n\t{\n\t\treturn this._legendPosition;\n\t}\n\n\t/**\n\t * Sets the input field that contains the chart's legend position. Its value is `'right'` or `'below'`. \n\t * By default, its value is `'right'`. \n\t * @param value The new chart's legend position to set. \n\t */\n\tpublic set legendPosition(value: string)\n\t{\n\t\tif ((this._legendPosition = value) == 'below')\n\t\t{\n\t\t\t/* Sets the grid height. */\n\t\t\tthis._gridHeight = this.view[1] + 60;  /* More 60 to include the legend in the grid. */\n\t\t}\n\t\telse\n\t\t{\n\t\t\t/* Sets the grid height. */\n\t\t\tthis._gridHeight = this.view[1];\n\t\t}\n\t}\n\n\t/**\n\t * Returns a boolean value that indicates the legend position. \n\t * It is true if the legend position is `'right'`; otherwise, false (`'below'`). \n\t * By default, its value is `true`. \n\t */\n\tpublic get isLegendRight(): boolean\n\t{\n\t\treturn (this.legendPosition == 'right');\n\t}\n\n\t/**\n\t * Sets a boolean value that indicates the legend position. \n\t * It is true if the legend position is `'right'`; otherwise, false (`'below'`). \n\t * By default, its value is `true`. \n\t * @param value The new boolean value to set. \n\t */\n\tpublic set isLegendRight(value: boolean)\n\t{\n\t\tthis.legendPosition = (value) ? 'right' : 'below';\n\t}\n\n\t/**\n\t * Returns the selected current product position. Contains the `removeChart_PosFlag` value when \n\t * there is not any selected current product position. \n\t */\n\tpublic get selectedProductPos_CW(): number\n\t{\n\t\treturn this._selectedProductPos_CW;\n\t}\n\n\t/**\n\t * Returns the selected future product position. Contains the `removeChart_PosFlag` value when \n\t * there is not any selected future product position. \n\t */\n\tpublic get selectedProductPos_FW(): number\n\t{\n\t\treturn this._selectedProductPos_FW;\n\t}\n\n\t/**\n\t * Returns the input field that contains the chart's title of features. \n\t * By default, its value is `'Lista de características del producto seleccionado'`. \n\t */\n\t@Input()\n\tpublic get chartTitle_F(): string\n\t{\n\t\treturn this._chartTitle_F;\n\t}\n\n\t/**\n\t * Sets the input field that contains the chart's title of features. \n\t * By default, its value is `'Lista de características del producto seleccionado'`. \n\t * @param value The new chart's title of features to set. \n\t */\n\tpublic set chartTitle_F(value: string)\n\t{\n\t\tthis._chartTitle_F = value || 'Lista de características del producto seleccionado';\n\n\t\t/* Updates all chart's titles of features. */\n\n\t\tthis._chartTitle_F_CW = (this._selectedProductPos_CW == this.removeChart_PosFlag) \n\t\t\t? (this._chartTitle_F)\n\t\t\t: (this._chartTitle_F \n\t\t\t\t+ ((this._chartTitle_F.length == 0) ? '' : ' ') \n\t\t\t\t+ `“${ this._currentProducts_Internal[this._selectedProductPos_CW].name }”`);\n\n\t\tthis._chartTitle_F_FW = (this._selectedProductPos_FW == this.removeChart_PosFlag) \n\t\t\t? (this._chartTitle_F)\n\t\t\t: (this._chartTitle_F \n\t\t\t\t+ ((this._chartTitle_F.length == 0) ? '' : ' ') \n\t\t\t\t+ `“${ this._futureProducts_Internal[this._selectedProductPos_FW].name }”`);\n\t}\n\n\t/**\n\t * Returns the chart's title of working current features. \n\t * By default, its value is `'Lista de características del producto seleccionado'`. \n\t */\n\tpublic get chartTitle_F_CW(): string\n\t{\n\t\treturn this._chartTitle_F_CW;\n\t}\n\n\t/**\n\t * Returns the chart's title of working future features. \n\t * By default, its value is `'Lista de características del producto seleccionado'`. \n\t */\n\tpublic get chartTitle_F_FW(): string\n\t{\n\t\treturn this._chartTitle_F_FW;\n\t}\n\n\tpublic onSelectTab(newPos: number): void\n\t{\n\t\t// console.log('onSelectTab pos: ', newPos);\n\n\t\t/* Uses this trick to obligate repainting the chart. */\n\t\tthis._isUsingTrick_RepaintChart = true;\n\n\t\tif ((this._selectedTabPos = newPos) == 0)\n\t\t{\n\t\t\tthis.currentProducts = this.currentProducts.map(value => value);\n\n\t\t\t// this._setData_CW();  /* Better performance: Use this option if you do not use the dynamic legend position or not resize the navigator. */\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.futureProducts = this.futureProducts.map(value => value);\n\n\t\t\t// this._setData_FW();  /* Better performance: Use this option if you do not use the dynamic legend position or not resize the navigator. */\n\t\t}\n\t}\n\n\tpublic onSelect(eventInfo: any): void\n\t{\n\t\t// console.log('onSelect: ', eventInfo);\n\n\t\tif (isObject(eventInfo))  /* It has not clicked a legend item. */\n\t\t{\n\t\t\tlet tempPos: number;\n\t\t\tconst len: number = this._products_Internal.length;\n\t\t\tconst posAsString: string = eventInfo.series;\n\n\t\t\t/* Gets the new selected position. */\n\t\t\tfor(tempPos = 0; tempPos < len; tempPos++)\n\t\t\t{\n\t\t\t\tif (this._products_Internal[tempPos].name == posAsString) break;\n\t\t\t}\n\n\t\t\t/* Updates the `_selectedProductPos_CW`/`_selectedProductPos_FW`. If the new selected \n\t\t\t * position equals the current selected position, then the chart for displaying \n\t\t\t * the features list of the selected product will be removed. */\n\t\t\tthis._updateProductPos(tempPos);\n\t\t}\n\t}\n\n\tpublic onActivate(eventInfo: any): void\n\t{\n\t\t// console.log('onActivate: ', eventInfo);\n\t}\n\n\tpublic onDeactivate(eventInfo: any): void\n\t{\n\t\t// console.log('onDeactivate: ', eventInfo, ', _activeEntries_P_CW = ', this._activeEntries_P_CW, ', _activeEntries_P_FW = ', this._activeEntries_P_FW);\n\n\t\tif (this._isFeaturesChartShowed)\n\t\t{\n\t\t\tif (this._selectedTabPos == 0)\n\t\t\t{\n\t\t\t\tthis._activeEntries_P_CW = this._activeEntries_P_CW.map(value => value);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._activeEntries_P_FW = this._activeEntries_P_FW.map(value => value);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Sets the data of current works. \n\t */\n\tprivate _setData_CW(): void\n\t{\n\t\tthis._products = this._currentProducts;\n\t\tthis._products_Internal = this._currentProducts_Internal;\n\t\tthis._featuresTotal_Internal = this._currentFeaturesTotal_Internal;\n\t\tthis._features_Internal = this._currentFeatures_Internal;\n\n\t\tthis._selectedProductPos = this._selectedProductPos_CW;\n\t}\n\n\t/**\n\t * Sets the data of future works. \n\t */\n\tprivate _setData_FW(): void\n\t{\n\t\tthis._products = this._futureProducts;\n\t\tthis._products_Internal = this._futureProducts_Internal;\n\t\tthis._featuresTotal_Internal = this._futureFeaturesTotal_Internal;\n\t\tthis._features_Internal = this._futureFeatures_Internal;\n\n\t\tthis._selectedProductPos = this._selectedProductPos_FW;\n\t}\n\n\t/**\n\t * Returns true if the features chart is showed; otherwise, false. \n\t */\n\tprivate get _isFeaturesChartShowed(): boolean\n\t{\n\t\treturn (this._selectedProductPos != this.removeChart_PosFlag);\n\t}\n\n\t/**\n\t * Updates the `selectedProductPos`. If the new selected position equals the current \n\t * selected position, then the chart for displaying the features list of the selected product \n\t * will be removed. \n\t * @param newSelectedPosition The new selected position. \n\t */\n\tprivate _updateProductPos(newSelectedPosition: number): void\n\t{\n\t\t/* Updates the `selectedProductPos`. If the new selected position equals the current \n\t\t * selected position, then the chart for displaying the features list of the selected product \n\t\t * will be removed. */\n\t\tif (newSelectedPosition == this._selectedProductPos)\n\t\t{\n\t\t\tif (this._selectedTabPos == 0)\n\t\t\t{\n\t\t\t\tthis._selectedProductPos = this._selectedProductPos_CW = this.removeChart_PosFlag;\n\t\t\t\tthis._features_Internal = this._currentFeatures_Internal = [ ];\n\t\t\t\tthis._set_activeEntries_P_CW(true);\n\t\t\t\tthis._chartTitle_F_CW = this._chartTitle_F;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._selectedProductPos = this._selectedProductPos_FW = this.removeChart_PosFlag;\n\t\t\t\tthis._features_Internal = this._futureFeatures_Internal = [ ];\n\t\t\t\tthis._set_activeEntries_P_FW(true);\n\t\t\t\tthis._chartTitle_F_FW = this._chartTitle_F;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this._selectedTabPos == 0)\n\t\t\t{\n\t\t\t\tthis._selectedProductPos = this._selectedProductPos_CW = newSelectedPosition;\n\t\t\t\tthis._features_Internal = this._currentFeatures_Internal = this._featuresTotal_Internal[newSelectedPosition];\n\t\t\t\tthis._set_activeEntries_P_CW(false);\n\t\t\t\tthis._chartTitle_F_CW = this._chartTitle_F \n\t\t\t\t\t+ ((this._chartTitle_F.length == 0) ? '' : ' ') \n\t\t\t\t\t+ `“${ this._products_Internal[newSelectedPosition].name }”`;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._selectedProductPos = this._selectedProductPos_FW = newSelectedPosition;\n\t\t\t\tthis._features_Internal = this._futureFeatures_Internal = this._featuresTotal_Internal[newSelectedPosition];\n\t\t\t\tthis._set_activeEntries_P_FW(false);\n\t\t\t\tthis._chartTitle_F_FW = this._chartTitle_F \n\t\t\t\t\t+ ((this._chartTitle_F.length == 0) ? '' : ' ') \n\t\t\t\t\t+ `“${ this._products_Internal[newSelectedPosition].name }”`;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Creates the internal arrays that are going to be passed in the template \n\t * for the current/future products/features accordingly. \n\t * @param products The current/future products array introduced by the user. \n\t * @param products_Internal The current/future products array displayed in the chart. \n\t * @param featuresTotal_Internal The array that contains all current/future features arrays that can be displayed in the chart. \n\t */\n\tprivate _createsInternalArrays(products: Product[], products_Internal: ChartBar[], featuresTotal_Internal: ChartBar[][]): void\n\t{\n\t\t/* Creates the internal arrays that are going to be passed in the template; \n\t\t`_currentProducts_Internal`/`_futureProducts_Internal` and `_currentFeaturesTotal_Internal`/`_futureFeaturesTotal_Internal` arrays. \n\t\tThe `_currentFeatures_Internal`/`_futureFeatures_Internal` array references an element in \n\t\tthe `_currentFeaturesTotal_Internal`/`_futureFeaturesTotal_Internal` array. This element represents the features \n\t\tof a selected product in the `_currentProducts_Internal`/`_futureProducts_Internal` array. */\n\n\t\tlet i: number, j: number;\n\t\tconst len_i: number = products.length;\n\t\tlet len_j: number;\n\t\tlet tempCurrentFeatures_Internal: ChartBar[];\n\t\tlet tempFeatures: Feature[];\n\t\tlet tempAchieved: number;\n\n\t\t/* Calculates the achieved percentage of a product. */\n\t\tlet achievedPercentage_P: number;\n\t\tlet maxPercentage_F: number;\n\t\tlet achievedPercentage_F: number;\n\n\t\tfor(i = 0; i < len_i; i++)\n\t\t{\n\t\t\ttempCurrentFeatures_Internal = [ ];\n\t\t\tlen_j = ((tempFeatures = products[i].features) ? tempFeatures.length : 0);\n\t\t\tmaxPercentage_F = len_j * 100.00;\n\t\t\tachievedPercentage_F = 0;\n\n\t\t\tfor(j = 0; j < len_j; j++)\n\t\t\t{\n\t\t\t\t/* Adds all `achieved` values of the `tempFeatures` array. */\n\t\t\t\tachievedPercentage_F += (tempAchieved = tempFeatures[j].achieved);\n\n\t\t\t\t/* Creates the current features array of this product displayed in the chart. */\n\t\t\t\ttempCurrentFeatures_Internal.push({\n\t\t\t\t\t'name': tempFeatures[j].name,\n\t\t\t\t\t'series': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'name': 'realizado',  // TODO: Use the `seriesName_English` and `seriesName_Spanish` constants depending on the language selected. \n\t\t\t\t\t\t\t'value': tempAchieved\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'name': 'pendiente',  // TODO: Use the `seriesName_English` and `seriesName_Spanish` constants depending on the language selected. \n\t\t\t\t\t\t\t'value': 100.00 - tempAchieved\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/* Calculates the achieved percentage of this product. */\n\t\t\tachievedPercentage_P = (achievedPercentage_F * 100.00) / maxPercentage_F;\n\t\t\t// achievedPercentage_P = Math.round(((achievedPercentage_F * 100.00) / maxPercentage_F) * 100.00) / 100.00;\n\n\t\t\t/* Creates the current products array displayed in the chart. */\n\t\t\tproducts_Internal.push({\n\t\t\t\t'name': products[i].name,\n\t\t\t\t'series': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'realizado',  // TODO: Use the `seriesName_English` and `seriesName_Spanish` constants depending on the language selected. \n\t\t\t\t\t\t'value': achievedPercentage_P\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'pendiente',  // TODO: Use the `seriesName_English` and `seriesName_Spanish` constants depending on the language selected. \n\t\t\t\t\t\t'value': 100.00 - achievedPercentage_P\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\n\t\t\t/* Creates the array that contains all current features arrays that can be displayed in the chart. */\n\t\t\tfeaturesTotal_Internal.push(tempCurrentFeatures_Internal);\n\t\t}\n\t}\n\n\t/**\n\t * Removes the chart for displaying the features list of the selected product. \n\t */\n\tpublic click_RemoveChart(): void\n\t{\n\t\tthis._updateProductPos(this._selectedProductPos);\n\t}\n}\n","\nimport { Component, OnInit } from '@angular/core';\n\nimport { Product } from '../road-map/road-map.component';\n\n@Component({\n\tselector: 'toco-road-map-sceiba',\n\ttemplateUrl: './road-map-sceiba.component.html',\n\tstyleUrls: ['./road-map-sceiba.component.scss']\n})\nexport class RoadMapSceibaComponent implements OnInit\n{\n\t/**\n\t * Returns the road map's title. \n\t * By default, its value is `'Visualización del roadmap del proyecto Sceiba'`. \n\t */\n\tpublic title: string;\n\n\t/**\n\t * Returns the current products array introduced by the user. \n\t * From this array is created the internal current products array, \n\t * and the internal current features array for each product. \n\t * By default, its value is `[]`. \n\t */\n\tpublic currentProducts: Product[];\n\n\t/**\n\t * Returns the future products array introduced by the user. \n\t * From this array is created the internal future products array, \n\t * and the internal future features array for each product. \n\t * By default, its value is `[]`. \n\t */\n\tpublic futureProducts: Product[];\n\n\tpublic constructor()\n\t{\n\t\tthis.title = 'Visualización del roadmap del proyecto Sceiba';\n\t\tthis.currentProducts = [ ];\n\t\tthis.futureProducts = [ ];\n\t}\n\n\tpublic ngOnInit(): void\n\t{\n\t\t// this.currentProducts = [ ];\n\t\t// this.currentProducts = undefined;\n\t\tthis.currentProducts = [\n\t\t\t{\n\t\t\t\t'name': 'Producto-1',  /* 'achieved' = 33.33 */\n\t\t\t\t'features': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-1',\n\t\t\t\t\t\t'achieved': 20\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-2',\n\t\t\t\t\t\t'achieved': 50\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-3',\n\t\t\t\t\t\t'achieved': 30\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\t'name': 'Producto-2',  /* 'achieved' = 51.00 */\n\t\t\t\t'features': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-1',\n\t\t\t\t\t\t'achieved': 5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-2',\n\t\t\t\t\t\t'achieved': 50\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-3',\n\t\t\t\t\t\t'achieved': 75\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-4',\n\t\t\t\t\t\t'achieved': 30\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-5',\n\t\t\t\t\t\t'achieved': 95\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\t'name': 'Producto-3',  /* 'achieved' = 100.00 */\n\t\t\t\t'features': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-1',\n\t\t\t\t\t\t'achieved': 100\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\t'name': 'Producto-4',  /* 'achieved' = 0.00 */\n\t\t\t\t'features': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-1',\n\t\t\t\t\t\t'achieved': 0\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\t'name': 'Producto-5',  /* 'achieved' = 47.50 */\n\t\t\t\t'features': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-1',\n\t\t\t\t\t\t'achieved': 80\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-2',\n\t\t\t\t\t\t'achieved': 25\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-3',\n\t\t\t\t\t\t'achieved': 95\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-4',\n\t\t\t\t\t\t'achieved': 40\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-5',\n\t\t\t\t\t\t'achieved': 10\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-6',\n\t\t\t\t\t\t'achieved': 15\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-7',\n\t\t\t\t\t\t'achieved': 15\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Característica-8',\n\t\t\t\t\t\t'achieved': 100\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\t'name': 'Producto-6',  /* 'achieved' = -- */\n\t\t\t\t'features': [\n\t\t\t\t]\n\t\t\t\t// 'features': undefined\n\t\t\t}\n\t\t];\n\n\t\t// this.futureProducts = [ ];\n\t\t// this.futureProducts = undefined;\n\t\tthis.futureProducts = [\n\t\t\t{\n\t\t\t\t'name': 'Fut-Producto-1',  /* 'achieved' = 33.33 */\n\t\t\t\t'features': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-1',\n\t\t\t\t\t\t'achieved': 80\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-2',\n\t\t\t\t\t\t'achieved': 50\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\t'name': 'Fut-Producto-2',  /* 'achieved' = 51.00 */\n\t\t\t\t'features': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-1',\n\t\t\t\t\t\t'achieved': 0\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-2',\n\t\t\t\t\t\t'achieved': 5\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-3',\n\t\t\t\t\t\t'achieved': 0\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-4',\n\t\t\t\t\t\t'achieved': 0\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-5',\n\t\t\t\t\t\t'achieved': 0\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\t'name': 'Fut-Producto-3',  /* 'achieved' = 100.00 */\n\t\t\t\t'features': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-1',\n\t\t\t\t\t\t'achieved': 100\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\t'name': 'Fut-Producto-4',  /* 'achieved' = 0.00 */\n\t\t\t\t'features': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-1',\n\t\t\t\t\t\t'achieved': 0\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\t'name': 'Fut-Producto-5',  /* 'achieved' = 47.50 */\n\t\t\t\t'features': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-1',\n\t\t\t\t\t\t'achieved': 0\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-2',\n\t\t\t\t\t\t'achieved': 100\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-3',\n\t\t\t\t\t\t'achieved': 50\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-4',\n\t\t\t\t\t\t'achieved': 20\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-5',\n\t\t\t\t\t\t'achieved': 80\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-6',\n\t\t\t\t\t\t'achieved': 0\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-7',\n\t\t\t\t\t\t'achieved': 0\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t'name': 'Fut-Característica-8',\n\t\t\t\t\t\t'achieved': 0\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\t'name': 'Fut-Producto-6',  /* 'achieved' = -- */\n\t\t\t\t'features': [\n\t\t\t\t]\n\t\t\t\t// 'features': undefined\n\t\t\t}\n\t\t];\n\t}\n}\n","\nimport { Directive, ViewContainerRef, ComponentFactoryResolver } from '@angular/core';\n\n/**\n * A helper directive to mark valid insertion points in the template. \n * This directive injects the `ViewContainerRef` to gain access to the view container of the element \n * that will host the dynamically components. \n * In the `@Directive` decorator, notice the selector name, `get-view-container`; that's what you use \n * to apply the directive to the element. \n */\n@Directive({\n    selector: '[get-view-container]'\n})\nexport class GetViewContainerDirective\n{\n    public constructor(private _viewContainerRef: ViewContainerRef, private _componentFactoryResolver: ComponentFactoryResolver)\n    { }\n\n    /**\n     * Returns the injected `ViewContainerRef` to gain access to the view container of the element \n     * that will host the dynamically components. \n     */\n    public get viewContainerRef(): ViewContainerRef\n    {\n        return this._viewContainerRef;\n    }\n\n    /**\n     * Returns the injected `ComponentFactoryResolver` to gain access to the factory for a given component type. \n     */\n    public get componentFactoryResolver(): ComponentFactoryResolver\n    {\n        return this._componentFactoryResolver;\n    }\n}\n","\nimport { Directive, OnChanges, Input, SimpleChanges } from '@angular/core';\nimport { AbstractControl, FormControl, ValidatorFn, ValidationErrors, Validator, NG_VALIDATORS, FormGroup, FormArray } from '@angular/forms';\n\n/**\n * Represents a class that contains a boolean property named `required`. \n */\nexport interface RequiredProperty\n{\n    /**\n     * Returns true if the control is required; otherwise, false. \n     */\n    readonly required: boolean;\n}\n\n/**\n * @description\n * Provides a set of extra validators that can be used by form controls. \n *\n * A validator is a function that processes a `FormControl` or collection of \n * controls and returns an error map or `null`. A `null` map means that validation has passed. \n *\n * @see [Form Validation](/guide/form-validation)\n */\nexport class ExtraValidators\n{\n    /**\n     * @description\n     * Validator that requires the length of the control's value to be equal to the \n     * provided length. It assumes that the control's value is of string type. \n     * This validator is used with Reactive Forms; if you want to use \n     * an equivalent validator with Template-driven Form you must use the `equalLength` attribute. \n     *\n     * @usageNotes\n     *\n     * ### Validates that the field has a length of 4 characters: \n     *\n     * ```typescript \n     * const control = new FormControl('ng', ExtraValidators.equalLength(4)); \n     *\n     * console.log(control.errors); // { equalLength: { requiredLength: 4, actualLength: 2 } } \n     * ``` \n     *\n     * ```html \n     * <input name=\"firstName\" ngModel equallength=\"4\"> \n     * ``` \n     *\n     * @returns A validator function that returns an error map with the `equalLength` \n     * if the validation check fails, otherwise `null`. \n     */\n    public static equalLength(equalLength: number): ValidatorFn\n    {\n        const res = (control: AbstractControl): ValidationErrors | null => {\n            const len: number = control.value ? control.value.length : 0;\n\n            return ((len != 0) && (len != equalLength)) \n                ? { 'equalLength': { 'requiredLength': equalLength, 'actualLength': len } } \n                : null;\n        };\n\n        return res;\n    }\n\n    /**\n     * @description\n     * Validator that is applied to `FormArray` controls. It requires that the amount of \n\t * `FormArray`'s child controls to be greater than or equal to the provided minimum length. \n\t * The validator exists only as a function and not as a directive. \n     *\n     * @usageNotes\n     *\n     * ### Validates that the `FormArray` field has a minimum of 2 child controls: \n     *\n     * ```typescript \n     * const formArrayControl = new FormArray([new FormControl('ng')], ExtraValidators.minLength(2)); \n     *\n\t * console.log(formArrayControl.errors); // { minLength: { requiredLength: 2, actualLength: 1 } } \n     * ``` \n     *\n     * @returns A validator function that returns an error map with the \n     * `minLength` if the validation check fails, otherwise `null`. \n     */\n    public static minLength(minLength: number): ValidatorFn\n    {\n        const res = (control: FormArray): ValidationErrors | null => {\n            const len: number = control.controls.length;\n\n            return (len < minLength) \n                ? { 'minLength': { 'requiredLength': minLength, 'actualLength': len } } \n                : null;\n        };\n\n        return res;\n    }\n\n    /**\n     * @description\n     * Validator that is applied to a control that has an array of child controls. \n     * It receives an object that fits the `RequiredProperty` interface and an array of child controls. \n     * The behavior of the validator is the following: \n     * If the control's value is required, then \n     *   - all child controls must be different of empty. \n     * If the control's value is not required, then \n     *   - all child controls can be empty. \n     *   - if there is at least one child control not empty, then all child controls must be different of empty. \n     * The validator exists only as a function and not as a directive. \n     *\n     * @usageNotes\n     *\n     * ### Validates that the control does not have an empty child control: \n     *\n     * ```typescript \n     * const control = new FormGroup({\n     *     'fg': (firstGroup = new FormControl('2049')), \n     *     'sg': (secondGroup = new FormControl(''))}, \n     *     ExtraValidators.requiredAndNotEmpty(this, [firstGroup, secondGroup])); \n     *\n     * console.log(control.errors); // { requiredAndNotEmpty: { required: true, pos: 1 } } \n     * ``` \n     *\n     * @returns A validator function that returns an error map with the `requiredAndNotEmpty` \n     * if the validation check fails, otherwise `null`. \n     */\n    public static requiredAndNotEmpty(requiredProperty: RequiredProperty, childControls: FormControl[]): ValidatorFn\n    {\n        const res = (control: AbstractControl): ValidationErrors | null => {\n            let i: number = 0;\n            let controlsGroupLength: number = childControls.length;\n\n            if (requiredProperty.required)\n            {\n                /* Only iterates to the first empty element. */\n                for (; i < controlsGroupLength; i++)\n                {\n                    if (!childControls[i].value) break;\n                }\n\n                return (i == controlsGroupLength) \n                    ? null \n                    : { 'requiredAndNotEmpty': { 'required': true, 'pos': i } };\n            }\n            else\n            {\n                let hasControlNotEmpty: boolean = false;\n                let minEmptyPos: number = -1;\n\n                /* Iterates to the first empty element. */\n                for (; i < controlsGroupLength; i++)\n                {\n                    if (childControls[i].value)\n                    {\n                        if (minEmptyPos != -1) break;\n                        hasControlNotEmpty = true;\n                    }\n                    else\n                    {\n                        if (minEmptyPos == -1) minEmptyPos = i;\n                        if (hasControlNotEmpty) break;\n                    }\n                }\n\n                return (i == controlsGroupLength)\n                    ? null\n                    : { 'requiredAndNotEmpty': { 'required': true, 'pos': minEmptyPos } };\n            }\n        };\n\n        return res;\n    }\n\n    /**\n     * @description\n     * Validator that requires the control's value pass an ISSN validation test (confirm the check digit). \n     * Assumes that the code (control's value) is a string of length 11, with the form 'XXXX – XXXX'. \n     * The validator exists only as a function and not as a directive. \n     *\n     * @usageNotes\n     *\n     * ### Validates that the field matches a valid ISSN pattern (confirms the check digit): \n     *\n     * ```typescript \n     * const control = new FormControl('2049 – 3635', ExtraValidators.issnConfirmCheckDigitOneField(11)); \n     *\n     * console.log(control.errors); // { issnConfirmCheckDigitOneField: true } \n     * ``` \n     *\n     * @returns A validator function that returns an error map with the `issnConfirmCheckDigitOneField` \n     * if the validation check fails, otherwise `null`. \n     */\n    public static issnConfirmCheckDigitOneField(codeLength: number): ValidatorFn\n    {\n        const res = (control: AbstractControl): ValidationErrors | null => {\n            if (control.value.length == codeLength)\n            {\n                let code: string = control.value;\n\n                let result: number = (code.charCodeAt(0) - 48) * 8;\n                result += (code.charCodeAt(1) - 48) * 7;\n                result += (code.charCodeAt(2) - 48) * 6;\n                result += (code.charCodeAt(3) - 48) * 5;\n\n                /* code[4] = ' ', code[5] = '–', code[6] = ' '. */\n\n                result += (code.charCodeAt(7) - 48) * 4;\n                result += (code.charCodeAt(8) - 48) * 3;\n                result += (code.charCodeAt(9) - 48) * 2;\n                result += ((code[10] == 'x') || (code[10] == 'X')) ? 10 : code.charCodeAt(10) - 48;\n\n                return (result % 11) \n                    ? { 'issnConfirmCheckDigitOneField': true } \n                    : null;\n            }\n\n            return null;\n        };\n\n        return res;\n    }\n\n    /**\n     * @description\n     * Validator that requires the control's value passes an ISSN validation test (confirms the check digit). \n     * The ISSN value is divided in two groups, therefore the control has two child controls and they are \n     * arguments of the validator method. It assumes that the control's value is of string type. \n     * The validator exists only as a function and not as a directive. \n     *\n     * @usageNotes\n     *\n     * ### Validates that the field matches a valid ISSN pattern (confirms the check digit): \n     *\n     * ```typescript \n     * const control = new FormGroup({\n     *     'fg': (firstGroup = new FormControl('2049')), \n     *     'sg': (secondGroup = new FormControl('3635'))}, \n     *     ExtraValidators.issnConfirmCheckDigitTwoField(firstGroup, secondGroup, 4)); \n     *\n     * console.log(control.errors); // { issnConfirmCheckDigitTwoField: true } \n     * ``` \n     *\n     * @returns A validator function that returns an error map with the `issnConfirmCheckDigitTwoField` \n     * if the validation check fails, otherwise `null`. \n     */\n    public static issnConfirmCheckDigitTwoField(firstGroup: FormControl, secondGroup: FormControl, groupLength: number): ValidatorFn\n    {\n        const res = (control: AbstractControl): ValidationErrors | null => {\n            if ((firstGroup.value.length == groupLength) && (secondGroup.value.length == groupLength))\n            {\n                let groupValue: string = firstGroup.value;\n\n                let result: number = (groupValue.charCodeAt(0) - 48) * 8;\n                result += (groupValue.charCodeAt(1) - 48) * 7;\n                result += (groupValue.charCodeAt(2) - 48) * 6;\n                result += (groupValue.charCodeAt(3) - 48) * 5;\n\n                result += ((groupValue = secondGroup.value).charCodeAt(0) - 48) * 4;\n                result += (groupValue.charCodeAt(1) - 48) * 3;\n                result += (groupValue.charCodeAt(2) - 48) * 2;\n                result += ((groupValue[3] == 'x') || (groupValue[3] == 'X')) ? 10 : groupValue.charCodeAt(3) - 48;\n\n                return (result % 11) \n                    ? { 'issnConfirmCheckDigitTwoField': true } \n                    : null;\n            }\n\n            return null;\n        };\n\n        return res;\n    }\n\n    public static issnValidator(internalFormGroup: FormGroup): ValidatorFn\n    {\n        const res = (control: AbstractControl): ValidationErrors | null => {\n            return (!internalFormGroup.valid) \n                ? { 'issnValidator': { 'requiredValid': internalFormGroup.valid } } \n                : null;\n        };\n\n        return res;\n    }\n}\n\n/**\n * @description\n * A directive that represents a validator that requires the length of the control's value \n * to be equal to the provided length. The control must be marked with the `equalLength` attribute. \n * The directive is provided with the `NG_VALIDATORS` mult-provider list. \n * This validator is used with Template-driven Form; if you want to use an equivalent validator \n * with Reactive Forms you must use the `ExtraValidators.equalLength` method. \n *\n * @usageNotes\n *\n * ### Validates that the field has a length of 4 characters: \n *\n * The following example shows how to add an equal length validator to an input attached to an \n * ngModel binding. \n *\n * ```html \n * <input name=\"firstName\" ngModel equallength=\"4\"> \n * ``` \n */\n@Directive({\n    selector: '[equalLength]',\n    providers: [{ \n        provide: NG_VALIDATORS, \n        useExisting: EqualLengthDirective, \n        multi: true\n    }]\n})\nexport class EqualLengthDirective implements OnChanges, Validator\n{\n    /**\n     * @description\n     * Input variable that contains the length to check. \n     */\n    @Input()\n    public equalLength: string;\n\n    private _validator: ValidatorFn;\n    private _onChange: () => void;\n\n    /**\n     * @description\n     * A lifecycle hook method that is called when the directive's inputs change. For internal use only. \n     *\n     * @param changes An object of key/value pairs for the set of changed inputs. \n     */\n    public ngOnChanges(changes: SimpleChanges): void\n    {\n        if('equalLength' in changes)\n        {\n            this._validator = ExtraValidators.equalLength(parseInt(this.equalLength, 10));\n\n            if(this._onChange) this._onChange();\n        }\n    }    \n\n    /**\n     * @description\n     * Method that performs synchronous validation against the provided control. It requires the length \n     * of the control's value to be equal to the provided `equalLength`. \n     *\n     * @param control The control to validate against. \n     *\n     * @returns A map of validation errors if validation fails; otherwise, `null`. \n     */    \n    public validate(control: AbstractControl): ValidationErrors | null\n    {\n        return (this.equalLength) \n            ? this._validator(control) \n            : null;\n    }\n\n    /**\n     * @description\n     * Registers a callback function to call when the validator inputs change. \n     *\n     * @param fn The callback function to register. \n     */\n    public registerOnValidatorChange(fn: () => void): void\n    {\n        this._onChange = fn;\n    }\n}\n","\nimport { Component, Inject } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { MatDialog, MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nexport enum HandlerComponent {\n\tsnackBar = 'snackBar',\n\tdialog = 'dialog',\n}\n\nexport enum StatusCode {\n\tOK = 200,\n\tserverError = 500,\n\tnotFound = 400\n}\n\n/**\n * Object that is used with the `DialogContentComponent` component.\n * It contains the different data that are showed in the message.\n */\nexport class DialogMessageData {\n    /**\n     * Message title.\n     */\n\ttitle: string;\n    /**\n     * Message content.\n     */\n\tcontent: string;\n}\n\n/**\n * Object that is used with the `DialogDeleteConfirmComponent` component.\n * It contains the different data that are showed in the message.\n */\nexport class DialogDeleteConfirmMessageData\n{\n    /**\n     * Article of the type to delete.\n     */\n\tdelTypeArt: string;\n    /**\n     * Type to delete.\n     */\n\tdelType: string;\n    /**\n     * Value to delete.\n     */\n\tdelValue: string;\n}\n\n/**\n * Simple dialog message.\n */\n@Component({\n\tselector: 'toco-dialog-message',\n\ttemplate: `\n\t\t<h1 mat-dialog-title>\n\t\t\t{{ data.title }}\n\t\t</h1>\n\t\t<mat-dialog-content> {{ data.content }} </mat-dialog-content>\n\t\t<mat-dialog-actions align=\"end\">\n\t\t\t<button mat-stroked-button mat-dialog-close>OK</button>\n\t\t</mat-dialog-actions>\n\t`\n})\nexport class DialogContentComponent\n{\n\tpublic constructor(@Inject(MAT_DIALOG_DATA) public data: DialogMessageData)\n\t{ }\n}\n\n/**\n * Dialog confirm message used to delete something.\n */\n@Component({\n\tselector: 'toco-dialog-delete-confirm',\n\ttemplate: `\n\t\t<h1 mat-dialog-title>\n\t\t\t¿Está usted seguro que desea eliminar {{ data.delTypeArt }} <strong>{{ data.delType }}</strong>?\n\t\t</h1>\n\t\t<mat-dialog-content>\n\t\t\tSu valor es: <em>{{ data.delValue }}</em>\n\t\t</mat-dialog-content>\n\t\t<mat-dialog-actions align=\"end\">\n\t\t\t<button mat-stroked-button mat-dialog-close color=\"warning\">Cancelar</button>\n\t\t\t<button mat-stroked-button [mat-dialog-close]=\"true\" color=\"warning\" cdkFocusInitial>Eliminar</button>\n\t\t</mat-dialog-actions>\n\t`\n})\nexport class DialogDeleteConfirmComponent\n{\n\tpublic constructor(\n\t\t/*public dialogRef: MatDialogRef<DialogDeleteConfirmComponent>,*/\n\t\t@Inject(MAT_DIALOG_DATA) public data: DialogDeleteConfirmMessageData)\n\t{ }\n}\n\nexport class MessageHandler\n{\n\tconstructor(private _snackBar?: MatSnackBar, public dialog?: MatDialog)\n\t{ }\n\n\tshowMessage(status: StatusCode, message?: string, component?: HandlerComponent, title?: string, width?: string) {\n\t\tswitch (status)\n\t\t{\n\t\t\tcase StatusCode.serverError:\n\t\t\t\tthis.componentHandler(message ? message : 'No se pudo conectar al servidor.', component, title, width);\n\t\t\t\tbreak;\n\t\t\tcase StatusCode.notFound:\n\t\t\t\tthis.componentHandler(message ? message : 'Operación extraviada, no se pudo realizar.', component, title, width);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.componentHandler(message ? message : 'Operación realizada con éxito.', component, title, width);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate componentHandler(message: string, handlercomponent?: HandlerComponent, title?: string, width: string = '300px'): void {\n\t\tswitch (handlercomponent)\n\t\t{\n\t\t\tcase HandlerComponent.dialog:\n\t\t\t\tthis.dialog.open(DialogContentComponent, {\n\t\t\t\t\twidth: width,\n\t\t\t\t\tdata: { title: title, content: message }\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthis._snackBar.open(message, null, {\n\t\t\t\t\tduration: 5000,\n\t\t\t\t\tverticalPosition: 'bottom',\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import { Component, Input } from '@angular/core';\n\n// @Component({\n//     selector: 'toco-progress',\n//     template: `\n//     <mat-progress-bar *ngIf=\"loading\"\n//         mode=\"indeterminate\" color=\"warn\" style=\"z-index: 1001\">\n//     </mat-progress-bar>\n//     <div *ngIf=\"loading && position == 'fixed'\" class=\"overlay-fixed\">\n\n//     </div >\n//     <div *ngIf=\"loading && position == 'absolute'\" class=\"overlay-absolute\">\n\n//     </div> `,\n\n//     styles: [\n// `.overlay-fixed {\n//     opacity:    0.4;\n//     background: #000;\n//     width:      100%;\n//     height:     100%;\n//     z-index:    1000;\n//     top:        0;\n//     left:       0;\n//     position:   fixed;\n//   }\n//   .overlay-absolute {\n//     opacity:    0.4;\n//     background: #000;\n//     width:      100%;\n//     height:     100%;\n//     z-index:    1000;\n//     top:        0;\n//     left:       0;\n//     position:   absolute;\n//   }`\n//     ]\n\n//   })\n\n  @Component({\n    selector: 'toco-progress',\n    template: `\n    <div class=\"spinner\" *ngIf=\"loading\">\n      <div class=\"bounce1\"></div>\n      <div class=\"bounce2\"></div>\n      <div class=\"bounce3\"></div>\n    </div>\n `,\n\n    styles: [\n`\n.overlay-fixed {\n      opacity:    0.4;\n      background: #000;\n      width:      100%;\n      height:     100%;\n      z-index:    1000;\n      top:        0;\n      left:       0;\n      position:   fixed;\n    }\n    .overlay-absolute {\n      opacity:    0.4;\n      background: #000;\n      width:      100%;\n      height:     100%;\n      z-index:    1000;\n      top:        0;\n      left:       0;\n      position:   absolute;\n    }\n\n.spinner {\nmargin: 5px auto 0;\nwidth: 70px;\ntext-align: center;\n}\n\n.spinner > div {\nwidth: 14px;\nheight: 14px;\n\n\nborder-radius: 100%;\ndisplay: inline-block;\n-webkit-animation: sk-bouncedelay 1.4s infinite ease-in-out both;\nanimation: sk-bouncedelay 1.4s infinite ease-in-out both;\n}\n\n.spinner .bounce1 {\nbackground-color:#007e3e;\n-webkit-animation-delay: -0.60s;\nanimation-delay: -0.60s;\n}\n\n.spinner .bounce2 {\nbackground-color: #018d79;\n-webkit-animation-delay: -0.30s;\nanimation-delay: -0.30s;\n}\n\n.spinner .bounce3 {\nbackground-color: #0f6684;\n}\n\n@-webkit-keyframes sk-bouncedelay {\n0%, 80%, 100% { -webkit-transform: scale(0) }\n40% { -webkit-transform: scale(1.0) }\n}\n\n@keyframes sk-bouncedelay {\n0%, 80%, 100% {\n  -webkit-transform: scale(0);\n  transform: scale(0);\n} 40% {\n  -webkit-transform: scale(1.0);\n  transform: scale(1.0);\n}\n}`\n    ]\n\n  })\n\n  export class ProgressComponent {\n        @Input()\n        public loading = false;\n        @Input()\n        public position = 'fixed';\n        constructor() { }\n  }\n\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'toco-sceiba-apps',\n  templateUrl: './sceiba-apps.component.html',\n  styleUrls: ['./sceiba-apps.component.scss']\n})\nexport class SceibaAppsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","\nimport { NgModule, Optional, SkipSelf } from '@angular/core';\nimport { SharedModule } from '../shared/public-api';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { NgxChartsModule } from '@swimlane/ngx-charts';\n\n// import { throwIfAlreadyLoaded } from './module-import-guard';\n\n\nimport { BodyComponent } from './body/body.component';\nimport { Error404Component } from './error404/error404.component';\nimport { FooterComponent } from './footer/footer.component';\nimport { HomeComponent } from './home/home.component';\nimport { InfoCardComponent } from './info-card/info-card.component';\nimport { JournalCardComponent } from './journal-card/journal-card.component';\nimport { NavComponent } from './nav/nav.component';\nimport { PageHeaderComponent } from './page-header/page-header.component';\nimport { PageNotFoundComponent } from './page-not-found/page-not-found.component';\n\nimport { CoreRoutingModule } from './core-routing.module';\nimport { MetadataService } from './metadata.service';\nimport { RoadMapComponent } from './utils/road-map/road-map.component';\nimport { RoadMapSceibaComponent } from './utils/road-map-sceiba/road-map-sceiba.component';\nimport { GetViewContainerDirective } from './utils/get-view-container.directive';\nimport { EqualLengthDirective } from './utils/validator';\nimport { DialogContentComponent, DialogDeleteConfirmComponent } from './utils/message-handler';\nimport { ProgressComponent } from './utils/progress';\nimport { SceibaAppsComponent } from './sceiba-apps/sceiba-apps.component';\n\n@NgModule({\n    declarations: [\n        BodyComponent,\n        Error404Component,\n        FooterComponent,\n        HomeComponent,\n        InfoCardComponent,\n        JournalCardComponent,\n        NavComponent,\n        PageHeaderComponent,\n        PageNotFoundComponent,\n        RoadMapComponent,\n        RoadMapSceibaComponent,\n        GetViewContainerDirective,\n        EqualLengthDirective,\n        DialogContentComponent,\n        DialogDeleteConfirmComponent,\n        ProgressComponent,\n        SceibaAppsComponent\n    ],\n\n    imports: [\n        SharedModule,\n        ReactiveFormsModule,\n        TranslateModule,\n        NgxChartsModule,\n        CoreRoutingModule\n    ],\n\n    exports: [\n        BodyComponent,\n        Error404Component,\n        FooterComponent,\n        HomeComponent,\n        InfoCardComponent,\n        JournalCardComponent,\n        NavComponent,\n        PageHeaderComponent,\n        PageNotFoundComponent,\n        RoadMapComponent,\n        RoadMapSceibaComponent,\n        GetViewContainerDirective,\n        EqualLengthDirective,\n        DialogContentComponent,\n        DialogDeleteConfirmComponent,\n        ProgressComponent,\n        SceibaAppsComponent\n    ],\n    entryComponents: [\n        DialogContentComponent,\n        DialogDeleteConfirmComponent\n    ],\n    providers: [\n        MetadataService\n    ]\n})\nexport class CoreModule\n{\n    public constructor(@Optional() @SkipSelf() parentModule: CoreModule)\n    {\n        //throwIfAlreadyLoaded(parentModule, 'CoreModule');\n    }\n}\n","\nimport { HttpEventType } from '@angular/common/http';\nimport { isArray, isRegExp, isDate, isError, isObject } from 'util';\n\n/**\n * A file with constants and functions that are helpers. \n */\n\n\n/**\n * Corresponds to `Number.MAX_SAFE_INTEGER`. Moved out into a variable here due to \n * flaky browser support and the value not being defined in Closure's typings. \n */\nexport const MAX_SAFE_INTEGER: number = 9007199254740991;\n\n/**\n * The markdown file extension. \n */\nexport const MARKDOWN_FILE_EXTENSION: string = '.md';\n\n/**\n * A collection of key/value elements, where the keys are strings. \n */\nexport type Params<T> = {\n    [key: string]: T;\n};\n\n/**\n * An enum that describes an action through a text. \n */\nexport enum ActionText\n{\n    /**\n     * Viewing action. \n     */\n    view = 'view',\n\n    /**\n     * Adding action. \n     */\n    add = 'add',\n\n    /**\n     * Editing action. \n     */\n    edit = 'edit'\n}\n\n/**\n * An object of paths that is used to get the child controls in a `FormGroup`/`FormArray` control. \n * The value of its properties is a dot-delimited string value or an array of string/number values \n * that define the path to a child control. \n */\nexport type ChildControlsPath = {\n    [key: string]: Array<string | number> | string;\n};\n\n/**\n * An enum that represents the language texts. \n */\nexport enum LanguageTexts\n{\n    /**\n     * The Spanish language. \n     */\n    Español = 'Español',\n\n    /**\n     * The English language. \n     */\n    English = 'English',\n}\n\n/**\n * An enum that represents the language text abbreviations. \n */\nexport enum LanguageAbbrs\n{\n    /**\n     * The Spanish language abbreviation. \n     */\n    es = 'es',\n\n    /**\n     * The English language abbreviation. \n     */\n    en = 'en',\n}\n\n/**\n * The list of language texts. \n */\nexport const LANGUAGE_TEXTS_LIST: LanguageTexts[] = [LanguageTexts.Español, LanguageTexts.English];\n\n/**\n * The list of language text abbreviations.\n */\nexport const LANGUAGE_ABBRS_LIST: LanguageAbbrs[] = [LanguageAbbrs.es, LanguageAbbrs.en];\n\n/**\n * Converts the language representation from string to number. \n * If the string specified is not registered as a language, then returns -1 number value. \n * The Spanish language is: 0 as number, and 'es' as string. \n * The English language is: 1 as number, and 'en' as string. \n * In other words, it follows the order of `LANGUAGE_TEXTS_LIST` and `LANGUAGE_ABBRS_LIST` enums. \n * @param lang The language text abbreviation to be used. \n * @returns Returns the language as a number based on its representation as string. \n * If the string specified is not registered as a language, then returns -1 number value. \n */\nexport function convertLangFromStringToNumber(lang: string | LanguageAbbrs): number\n{\n    switch (lang)\n    {\n        case LanguageAbbrs.es:  /* Spanish */\n            {\n                return 0;\n            }\n\n        case LanguageAbbrs.en:  /* English */\n            {\n                return 1;\n            }\n    }\n\n    return -1;\n}\n\n/**\n * Converts the language representation from number to string. \n * If the number specified is not registered as a language, then returns empty string value. \n * The Spanish language is: 0 as number, and 'es' as string. \n * The English language is: 1 as number, and 'en' as string. \n * In other words, it follows the order of `LANGUAGE_TEXTS_LIST` and `LANGUAGE_ABBRS_LIST` enums. \n * @param index The language representation as number. \n * @returns Returns the language as a string based on its representation as number. \n * If the number specified is not registered as a language, then returns empty string value. \n */\nexport function convertLangFromNumberToString(index: number): string\n{\n    switch (index)\n    {\n        case 0:  /* Spanish */\n            {\n                return LanguageAbbrs.es;\n            }\n\n        case 1:  /* English */\n            {\n                return LanguageAbbrs.en;\n            }\n    }\n\n    return '';\n}\n\n/**\n * Returns a string that is the result of concatenating the specified `path` argument, \n * the language extension, and the markdown file extension. \n * @param path The path to markdown file without the language extension and the markdown file extension. \n * @param lang The language text abbreviation to be used. \n * @returns Returns the correct path to the markdown file. \n */\nexport function getPathWithLangExtension(path: string, lang: string | LanguageAbbrs): string\n{\n    return (path + '.' + lang + MARKDOWN_FILE_EXTENSION);\n}\n\n/**\n * Returns true if the specified `possDescendant` is descendant from the specified `ancestorName`; \n * otherwise, false. \n * @param possDescendant Possible descendant. \n * @param ancestorName Ancestor name. \n * Example in usage: \n *  if (isDescendant(target.controlType.__proto__, InputControl.name)) { ... }\n */\nexport function isDescendant(possDescendant: any, ancestorName: string): boolean\n{\n    do\n    {\n        if (possDescendant.name == ancestorName) return true;\n    }\n    while((possDescendant = possDescendant.__proto__).name != '');\n\n    return false;\n}\n\n/**\n * Returns a new value that represents the clone of the specified `target` value. \n * Implementation notes: \n *  - If `target` is `undefined`, then returns `undefined`. \n *  - If `target` is an object, then returns a cloned object with all its properties cloned. \n *  - If `target` is an array, then returns a cloned array with all its values cloned. \n * @param target The target value to clone. \n */\nexport function cloneValue(target: any): any\n{\n    if (isArray(target))\n    {\n        return _cloneValue(target, [ ]);\n    }\n    else if (isRegExp(target))\n    {\n        return target;  /* It can return `target` directly because all fields in a `RegExp` are read-only. */\n    }\n    else if (isDate(target))\n    {\n        return new Date(target);\n    }\n    else if (isError(target))\n    {\n        return target;  /* It can return `target` directly because an `Error` is extremely dependent of the place where it is created. */\n    }\n    else if (isObject(target))\n    {\n        return _cloneValue(target, { });\n    }\n    else\n    {\n        return target;\n    }\n}\n\nfunction _cloneValue(target: any, container: any): any\n{\n    let temp: any;\n\n    for (let prop in target)\n    {\n        temp = target[prop];\n\n        if (isArray(temp))\n        {\n            container[prop] = _cloneValue(temp, [ ]);\n        }\n        else if (isRegExp(temp))\n        {\n            container[prop] = temp;  /* It can return `temp` directly because all fields in a `RegExp` are read-only. */\n        }\n        else if (isDate(temp))\n        {\n            container[prop] = new Date(temp);\n        }\n        else if (isError(temp))\n        {\n            container[prop] = temp;  /* It can return `temp` directly because an `Error` is extremely dependent of the place where it is created. */\n        }\n        else if (isObject(temp))\n        {\n            container[prop] = _cloneValue(temp, { });\n        }\n        else\n        {\n            container[prop] = temp;\n        }\n    }\n\n    return container;\n}\n\n/**\n * Returns a new value that represents the clone of the specified `target` value, and \n * sets all its properties/values of built-in type to `undefined`. \n * Implementation notes: \n *  - If `target` is `undefined`, then returns `undefined`. \n *  - If `target` is an object, then returns an object with all its properties of built-in type to `undefined`. \n *  - If `target` is an array, then returns an array with all its values of built-in type to `undefined`. \n * @param target The target value to clone. \n */\nexport function cloneValueToUndefined(target: any): any\n{\n    if (isArray(target))\n    {\n        return _cloneValueToUndefined(target, [ ]);\n    }\n    else if (isRegExp(target))\n    {\n        return undefined;\n    }\n    else if (isDate(target))\n    {\n        return undefined;\n    }\n    else if (isError(target))\n    {\n        return undefined;\n    }\n    else if (isObject(target))\n    {\n        return _cloneValueToUndefined(target, { });\n    }\n    else\n    {\n        return undefined;\n    }\n}\n\nfunction _cloneValueToUndefined(target: any, container: any): any\n{\n    let temp: any;\n\n    for(let prop in target)\n    {\n        temp = target[prop];\n\n        if (isArray(temp))\n        {\n            container[prop] = _cloneValueToUndefined(temp, [ ]);\n        }\n        else if (isRegExp(target))\n        {\n            container[prop] = undefined;\n        }\n        else if (isDate(target))\n        {\n            container[prop] = undefined;\n        }\n        else if (isError(target))\n        {\n            container[prop] = undefined;\n        }\n        else if (isObject(temp))\n        {\n            container[prop] = _cloneValueToUndefined(temp, { });\n        }\n        else\n        {\n            container[prop] = undefined;\n        }\n    }\n\n    return container;\n}\n\n/**\n * Logs an error notification message to the console. \n * @param operation The operation during the error occurs. \n * @param place The place where the error occurs. \n * @param err The error that occurs. \n */\nexport function logError(operation: string, place: string, err: any): void\n{\n    console.log(`The observable got an error '${ operation }' in '${ place }': ${ err }.`);\n}\n\n/**\n * Logs a complete notification message to the console. \n * @param operation The operation during the complete occurs. \n * @param place The place where the complete occurs. \n */\nexport function logComplete(operation: string, place: string): void\n{\n    console.log(`The observable got a complete notification '${ operation }' in '${ place }'.`);\n}\n\n/**\n * Returns a string representation of `HttpEventType` specified. \n * @param httpEventType Type enumeration for the different kinds of `HttpEvent`. \n */\nexport function getHttpEventTypeToString(httpEventType: HttpEventType): string\n{\n    switch (httpEventType)\n    {\n        /* The request was sent out over the wire. */\n        case HttpEventType.Sent:\n            return \"'Sent (0)'\";\n\n        /* An upload progress event was received. */\n        case HttpEventType.UploadProgress:\n            return \"'UploadProgress (1)'\";\n\n        /* The response status code and headers were received. */\n        case HttpEventType.ResponseHeader:\n            return \"'ResponseHeader (2)'\";\n\n        /* A download progress event was received. */\n        case HttpEventType.DownloadProgress:\n            return \"'DownloadProgress (3)'\";\n\n        /* The full response including the body was received. */\n        case HttpEventType.Response:\n            return \"'Response (4)'\";\n\n        /* A custom event from an interceptor or a backend. */\n        case HttpEventType.User:\n            return \"'User (5)'\";\n\n        default:\n            return \"'It does not know the code'\";\n    }\n}\n","\nimport { _isNumberValue } from '@angular/cdk/coercion';\nimport { Sort, PageEvent } from '@angular/material';\nimport { Observable } from 'rxjs';\n\nimport { InputControl } from '../../forms/public-api';\n\nimport { MAX_SAFE_INTEGER, Params } from '../utils/helpers';\n\n/**\n * The data sort direction. \n */\nexport enum SortDirection\n{\n    /**\n     * Sorts the data in the ascending order. \n     */\n    asc = 'asc',\n\n    /**\n     * Sorts the data in the descending order. \n     */\n    desc = 'desc',\n\n    /**\n     * Sorts the data in the original order or does not sort them. \n     */\n    orig = ''\n}\n\n/**\n * A collection of key/value elements, where the key is the filter name and the value is the control \n * that contains the filter value. \n * Both the `FilterControls` keys and `FilterValues` keys are the same.\n */\nexport type FilterControls = Params<InputControl>;\n\n/**\n * A collection of key/value elements, where the key is the filter name and the value is the filter value. \n * Both the `FilterControls` keys and `FilterValues` keys are the same.\n */\nexport type FilterValues = Params<any>;\n\n/**\n * An interface that represents the input data that are used to make a page request. \n * It is the input of `BackendDataSourceFunction` function. \n */\nexport interface PageRequest\n{\n    /**\n     * The current filter state. \n     */\n    filter?: FilterValues;\n\n    /**\n     * The current sort state. \n     */\n    sort: Sort;\n\n    /**\n     * The current paginator state. \n     */\n    paginator: PageEvent;\n}\n\n/**\n * An interface that represents the requested page. \n * It is the output of `BackendDataSourceFunction` function. \n * The generic parameter T always refers to the type of data that it is dealing with. \n */\nexport interface Page<T>\n{\n    /**\n     * Returns the list of items. \n     * By default, its value is `[]`. \n     */\n    data: T[];\n\n    /**\n     * Returns the total number of items being paged. \n     * By default, its value is `0`. \n     */\n    totalData: number;\n\n    /**\n     * Returns the zero-based page index of the displayed list of items. \n     * By default, its value is `0`. \n     */\n    pageIndex: number;\n\n    /**\n     * Returns the number of items to display on a page. \n     * By default, its value is `50`. \n     */\n    pageSize: number;\n}\n\n/**\n * An interface that represents the function that is used to get the data source from backend. \n * The generic parameter T always refers to the type of data that it is dealing with. \n */\nexport interface BackendDataSourceFunction<T>\n{\n    (pageRequest: PageRequest): Observable<Page<T>>;\n}\n\n/**\n * Checks if a data object matches the data source's filter string. By default, each data object \n * is converted to a string of its properties and returns true if the filter has \n * at least one occurrence in that string. By default, the filter string has its whitespace \n * trimmed and the match is case-insensitive. \n * May be overridden for a custom implementation of filter matching. \n * @param data Data object used to check against the filter. \n * @param filter Filter string that has been set on the data source. \n * @return Returns true whether the filter matches against the data; otherwise, false. \n */\nexport function filterPredicate<T>(data: T, filter: string): boolean\n{\n    /* Transforms the data into a lowercase string of all property values. */\n    const dataStr: string = Object.keys(data).reduce((\n        (currentTerm, key): string => {\n            /* Use an obscure Unicode character to delimit the words in the concatenated string. \n             * This avoids matches where the values of two columns combined will match the user's query \n             * (e.g. `Flute` and `Stop` will match `Test`). The character is intended to be something \n             * that has a very low chance of being typed in by somebody in a text field. This one in \n             * particular is \"White up-pointing triangle with dot\" from \n             * https://en.wikipedia.org/wiki/List_of_Unicode_characters. */\n            return currentTerm + data[key] + '◬';\n        }), '').toLowerCase();\n\n    /* Transforms the filter by converting it to lowercase and removing whitespace. */\n    const transformedFilter: string = filter.trim().toLowerCase();\n\n    return (dataStr.indexOf(transformedFilter) != -1);\n}\n\n/**\n * Data accessor function that is used for accessing data properties for sorting through \n * the default `sortData` function. \n * This default function assumes that the sort header IDs (which defaults to the column name) \n * matches the data's properties (e.g. column Xyz represents data['Xyz']). \n * May be overridden for a custom implementation of different behavior. \n * @param data Data object that is being accessed. \n * @param sortHeaderId The name of the column that represents the data. \n */\nexport function sortingDataAccessor<T>(data: T, sortHeaderId: string): string | number\n{\n    const value: any = data[sortHeaderId];\n\n    if (_isNumberValue(value))\n    {\n        const numberValue: number = Number(value);\n\n        /* Numbers beyond `MAX_SAFE_INTEGER` can't be compared reliably so we \n         * leave them as strings. For more info: https://goo.gl/y5vbSg. */\n        return (numberValue < MAX_SAFE_INTEGER ? numberValue : value);\n    }\n\n    return value;\n}\n\n/**\n * Gets a sorted copy of the data array based on the state of the `MatSort`. Called \n * after changes are made to the filtered data or when sort changes are emitted from `MatSort`. \n * By default, the function retrieves the active sort and its direction and compares data \n * by retrieving data using the `sortingDataAccessor`. \n * May be overridden for a custom implementation of data ordering. \n * @param data The array of data that should be sorted. \n * @param sort The connected `MatSort` that holds the current sort state. \n */\nexport function sortData<T>(data: T[], sort: Sort): T[]\n{\n    const active: string = sort.active;\n    const direction: SortDirection = sort.direction as SortDirection;\n\n    if ((!active) || (direction == SortDirection.orig)) return data;\n\n    return data.sort((a: T, b: T): number => {\n        let valueA: string | number = sortingDataAccessor(a, active);\n        let valueB: string | number = sortingDataAccessor(b, active);\n\n        /**\n         * If both `valueA` and `valueB` exist (truthy), then compare the two. Otherwise, checks if \n         * one value exists while the other doesn't. In this case, existing value should come last. \n         * This avoids inconsistent results when comparing values to undefined/null. \n         * If neither value exists, returns 0 (equal). \n         */\n\n        let comparatorResult: number = 0;\n\n        if ((valueA != null) && (valueB != null))\n        {\n            /* Checks if one value is greater than the other one; if equal, `comparatorResult` should remain 0. */\n\n            if (valueA > valueB) comparatorResult = 1;\n            else if (valueA < valueB) comparatorResult = -1;\n        }\n        else if (valueA != null) comparatorResult = 1;\n        else if (valueB != null) comparatorResult = -1;\n\n        return comparatorResult * ((direction == SortDirection.asc) ? 1 : -1);\n    });\n}\n","\n/* \"Barrel\" of Http Interceptors.\n * Angular applies interceptors in the order that you provide them. If you provide interceptors A,\n * then B, then C, requests will flow in A->B->C and responses will flow out C->B->A.\n * You cannot change the order or remove interceptors later. If you need to enable and disable\n * an interceptor dynamically, you'll have to build that capability into the interceptor itself. */\n\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\n\n// import { AuthenticationService } from '../../authentication';\n\nimport { CachingInterceptor } from './http.interceptor';\n\n/**\n * Http interceptor providers in order.\n */\nexport const HTTP_INTERCEPTOR_PROVIDERS = [\n    // { provide: HTTP_INTERCEPTORS, useClass: AuthenticationService, multi: true },\n    //{ provide: HTTP_INTERCEPTORS, useClass: CachingInterceptor, multi: true }\n];\n","\nimport { HttpRequest, HttpResponse } from '@angular/common/http';\n\n/**\n * Returns a constant that is used in the `HttpHeaders` to do request although the request exists in cache. \n */\nexport const REFRESH_X_CACHE: string = 'refresh-x-cache';\n\n/**\n * Represents the base abstract class for all services that implement the cachable URL request. \n * See `CachableUrl` service. \n */\nexport abstract class Cachable\n{\n    /**\n     * Returns a number greater than zero if the specified request is cachable; \n\t * that number represents the maximum cache age in milliseconds. \n\t * Return zero if the specified request is NOT cachable. \n     * @param req The outgoing request object to handle. \n     */\n    public abstract isCachable(req: HttpRequest<any>): number\n}\n\n/**\n * Represents the base abstract class for all services that implement the request cache. \n * See `RequestCacheDifferentTimeWithMap` service. \n */\nexport abstract class RequestCache\n{\n\tpublic abstract get(req: HttpRequest<any>): HttpResponse<any> | undefined;\n\n\tpublic abstract set(req: HttpRequest<any>, maxAgeInCache: number, response: HttpResponse<any>): void;\n}\n","\nimport { Injectable } from '@angular/core';\nimport { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent, HttpResponse } from '@angular/common/http';\nimport { Observable, of } from 'rxjs';\nimport { tap } from 'rxjs/operators';\n\nimport { REFRESH_X_CACHE, Cachable, RequestCache } from './request-cache.service';\n\n/* Note: When you are going to use the Interceptors, make a \"Barrel\" of Http Interceptors. \n * Angular applies interceptors in the order that you provide them. If you provide interceptors A, \n * then B, then C, requests will flow in A->B->C and responses will flow out C->B->A. \n * You cannot change the order or remove interceptors later. If you need to enable and disable \n * an interceptor dynamically, you'll have to build that capability into the interceptor itself. */\n\n\n/**\n * A service that caches certain requests and responses to improve performance. \n * It is delegated to an interceptor without disturbing the existing data services. \n * \n * - If request is cachable (e.g., package search) and response is in cache, \n * then returns the cached response as observable. \n * - If request is cachable and has `REFRESH_X_CACHE` option header in true (or the request is not in cache), \n * then passes request to the following `HttpHandler` and makes a cache from response. \n * - If request is not cachable, \n * then passes request to the following `HttpHandler`. \n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class CachingInterceptor implements HttpInterceptor\n{\n    public constructor(private _cachable: Cachable, private _cache: RequestCache)\n    { }\n\n    /**\n     * Identifies and handles a given HTTP request. \n     * @param req The outgoing request object to handle. \n     * @param next The next interceptor in the chain, or the backend if no interceptors remain in the chain. \n     * @returns An observable of the event stream. \n     */\n    public intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>>\n    {\n        let maxAgeInCache: number;\n\n        /* Continues if not cachable. */\n        if (!(maxAgeInCache = this._cachable.isCachable(req)))\n        {\n            return next.handle(req);\n        }\n\n        /* This option is triggered by the presence of a custom `REFRESH_X_CACHE` header with true value. */\n        if (req.headers.get(REFRESH_X_CACHE))\n        {\n            /* fetch. */\n            return this._sendRequest(req, maxAgeInCache, true, next);\n        }\n\n        /* cache-or-fetch. */\n        const cachedResponse: HttpResponse<any> = this._cache.get(req);\n        return (cachedResponse\n            ? of(cachedResponse)\n            : this._sendRequest(req, maxAgeInCache, false, next));\n    }\n\n    /**\n     * Gets server response observable by sending request to `next` argument. \n     * It will add the response to the cache on the way out. \n     * @param req The outgoing request object to handle. \n     * @param maxAgeInCache The maximum cache age in milliseconds. \n     * @param hasRefreshXCache It is true if the custom `REFRESH_X_CACHE` header is present; otherwise, false. \n     * @param next The next interceptor in the chain, or the backend if no interceptors remain in the chain. \n     * @returns An observable of the event stream. \n     */\n    private _sendRequest(req: HttpRequest<any>, maxAgeInCache: number, hasRefreshXCache: boolean, next: HttpHandler): Observable<HttpEvent<any>>\n    {\n        /* Removes the `REFRESH_X_CACHE` custom option from header. */\n        let reqWithoutCustomHeader: HttpRequest<any> = (hasRefreshXCache)\n            ? req.clone({ headers: (req.headers.delete(REFRESH_X_CACHE)) })\n            : req;\n\n        console.log('Req-2: ', reqWithoutCustomHeader.headers);\n\n        return next.handle(reqWithoutCustomHeader).pipe(\n            tap((event: HttpEvent<any>) => {\n                /* There may be other events besides the response. */\n                if (event instanceof HttpResponse)\n                {\n                    /* Updates the cache. */\n                    this._cache.set(req, maxAgeInCache, event);  /* Cached the original request `req`. */\n                }\n            })\n        );\n    }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from \"@angular/common/http\";\n\nexport interface Response<T>\n{\n    message?: string;\n    status?: string;\n    data?: T;\n}\n\nexport const ResponseStatus = {\n    SUCCESS: 'success',\n    ERROR: 'error'\n};\n\n@Injectable()\nexport class HttpService\n{\n    constructor(protected http: HttpClient)\n    { }\n}","\nimport { Injectable } from '@angular/core';\nimport { MatIconRegistry } from '@angular/material';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n/**\n * A service that registers custom svg icons in order to use them through the `mat-icon` component. \n * Which simply registers the custom icons with the `MatIconRegistry` service provided by Angular Material. \n */\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class IconService\n{\n\t/**\n\t * Returns the default icon name. It represents a blank icon. \n\t * It is used by controls that want to have occupied the icon space, but nothing is showed. \n\t */\n\tpublic static readonly defaultIconName: string = 'outlined-blank-24px';\n\n\tpublic constructor(private _matIconRegistry: MatIconRegistry, private _domSanitizer: DomSanitizer)\n\t{ }\n\n\t/**\n\t * Registers an array of icons. \n\t * @param iconNames Array of names under which the icons should be registered. \n\t * @param iconUrl The relative URL path pointing to the location of the icons. \n\t */\n\tpublic registerIcons(iconNames: string[], iconUrl: string): void\n\t{\n\t\ticonNames.forEach(iconName => {\n\t\t  this._matIconRegistry.addSvgIcon(\n\t\t\t  iconName, \n\t\t\t  this._domSanitizer.bypassSecurityTrustResourceUrl(`${ iconUrl }/${ iconName }.svg`));\n\t\t});\n\t}\n}\n","\nimport { Injectable } from '@angular/core';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class MessageService\n{\n\t/**\n\t * Cache of messages.\n\t */\n\tpublic messages: string[] = [];\n\n\tpublic constructor()\n\t{ }\n\n\t/**\n\t * Adds the specified message. \n\t * @param msg The message to add. \n\t */\n\tpublic add(msg: string): void\n\t{\n\t\tconsole.log(msg);\n\t\tthis.messages.push(msg);\n\t}\n\n\t/**\n\t * Deletes all messages. \n\t */\n\tpublic clear(): void\n\t{\n\t\tthis.messages = [];\n\t}\n}\n","\nimport { Injectable } from '@angular/core';\nimport { HttpRequest, HttpResponse } from '@angular/common/http';\n\nimport { Environment } from '../env';\n\nimport { MessageService } from './message.service';\nimport { Cachable, RequestCache } from './request-cache.service';\n\n/**\n * A service that implements the cachable URL request.\n */\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class CachableUrl implements Cachable\n{\n\tpublic constructor(private _env: Environment)\n\t{ }\n\n    /**\n     * Returns a number greater than zero if the specified request is cachable;\n\t * that number represents the maximum cache age in milliseconds.\n\t * Return zero if the specified request is NOT cachable.\n     * @param req The outgoing request object to handle.\n     */\n    public isCachable(req: HttpRequest<any>): number\n    {\n        /* Only GET requests are cachable. */\n\t\tif (req.method != 'GET') return 0;\n\n\t\tObject.keys(this._env.cachableUrls).forEach(\n\t\t\t(url: string) => {\n\t\t\t\t/* Verifies if the request cache is cachable. */\n\t\t\t\tif (req.url.indexOf(url) > -1) return this._env.cachableUrls[url];\n\t\t\t}\n\t\t);\n\n\t\t/* It is not cachable. */\n\t\treturn 0;\n    }\n}\n\n/**\n * Represents the request cache entry.\n */\nexport interface RequestCacheEntry\n{\n\t/**\n\t * Returns the request URL.\n\t */\n\turl: string;\n\n\t/**\n\t * Returns the request cache.\n\t */\n\tresponse: HttpResponse<any>;\n\n\t/**\n\t * Returns the maximum cache age in milliseconds.\n\t */\n\tmaxAgeInCache: number;\n\n\t/**\n\t * Returns the last read of the request URL.\n\t */\n\tlastRead: number;\n}\n\n/**\n * A service that implements the request cache with the different time using `Map` collection.\n */\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class RequestCacheDifferentTimeWithMap implements RequestCache\n{\n\tprivate _cache: Map<string, RequestCacheEntry>;\n\n\tpublic constructor(private _messageService: MessageService)\n\t{\n\t\tthis._cache = new Map<string, RequestCacheEntry>();\n\t}\n\n\tpublic get(req: HttpRequest<any>): HttpResponse<any> | undefined\n\t{\n\t\tconst cached: RequestCacheEntry = this._cache.get(req.urlWithParams);\n\n\t\tif (!cached)\n\t\t{\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif ((cached.lastRead + cached.maxAgeInCache) < Date.now())  /* Found expired cached. */\n\t\t{\n\t\t\tthis._messageService.add(`Found expired cached response for '${ req.urlWithParams }'.`);\n\t\t\treturn undefined;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._messageService.add(`Found cached response for '${ req.urlWithParams }'.`);\n\t\t\treturn cached.response;\n\t\t}\n\t}\n\n\tpublic set(req: HttpRequest<any>, maxAgeInCache: number, response: HttpResponse<any>): void\n\t{\n\t\tconst url: string = req.urlWithParams;\n\t\tthis._messageService.add(`Caching response from '${ url }'.`);\n\n\t\tthis._cache.set(url, { url, response, maxAgeInCache, lastRead: Date.now() });\n\n\t\t/* Removes expired cache entries. */\n\t\tthis._cache.forEach(\n\t\t\t(entry: RequestCacheEntry) => {\n\t\t\t\tif (entry.lastRead < Date.now() - entry.maxAgeInCache)\n\t\t\t\t{\n\t\t\t\t\tthis._cache.delete(entry.url);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tthis._messageService.add(`Request cache size: ${ this._cache.size }.`);\n\t}\n}\n\n/**\n * A provider for the cachable URL request.\n */\nexport const CACHABLE_URL_PROVIDER = [\n    { 'provide': Cachable, 'useClass': CachableUrl, 'multi': false }\n];\n\n/**\n * A provider for the request cache with the different time using `Map` collection.\n */\nexport const REQUEST_CACHE_DIFFERENT_TIME_WITH_MAP_PROVIDER = [\n    { 'provide': RequestCache, 'useClass': RequestCacheDifferentTimeWithMap, 'multi': false }\n];\n","\nimport { Injectable } from \"@angular/core\";\nimport { Observable, of } from \"rxjs\";\nimport { delay } from \"rxjs/operators\";\n\nimport { PageRequest, Page, sortData } from './backend-data-source';\n\ninterface User\n{\n    id: number;\n    name: string;\n    username: string;\n    email: string;\n    address:\n    {\n        street: string;\n        suite: string;\n        city: string;\n        zipcode: string;\n        geo:\n        {\n            lat: string;\n            lng: string;\n        };\n    };\n    phone: string;\n    website: string;\n    company:\n    {\n        name: string;\n        catchPhrase: string;\n        bs: string;\n    };\n    registrationDate: Date;\n}\n\nexport interface UserQuery\n{\n    search: string;\n    registration: Date;\n}\n\n@Injectable({\n    providedIn: \"root\"\n})\nexport class UserService\n{\n    public page(pageRequest: PageRequest): Observable<Page<User>>\n    {\n        /* Fake backend, do your server request here instead. */\n\n        let filteredUsers = this.users.slice();  /* Clones the array. */\n\n        let { search, registration } = pageRequest.filter;\n\n        if (search)\n        {\n            search = search.toLowerCase();\n            filteredUsers = filteredUsers.filter(\n                //({ name, username, email }) => {\n                ({ id, name, registrationDate }) => {\n                    return id.toString(10).includes(search) ||\n                    name.toLowerCase().includes(search) /*||\n                    registrationDate.toString(10).toLowerCase().includes(search)*/;\n                }\n            );\n        }\n\n        if (registration)\n        {\n            filteredUsers = filteredUsers.filter(\n                ({ registrationDate }) =>\n                    registrationDate.getFullYear() === registration.getFullYear() &&\n                    registrationDate.getMonth() === registration.getMonth() &&\n                    registrationDate.getDate() === registration.getDate()\n            );\n        }\n\n        if (pageRequest.sort)\n        {\n            filteredUsers = sortData(filteredUsers, pageRequest.sort);\n        }\n\n        let newPageIndex: number = pageRequest.paginator.pageIndex;\n        const pageSize: number = pageRequest.paginator.pageSize;\n        let start: number = 0;\n\n        if (filteredUsers.length != 0)\n        {\n            while ((start = newPageIndex * pageSize) >= filteredUsers.length)\n            {\n                newPageIndex--;\n            }\n        }\n        else\n        {\n            newPageIndex = 0;\n        }\n\n        const end: number = start + pageSize;\n\n        const resultUsers: User[] = filteredUsers.slice(start, end);\n\n        const page: Page<User> = {\n            'data': resultUsers,\n            'totalData': filteredUsers.length,\n            'pageIndex': newPageIndex,\n            'pageSize': pageSize/*resultUsers.length*/\n        };\n\n        return of(page).pipe(delay(2000));\n    }\n\n    private users: User[] = [{\n        id: 1,\n        name: \"Leanne Graham\",\n        registrationDate: new Date(1565575044121),\n        username: \"Bret\",\n        email: \"Sincere@april.biz\",\n        address: {\n            street: \"Kulas Light\",\n            suite: \"Apt. 556\",\n            city: \"Gwenborough\",\n            zipcode: \"92998-3874\",\n            geo: {\n                lat: \"-37.3159\",\n                lng: \"81.1496\"\n            }\n        },\n        phone: \"1-770-736-8031 x56442\",\n        website: \"hildegard.org\",\n        company: {\n            name: \"Romaguera-Crona\",\n            catchPhrase: \"Multi-layered client-server neural-net\",\n            bs: \"harness real-time e-markets\"\n        }\n    },\n    {\n        id: 2,\n        name: \"Ervin Howell\",\n        registrationDate: new Date(1565575044121),\n        username: \"Antonette\",\n        email: \"Shanna@melissa.tv\",\n        address: {\n            street: \"Victor Plains\",\n            suite: \"Suite 879\",\n            city: \"Wisokyburgh\",\n            zipcode: \"90566-7771\",\n            geo: {\n                lat: \"-43.9509\",\n                lng: \"-34.4618\"\n            }\n        },\n        phone: \"010-692-6593 x09125\",\n        website: \"anastasia.net\",\n        company: {\n            name: \"Deckow-Crist\",\n            catchPhrase: \"Proactive didactic contingency\",\n            bs: \"synergize scalable supply-chains\"\n        }\n    },\n    {\n        id: 3,\n        name: \"Clementine Bauch\",\n        registrationDate: new Date(1565575044121),\n        username: \"Samantha\",\n        email: \"Nathan@yesenia.net\",\n        address: {\n            street: \"Douglas Extension\",\n            suite: \"Suite 847\",\n            city: \"McKenziehaven\",\n            zipcode: \"59590-4157\",\n            geo: {\n                lat: \"-68.6102\",\n                lng: \"-47.0653\"\n            }\n        },\n        phone: \"1-463-123-4447\",\n        website: \"ramiro.info\",\n        company: {\n            name: \"Romaguera-Jacobson\",\n            catchPhrase: \"Face to face bifurcated interface\",\n            bs: \"e-enable strategic applications\"\n        }\n    },\n    {\n        id: 4,\n        name: \"Patricia Lebsack\",\n        registrationDate: new Date(1565575044121),\n        username: \"Karianne\",\n        email: \"Julianne.OConner@kory.org\",\n        address: {\n            street: \"Hoeger Mall\",\n            suite: \"Apt. 692\",\n            city: \"South Elvis\",\n            zipcode: \"53919-4257\",\n            geo: {\n                lat: \"29.4572\",\n                lng: \"-164.2990\"\n            }\n        },\n        phone: \"493-170-9623 x156\",\n        website: \"kale.biz\",\n        company: {\n            name: \"Robel-Corkery\",\n            catchPhrase: \"Multi-tiered zero tolerance productivity\",\n            bs: \"transition cutting-edge web services\"\n        }\n    },\n    {\n        id: 5,\n        name: \"Chelsey Dietrich\",\n        registrationDate: new Date(1550478139234),\n        username: \"Kamren\",\n        email: \"Lucio_Hettinger@annie.ca\",\n        address: {\n            street: \"Skiles Walks\",\n            suite: \"Suite 351\",\n            city: \"Roscoeview\",\n            zipcode: \"33263\",\n            geo: {\n                lat: \"-31.8129\",\n                lng: \"62.5342\"\n            }\n        },\n        phone: \"(254)954-1289\",\n        website: \"demarco.info\",\n        company: {\n            name: \"Keebler LLC\",\n            catchPhrase: \"User-centric fault-tolerant solution\",\n            bs: \"revolutionize end-to-end systems\"\n        }\n    },\n    {\n        id: 6,\n        name: \"Mrs. Dennis Schulist\",\n        registrationDate: new Date(1550478139234),\n        username: \"Leopoldo_Corkery\",\n        email: \"Karley_Dach@jasper.info\",\n        address: {\n            street: \"Norberto Crossing\",\n            suite: \"Apt. 950\",\n            city: \"South Christy\",\n            zipcode: \"23505-1337\",\n            geo: {\n                lat: \"-71.4197\",\n                lng: \"71.7478\"\n            }\n        },\n        phone: \"1-477-935-8478 x6430\",\n        website: \"ola.org\",\n        company: {\n            name: \"Considine-Lockman\",\n            catchPhrase: \"Synchronised bottom-line interface\",\n            bs: \"e-enable innovative applications\"\n        }\n    },\n    {\n        id: 7,\n        name: \"Kurtis Weissnat\",\n        registrationDate: new Date(1550478139234),\n        username: \"Elwyn.Skiles\",\n        email: \"Telly.Hoeger@billy.biz\",\n        address: {\n            street: \"Rex Trail\",\n            suite: \"Suite 280\",\n            city: \"Howemouth\",\n            zipcode: \"58804-1099\",\n            geo: {\n                lat: \"24.8918\",\n                lng: \"21.8984\"\n            }\n        },\n        phone: \"210.067.6132\",\n        website: \"elvis.io\",\n        company: {\n            name: \"Johns Group\",\n            catchPhrase: \"Configurable multimedia task-force\",\n            bs: \"generate enterprise e-tailers\"\n        }\n    },\n    {\n        id: 8,\n        name: \"Nicholas Runolfsdottir V\",\n        registrationDate: new Date(1550478139234),\n        username: \"Maxime_Nienow\",\n        email: \"Sherwood@rosamond.me\",\n        address: {\n            street: \"Ellsworth Summit\",\n            suite: \"Suite 729\",\n            city: \"Aliyaview\",\n            zipcode: \"45169\",\n            geo: {\n                lat: \"-14.3990\",\n                lng: \"-120.7677\"\n            }\n        },\n        phone: \"586.493.6943 x140\",\n        website: \"jacynthe.com\",\n        company: {\n            name: \"Abernathy Group\",\n            catchPhrase: \"Implemented secondary concept\",\n            bs: \"e-enable extensible e-tailers\"\n        }\n    },\n    {\n        id: 9,\n        name: \"Glenna Reichert\",\n        registrationDate: new Date(1550478139234),\n        username: \"Delphine\",\n        email: \"Chaim_McDermott@dana.io\",\n        address: {\n            street: \"Dayna Park\",\n            suite: \"Suite 449\",\n            city: \"Bartholomebury\",\n            zipcode: \"76495-3109\",\n            geo: {\n                lat: \"24.6463\",\n                lng: \"-168.8889\"\n            }\n        },\n        phone: \"(775)976-6794 x41206\",\n        website: \"conrad.com\",\n        company: {\n            name: \"Yost and Sons\",\n            catchPhrase: \"Switchable contextually-based project\",\n            bs: \"aggregate real-time technologies\"\n        }\n    },\n    {\n        id: 10,\n        name: \"Clementina DuBuque\",\n        registrationDate: new Date(1550478139234),\n        username: \"Moriah.Stanton\",\n        email: \"Rey.Padberg@karina.biz\",\n        address: {\n            street: \"Kattie Turnpike\",\n            suite: \"Suite 198\",\n            city: \"Lebsackbury\",\n            zipcode: \"31428-2261\",\n            geo: {\n                lat: \"-38.2386\",\n                lng: \"57.2232\"\n            }\n        },\n        phone: \"024-648-3804\",\n        website: \"ambrose.net\",\n        company: {\n            name: \"Hoeger LLC\",\n            catchPhrase: \"Centralized empowering task-force\",\n            bs: \"target end-to-end models\"\n        }\n    }];\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { HttpClient, HttpParams } from '@angular/common/http';\n\nimport { Environment } from '../core/public-api';\n\nimport { Response } from '../core/public-api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserProfileService {\n\n  constructor(\n      private env: Environment,\n      protected http: HttpClient) { }\n\n  /**\n   * gives information about an user authenticated\n   */\n  getUserInfo(): Observable<Response<any>> {\n    return this.http.get<Response<any>>(this.env.sceibaApi + 'me');\n  }\n\n  getUsers(size= 10, page= 1, query= ''): Observable<Response<any>> {\n    let params = new HttpParams();\n    params = params.set('size', size.toString(10));\n    params = params.set('page', page.toString(10));\n    params = params.set('query', query);\n    const options = {\n      params: params\n    };\n    return this.http.get<Response<any>>(this.env.sceibaApi + 'users/search', options);\n  }\n\n\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\nimport { HttpClient, HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\nimport { Injectable, Optional } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot } from '@angular/router';\nimport { AuthConfig, JwksValidationHandler, OAuthModuleConfig, OAuthResourceServerErrorHandler, OAuthService, OAuthStorage } from 'angular-oauth2-oidc';\nimport { Observable, Subject, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { UserProfile } from '../../public-api';\nimport { Environment } from '../core/public-api';\n\n/**\n * This enum handles the selected backend\n */\nexport enum AuthBackend{\n    /**\n     * `sceiba` represent the Sceiba's backend\n     */\n    sceiba = 'sceiba',\n    /**\n     * `cuor` represent the Cuor's backend, The Organizations System\n     */\n    cuor = 'cuor'\n}\n/**\n * This service handles the behavior when a user authentications and\n * gives information about it.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class OauthAuthenticationService implements CanActivate, HttpInterceptor {\n\n    // public authBackend: AuthBackend =  AuthBackend.sceiba\n    public userInfoEndpoint: string;\n\n    constructor(\n        // private env: Environment,\n        private oauthStorage: OAuthStorage,\n        protected http: HttpClient,\n        private _router: Router,\n        private oauthService: OAuthService,\n        private errorHandler: OAuthResourceServerErrorHandler,\n        @Optional() private moduleConfig: OAuthModuleConfig) { }\n\n    // TODO: this object is `any` because we have two backends with two difrent userprofiles...\n    private authenticationSubject: Subject<any> = new Subject();\n    /**\n     * Observer to handles the behavior when a user authenticates\n     */\n    public authenticationSubjectObservable = this.authenticationSubject.asObservable();\n\n    /**\n     * notifies by an observable if the user is authenticated\n     * for the knowledge of who uses it\n     * @param islogged 'true' is loggued or 'false' other way\n     */\n    login(user) {\n      console.log('autentication service user:', user)\n      this.authenticationSubject.next(user);\n    }\n    logout() {\n      this.authenticationSubject.next(null);\n  }\n    /**\n     * gives information about an user authenticated\n     */\n    getUserInfo(): Observable<any> {\n      return this.http.get<any>(this.userInfoEndpoint);\n        // if (this.authBackend == AuthBackend.sceiba) {\n        //     return this.http.get<any>(this.env.sceibaApi + 'me');\n        // } else if (this.authBackend == AuthBackend.cuor){\n        //     return this.http.get<any>(this.env.cuorApi + 'me');\n        // }\n    }\n\n    canActivate(next: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> | Promise<boolean> | boolean {\n        const user = this.oauthStorage.getItem('user')\n\n        if (user) {\n            return true;\n        }\n        else{\n            this._router.navigate(['/']);\n            return false;\n        }\n\n    }\n\n\n    public intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n\n        let token = this.oauthStorage.getItem('access_token');\n\n        if (token) {\n            let headers = req.headers.set('Authorization', 'Bearer ' + token);\n\n            if (req.method != 'GET'){\n                headers = headers.set('Content-Type', 'application/json');\n                headers = headers.set('Access-Control-Allow-Origin', '*');\n            }\n\n            req = req.clone({ headers });\n        }\n\n        return next.handle(req).pipe(\n            catchError((err: HttpErrorResponse) => {\n\n                /* 401 means the user is not authorized. */\n                if (err.status === 401) {\n                    this.oauthService.initImplicitFlow();\n                    // this._router.navigateByUrl('/');\n                }\n\n                return throwError(err);\n            })\n        );\n    }\n\n    /**\n     * Configure, this function is necessary if you will implement your own logic\n     * @param authConfig: is the auth configuration.\n     * you have to call `oauthService.initImplicitFlow()` in you login function\n     * and `oauthService.logOut()` in you logout function\n     */\n    public configure(authConfig: AuthConfig): void {\n        this.oauthService.configure(authConfig);\n        this.oauthService.tokenValidationHandler = new JwksValidationHandler();\n        this.oauthService.loadDiscoveryDocumentAndTryLogin();\n    }\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SimpleAuthenticationService { //implements CanActivate {\n\n  public authBackend: AuthBackend =  AuthBackend.sceiba\n\n  constructor(\n      private env: Environment,\n      protected http: HttpClient,\n      private _router: Router) { }\n\n  private authenticationSubject: Subject<boolean> = new Subject();\n  /**\n   * Observer to handles the behavior when a user authenticates\n   */\n  public authenticationSubjectObservable = this.authenticationSubject.asObservable();\n\n  /**\n   * notifies by an observable if the user is authenticated\n   * for the knowledge of who uses it\n   * @param islogged 'true' is loggued or 'false' other way\n   */\n  logguedChange(islogged: boolean) {\n      this.authenticationSubject.next(islogged);\n  }\n  /**\n   * gives information about an user authenticated\n   */\n  getUserInfo(): Observable<any> {\n      if (this.authBackend == AuthBackend.sceiba) {\n          return this.http.get<any>(this.env.sceibaApi + 'me');\n      } else if (this.authBackend == AuthBackend.cuor){\n          return this.http.get<any>(this.env.cuorApi + 'me');\n      }\n  }\n\n  // canActivate(next: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> | Promise<boolean> | boolean {\n  //   if(this.env.user != null){\n  //     return true;\n  //   }\n  //   else{\n  //       this._router.navigate(['/']);\n  //       return false;\n  //   }\n\n  // }\n}\n","\nimport { AfterViewInit, Component, Input, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { PartialObserver, Subscription, timer } from \"rxjs\";\nimport { TranslateService } from \"@ngx-translate/core\";\nimport { AuthConfig, JwksValidationHandler, OAuthService,OAuthStorage } from \"angular-oauth2-oidc\";\n\nimport { Environment } from \"../core/env\";\nimport { UserProfileService } from \"../backend/user-profile.service\";\nimport { UserProfile } from \"../entities/person.entity\";\nimport { OauthAuthenticationService } from \"./authentication.service\";\n// import { authConfig } from './auth-config';\n\nexport interface OauthInfo\n{\n  serverHost: string;\n  loginUrl: string;\n  tokenEndpoint: string;\n  userInfoEndpoint: string,\n  appHost: string;\n  appName: string;\n  oauthRedirectUri: string;\n  oauthClientId: string;\n  oauthScope: string;\n}\n\n/**\n * Represents a component used to authenticate. \n * \n * In order to use this component with the correct i18n, you must include \n * (in your i18n translate files that are in the folder `assets\\i18n`) \n * a translation key of name \"TOCO_AUTHENTICATION\" that contains \n * an object as value with the translation needed by this component. \n * \n * In the case of `es.json` file, you must include the following translation key: \n    \"TOCO_AUTHENTICATION\": {\n        \"MAT_CARD_TITLE_AUTH\": \"Autenticación con\",\n        \"AUTENTICARSE\": \"Autenticarse\",\n        \"H1_HOLA\": \"Hola\",\n        \"BUTTON_SALIR\": \"Salir\"\n    }\n * \n * In the case of `en.json` file, you must include the following translation key: \n    \"TOCO_AUTHENTICATION\": {\n        \"MAT_CARD_TITLE_AUTH\": \"Authentication with\",\n        \"AUTENTICARSE\": \"Log in\",\n        \"H1_HOLA\": \"Hello,\",\n        \"BUTTON_SALIR\": \"Exit\"\n    }\n * \n * If you have another language, then you have another `*.json` file, \n * and you must include the \"TOCO_AUTHENTICATION\" translation key with the correct translation values. \n */\n@Component({\n  selector: \"toco-authentication\",\n  templateUrl: \"./authentication.component.html\",\n  styleUrls: [\"./authentication.component.scss\"],\n})\nexport class AuthenticationComponent implements OnInit, AfterViewInit {\n\n  @Input()\n  public isButtonLogin: boolean;\n\n  @Input()\n  public isButtonLoginIcon: boolean;\n\n  @Input()\n  public isButtonLoginText: string;\n\n  @Input()\n  public oauthInfo: OauthInfo;\n\n  public user: UserProfile;\n\n  public userName: string;\n  private timerAuthenticateSuscription: Subscription = null;\n  private timerAuthenticateObserver: PartialObserver<number> = {\n    next: (_) => {\n      // console.log('next');\n      // this.oauthService.setupAutomaticSilentRefresh();\n      if (this.oauthStorage.getItem(\"access_token\")) {\n        this.authenticationService.getUserInfo().subscribe(\n          (response) => {\n            this.oauthStorage.setItem(\"user\", JSON.stringify(response));\n            this.authenticationService.login(response);\n          },\n          error => console.log(error),\n          () => {}\n        )\n        // this.authenticationService.logguedChange(true);\n      }\n    },\n\n    error: (err: any) => {\n      console.log(\"The observable got an error notification: \" + err + \".\");\n    },\n\n    complete: () => {\n      console.log(\"The observable got a complete notification.\");\n    },\n  };\n\n  constructor(\n    private userProfileService: UserProfileService,\n    private env: Environment,\n    private router: Router,\n    private oauthService: OAuthService,\n    private oauthStorage: OAuthStorage,\n    private authenticationService: OauthAuthenticationService,\n    private _transServ: TranslateService\n  )\n  { }\n\n  ngOnInit()\n  {\n    if (this.isButtonLogin == undefined) this.isButtonLogin = false;\n    if (this.isButtonLoginIcon == undefined) this.isButtonLoginIcon = false;\n    if (this.isButtonLoginText == undefined)\n    {\n      this._transServ.get('TOCO_AUTHENTICATION.AUTENTICARSE').subscribe((res: string) => {\n        this.isButtonLoginText = res;\n      });\n    }\n    if (this.oauthInfo.loginUrl == undefined || this.oauthInfo.loginUrl == ''){\n      this.oauthInfo.loginUrl = this.oauthInfo.serverHost + \"oauth/authorize\";\n    }\n    if (this.oauthInfo.tokenEndpoint == undefined || this.oauthInfo.tokenEndpoint == ''){\n      this.oauthInfo.tokenEndpoint = this.oauthInfo.serverHost + \"oauth/token\";\n    }\n    this.configure();\n  }\n\n  ngOnDestroy(): void {\n    if (this.timerAuthenticateSuscription) {\n      this.timerAuthenticateSuscription.unsubscribe();\n    }\n  }\n\n  ngAfterViewInit(): void {\n    // this observable is to wait a while for the component to finish loading,\n    // because otherwise it fails to notify that the user is authenticated\n    this.timerAuthenticateSuscription = timer(0).subscribe(\n      this.timerAuthenticateObserver\n    );\n  }\n\n  /**\n   * Configurations to authenticate\n   */\n  private configure() {\n    const authConfig: AuthConfig = {\n      // Url of the Identity Provider\n      //issuer: 'https://sceiba-lab.upr.edu.cu',\n\n      loginUrl: this.oauthInfo.loginUrl,\n\n      tokenEndpoint: this.oauthInfo.tokenEndpoint,\n\n      // URL of the SPA to redirect the user to after login\n      redirectUri: this.oauthInfo.oauthRedirectUri,\n\n      // The SPA's id. The SPA is registered with this id at the auth-server\n      clientId: this.oauthInfo.oauthClientId,\n\n      oidc: false,\n\n      // silentRefreshRedirectUri: this.oauthInfo.sceibaHost + 'oauth/token',\n\n      // timeoutFactor: 0.75,\n\n      sessionChecksEnabled: true,\n      // set the scope for the permissions the client should request\n      // The first three are defined by OIDC. The 4th is a usecase-specific one\n      scope: this.oauthInfo.oauthScope, //'openid profile email voucher',\n    };\n    this.oauthService.configure(authConfig);\n\n    // Store user session in storage\n    // this.oauthService.setStorage(this.oauthStorage);\n\n    this.oauthService.tokenValidationHandler = new JwksValidationHandler();\n\n    // Try to login and if a token was received, request user information\n    this.oauthService.tryLogin({\n      onTokenReceived: (_) => {\n        // gives information about user loggued\n        this.authenticationService.userInfoEndpoint = this.oauthInfo.userInfoEndpoint;\n        this.authenticationService.getUserInfo().subscribe(\n\n            (response) => {\n              console.log(response);\n              \n              this.oauthStorage.setItem(\"user\", JSON.stringify(response));\n              this.authenticationService.login(response);\n            },\n            error => console.log(error),\n            () => {}\n\n\n          // (response) => {\n          // this.oauthStorage.setItem(\"user\", JSON.stringify(response));\n          // // // save email in storage\n          // // if (this.authBackend == AuthBackend.cuor){\n          // //   this.oauthStorage.setItem(\"email\", response.email);\n          // // }else{\n          // //   this.oauthStorage.setItem(\"email\", response.data.userprofile.user.email);\n          // // }\n          // // this.oauthStorage.setItem('userID', response.data.userprofile.id);\n\n          // // notifies user is logged\n          // this.authenticationService.logguedChange(true);\n\n          // this.userName = this.oauthStorage.getItem(\"email\");\n\n        // }\n        );\n      },\n      onLoginError: (err) => {\n        console.log(\"error in login\", err);\n      },\n    });\n  }\n\n  /**\n   * Starts the login flow\n   */\n  public login() {\n    this.oauthService.initImplicitFlow();\n    // this.authenticationService.authBackend = this.authBackend\n    // TODO: por que esto aqui, este modulo solo se encarga de la autenticacion y dar la informacion basica del usuario,\n    // el perfil es manejado por otro componente\n    this.user = new UserProfile();\n    this.userProfileService.getUserInfo().subscribe({\n      next: (response) => {\n        if (response && response.data && response.data.userprofile) {\n          this.user.deepcopy(response.data.userprofile);\n          this.oauthStorage.setItem(\"user\", this.user.entitystringify());\n        }\n      },\n      error: (err) => {\n        console.log(err);\n      },\n      complete: () => {},\n    });\n  }\n\n  /**\n   * Ends the login flow\n   */\n  public logoff() {\n    this.oauthService.logOut();\n    this.authenticationService.logout();\n  }\n\n  /**\n   * Gives the user's email if the user is authenticated\n   */\n  public get name() {\n    if (this.oauthStorage.getItem(\"access_token\")) {\n      return this.oauthStorage.getItem(\"email\");\n    } else {\n      return null;\n    }\n  }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/public-api';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { OAuthModule, OAuthStorage } from 'angular-oauth2-oidc';\n\nimport { AuthenticationComponent } from './authentication.component'\nimport { AuthenticateRoutingModule } from './authentication-routing.module'\nimport { OauthAuthenticationService, SimpleAuthenticationService } from './authentication.service'\n\nexport function storageFactory() : OAuthStorage {\n  return localStorage\n}\n@NgModule({\n    declarations: [\n        AuthenticationComponent\n    ],\n\n    imports: [\n        SharedModule,\n        HttpClientModule,\n        TranslateModule,\n        OAuthModule.forRoot(),\n        // AuthenticateRoutingModule\n    ],\n    exports: [\n        AuthenticationComponent\n    ],\n\n    //TODO: esto se elimina de aquí y se pone en el fichero `core/services/http-interceptor.order.ts`.\n    providers: [\n        { provide: OAuthStorage, useFactory: storageFactory },\n        OauthAuthenticationService,\n        SimpleAuthenticationService,\n        /* TODO: This can not be set here. */\n        {\n            provide: HTTP_INTERCEPTORS,\n            useClass: OauthAuthenticationService,\n            multi: true\n        }\n      ]\n})\nexport class AuthenticationModule\n{ }\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Observable, PartialObserver, Subject } from 'rxjs';\nimport { OAuthStorage } from 'angular-oauth2-oidc';\n\n\nimport { Environment } from '../core/public-api';\n\nimport { Response } from '../core/public-api';\nimport { Vocabulary, Term } from '../entities/public-api';\n\n// TODO: Poner todos los tipos de datos de retorno de Response.\n// No puede haber en ningun servicio del backend un Response<any>\n\n@Injectable()\nexport class TaxonomyService {\n\n  private prefix = 'vocabularies';\n\n  private httpOptions = {\n    headers: new HttpHeaders(\n      {\n        'Content-Type': 'application/json',\n      })\n  };\n  private token = '';\n\n  constructor(private env: Environment, private http: HttpClient, private oauthStorage: OAuthStorage) {\n    this.token = this.oauthStorage.getItem('access_token');\n  }\n\n  getVocabulary(id): Observable<Response<any>> {\n    let req = this.env.sceibaApi + this.prefix + '/vocabulary/' + id;\n    return this.http.get<Response<any>>(req);\n  }\n\n  getTermListByIDs(ids: number[]): Observable<Response<any>> {\n    let p = '';\n    ids.forEach(n => p = p + n.toString(10) + ',');\n    p = p.substring(0, p.length - 1);\n    let params = new HttpParams();\n    const options = {\n      params: params.set('ids', p)\n    };\n    const req = this.env.sceibaApi + this.prefix + '/term/inlist';\n    return this.http.get<Response<any>>(req, options);\n  }\n\n  getTermByID(termID, level=10): Observable<Response<any>> {\n    let params = new HttpParams();\n    const options = {\n      params: params.set('level', level.toString(10))\n    };\n    const req = this.env.sceibaApi + this.prefix + '/term/id/' + termID;\n    return this.http.get<Response<any>>(req, options);\n  }\n\n  getTermByUUID(termUUID, level=10): Observable<Response<any>> {\n    let params = new HttpParams();\n    const options = {\n      params: params.set('level', level.toString(10))\n    };\n    const req = this.env.sceibaApi + this.prefix + '/term/' + termUUID;\n    return this.http.get<Response<any>>(req, options);\n  }\n\n  getTermsTreeByVocab(vocabId, level=10): Observable<Response<any>> {\n    let params = new HttpParams();\n    const options = {\n      params: params.set('level', level.toString(10))\n    };\n    const req = this.env.sceibaApi + this.prefix + '/term/tree/' + vocabId;\n    return this.http.get<Response<any>>(req, options);\n  }\n\n  newVocabulary(vocab: Vocabulary): Observable<Response<any>> {\n    this.httpOptions.headers = this.httpOptions.headers.set('Authorization', 'Bearer ' + this.token);\n    return this.http.post<Response<any>>(\n      this.env.sceibaApi + this.prefix + '/vocabulary/new',\n      vocab.entitystringify()\n      ,\n      this.httpOptions);\n  }\n\n  editVocabulary(vocab: Vocabulary): Observable<Response<any>> {\n    this.httpOptions.headers = this.httpOptions.headers.set('Authorization', 'Bearer ' + this.token);\n    return this.http.post<Response<any>>(\n      this.env.sceibaApi + this.prefix + '/vocabulary/edit/' + vocab.id,\n      vocab.entitystringify()\n      ,\n      this.httpOptions);\n  }\n\n  getVocabularies(): Observable<Response<any>> {\n    return this.http.get<Response<any>>(this.env.sceibaApi + this.prefix + '/vocabulary/list');\n  }\n\n  newTerm(term: Term): Observable<Response<any>> {\n    this.httpOptions.headers = this.httpOptions.headers.set('Authorization', 'Bearer ' + this.token);\n    return this.http.post<Response<any>>(\n      this.env.sceibaApi + this.prefix + '/term/new',\n      term.entitystringify()\n      ,\n      this.httpOptions);\n  }\n\n  editTerm(term: Term): Observable<Response<any>> {\n    this.httpOptions.headers = this.httpOptions.headers.set('Authorization', 'Bearer ' + this.token);\n    return this.http.post<Response<any>>(\n      this.env.sceibaApi + this.prefix + '/term/edit/' + term.uuid,\n      term.entitystringify()\n      ,\n      this.httpOptions);\n  }\n\n  getCurrentUserPermissions(): Observable<Response<any>>{\n    const req = this.env.sceibaApi + this.prefix + '/user/permissions';\n    this.httpOptions.headers = this.httpOptions.headers.set('Authorization', 'Bearer ' + this.token);\n    return this.http.get<Response<any>>(req, this.httpOptions);\n  }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nimport { HttpService, Response } from '../core/public-api';\nimport { FilterHttpMap } from '../filters/public-api';\n\nimport { Environment } from '../core/public-api';\n\n@Injectable()\nexport class CatalogService extends HttpService {\n\n    constructor(private env: Environment, protected http: HttpClient) {\n        super(http);\n    }\n\n    getJournalsPage(count: number, page: number, parameters: Array<FilterHttpMap>): Observable<Response<any>> {\n        try {\n            let params = new HttpParams();\n            if (parameters) {\n                for (let i = 0; i < parameters.length; i++) {\n                    params = params.set(parameters[i].field, parameters[i].value)\n                }\n            }\n            const options = {\n                params: params.set('size', count.toString(10)).set('page', (page).toString(10))\n            };\n            return this.http.get<Response<any>>(this.env.sceibaApi + 'source/journals', options);\n        }\n        catch (error) {\n        }\n    }\n\n    getJournalsCount(): Observable<any> {\n        try {\n            return this.http.get<Response<any>>(this.env.sceibaApi + 'source/count');\n        } catch (error) {\n\n        }\n    }\n\n    getJournalsVocab(): Observable<Response<any>> {\n        return this.http.get<Response<any>>(this.env.sceibaApi + 'taxonomy/vocabulary/list');\n    }\n    getTerminosByVocab(vocabId: string): Observable<any> {\n        try {\n            return this.http.get<any>(this.env.sceibaApi + 'taxonomy/term/list/' + vocabId);\n        } catch (error) {\n\n        }\n    }\n\n    //   getPeople():Observable<People_Response>{\n    //     return this.http.get<People_Response>(this.dominio);\n\n    //   }\n    //   getPeopleById(id: number):Observable<Person_Response>{\n    //         return this.http.get<Person_Response>(this.dominio+'/'+id);\n\n    //     }\n\n    //   getPeoplepaginator(inicio: number, cant: number):Observable<People_Response>{\n    //       return this.http.get<People_Response>(this.dominio+'/'+inicio+'/'+cant);\n\n    //   }\n    //     addPeople(body):Observable<Response>{\n    //       return this.http.post<Response>(this.dominio,body);\n    //   }\n\n    getSourceByUUID(uuid): Observable<Response<any>> {\n        const req = this.env.sceibaApi + 'source/' + uuid;\n        return this.http.get<Response<any>>(req);\n    }\n    getSourcesOrgAggregation(uuid): Observable<Response<any>> {\n      const req = this.env.sceibaApi + 'source/aggs/org/' + uuid;\n      return this.http.get<Response<any>>(req);\n    }\n}\n","\nimport { NgModule } from '@angular/core';\n\nimport { TaxonomyService } from './taxonomy.service';\nimport { CatalogService } from './catalog.service';\n\n@NgModule({\n    providers: [\n        TaxonomyService,\n        CatalogService\n    ]\n})\nexport class BackendModule\n{ }\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nimport { HttpService, Response } from '../core/public-api';\nimport { Environment } from '../core/public-api';\n\n@Injectable()\nexport class NotificationService extends HttpService {\n\n\n    constructor(private env: Environment, protected http: HttpClient) {\n        super(http);\n    }\n\n    getNotificationsList(count: number, page: number): Observable<Response<any>> {\n        return this.http.get<Response<any>>(this.env.sceibaApi + 'notification/list');\n    }\n\n\n    setNotificationViewed(id: number): Observable<Response<any>>{\n        return this.http.get<Response<any>>(this.env.sceibaApi+'notification/viewed/'+id);\n    }\n}\n","\nimport { HttpBackend, HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { Environment, MessageService } from '../core/public-api';\nimport { Hit, Organization, SearchResponse } from '../entities/public-api';\n\n\n/**\n * The URL to the root api.\n */\nexport const ROOT_API: string = 'api';\n\n/**\n * The object with the URLs to the endpoint apis.\n */\nexport const ENDPOINT_APIS = {\n    organizations: ROOT_API + '/organizations',\n};\n\n/**\n * The backend service in order to communicate with a remote server over HTTP.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class OrganizationService\n{\n    /**\n     * The `httpOptions` object that contains the headers and will be passed to every `HttpClient` save method.\n     */\n    private readonly _httpOptions = {\n        headers: new HttpHeaders({\n            'Content-Type': 'application/json',\n            'Authorization': 'my-auth-token'\n        })\n    };\n\n    public constructor(private _http: HttpClient, private _messageService: MessageService)\n    { }\n\n    /**\n     * Gets data from the server.\n     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.\n     * @param url The endpoint api URL.\n     * @param optionalResult If an error occurs, lets the app keep running by returning a safe optional value\n     * as the observable result.\n     */\n    public get<T>(url: string, optionalResult: T): Observable<T>\n    {\n        return this._http.get<T>(url).pipe(\n            tap(_ => this.log(`fetched data from '${ url }'`)),\n        );\n    }\n\n    /**\n     * Gets data from the server that meets the specified `query`.\n     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.\n     * @param url The endpoint api URL.\n     * @param query The query to search.\n     * @param optionalResult If an error occurs, lets the app keep running by returning a safe optional value\n     * as the observable result.\n     */\n    public search<T>(url: string, query: string, optionalResult: T): Observable<T>\n    {\n        return this._http.get<T>(`${ url }/?${ query }`).pipe(\n            tap(_ => this.log(`searched '${ query }' in '${ url }'`)),\n        );\n    }\n\n    /**\n     * Adds `data` to the server. Expects the server to generate an `id` for the new `data`.\n     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.\n     * @param url The endpoint api URL.\n     * @param data The data to add.\n     * @param optionalResult If an error occurs, lets the app keep running by returning a safe optional value\n     * as the observable result.\n     */\n    public add<T>(url: string, data: T, optionalResult: T): Observable<T>\n    {\n        /* Expects the server to generate an `id` for the new `data`. */\n\n        return this._http.post<T>(url, data, this._httpOptions).pipe(\n            tap(_ => this.log(`added ${ data } to '${ url }'`)),\n        );\n    }\n\n    /**\n     * Updates `data` on the server. Returns an Observable of that `data` if the `data` is inserted (does\n     * not exist) on the server; otherwise, returns an Observable of null (if the `data` is only updated).\n     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.\n     * @param url The endpoint api URL.\n     * @param data The data to update.\n     * @param optionalResult If an error occurs, lets the app keep running by returning a safe optional value\n     * as the observable result.\n     */\n    public update<T>(url: string, data: T, optionalResult: T): Observable<T>\n    {\n        return this._http.put<T>(url, data, this._httpOptions).pipe(\n            tap(_ => this.log(`updated ${ data } to '${ url }'`)),\n        );\n    }\n\n    /**\n     * Deletes data from the server.\n     * If an error occurs, lets the app keep running by returning the specified safe `optionalResult`.\n     * @param url The endpoint api URL.\n     * @param id The unique identifier that identifies the data to delete.\n     * @param optionalResult If an error occurs, lets the app keep running by returning a safe optional value\n     * as the observable result.\n     */\n    public delete<T>(url: string, id: string, optionalResult: T): Observable<T>\n    {\n        return this._http.delete<T>(`${ url }/${ id }`, this._httpOptions).pipe(\n            tap(_ => this.log(`deleted data with id = ${ id } from '${ url }'`)),\n        );\n    }\n\n    /**\n     * Logs an `OrganizationService` message with the `MessageService`.\n     * @param message The message to log.\n     */\n    private log(message: string): void\n    {\n        this._messageService.add(`${ OrganizationService.name }: ${ message }.`);\n    }\n}\n\n\n@Injectable()\nexport class OrganizationServiceNoAuth {\n\n  http: HttpClient;\n  path = 'organizations'\n  constructor(private env: Environment, private handler: HttpBackend) {\n\n    this.http = new HttpClient(handler);\n  }\n\n  getOrganizationByUUID(uuid): Observable<Hit<Organization>> {\n    // const req = this.env.sceibaApi + this.prefix + \"/\" + uuid;\n    const req = this.env.sceibaApi + \"/pid/organization/\" + uuid;\n    return this.http.get<Hit<Organization>>(req);\n  }\n\n  getOrganizationRelationships(uuid, relType=null): Observable<Array<Hit<Organization>>> {\n    const req = this.env.sceibaApi + this.path + '/' + uuid + '/relationships';\n\n    if (relType != null){\n      let params = new HttpParams();\n      params = params.set('type', relType);\n      const options = {\n        params: params,\n      };\n      return this.http.get<Array<Hit<Organization>>>(req, options);\n    } else {\n      return this.http.get<Array<Hit<Organization>>>(req);\n    }\n\n  }\n\n  getOrganizationByPID(pid): Observable<Hit<Organization>> {\n    // const req = this.env.sceibaApi + this.prefix + \"/\" + uuid;\n    let params = new HttpParams();\n    params = params.set('value', pid);\n\n    const options = {\n      params: params,\n      // headers: this.headers\n    };\n\n    const req = this.env.sceibaApi + this.path + '/pid';\n    return this.http.get<Hit<Organization>>(req, options);\n  }\n\n  getOrganizations(params: HttpParams): Observable<SearchResponse<Organization>> {\n    const options = {\n      params: params,\n      // headers: this.headers\n    };\n    console.log(params);\n    const req = this.env.sceibaApi + 'search/' + this.path;\n    console.log(req);\n\n    return this.http.get<SearchResponse<Organization>>(req, options);\n  }\n\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { HttpBackend, HttpClient, HttpParams } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { Environment, Response } from '../core/public-api';\nimport { Organization, Record, SearchResponse, Source } from '../entities/public-api';\n\n\n@Injectable()\nexport class SearchService {\n\n  private prefix = 'search';\n\n  // private headers = new HttpHeaders(\n  //     {\n  //       'Accept': 'application/json',\n  //       'Content-Type': 'application/json',\n  //       'Access-Control-Allow-Origin': '*'\n  //     }\n  // );\n  public http: HttpClient;\n\n  public constructor(private env: Environment, private handler: HttpBackend) {\n\n    // TODO: hay una mejor manera de hacer esto, creando diferentes y propios HttpClients que\n    // tengan un comportamiento especifico (eg: sin/con autenticacion)\n    // ver: https://github.com/angular/angular/issues/20203#issuecomment-369754776\n    // otra solucion seria pasar parametros especiales como {ignore_auth = true} y que el\n    // interceptor actue en consecuencia... .\n    // https://github.com/angular/angular/issues/18155#issuecomment-382438006\n\n    this.http = new HttpClient(handler);\n  }\n\n  public getAggregation(field, size = 10): Observable<Response<any>> {\n    let params = new HttpParams();\n    const options = {\n      params: params.set('size', size.toString(10))\n    };\n    const req = this.env.sceibaApi + this.prefix + '/aggs/' + field;\n    return this.http.get<Response<any>>(req, options);\n  }\n\n  public getRecords(params: HttpParams): Observable<SearchResponse<Record>> {\n    const options = {\n      params: params,\n      // headers: this.headers\n    };\n    console.log(params)\n    const req = this.env.sceibaApi + this.prefix + '/records/';\n    return this.http.get<SearchResponse<Record>>(req, options);\n  }\n\n  public getSources(params: HttpParams): Observable<SearchResponse<Source>> {\n    const options = {\n      params: params,\n      // headers: this.headers\n    };\n    console.log(params);\n    const req = this.env.sceibaApi + this.prefix + '/sources';\n    return this.http.get<SearchResponse<Source>>(req, options);\n  }\n\n  public getOrganizations(params: HttpParams): Observable<SearchResponse<Organization>> {\n    const options = {\n      params: params,\n      // headers: this.headers\n    };\n    // console.log(params);\n    const req = this.env.sceibaApi + this.prefix + '/organizations/';\n    // console.log(req);\n\n    return this.http.get<SearchResponse<Organization>>(req, options);\n  }\n\n  public getOrganizationById(id: string): Observable<SearchResponse<Organization>> {\n    const req = this.env.cuorApi + 'organizations/' + id + '/';\n    // console.log(req);\n\n    return this.http.get<SearchResponse<Organization>>(req);\n  }\n  public updateOrganizations(data: Organization): Observable<Organization> {\n    //TODO: Do this method...\n    return of(null);\n  }\n\n  public getSourcesOrgAggregation(uuid): Observable<Response<any>> {\n    const req = this.env.sceibaApi + 'source/aggs/org/' + uuid;\n    return this.http.get<Response<any>>(req);\n  }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\nimport {\n  HttpBackend, HttpClient,\n  HttpHeaders,\n  HttpParams\n} from \"@angular/common/http\";\nimport { Injectable } from \"@angular/core\";\nimport { OAuthStorage } from \"angular-oauth2-oidc\";\nimport { Observable } from \"rxjs\";\nimport { Environment } from \"../core/env\";\nimport { Response } from '../core/public-api';\nimport {\n  Hit, SearchResponse, Source, SourceData, SourceVersion\n} from \"../entities/public-api\";\n\n\n\n\n@Injectable()\nexport class SourceService {\n  private prefix = \"source\";\n\n  private httpOptions = {\n    headers: new HttpHeaders({\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Bearer \",\n    }),\n  };\n\n  private token = \"\";\n  httpSearch: HttpClient;\n  constructor(\n    private env: Environment,\n    private http: HttpClient,\n    private handler: HttpBackend,\n    private oauthStorage: OAuthStorage\n  ) {\n    this.token = this.oauthStorage.getItem(\"access_token\");\n\n    // TODO: hay una mejor manera de hacer esto, creando diferentes y propios HttpClients que\n    // tengan un comportamiento especifico (eg: sin/con autenticacion)\n    // ver: https://github.com/angular/angular/issues/20203#issuecomment-369754776\n    // otra solucion seria pasar parametros especiales como {ignore_auth = true} y que el\n    // interceptor actue en consecuencia... .\n    // https://github.com/angular/angular/issues/18155#issuecomment-382438006\n\n    this.httpSearch = new HttpClient(handler);\n  }\n\n  getMySources(size: number = 10, page: number = 1, role='manager'): Observable<Response<any>> {\n    let params = new HttpParams();\n    params = params.set(\"size\", size.toString(10));\n    params = params.set(\"page\", page.toString(10));\n\n    const options = {\n      params: params,\n      // headers: this.headers\n    };\n    // this.httpOptions.headers = this.httpOptions.headers.set('Authorization', 'Bearer ' + this.token);\n\n    const req = this.env.sceibaApi + this.prefix + \"/me/\"+ role + \"/ALL\";\n    return this.http.get<Response<any>>(req, options);\n  }\n\n  getMySourcesAllRoles(): Observable<Response<any>> {\n    const req = this.env.sceibaApi + this.prefix + \"/me/ALL\";\n    return this.http.get<Response<any>>(req);\n  }\n\n\n  private adhocstringgify(source: SourceVersion) {\n    let orgs: string = JSON.stringify(source.data.organizations);\n    console.log(\"-------------------\", orgs);\n\n    let all = source.entitystringify();\n    console.log(\"-------------------\", all);\n\n    let from = all.search('\"organizations\"') + 16;\n\n    let p1 = all.substr(0, from);\n    console.log(p1);\n\n    let p2 = all.substr(from);\n    console.log(p2);\n\n    let len = this.count_to_len(p2);\n    console.log(len);\n\n    let p3 = all.substr(from + len);\n    console.log(p3);\n\n    return p1 + orgs + p3;\n  }\n  private count_to_len(p2: string) {\n    if (p2[0] == \"[\") {\n      let len = 1;\n      let count = 1;\n      for (let index = 1; index < p2.length; index++) {\n        const element = p2[index];\n        len++;\n        if (p2[index] === \"[\") count++;\n        if (p2[index] === \"]\") count--;\n        if (count === 0) return len;\n      }\n    }\n  }\n  editSource(source: SourceVersion, uuid: any): Observable<Response<any>> {\n    // this.adhocstringgify(source)\n    // console.log(source)\n    // let valu = source.entitystringify();\n    // console.log(\"s: \", valu)\n\n    const req = this.env.sceibaApi + this.prefix + \"/\" + uuid + \"/edit\";\n    return this.http.post<Response<any>>(\n      req,\n      this.adhocstringgify(source),\n      this.httpOptions\n    );\n  }\n\n  makeSourceAsApproved(source: SourceVersion,uuid): Observable<Response<any>> {\n    const req = this.env.sceibaApi + this.prefix + \"/\" + uuid + \"/publish\";\n    return this.http.post<Response<any>>(\n      req,\n      this.adhocstringgify(source),\n      this.httpOptions\n    );\n  }\n\n  makeSourceAsUnApproved(source: SourceVersion,uuid): Observable<Response<any>> {\n    const req = this.env.sceibaApi + this.prefix + \"/\" + uuid + \"/unpublish\";\n    return this.http.post<Response<any>>(\n      req,\n      this.adhocstringgify(source),\n      this.httpOptions\n    );\n  }\n\n  newSource(source: SourceVersion, uuid, role): Observable<Response<any>> {\n    let params = new HttpParams();\n    params = params.set(\"pid\", uuid.toString());\n    params = params.set(\"role\", role.toString());\n\n    const options = {\n      params: params,\n      // headers: this.headers\n    };\n\n    const req = this.env.sceibaApi + this.prefix + \"/new\";\n    return this.http.post<Response<any>>(\n      req,\n      this.adhocstringgify(source),\n      options\n    );\n  }\n\n  getIssnInfo(issn): Observable<Response<any>> {\n    const req = this.env.sceibaApi + this.prefix + \"/journal/issn/\" + issn;\n    return this.http.get<Response<any>>(req);\n  }\n\n  getSourcesByTermUUID(uuid): Observable<Response<any>> {\n    const req = this.env.sceibaApi + this.prefix + \"/relations/\" + uuid;\n    return this.http.get<Response<any>>(req);\n  }\n\n  getSourceVersions(uuid): Observable<Response<any>> {\n    this.httpOptions.headers = this.httpOptions.headers.set(\n      \"Authorization\",\n      \"Bearer \" + this.token\n    );\n    const req = this.env.sceibaApi + this.prefix + \"/\" + uuid + \"/versions\";\n    return this.http.get<Response<any>>(req, this.httpOptions);\n  }\n\n  countSourcesByTerm(uuid, level = 0): Observable<Response<any>> {\n    let params = new HttpParams();\n    const options = {\n      params: params.set(\"level\", level.toString(10)),\n    };\n    const req =\n      this.env.sceibaApi + this.prefix + \"/relations/\" + uuid + \"/count\";\n    return this.http.get<Response<any>>(req, options);\n  }\n\n  getSourceByUUID(uuid): Observable<Response<any>> {\n    // const req = this.env.sceibaApi + this.prefix + \"/\" + uuid;\n    const req = this.env.sceibaApi  + this.prefix + '/' + uuid;\n    return this.http.get<Response<SourceData>>(req);\n  }\n\n  permissionGetSourceEditors(uuid): Observable<Response<any>> {\n    const req = this.env.sceibaApi  + this.prefix + '/permission/editor/' + uuid +'/users';\n    return this.http.get<Response<any>>(req);\n  }\n\n  permissionSetSourceEditor(uuid, user, allow= false): Observable<Response<any>> {\n    const req = this.env.sceibaApi  + this.prefix + '/permission/' + user + '/editor/' + uuid + ((allow) ? '/allow' : '/deny');\n    return this.http.post<Response<any>>(\n      req,\n      null,\n      this.httpOptions\n    );\n  }\n\n  permissionGetSourceManagers(uuid): Observable<Response<any>> {\n    const req = this.env.sceibaApi  + this.prefix + '/permission/manager/' + uuid +'/users';\n    return this.http.get<Response<any>>(req);\n  }\n\n  permissionSetSourceManager(uuid, user, allow= false): Observable<Response<any>> {\n    const req = this.env.sceibaApi  + this.prefix + '/permission/' + user + '/manager/' + uuid + ((allow) ? '/allow' : '/deny');\n    return this.http.post<Response<any>>(\n      req,\n      null,\n      this.httpOptions\n    );\n  }\n\n  permissionGetOrganizationManagers(uuid): Observable<Response<any>> {\n    const req = this.env.sceibaApi  + this.prefix + '/permission/organization/' + uuid +'/users';\n    return this.http.get<Response<any>>(req);\n  }\n\n  permissionSetOrganizationManager(uuid, user, allow= false): Observable<Response<any>> {\n    const req = this.env.sceibaApi  + this.prefix + '/permission/' + user + '/organization/' + uuid + ((allow) ? '/allow' : '/deny');\n    return this.http.post<Response<any>>(\n      req,\n      null,\n      this.httpOptions\n    );\n  }\n\n  permissionGetTermManagers(uuid): Observable<Response<any>> {\n    const req = this.env.sceibaApi  + this.prefix + '/permission/term/' + uuid +'/users';\n    return this.http.get<Response<any>>(req);\n  }\n\n  permissionSetTermManager(uuid, user, allow= false): Observable<Response<any>> {\n    const req = this.env.sceibaApi  + this.prefix + '/permission/' + user + '/term/' + uuid + ((allow) ? '/allow' : '/deny');\n    return this.http.post<Response<any>>(\n      req,\n      null,\n      this.httpOptions\n    );\n  }\n\n}\n\n\n@Injectable()\nexport class SourceServiceNoAuth {\n\n  http: HttpClient;\n  constructor(private env: Environment, private handler: HttpBackend) {\n\n    // TODO: hay una mejor manera de hacer esto, creando diferentes y propios HttpClients que\n    // tengan un comportamiento especifico (eg: sin/con autenticacion)\n    // ver: https://github.com/angular/angular/issues/20203#issuecomment-369754776\n    // otra solucion seria pasar parametros especiales como {ignore_auth = true} y que el\n    // interceptor actue en consecuencia... .\n    // https://github.com/angular/angular/issues/18155#issuecomment-382438006\n\n    this.http = new HttpClient(handler);\n  }\n\n  getSourceByUUID(uuid): Observable<Hit<SourceData>> {\n    // const req = this.env.sceibaApi + this.prefix + \"/\" + uuid;\n    const req = this.env.sceibaApi + \"/pid/source/\" + uuid;\n    return this.http.get<Hit<SourceData>>(req);\n  }\n\n  getSourceByISSN(issn): Observable<Hit<SourceData>> {\n    // const req = this.env.sceibaApi + this.prefix + \"/\" + uuid;\n    const req = this.env.sceibaApi + \"source/byissn/\" + issn;\n    return this.http.get<Hit<SourceData>>(req);\n  }\n\n  getSourceByPID(pid): Observable<Hit<SourceData>> {\n    // const req = this.env.sceibaApi + this.prefix + \"/\" + uuid;\n    let params = new HttpParams();\n    params = params.set('value', pid);\n\n    const options = {\n      params: params,\n      // headers: this.headers\n    };\n\n    const req = this.env.sceibaApi + 'source/pid';\n    return this.http.get<Hit<SourceData>>(req, options);\n  }\n\n\n  getSources(params: HttpParams): Observable<SearchResponse<Source>> {\n    const options = {\n      params: params,\n      // headers: this.headers\n    };\n    console.log(params);\n    const req = this.env.sceibaApi + 'search/sources';\n    return this.http.get<SearchResponse<Source>>(req, options);\n  }\n\n  getSourcesStats(topOrgId): Observable<Response<any>> {\n    let params = new HttpParams();\n    params = params.set('org', topOrgId);\n\n    const options = {\n      params: params,\n      // headers: this.headers\n    };\n    const req = this.env.sceibaApi + 'source/stats';\n    return this.http.get<Response<any>>(req, options);\n  }\n\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Type } from '@angular/core';\n\nexport class FilterItem {\n    constructor(public component: Type<any>, public data: any)\n    { }\n}\n\nexport class FilterHttpMap{\n    field: string;\n    value: any;\n\n    constructor(field: string, value: string){\n        this.field=field;\n        this.value=value;\n    }\n}","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Injectable, Output, EventEmitter } from '@angular/core';\n\nimport { FilterHttpMap } from './filter-item';\n\n@Injectable()\nexport class FiltersService {\n\n    params: Array<FilterHttpMap> = new Array();\n    // httpParams: HttpParams = new HttpParams();\n    autocompleteFilter: Array<AutocompleteFilter> = new Array();\n\n    @Output() paramsChanged: EventEmitter<Array<FilterHttpMap>> = new EventEmitter();\n\n    constructor()\n    { }\n\n    /**\n     * \n     * @param field el nombre del campo que se esta filtrando (title, etc...)\n     * @param value el valor del filtro\n     * @param emitEvent si se emite o no el evento de cambio de parametros, para los que estan suscritos.  \n     */\n    changeFilter(field? : string, value?: any, emitEvent:boolean = true): void{\n        if(this.params.find(x => x.field == field)){\n            this.params.find(x => x.field == field).value = value;\n        }\n        else if(field && value){\n            this.params.push(new FilterHttpMap(field, value));\n        }\n        /*\n        crear el httpParams... a partir del params... \n        */\n        // this.httpParams.set(field, value);\n        \n        if(emitEvent) \n            this.paramsChanged.emit(this.params);\n    }\n\n    deleteParameter(field:string):void{\n        var paramToDelete = this.params.find(x => x.field == field);\n        if(paramToDelete){\n            this.params.splice(this.params.indexOf(this.params.find(x => x.field == field)), 1)\n            this.paramsChanged.emit(this.params);\n        }\n    }\n\n\n    /**\n     * Especifico para el filtro de terminos.\n     * @param termValue identificador del termino por el cual se esta filtrando\n     * @param isdelete especifica si se va a eliminar o adicionar el @param termValue\n     */\n    changeAutocompleteFilter(name: string, value: string){\n        let isexist = false;\n        this.autocompleteFilter.forEach(filter =>{\n            if(filter.name == name){\n                filter.value = value\n                isexist = true;\n            }\n        });\n        if(!isexist){\n            this.autocompleteFilter.push(new AutocompleteFilter(name,value))\n        }\n        this.createAutocompleteFilterValue();\n    }\n\n    deleteAutocompleteFilter(name: string){\n        this.autocompleteFilter.splice(this.autocompleteFilter.indexOf(this.autocompleteFilter.find(x => x.name == name)), 1)\n        this.createAutocompleteFilterValue();\n    }\n    \n    createAutocompleteFilterValue(){\n        let emitValue = this.autocompleteFilter[0].value;\n        for (let index = 1; index < this.autocompleteFilter.length; index++) {\n            emitValue = emitValue + ','+ this.autocompleteFilter[index].value;\n\n        }\n\n        this.changeFilter('terms', emitValue, true);\n    }\n}\n\nexport class AutocompleteFilter\n{\n    name: string;\n    value: string;\n\n    constructor(name: string, value: string){\n        this.name = name;\n        this.value = value;\n    }\n}","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Injectable, Output, EventEmitter } from '@angular/core';\n\n@Injectable()\nexport class FilterContainerService {\n\n    @Output() emitter: EventEmitter<number> = new EventEmitter();\n    \n    constructor()\n    { }\n\n    filterDeleted(filterIndex:number): void{\n        this.emitter.emit(filterIndex);\n    }\n}\n","\nimport { Component, OnInit, Input } from '@angular/core';\nimport { FilterComponent } from '../filter.component';\nimport { FiltersService } from '../filters.service';\nimport { FilterContainerService } from '../filter-container.service';\n\n@Component({\n    selector: 'toco-boolean-filter',\n    templateUrl: './boolean-filter.component.html',\n    styleUrls: ['./boolean-filter.component.scss']\n})\nexport class BooleanFilterComponent implements OnInit , FilterComponent {\n    @Input() data: any;\n    operator: boolean = true;\n    operator_name: string;\n    direction:string = 'column';\n    classDireccion:string;\n    constructor(private filterService : FiltersService,\n        private filterContainerService: FilterContainerService) { }\n\n    ngOnInit() {\n        this.operator = this.data.value;\n        this.operator_name = this.data.name[0];\n        if(this.data.direction){\n            this.direction = 'row';\n            this.classDireccion = '-horizontal';\n        } \n    }\n    remove_component(){\n        this.filterService.deleteParameter(this.data.field);\n        this.filterContainerService.filterDeleted(this.data.index)\n    }\n    \n    change_operator_name(){\n        this.operator ? this.operator_name = this.data.name[1] : this.operator_name = this.data.name[0];\n        let value = this.operator? 'OR' : 'AND';\n        this.filterService.changeFilter(this.data.field, value );\n    }\n    \n    changeInterruptor(){\n        this.operator = !this.operator;\n        this.change_operator_name();\n    }\n}\n","\nimport { Directive, ViewContainerRef } from '@angular/core';\n\n@Directive({\n    selector: '[toco-Filter]'\n})\nexport class FilterDirective\n{\n    constructor(public viewContainerRef : ViewContainerRef)\n    { }\n}\n","\nimport { Component, OnInit, Input } from '@angular/core';\n\nimport { FilterComponent } from '../filter.component';\nimport { FiltersService } from '../filters.service';\nimport { FilterContainerService } from '../filter-container.service';\n\n\n@Component({\n    selector: 'toco-title-filter',\n    templateUrl: './title-filter.component.html',\n    styleUrls: ['./title-filter.component.scss']\n})\nexport class TitleFilterComponent implements OnInit, FilterComponent {\n    @Input() data: any;\n    type: string;\n    placeholder:  string;\n    text:string;\n    constructor(private filterService : FiltersService,\n                            private filterContainerService: FilterContainerService )\n    { }\n\n    ngOnInit() {\n        this.type = this.data.type;\n        this.placeholder = this.data.placeholder;\n        this.data.value='';\n    }\n\n    remove_component(){\n        this.filterService.deleteParameter(this.data.field);\n        this.filterContainerService.filterDeleted(this.data.index)\n\n    }\n    onChange(){\n        this.filterService.changeFilter(this.data.field, this.data.value);\n    }\n}\n","\nimport { Component, OnInit, Input } from '@angular/core';\n\nimport { FilterComponent } from '../filter.component';\nimport { FiltersService } from '../filters.service';\nimport { FilterContainerService } from '../filter-container.service';\n\n@Component({\n    selector: 'toco-select-filter-old',\n    templateUrl: './select-filter.component.html',\n    styleUrls: ['./select-filter.component.scss']\n})\nexport class SelectFilterOldComponent implements OnInit, FilterComponent {\n    @Input() data: any;\n    type: string = '';\n    placeholder:  string = '';\n    text:string = '';\n    multiple = false;\n    selectValue:string\n    selectOptions: string[] = [''];\n    \n    constructor(private filterService : FiltersService,\n        private filterContainerService: FilterContainerService  )\n    { }  \n\n    ngOnInit() {\n        if(this.data.type)          this.type = this.data.type;\n        if(this.data.placeholder)   this.placeholder = this.data.placeholder;\n        if(this.multiple)           this.multiple = true;\n        if(this.data.selectOptions) this.selectOptions = this.data.selectOptions;\n        this.data.value='';\n    }\n    remove_component(){\n        this.filterService.deleteParameter(this.data.field);\n        this.filterContainerService.filterDeleted(this.data.index)\n    }\n    optionSelect(){\n        if(this.multiple){\n            //adaptar el value\n        }    \n        this.filterService.changeFilter(this.data.field, this.data.value);\n    }\n}\n","\nimport { Component, OnInit, Input } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport { startWith, map } from 'rxjs/operators';\n\nimport { FilterComponent } from '../filter.component';\nimport { FiltersService } from '../filters.service';\nimport { FilterContainerService } from '../filter-container.service';\n\n@Component({\n    selector: 'toco-select-autocomplete-filter',\n    templateUrl: './select-autocomplete-filter.component.html',\n    styleUrls: ['./select-autocomplete-filter.component.scss']\n})\nexport class SelectAutocompleteFilterComponent implements OnInit, FilterComponent {\n    @Input() data: any;\n    type: string = '';\n    placeholder:  string = '';\n    text:string = '';\n    multiple = false;\n    selectValue:string\n    selectOptions: ValueInformation[] = [];\n    myControl = new FormControl();\n    filteredOptions: Observable<ValueInformation[]>;\n    chipsList: ValueInformation[] = [];\n    inputId: string;\n    \n    constructor(private filterService : FiltersService,\n        private filterContainerService: FilterContainerService  )\n    { }  \n\n    ngOnInit() {\n        if(this.data.type)          this.type = this.data.type;\n        if(this.data.placeholder)   this.placeholder = this.data.placeholder;\n        if(this.multiple)           this.multiple = true;\n        if(this.data.selectOptions) this.selectOptions = this.data.selectOptions;\n        this.data.value='';\n        this.filteredOptions = this.myControl.valueChanges.pipe<string,ValueInformation[]>(\n            startWith(''),\n            map(value => this._filter(value))\n        );\n        this.inputId = this.placeholder.trim().toLowerCase();\n    }\n    private _filter(value: string): ValueInformation[] {\n        const filterValue = value.toLowerCase();\n        return this.selectOptions.filter(option => option.name.toLowerCase().includes(filterValue));\n    }\n    remove_component(){\n        this.filterService.deleteParameter(this.data.field);\n        this.filterContainerService.filterDeleted(this.data.index)\n        this.filterService.changeAutocompleteFilter(this.data.idVocab, 'OR');\n    }\n    optionSelect(){\n        var valueEmiter ='OR';\n        this.chipsList.forEach(chip =>{\n            valueEmiter= valueEmiter+','+chip.id;\n        });\n        this.filterService.changeAutocompleteFilter(this.data.idVocab, valueEmiter);\n    }\n    addChips(value: ValueInformation){\n        this.chipsList.unshift(value);\n        this.myControl.setValue('');\n        this.filteredOptions = this.myControl.valueChanges.pipe(\n            startWith(''),\n            map(value => this._filter(value))\n        );\n        document.getElementById(this.inputId).blur();\n        this.optionSelect()\n    }\n    removeChip(index: number){\n        this.chipsList.splice(index,1);\n        this.optionSelect();\n    }\n\n}\n\nexport interface ValueInformation{\n    id: string;\n    name:string;\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Component, OnInit, Input } from '@angular/core';\n\nimport { FilterComponent } from '../filter.component';\nimport { FiltersService } from '../filters.service';\nimport { FilterContainerService } from '../filter-container.service';\nimport { TermNode, Term } from '../../entities/public-api';\nimport { FlatTreeControl } from '@angular/cdk/tree';\nimport { MatTreeFlattener, MatTreeFlatDataSource } from '@angular/material';\nimport { of, Observable } from 'rxjs';\nimport { SelectionModel, CollectionViewer } from '@angular/cdk/collections';\nimport { FormControl } from '@angular/forms';\nimport { startWith, map } from 'rxjs/operators';\n\nexport interface FlatTreeNodeFilter {\n  name: string;\n  level: number;\n  expandable: boolean;\n  term: Term;\n}\ninterface TreeFilterData {\n  selectOptions: TermNode[];\n  type: string;\n  placeholder: string;\n  text: string;\n  field: string;\n  index: number;\n  value: any;\n  idVocab: number;\n}\n\n@Component({\n  selector: 'toco-tree-filter',\n  templateUrl: './tree-filter.component.html',\n  styleUrls: ['./tree-filter.component.scss']\n})\nexport class TreeFilterComponent implements OnInit, FilterComponent {\n  @Input() data: TreeFilterData;\n\n  chipsList: [];\n\n  treeControl: FlatTreeControl<FlatTreeNodeFilter>;\n  treeFlattener: MatTreeFlattener<TermNode, FlatTreeNodeFilter>;\n  dataSource: MatTreeFlatDataSource<TermNode, FlatTreeNodeFilter>;\n  checklistSelection = new SelectionModel<FlatTreeNodeFilter>(true /* multiple */);\n\n  myControl = new FormControl();\n\n  inputId: string;\n\n  constructor(\n    private filterService: FiltersService,\n    private filterContainerService: FilterContainerService) {\n    this.treeFlattener = new MatTreeFlattener(\n      this.transformer,\n      this.getLevel,\n      this.isExpandable,\n      this.getChildren);\n\n    this.treeControl = new FlatTreeControl(this.getLevel, this.isExpandable);\n    this.dataSource = new MatTreeFlatDataSource(this.treeControl, this.treeFlattener);\n  }\n\n  ngOnInit() {\n    this.data.value = '';\n    this.dataSource.data = this.data.selectOptions;\n    this.myControl.valueChanges.subscribe(\n      (value: any) => {\n        this._filter(value);\n      },\n      (error: any) => { },\n      () => {\n      }\n    );\n    this.inputId = this.data.placeholder.trim().toLowerCase();\n  }\n\n  private _filter(value: string): void {\n    const filterValue = value.toLowerCase();\n    console.log(filterValue);\n\n    const newData = this.data.selectOptions.filter(node => this._include_node(filterValue, node));\n\n    this.dataSource.data = newData;\n    this._fix_selection();\n  }\n  /** return true if any children is include, false otherwise */\n  private _include_node(filter: string, node: TermNode): boolean {\n    if (node.term.identifier.toLowerCase().includes(filter)) {\n      return true;\n    } else if (node.children) {\n      for (const child of node.children) {\n        if (this._include_node(filter, child)) {\n          return true;\n        }\n      }\n    } else {\n      return false;\n    }\n    return false;\n  }\n\n  private _fix_selection() {\n    for (const node of this.treeControl.dataNodes) {\n      console.log(node);\n    }\n\n    // if (this.checklistSelection.selected) {\n    //   const old = this.checklistSelection.selected.find(\n    //     (value: FlatTreeNode, index: number, obj: FlatTreeNode[]) => value.term.id === node.term.id\n    //   );\n    //   if (old !== undefined) {\n    //     this.checklistSelection.deselect(old);\n    //     this.checklistSelection.select(result);\n    //   }\n    // }\n  }\n  remove_component() {\n    this.filterService.deleteParameter(this.data.field);\n    this.filterContainerService.filterDeleted(this.data.index);\n\n  }\n  onChange() {\n    this.filterService.changeFilter(this.data.field, this.data.value);\n  }\n\n  emitSelection() {\n    console.log(this.checklistSelection.selected);\n    var valueEmiter = 'OR';\n    this.checklistSelection.selected.forEach(node => {\n      valueEmiter = valueEmiter + ',' + node.term.id;\n    });\n    this.filterService.changeAutocompleteFilter(this.data.idVocab.toString(10), valueEmiter);\n  }\n\n\n  /** Transform the data to something the tree can read. */\n  transformer(node: TermNode, level: number) {\n    const result = {\n      name: node.term.identifier,\n      level: level,\n      expandable: (node.children.length > 0),\n      term: node.term,\n    };\n    return result;\n  }\n\n  /** Get the level of the node */\n  getLevel(node: FlatTreeNodeFilter) {\n    return node.level;\n  }\n\n  /** Get whether the node is expanded or not. */\n  isExpandable(node: FlatTreeNodeFilter) {\n    return node.expandable;\n  }\n\n  /** Get whether the node has children or not. */\n  hasChild(index: number, node: FlatTreeNodeFilter) {\n    return node.expandable;\n  }\n\n  /** Get the children for the node. */\n  getChildren(node: TermNode) {\n    return of(node.children);\n  }\n\n  /** Whether all the descendants of the node are selected. */\n  descendantsAllSelected(node: FlatTreeNodeFilter): boolean {\n    const descendants = this.treeControl.getDescendants(node);\n    const descAllSelected = descendants.every(child =>\n      this.checklistSelection.isSelected(child)\n    );\n    return descAllSelected;\n  }\n\n  /** Whether part of the descendants are selected */\n  descendantsPartiallySelected(node: FlatTreeNodeFilter): boolean {\n    const descendants = this.treeControl.getDescendants(node);\n    const result = descendants.some(child => this.checklistSelection.isSelected(child));\n    return result && !this.descendantsAllSelected(node);\n  }\n\n  /** Select/deselect all the descendants node */\n  itemSelectionToggle(node: FlatTreeNodeFilter): void {\n    this.checklistSelection.toggle(node);\n    const descendants = this.treeControl.getDescendants(node);\n    this.checklistSelection.isSelected(node)\n      ? this.checklistSelection.select(...descendants)\n      : this.checklistSelection.deselect(...descendants);\n\n    // Force update for the parent\n    descendants.every(child =>\n      this.checklistSelection.isSelected(child)\n    );\n    this.checkAllParentsSelection(node);\n    this.emitSelection();\n\n  }\n\n  /** Check all the parents to see if they changed */\n  leafItemSelectionToggle(node: FlatTreeNodeFilter): void {\n    this.checklistSelection.toggle(node);\n    this.checkAllParentsSelection(node);\n    this.emitSelection();\n  }\n\n  /* Checks all the parents when a leaf node is selected/unselected */\n  checkAllParentsSelection(node: FlatTreeNodeFilter): void {\n    let parent: FlatTreeNodeFilter | null = this.getParentNode(node);\n    while (parent) {\n      this.checkRootNodeSelection(parent);\n      parent = this.getParentNode(parent);\n    }\n  }\n\n  /** Check root node checked state and change it accordingly */\n  checkRootNodeSelection(node: FlatTreeNodeFilter): void {\n    const nodeSelected = this.checklistSelection.isSelected(node);\n    const descendants = this.treeControl.getDescendants(node);\n    const descAllSelected = descendants.every(child =>\n      this.checklistSelection.isSelected(child)\n    );\n    if (nodeSelected && !descAllSelected) {\n      this.checklistSelection.deselect(node);\n    } else if (!nodeSelected && descAllSelected) {\n      this.checklistSelection.select(node);\n    }\n  }\n\n  /* Get the parent node of a node */\n  getParentNode(node: FlatTreeNodeFilter): FlatTreeNodeFilter | null {\n    const currentLevel = this.getLevel(node);\n\n    if (currentLevel < 1) {\n      return null;\n    }\n\n    const startIndex = this.treeControl.dataNodes.indexOf(node) - 1;\n\n    for (let i = startIndex; i >= 0; i--) {\n      const currentNode = this.treeControl.dataNodes[i];\n\n      if (this.getLevel(currentNode) < currentLevel) {\n        return currentNode;\n      }\n    }\n    return null;\n  }\n  removeChip(i){\n    console.log(i);\n  }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Component, OnInit, ComponentFactoryResolver, ViewChild, Output, EventEmitter } from '@angular/core';\n\nimport { FilterComponent } from '../filter.component';\nimport { FilterItem } from '../filter-item';\nimport { FilterDirective } from '../filter.directive';\nimport { TitleFilterComponent } from '../title-filter/title-filter.component';\nimport { BooleanFilterComponent } from '../boolean-filter/boolean-filter.component';\nimport { SelectFilterOldComponent } from '../select-filter/select-filter.component';\nimport { SelectAutocompleteFilterComponent } from '../select-autocomplete-filter/select-autocomplete-filter.component';\nimport { FilterContainerService } from '../filter-container.service';\nimport { TreeFilterComponent } from '../tree-filter/tree-filter.component';\n\n@Component({\n  selector: 'toco-filter-container',\n  templateUrl: './filter-container.component.html',\n  styleUrls: ['./filter-container.component.scss']\n})\nexport class FilterContainerComponent implements OnInit {\n\n  // current_filters: Array<FilterItem>;\n  filters_data;\n\n  @Output() filter_url: EventEmitter<string> = new EventEmitter();\n\n  @ViewChild(FilterDirective, { static: true }) adHost: FilterDirective;\n\n  constructor(protected componentFactoryResolver: ComponentFactoryResolver,\n    protected childrenService: FilterContainerService) { }\n\n  ngOnInit() {\n    this.filters_data = [];\n    this.childrenService.emitter.subscribe(filterIndex => {\n      this.deleteFilter(filterIndex)\n    });\n\n  }\n\n  addFilter(index) {\n    let data = this.filters_data[index];\n\n    let viewContainerRef = this.adHost.viewContainerRef;\n    data.pos = viewContainerRef.length\n\n    let f = this.newFilter(data);\n    // this.current_filters.push(f);\n    let componentFactory = this.componentFactoryResolver.resolveComponentFactory(f.component);\n\n    let componentRef = viewContainerRef.createComponent(componentFactory);\n    (<FilterComponent>componentRef.instance).data = f.data;\n    //this.delete_item_of_filters(pos);\n\n    this.filters_data[index].is_enabled = false\n  }\n\n  newFilter(data_filter): FilterItem {\n    data_filter.viewContainerRef = this.adHost.viewContainerRef;\n    let f = null;\n    switch (data_filter.type) {\n      case 'select': { f = new FilterItem(SelectFilterOldComponent, data_filter); break; }\n      case 'boolean': { f = new FilterItem(BooleanFilterComponent, data_filter); break; }\n      case 'select-autocomplete': { f = new FilterItem(SelectAutocompleteFilterComponent, data_filter); break; }\n      case 'tree': { f = new FilterItem(TreeFilterComponent, data_filter); break; }\n      default: f = new FilterItem(TitleFilterComponent, data_filter);\n    }\n    return f;\n  }\n\n  deleteFilter(index) {\n    let last_pos = this.filters_data[index].pos\n\n    this.adHost.viewContainerRef.remove(this.filters_data[index].pos);\n    this.filters_data[index].pos = -1\n    this.filters_data[index].is_enabled = true\n\n    for (let i = 0; i < this.filters_data.length; i++) {\n      if (!this.filters_data[i].is_enabled && this.filters_data[i].pos > last_pos) {\n        this.filters_data[i].pos = this.filters_data[i].pos - 1\n      }\n\n    }\n  }\n}\n","\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/public-api';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { BooleanFilterComponent } from './boolean-filter/boolean-filter.component';\nimport { FilterContainerComponent } from './filter-container/filter-container.component';\nimport { SelectAutocompleteFilterComponent } from './select-autocomplete-filter/select-autocomplete-filter.component';\nimport { SelectFilterOldComponent } from './select-filter/select-filter.component';\nimport { TitleFilterComponent } from './title-filter/title-filter.component';\nimport { FilterContainerService } from './filter-container.service';\nimport { FiltersService } from './filters.service';\nimport { FilterDirective } from './filter.directive';\nimport { TreeFilterComponent } from './tree-filter/tree-filter.component';\n\n@NgModule({\n    declarations: [\n        BooleanFilterComponent,\n        FilterContainerComponent,\n        SelectAutocompleteFilterComponent,\n        SelectFilterOldComponent,\n        TitleFilterComponent,\n        FilterDirective,\n        TreeFilterComponent\n    ],\n\n    entryComponents:[\n        BooleanFilterComponent,\n        SelectAutocompleteFilterComponent,\n        SelectFilterOldComponent,\n        TitleFilterComponent,\n        TreeFilterComponent\n    ],\n\n    imports: [\n        SharedModule,\n        // InfiniteScrollModule,\n        ReactiveFormsModule\n    ],\n\n    exports: [\n        BooleanFilterComponent,\n        FilterContainerComponent,\n        SelectAutocompleteFilterComponent,\n        SelectFilterOldComponent,\n        TitleFilterComponent,\n        FilterDirective,\n        TreeFilterComponent\n    ],\n\n    providers: [\n        FiltersService,\n        FilterContainerService\n    ]\n})\nexport class FiltersModule\n{ }\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Input, Type } from '@angular/core';\nimport { FormGroup, FormArray, AbstractControl, FormControl } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { Params } from '../core/utils/helpers';\nimport { IconService } from '../core/services/icon.service';\n\nimport { ContainerControl } from './container/container.control';\n\n/**\n * Defines a form section that represents the `FormGroup` or `FormArray` class. \n */\nexport type FormSection = FormGroup | FormArray;\n\n/**\n * A collection of key/value elements, where the key is the validator name and the value is the value \n * that the validator needs to check. \n */\n export type ValidatorArguments = Params<any>;\n\n/**\n * An enum that describes how inline contents of a block are horizontally aligned if the contents \n * do not completely fill the line box. \n */\nexport enum TextAlign\n{\n    /**\n     * The inline contents are aligned to the left edge of the line box. In vertical text, \n     * `left` aligns to the edge of the line box that would be the start edge for left-to-right text. \n     */\n    left = 'left',\n\n    /**\n     * The inline contents are centered within the line box. \n     */\n    center = 'center',\n\n    /**\n     * The inline contents are aligned to the right edge of the line box. In vertical text, \n     * `right` aligns to the edge of the line box that would be the end edge for left-to-right text. \n     */\n    right = 'right',\n\n    /**\n     * The text is justified. \n     */\n    justify = 'justify'\n}\n\n/**\n * An enum that represents the content position of an element inside of a `FormFieldControl`. \n */\nexport enum ContentPosition\n{\n    /**\n     * Adding the `prefix` option to an element will designate it as the prefix. \n     */\n    prefix = 'matPrefix',\n\n    /**\n     * Adding the `suffix` option to an element will designate it as the suffix. \n     */\n    suffix = 'matSuffix',\n\n    /**\n     * Adding the `none` option to an element will not show it. \n     */\n    none = 'none'\n}\n\n/**\n * An enum that represents the icon source type. \n */\nexport enum IconSource\n{\n    /**\n     * The icon is obtained from an internal source. In this case, it uses an icon that was copied to \n     * the 'assets' folder of the project, and it was registered using the `IconService.registerIcons` method. \n     */\n    internal = 'internal',\n\n    /**\n     * The icon is obtained from an external source. In this case, \n     * it uses a 'Material Icon' from 'https://fonts.googleapis.com/icon?family=Material+Icons'. \n     */\n    external = 'external'\n}\n\n/**\n * Data structure for holding an icon. \n */\nexport class IconValue\n{\n    /**\n     * Returns the icon source type. \n     * By default, its value is `IconSource.internal`. \n     */\n    public source: IconSource;\n\n    /**\n     * Returns the icon position type. \n     * By default, its value is `ContentPosition.prefix`. \n     */\n    public position: ContentPosition;\n\n    /**\n     * Returns the icon name. \n     * By default, its value is `IconService.defaultIconName`. \n     */\n    public name: string;\n\n    /**\n     * Creates a new instance of the `IconValue` class. \n     * @param s The icon source type. By default, its value is `IconSource.internal`. \n     * @param p The icon position type. By default, its value is `ContentPosition.prefix`. \n     * @param n The icon name. By default, its value is `IconService.defaultIconName`. \n     */\n    public constructor(\n        s: IconSource = IconSource.internal,\n        p: ContentPosition = ContentPosition.prefix,\n        n: string = IconService.defaultIconName)\n\t{\n        this.source = s;\n        this.position = p;\n        this.name = n;\n\n        this.setDefaultValueIfUndefined();\n    }\n\n    /**\n     * Sets the default value for each undefined value. \n     */\n    public setDefaultValueIfUndefined(): void\n    {\n        if (this.source == undefined) this.source = IconSource.internal;\n        if (this.position == undefined) this.position = ContentPosition.prefix;\n        if (this.name == undefined) this.name = IconService.defaultIconName;\n    }\n\n    /**\n     * Sets the default value for each undefined value, but the icon position is always set to the specified value. \n     * @param iconPosition The icon position to set. \n     */\n    public setDefaultValueIfUndefined_setPosition(iconPosition: ContentPosition): void\n    {\n        if (this.source == undefined) this.source = IconSource.internal;\n        this.position = iconPosition;\n        if (this.name == undefined) this.name = IconService.defaultIconName;\n    }\n}\n\n/**\n * An enum that represents the hint position of a `HintValue`. \n */\nexport enum HintPosition\n{\n    /**\n     * Adding the `start` option to a `HintValue` will designate it as start-aligned. \n     */\n    start = 'start',\n\n    /**\n     * Adding the `end` option to a `HintValue` will designate it as end-aligned. \n     */\n    end = 'end',\n\n    /**\n     * Adding the `none` option to a `HintValue` will not show it. \n     */\n    none = 'none'\n}\n\n/**\n * Data structure for holding a hint. \n * A hint label is additional descriptive text that appears below the control's underline. \n */\nexport class HintValue\n{\n    /**\n     * Returns the hint position type. \n     * By default, its value is `HintPosition.none`. \n     */\n    public position: HintPosition;\n\n    /**\n     * Returns the hint label. \n     * By default, its value is `''`. \n     */\n    public label: string;\n\n    /**\n     * Creates a new instance of the `HintValue` class. \n     * @param p The hint position type. By default, its value is `HintPosition.none`. \n     * @param l The hint label. By default, its value is `''`. \n     */\n    public constructor(\n        p: HintPosition = HintPosition.none,\n        l: string = '')\n\t{\n        this.position = p;\n        this.label = l;\n\n        this.setDefaultValueIfUndefined();\n    }\n\n    /**\n     * Sets the default value for each undefined value. \n     */\n    public setDefaultValueIfUndefined(): void\n    {\n        if (this.position == undefined) this.position = HintPosition.none;\n        if (this.label == undefined) this.label = '';\n    }\n\n    /**\n     * Sets the default value for each undefined value, but the hint position is always set to the specified value. \n     * @param hintPosition The hint position to set. \n     */\n    public setDefaultValueIfUndefined_setPosition(hintPosition: HintPosition): void\n    {\n        this.position = hintPosition;\n        if (this.label == undefined) this.label = '';\n    }\n}\n\n/**\n * This enum is deprecated. \n * Represents a form field type. \n */\nexport enum FormFieldType\n{\n    /** A button control. */\n    action_button = 'action_button',\n\n\n\n    /** A container control that is showed as a panel. */\n    container_panel = 'container_panel',\n\n    /** A container control that is showed very simple. */\n    container_simple = 'container_simple',\n\n\n\n    /** A container control that allows the writing of a name of something in different language. */\n    container_label_diff_lang = 'container_label_diff_lang',\n\n\n\n    /** A text control. */\n    text = 'text',\n\n    /** A textarea control. */\n    textarea = 'textarea',\n\n    /** A datapicker control. */\n    datepicker = 'datepicker',\n\n    /** A checkbox control. */\n    checkbox = 'checkbox',\n\n    /** A url control. */\n    url = 'url',\n\n    /** An email control. */\n    email = 'email',\n\n    /** An identifier control. */\n    identifier = 'identifier',\n\n    /** An issn control. */\n    issn = 'issn',\n\n    /** A rnps control. */\n    rnps = 'rnps',\n\n    /** A vocabulary control. */\n    vocabulary = 'vocabulary',\n\n    vocabulary_tree = 'toco-vocabulary-tree',\n\n    /** A term parent control. */\n    term_parent = 'term_parent',\n\n    /** A select control. */\n    select = 'select',\n\n    /** A select control. */\n    select_expr = 'select_expr',\n\n    /** A select with a filter control. */\n    select_filter = 'select_filter',\n\n    /** A select with a filter control. */\n    select_tree = 'select_tree'\n}\n\n/**\n * A base interface that represents the content of a `FormFieldControl`. \n */\nexport interface FormFieldContent\n{\n    /**\n     * Returns the parent `ContainerControl` of this control. \n     * It is always set internally. \n     * By default, its value is `undefined`. \n     */\n    parentContainerControl?: ContainerControl;\n\n\n\n    /**\n     * Returns the parent `FormSection` that represents the parent `FormGroup` or `FormArray` of this control. \n     * It is always set internally. \n     * By default, its value is `undefined`. \n     */\n    parentFormSection?: FormSection;\n\n\n\n    /**\n     * Returns the control's minimum width. \n     * The minimum width of the content area, padding area or border area (depending on `box-sizing`) \n     * of certain boxes. Allows authors to constrain content width to a centain range. \n     * By default, its value is `'15em'`. \n     */\n    minWidth?: string;\n\n    /**\n     * Returns the control's width. \n     * The width of the content area, padding area or border area (depending on `box-sizing`) of certain boxes. \n     * By default, its value is `minWidth`. \n     */\n    width?: string;\n\n\n\n    /**\n     * Returns the control's label. \n     * See the `ContainerContent` for the particular interpretation of this field. \n     * See the `ActionContent` for the particular interpretation of this field. \n     * By default, its value is `''`. Each control sets its own label. \n     */\n    label?: string;\n\n    /**\n     * Returns the control's placeholder. \n     * By default, its value is `''`. Each control sets its own placeholder. \n     */\n    placeholder?: string;\n\n\n\n    /**\n     * Returns true if the control is required; otherwise, false. \n     * See the `ContainerContent` for the particular interpretation of this field. \n     * By default, its value is `false`. \n     */\n    required?: boolean;\n\n    /**\n     * Returns the control's text align. \n     * By default, its value is `TextAlign.left`. \n     */\n    textAlign?: TextAlign;\n\n    /**\n     * Returns the control's aria-label. \n     * Defines a string value that labels the current element. \n     * By default, its value is `'Text Input'`. Each control sets its own aria-label. \n     */\n    ariaLabel?: string;\n\n    /**\n     * The control's value. \n     * By default, its value is `undefined`. \n     */\n    value?: any;\n\n\n\n    /**\n     * This `type` field is deprecated, you must use the `controlType` field. \n     * Returns the control's type that is used to create the control. \n     * Implementation notes: \n     *  - It must be specified; otherwise, an exception is thrown. \n     */\n    type?: FormFieldType;\n\n    /**\n     * Returns the control's type that is used to create the control. \n     * Implementation notes: \n     *  - It must be specified; otherwise, an exception is thrown. \n     */\n    controlType?: Type<any>;\n\n\t/**\n\t * Returns the control's name that is used to save the control's value as a name/value pair. \n     * Implementation notes: \n     *  - It can be used with a JSON string. \n     *  - It must be specified; otherwise, an exception is thrown. \n\t */\n    name?: string;\n\n    /**\n     * The control's extra content. For any other content needed by an specific `FormFieldControl`. \n     * By default, its value is `undefined`. \n     */\n    extraContent?: any;\n}\n\n/**\n * Returns a new object that represents the clone of the specified `FormControl` target. \n * @param target The `FormControl` object to clone. \n */\nexport function cloneFormControl(target: FormControl): FormControl\n{\n    return new FormControl(target.value, target.validator, target.asyncValidator);\n}\n\n/**\n * Returns a new object that represents the clone of the specified `FormSection` target. \n * @param target The `FormSection` object to clone. \n */\nexport function cloneFormSection(target: FormSection): FormSection\n{\n    if (target instanceof FormGroup)\n    {\n        /* Creates an empty `FormGroup` with its validators. */\n        let result: FormGroup = new FormGroup({ }, target.validator, target.asyncValidator);\n\n        /* Adds the controls to `FormGroup`. */\n        for(let ctr in target.controls)\n        {\n            if((target.controls[ctr]) instanceof FormControl) result.addControl(ctr, cloneFormControl((target.controls[ctr]) as FormControl));\n            else result.addControl(ctr, cloneFormSection((target.controls[ctr]) as FormSection));\n        }\n\n        return result;\n    }\n    else\n    {\n        /* Creates an empty `FormArray` with its validators. */\n        let result: FormArray = new FormArray([ ], target.validator, target.asyncValidator);\n\n        /* Adds the controls to the `FormArray`. */\n        for(let ctr of target.controls)\n        {\n            if(ctr instanceof FormControl) result.push(cloneFormControl(ctr));\n            else result.push(cloneFormSection(ctr as FormSection));\n        }\n\n        return result;\n    }\n}\n\n/**\n * Represents the base abstract class for a control that is treated as a form field. \n */\nexport abstract class FormFieldControl\n{\n    /**\n     * Represents the `ContentPosition` enum for internal use. \n     */\n    public readonly contentPosition: typeof ContentPosition;\n\n    /**\n     * Represents the `IconSource` enum for internal use. \n     */\n    public readonly iconSource: typeof IconSource;\n\n    /**\n     * Input field that contains the content of this class. \n     */\n    @Input()\n    public content: FormFieldContent;\n\n    /**\n     * Returns the language currently used. \n     * This is a static field. \n     */\n    protected static currentLang: string = '';\n\n    /**\n     * Returns true if the translation is built by the control; otherwise, false. \n     * It is used to select the way the translation is built for the control. \n     * By default, its value is `false`. \n     * As an example of usage for this field, the `InputNumberComponent` class implements the logic when this value is `true`. \n     */\n    public isTranslationBuiltByControl: boolean;\n\n    /**\n     * Constructs a new instance of this class. \n     */\n    public constructor()\n    {\n        this.contentPosition = ContentPosition;\n        this.iconSource = IconSource;\n\n        /* It must be initialize. */\n        this.content = undefined;\n\n        this.isTranslationBuiltByControl = false;\n    }\n\n    /**\n     * Sets the new language. \n     * @param transServ The `TranslateService` instance injected. \n     */\n    protected setNewLanguage(transServ: TranslateService): void\n    {\n        /* The `FormFieldControl.currentLang != transServ.currentLang` test is NOT necessary here because it is done in the non-abstract child classes. */\n\n        FormFieldControl.currentLang = transServ.currentLang;\n    }\n\n    /**\n     * Initializes the `content` input property. \n     * @param label The default label to use. It is used if the `content.label` is not specified. \n     * @param placeholder The default placeholder to use. It is used if the `content.placeholder` is not specified. \n     */\n    protected init(label: string, placeholder: string = ''): void\n    {\n        /* Sets the default values. */\n\n        if (this.content == undefined)\n        {\n            throw new Error(`For the '${ FormFieldControl.name }' control, the 'content' value can not be undefined.`);\n        }\n\n        if (this.content.name == undefined)\n        {\n            throw new Error(`For the '${ FormFieldControl.name }' control, the 'content.name' value can not be undefined.`);\n        }\n\n        if (this.content.controlType == undefined)\n        {\n            throw new Error(`For the '${ this.content.name }' control, the 'content.controlType' value can not be undefined.`);\n        }\n\n        if (label == undefined)\n        {\n            if (this.content.label == undefined)\n            {\n                throw new Error(`For the '${ this.content.name }' control, the 'content.label' value can not be undefined. \\n\n                    You can specify: \\n\n                    - A default label value when overwriting the 'init' method in the component that represents the control. \\n\n                    - A label value when defining the content object for the control.`);\n            }\n\n            label = this.content.label;\n        }\n        else\n        {\n            if (this.content.label)\n            {\n                label = this.content.label;\n            }\n        }\n\n        /************************** `mat-form-field` properties. **************************/\n        if (this.content.minWidth == undefined) this.content.minWidth = '15em';\n        if (this.content.width == undefined) this.content.width = this.content.minWidth;\n\n        /**************************** `mat-label` properties. *****************************/\n        if (this.content.label == undefined) this.content.label = label;\n        if (this.content.placeholder == undefined) this.content.placeholder = placeholder;\n\n        /************************** Internal control properties. **************************/\n        if (this.content.textAlign == undefined) this.content.textAlign = TextAlign.left;\n        if (this.content.ariaLabel == undefined) this.content.ariaLabel = label;\n        if (this.content.value != undefined)  /* It does not set the default value here (does not call `getDefaultValue` method here) because in this way it is more consistent. */\n        {\n            /* It also checks if the specified `content.value` is correct. */\n            this.initValue();\n        }\n\n        /******************************* Other properties. ********************************/\n    }\n\n\t/**\n\t * Initializes the control's value. It uses the `content.value` and it is already different of `undefined`. \n     * It also checks if the specified `content.value` is correct. For internal use only. \n\t */\n    protected abstract initValue(): void;\n\n    /**\n     * Returns this instance. \n     */\n    public abstract get getInstance(): FormFieldControl;\n\n    /**\n     * Returns the parent `ContainerControl` of this control. \n     * It is always set internally. \n     */\n    public get parentContainerControl(): ContainerControl\n    {\n        return this.content.parentContainerControl;\n    }\n\n\t/**\n\t * Adds the specified `control`/`internalControl` as a child \n     * to the `content.containerControlChildren`/`content.parentFormSection` respectively. \n     * @param control Form control to be added (descendant from `FormFieldControl`). \n     * @param internalControl Internal form control to be added (`FormControl`, `FormGroup`, or `FormArray`). \n\t */\n\tprotected addAsChildControl(control: any, internalControl: AbstractControl): void\n\t{\n        /* Adds the specified `control` as a child to the `content.containerControlChildren`. */\n\n        this.content.parentContainerControl.content.containerControlChildren.push(control);\n\n        /* Adds the specified `internalControl` as a child to the `content.parentFormSection`. */\n\n        if(this.content.parentContainerControl.isFormArray)  /* `content.parentFormSection` is an instance of `FormArray`. */\n        {\n            /* The `internalControl`'s name is already correct, that is, \n            `content.name` equals the `content.parentFormSection`'s last position \n            (because the `internalControl` has a `FormArray` as its parent). */\n\n            (this.content.parentFormSection as FormArray).push(internalControl);\n        }\n        else  /* `content.parentFormSection` is an instance of `FormGroup`. */\n        {\n            (this.content.parentFormSection as FormGroup).addControl(this.content.name, internalControl);\n        }\n\t}\n\n    /**\n     * Returns true if the specified `IconValue` has the specified `ContentPosition` value; otherwise, false. \n     * @param icon The `IconValue` to check. \n     * @param contentPosition The `ContentPosition` value to check. \n     */\n    public iconPositionState(icon: IconValue, contentPosition: ContentPosition): boolean\n    {\n        return (icon.position == contentPosition);\n    }\n\n    /**\n     * Returns true if the specified `IconValue` has the specified `IconSource` value; otherwise, false. \n     * @param icon The `IconValue` to check. \n     * @param iconSource The `IconSource` value to check. \n     */\n    public iconSourceState(icon: IconValue, iconSource: IconSource): boolean\n    {\n        return (icon.source == iconSource);\n    }\n}\n","\nimport { Input } from '@angular/core';\n\nimport { IconValue, HintValue, FormFieldContent, FormFieldControl, ContentPosition, HintPosition } from '../form-field.control';\n\n/**\n * An enum that represents the operation action. \n */\nexport enum OperationAction\n{\n    back = 'back',\n    cancel = 'cancel',\n    reset = 'reset',\n    delete = 'delete',\n    submit = 'submit'\n}\n\n/**\n * Returns true if the control is disabled; otherwise, false. \n * This function returns false by definition, that is, the control is enabled. \n * @param sender Control that wants to know its disabled state. \n */\nexport function isDisabledDefault(sender: any): boolean\n{\n    /* This function returns false by definition, that is, the control is enabled. */\n    return false;\n}\n\n/**\n * This function does nothing by definition. \n * @param sender Control that was clicked. \n */\nexport function clickDefault(sender: any): void\n{\n    /* This function does nothing by definition. */\n}\n\n/**\n * A base interface that represents the content of an `ActionControl`. \n */\nexport interface ActionContent extends FormFieldContent\n{\n    /**\n     * Returns the control's icon. \n     * By default, its value is `undefined`. \n     */\n    icon?: IconValue;\n\n\t/**\n\t * Returns the control's tooltip. \n\t * By default, its value is `undefined`. \n\t */\n    tooltip?: HintValue;\n\n    /**\n     * Returns the function that is executed for knowing if the control is or is not disabled. \n     * By default, its value is `isDisabledDefault`. \n     */\n    isDisabled?: (sender: any) => boolean;\n\n    /**\n     * Returns the function that is executed when the user clicks the control. \n     * By default, its value is `clickDefault`. \n     */\n    click?: (sender: any) => void;\n}\n\n/**\n * Represents the base abstract class for a control that executes actions. \n */\nexport abstract class ActionControl extends FormFieldControl\n{\n    /**\n     * Input field that contains the content of this class. \n     */\n    @Input()\n    public content: ActionContent;\n\n    /**\n     * Constructs a new instance of this class. \n     */\n    public constructor()\n    {\n        super();\n    }\n\n    /**\n     * Initializes the `content` input property. \n     * @param label The default label to use. It is used if the `content.label` is not specified. \n     * @param placeholder It is NOT used here. Fix that. \n     * @param alwaysHint If it is true then there is always a hint start-aligned. \n     */\n    protected init(label: string, placeholder: string = '', alwaysHint: boolean = true): void\n    {\n        /* Sets the default values. */\n\n        super.init(label, placeholder);\n\n        /***************************** `mat-icon` properties. *****************************/\n        if (this.content.icon != undefined) this.content.icon.setDefaultValueIfUndefined_setPosition(ContentPosition.prefix);\n\n        /************************** `mat-form-field` properties. **************************/\n        // if (this.content.appearance == undefined) this.content.appearance = TextInputAppearance.standard;\n\n        /**************************** `matTooltip` properties. ****************************/\n        if (alwaysHint && (this.content.tooltip == undefined))\n        {\n            this.content.tooltip = new HintValue(HintPosition.start, this.content.label);\n        }\n\n        if (this.content.isDisabled == undefined) this.content.isDisabled = isDisabledDefault;\n        if (this.content.click == undefined) this.content.click = clickDefault;\n    }\n\n\t/**\n\t * Initializes the control's value. It uses the `content.value` and it is already different of `undefined`. \n     * It also checks if the specified `content.value` is correct. For internal use only. \n\t */\n\tprotected initValue(): void\n\t{\n        /* It does not need to do something because the child controls are already initialized. */\n\n        // /* In this way, checks if the specified `content.value` is correct. */\n        // this.content.formControl.setValue(this.content.value);\n\n        // /* Marks the control as `touched`. */\n        // this.content.formControl.markAsTouched({\n        //     onlySelf: true\n        // });\n    }\n\n    /**\n     * Returns this instance. \n     */\n    public get getInstance(): ActionControl\n    {\n        return this;\n    }\n}\n","\nimport { Component, OnInit } from '@angular/core';\n\nimport { ActionControl } from '../action.control';\n\n/**\n * Represents a control that executes actions. \n */\n@Component({\n\tselector: 'action-button',\n\ttemplateUrl: './button-action.component.html',\n\tstyleUrls: ['./button-action.component.scss'],\n    host: {\n        '[style.minWidth]': 'content.minWidth',\n        '[style.width]': 'content.width'\n    }\n})\nexport class ActionButtonComponent extends ActionControl implements OnInit\n{\n    public constructor()\n    {\n        super();\n    }\n\n    public ngOnInit(): void\n    {\n        /* Sets the default values. */\n        this.init('', '', true);\n    }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Component, OnInit, Input } from '@angular/core';\n\nimport { FormFieldType } from '../form-field.control';\n\n/**\n * This component represents a components' factory. \n * This component is deprecated. \n */\n@Component({\n    selector: 'component-factory-depr',\n    templateUrl: './component-factory-depr.component.html',\n    styleUrls: ['./component-factory-depr.component.scss']\n})\nexport class ComponentFactory_Depr implements OnInit\n{\n    /**\n     * Represents the `FormFieldType` enum for internal use. \n     */\n    public readonly formFieldType: typeof FormFieldType;\n\n    /**\n     * Input field that represents an array of types which types inherit from `FormFieldContent` interface. \n     * This array contains the content of the components that the factory is going to create. \n     */\n    @Input()\n    public componentsContent: any[];\n\n    public constructor()\n    {\n        this.formFieldType = FormFieldType;\n\n        this.componentsContent = [];\n    }\n\n    public ngOnInit(): void\n    {\n        console.log('ComponentFactory_Depr componentsContent: ', this.componentsContent);\n    }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Input, ViewChild, ViewContainerRef, ComponentFactoryResolver, ComponentRef } from '@angular/core';\nimport { FormArray, FormGroup } from '@angular/forms';\n\nimport { Params } from '../../core/utils/helpers';\nimport { GetViewContainerDirective } from '../../core/utils/get-view-container.directive';\n\nimport { FormSection, FormFieldContent, FormFieldControl, cloneFormControl, cloneFormSection } from '../form-field.control';\n\n/**\n * A base interface that represents the content of a `ContainerControl`. \n */\nexport interface ContainerContent extends FormFieldContent\n{\n    /**\n     * Returns an array of controls that represents the `ContainerControl`'s child controls that are \n     * stored in the `content.formSection`; that is, `content.containerControlChildren` and `content.formSection` \n     * have the same length. \n     * It is always set internally. \n     * By default, its value is `[]`. \n     */\n    containerControlChildren?: any[];\n\n\n\n\t/**\n\t * Returns the `FormSection` that tracks the value and validity state of the internal \n     * child controls that contains this control. \n     * Implementation notes: \n     *  - Represents the `FormGroup` or `FormArray` that contains the child controls. \n     *  - The `content.containerControlChildren` and `content.formSection` have the same length. \n     *  - It must be specified; otherwise, an exception is thrown. \n\t */\n    formSection?: FormSection;\n\n    /**\n     * Returns an array of contents that represents the `ContainerControl`'s child controls that are \n     * stored in the `ViewContainer`; that is, `content.formSectionContent` and container's `ViewContainer` \n     * have the same length. \n     * Implementation notes: \n     *  - It must be specified, and must have at least one element; otherwise, an exception is thrown. \n     *  - If the `content.formSection` field represents a `FormArray`, then the `name` field \n     * of all elements in the `content.formSectionContent` array represents the position \n     * in the array like string. \n     */\n    formSectionContent?: Params<any>[];\n\n\n\n    /**\n     * Returns true if the container control has a dynamic length, that is, the `content.formSection` field \n     * represents a `FormArray` and its length is not fixed; otherwise, false. \n     * This field has sense only when the `content.formSection` field represents a `FormArray`. \n     * By default, its value is `true`. \n     */\n    isDynamic?: boolean;\n\n    /**\n     * In this case, the `label?: string` field inherited from `FormFieldContent` is interpreted as: \n     * Returns the control's title. \n     * By default, its value is `''`. Each control sets its own label (title). \n     */\n\n    /**\n     * In this case, the `required?: boolean` field inherited from `FormFieldContent` is interpreted as: \n     * Returns true if the container control must have one child control at least; otherwise, false. \n     * This field has sense only when the `content.formSection` field represents a `FormArray`. \n     * By default, its value is `false`. \n     */\n}\n\n/**\n * Represents the base abstract class for a control that contains one or more controls. \n */\nexport abstract class ContainerControl extends FormFieldControl\n{\n    /**\n     * Returns a `FormGroup` by default. \n     * Its value is empty object, and does not have validators. \n     */\n    public static getFormGroupByDefault(): FormGroup\n    {\n        return new FormGroup({ }, [ ]);\n    }\n\n    /**\n     * Returns a `FormArray` by default. \n     * Its value is empty array, and does not have validators. \n     */\n    public static getFormArrayByDefault(): FormArray\n    {\n        return new FormArray([ ], [ ]);\n    }\n\n    /**\n     * Input field that contains the content of this class. \n     */\n    @Input()\n    public content: ContainerContent;\n\n\n\n    /**\n     * Returns the helper directive to mark valid insertion point in the `ContainerControl`'s template. \n     */\n    @ViewChild(GetViewContainerDirective, { static: true })\n    protected _componentHost: GetViewContainerDirective;\n\n    /**\n     * Returns the view container of the element that will host the child components in the `ContainerControl`'s template. \n     * This field can only be assigned in the `ContainerControl` class. \n     * The `content.formSectionContent` and container's `_viewContainerRef` have the same length. \n     */\n    protected _viewContainerRef: ViewContainerRef;\n\n    /**\n     * Returns the factory for a given component type. \n     * This field can only be assigned in the `ContainerControl` class. \n     */\n    protected _componentFactoryResolver: ComponentFactoryResolver;\n\n    /**\n     * Returns the component created by a `ComponentFactory`. \n     * For only internal use by the `createChildComponent` method. \n     */\n    protected _cr: ComponentRef<any>;\n\n\n\n    /**\n     * Returns true if the container control is a `FormArray`, that is, the `content.formSection` field \n     * represents a `FormArray`; otherwise, false. \n     * By default, its value is `false`. \n     */\n    private _isFormArray: boolean;\n\n    /**\n     * If the `content.formSection` represents a `FormArray`, then this field returns \n     * a pattern content that is `content.formSectionContent` value; otherwise, returns `undefined`. \n     * It is shared among controls. \n     * It is used for adding a new element in the `content.formSectionContent`, that is, \n     * for adding a new control in the `FormArray`. \n     * By default, its value is `[]`. \n     */\n    private _formArrayPatternContent: Params<any>[];\n\n    /**\n     * If the `content.formSection` represents a `FormArray`, then this field returns \n     * a pattern value that is a copy of one value that can contain the `content.value` array, and sets all \n     * its properties/values of built-in type to `undefined`; otherwise, returns `undefined`. \n     * It is used for adding a new element in the `content.formSectionContent`, that is, \n     * for adding a new control in the `FormArray`. \n     * By default, its value is `undefined`. \n     */\n    private _formArrayPatternValue: any;\n\n    /**\n     * Returns the current `FormArray` length. \n     * This field has sense only when the `content.formSection` field represents a `FormArray`. \n     * By default, its value is `0`. \n     */\n    private _formArrayLength: number;\n\n    /**\n     * Constructs a new instance of this class. \n     */\n    public constructor()\n    {\n        super();\n\n        this._isFormArray = false;\n        this._formArrayPatternContent = [ ];\n        this._formArrayPatternValue = undefined;\n        this._formArrayLength = 0;\n    }\n\n    /**\n     * Initializes the `content` input property. \n     * @param label The default label to use. It is used if the `content.label` is not specified. \n     * @param placeholder It is NOT used here. Fix that. \n     */\n    protected init(label: string, placeholder: string = ''): void\n    {\n        /* Sets the default values. */\n\n        super.init(label, placeholder);\n\n        if (this.content.formSection == undefined)\n        {\n            throw new Error(`For the '${ this.content.name }' control, the 'content.formSection' value can not be undefined; it must be a 'FormGroup' or 'FormArray' value.`);\n        }\n\n        if ((this.content.formSectionContent == undefined) || (this.content.formSectionContent.length == 0))\n        {\n            throw new Error(`For the '${ this.content.name }' control, the 'content.formSectionContent' array can not be undefined, and must have at least one element.`);\n        }\n\n        this._isFormArray = this.content.formSection instanceof FormArray;\n        if (this._isFormArray)\n        {\n            if (this.content.isDynamic == undefined) this.content.isDynamic = true;  /* By default, its value is `true`. */\n            if (this.content.required == undefined) this.content.required = false;   /* By default, its value is `false`. */\n        }\n        else\n        {\n            if (this.content.isDynamic != undefined) throw new Error(`For the '${ this.content.name }' control, the 'content.isDynamic' value must not exist because the 'content.formSection' value is a 'FormGroup'.`);\n            if (this.content.required != undefined) throw new Error(`For the '${ this.content.name }' control, the 'content.required' value must not exist because the 'content.formSection' value is a 'FormGroup'.`);\n            if (this.content.value != undefined) throw new Error(`For the '${ this.content.name }' control, the 'content.value' value must not exist because the 'content.formSection' value is a 'FormGroup'.`);\n        }\n\n        this._viewContainerRef = this._componentHost.viewContainerRef;\n        this._componentFactoryResolver = this._componentHost.componentFactoryResolver;\n\n        /* Initializes the `content.containerControlChildren`. */\n        this.content.containerControlChildren = [ ];\n\n        if (this._isFormArray)\n        {\n            if (this.content.value == undefined)\n            {\n                throw new Error(`The '${ this.content.name }' control is constructed dynamically using 'FormArray'. Its 'content.value' array can not be undefined.`);\n            }\n\n            if ((this.content.value.length == 0) && (!this.content.isDynamic) && (this.content.required))\n            {\n                throw new Error(`The '${ this.content.name }' control has not sense because its 'content.value' array length is zero, and its 'content.isDynamic' value is false, and its 'content.required' value is true.`);\n            }\n\n            this.initFormSectionContentToFormArray();\n        }\n        else\n        {\n            /* Sets the parent control to its children. */\n            this.setParentToChildren();\n        }\n\n        // let temp: string = (isAbbreviation) ? this.content.label : this.content.label.toLowerCase();\n        // this.validationError_required = `The ${ temp } can not be empty.`;\n\n        /************************** `mat-form-field` properties. **************************/\n        // if (this.content.appearance == undefined) this.content.appearance = TextInputAppearance.standard;\n\n        /***************************** `mat-hint` properties. *****************************/\n        // if (alwaysHint && (this.content.startHint == undefined) && (this.content.endHint == undefined))\n        // {\n        //     this.content.startHint = new HintValue(HintPosition.start, `Write a valid ${ temp }.`);\n        // }\n        // else\n        // {\n        //     if (this.content.startHint != undefined) this.content.startHint.setDefaultValueIfUndefined_setPosition(HintPosition.start);\n        //     if (this.content.endHint != undefined) this.content.endHint.setDefaultValueIfUndefined_setPosition(HintPosition.end);\n        // }\n\n        /* Adds this control as a child to the `content.parentFormSection`. \n        It must be called at the end before calling `createChildComponents` method. */\n        if (this.content.parentFormSection != undefined)\n        {\n            this.addAsChildControl(this, this.content.formSection);\n        }\n\n        /* Creates the child components. */\n        this.createChildComponents(this.content.formSectionContent);\n    }\n\n    /**\n     * Initializes the `content.formSectionContent` array correctly depending on the `content.value`. \n     * In this case, `content.value` is an array. For each element in the `content.value`, a cloning \n     * is done to the `_formArrayPatternContent` array, and it is added in the `content.formSectionContent`; \n     * therefore one element is added in the `content.formSection` `FormArray`. \n     */\n    protected initFormSectionContentToFormArray(): void\n    {\n        /* At this point, `content.formSectionContent` has at least one element. */\n\n        /* Saves the pattern content, that is, `content.formSectionContent`. \n        It is shared among controls. */\n        this._formArrayPatternContent = this.content.formSectionContent;\n        /* The `FormArray` is empty initially. */\n        this.content.formSectionContent = [ ];\n\n        /* Saves the pattern value, that is, creates the pattern value following the `_formArrayPatternContent` structure. \n        The result value represents a copy of one value that can contain the `content.value` array, and \n        sets all its properties/values of built-in type to `undefined`. \n        It does not clone a value from the `content.value` array because the array can be empty. \n        It creates in deep until the next `FormArray`, then the next `FormArray` creates in deep until the next `FormArray`, and so on. \n        It is the first time that the `_formArrayPatternContent` is travelled, therefore the `createValueToUndefined` method does verifications. */\n        this._formArrayPatternValue = this.createValueToUndefined();\n\n        /* If the `content.required` field is true, then the container control must have one child control at least. */\n        if ((this.content.required) && (this.content.value.length == 0))\n        {\n            /* It can push the `_formArrayPatternValue` and does not push its clone because \n            both values have the same properties and there is not problem. */\n            this.content.value[0] = this._formArrayPatternValue;\n        }\n\n        /* The `FormArray` will contain one element for each element in the `content.value`. */\n        for(let val of this.content.value)\n        {\n            this._initElemFormSectionContentToFormArray(val);\n        }\n    }\n\n    /**\n     * Sets the parent control to its children. \n     */\n    protected setParentToChildren(): void\n    {\n        this.content.formSectionContent.forEach(this.setParentToChild, this);\n    }\n\n    /**\n     * Sets the parent control to one child. \n     * @param ffc The child to set the parent control. \n     */\n    protected setParentToChild(ffc: FormFieldContent): void\n    {\n        /* Sets the parent `ContainerControl` to its children. */\n        ffc.parentContainerControl = this;\n\n        /* Sets the parent `FormSection` to its children if they have got nothing. */\n        ffc.parentFormSection = this.content.formSection;\n    }\n\n    /**\n     * Returns a new value that is created following the `_formArrayPatternContent` structure. \n     * It also sets all its properties/values of built-in type to `undefined`. \n     * It creates the value smartly depending on the type of content. \n     * It creates in deep until the next `FormArray`, then the next `FormArray` creates in deep until the next `FormArray`, and so on. \n     * It is the first time that the `_formArrayPatternContent` is travelled, therefore the `createValueToUndefined` method does verifications. \n     */\n    protected createValueToUndefined(): any\n    {\n        let result: any;\n        /* The `_formArrayPatternContent` array can have one element only with the `content.formSection` field. */\n        let alreadyHasFormSection: boolean = false;\n\n        for(let content of this._formArrayPatternContent)\n        {\n            if (content.formControl)\n            {\n                if (alreadyHasFormSection) throw new Error(`For the '${ this.content.name }' control, the 'content.formSectionContent' array can have one element only with the 'content.formControl' or 'content.formSection' field.`);\n\n                alreadyHasFormSection = true;\n                result = undefined;\n            }\n            else if (content.formSection)\n            {\n                if (alreadyHasFormSection) throw new Error(`For the '${ this.content.name }' control, the 'content.formSectionContent' array can have one element only with the 'content.formControl' or 'content.formSection' field.`);\n\n                alreadyHasFormSection = true;\n                result = this._createValueToUndefined(content);\n            }\n            /* The rest of `content`s do not contain a `value` field of interest. */\n        }\n\n        if (!alreadyHasFormSection) throw new Error(`For the '${ this.content.name }' control, the 'content.formSectionContent' array must have one element only among all with the 'content.formControl' or 'content.formSection' field.`);\n        return result;\n    }\n\n    private _createValueToUndefined(target: Params<any>): any\n    {\n        if (target.formSection instanceof FormArray)\n        {\n            return [ ];\n        }\n        else\n        {\n            let result: any = { };\n\n            for(let content of target.formSectionContent)\n            {\n                if (content.formControl) result[content.name] = undefined;\n                else if (content.formSection) result[content.name] = this._createValueToUndefined(content);\n                /* The rest of `content`s do not contain a `value` field of interest. */\n            }\n\n            return result;\n        }\n    }\n\n    /**\n     * Initializes and returns a clone of the `_formArrayPatternContent` array correctly \n     * depending on the specified `value`. \n     * This clone is also added in the `content.formSectionContent` array. \n     * @param value The initial `value` field of each content representing a `FormControl`. \n     */\n    private _initElemFormSectionContentToFormArray(value: any): Params<any>[]\n    {\n        /* The content array cloned. */\n        let result: Params<any>[] = [ ];\n        let refContent: Params<any>;\n\n        for(let content of this._formArrayPatternContent)\n        {\n            /* Clones in deep until the next `FormArray`, then the next `FormArray` clones in deep until the next `FormArray`, and so on. */\n            if (content.formSection instanceof FormArray)\n            {\n                /* This `content.formSectionContent` will not be cloned because it belongs to a `FormArray` and it will be cloned when the `FormArray` is analyzed in the `ContainerControl` class. */\n                refContent = this._cloneContent(content, undefined/* It is not used in this case. */, false);\n                refContent.value = value;\n            }\n            else\n            {\n                refContent = this._cloneContent(content, value, true);\n            }\n\n            /* Sets the parent control to its child. */\n            this.setParentToChild(refContent);\n\n            /* Overwrites some properties for the content cloned. */\n            refContent.name = this._formArrayLength.toString(10);  /* The element is added in the `FormArray` after the last position. */\n            /* Overwrites some properties for the content cloned if it contains the `content.formControl` or `content.formSection` field. */\n            if ((content.formControl) || (content.formSection))\n            {\n                // refContent.label = ((refContent.label == undefined) ? (refContent.name) : (refContent.label + refContent.name));\n                // refContent.ariaLabel = refContent.label;\n            }\n\n            /* Save the content cloned. */\n            this.content.formSectionContent.push(refContent);\n            result.push(refContent);\n        }\n\n        this._formArrayLength++;\n        return result;\n    }\n\n    /**\n     * Returns a new content that represents the clone of the specified content target. \n     * It also sets the initial `value` field of each content representing a `FormControl`. \n     * It clones the content smartly depending on the type of property. \n     * It clones in deep until the next `FormArray`, then the next `FormArray` clones in deep until the next `FormArray`, and so on. \n     * @param target The content object to clone. \n     * @param value The initial `value` field of each content representing a `FormControl`. \n     * @param canClone It is true if the function can clone the `formSectionContent` field; otherwise, false. \n     */\n    private _cloneContent(target: Params<any>, value: any, canClone: boolean): any\n    {\n        /* The content cloned. */\n        let result: any = { };\n\n        for(let prop in target)\n        {\n            switch(prop)\n            {\n                /* The `formControl` property special case. */\n                case 'formControl':\n                {\n                    result[prop] = cloneFormControl(target.formControl);\n\n                    /* If this content (`result`) represents a `FormControl`, then the `value` field is initialized. */\n                    result['value'] = value;\n\n                    break;\n                }\n\n                /* The `formSection` property special case. */\n                case 'formSection':\n                {\n                    result[prop] = cloneFormSection(target.formSection);\n\n                    break;\n                }\n\n                /* The `formSectionContent` property special case. */\n                case 'formSectionContent':\n                {\n                    if (canClone)  /* Clones the `target.formSectionContent`. */\n                    {\n                        result[prop] = [ ];\n\n                        for(let content of target.formSectionContent)\n                        {\n                            if (content.formSection instanceof FormArray)\n                            {\n                                content.value = value[content.name];\n                                /* This `content.formSectionContent` will not be cloned because it belongs to a `FormArray` and it will be cloned when the `FormArray` is analyzed in the `ContainerControl` class. */\n                                result[prop].push(this._cloneContent(content, undefined/* It is not used in this case. */, false));\n                                content.value = undefined;\n                            }\n                            else\n                            {\n                                result[prop].push(this._cloneContent(content, value[content.name], canClone));\n                            }\n                        }\n                    }\n                    else  /* Takes the same `target.formSectionContent` reference because `target` is a `FormArray` and its `formSectionContent` will be taken like a pattern. */\n                    {\n                        result[prop] = target.formSectionContent;\n                    }\n\n                    break;\n                }\n\n                /* Copies the property without problem. */\n                default:\n                {\n                    result[prop] = target[prop];\n\n                    break;\n                }\n            }\n        }\n\n        return result;\n    }\n\n    /**\n     * Creates the child components. \n     * @param componentsContent Components content array for creating the components. \n     */\n    protected createChildComponents(componentsContent: Params<any>[]): void\n    {\n        for (let componentContent of componentsContent)\n        {\n            /* Creates a child component. */\n            this.createChildComponent(componentContent);\n        }\n    }\n\n    /**\n     * Creates a child component. \n     * @param componentContent Component content for creating the component. \n     */\n    protected createChildComponent(componentContent: Params<any>): void\n    {\n        this._cr = this._viewContainerRef.createComponent(\n            this._componentFactoryResolver.resolveComponentFactory(componentContent.controlType)\n        );\n        (this._cr.instance as FormFieldControl).content = componentContent;\n    }\n\n\t/**\n\t * Initializes the control's value. It uses the `content.value` and it is already different of `undefined`. \n     * It also checks if the specified `content.value` is correct. For internal use only. \n\t */\n\tprotected initValue(): void\n\t{\n        /* It does not need to do something because the child controls are already initialized. */\n\n        // /* In this way, checks if the specified `content.value` is correct. */\n        // this.content.formControl.setValue(this.content.value);\n\n        // /* Marks the control as `touched`. */\n        // this.content.formControl.markAsTouched({\n        //     onlySelf: true\n        // });\n    }\n\n    /**\n     * Returns this instance. \n     */\n    public get getInstance(): ContainerControl\n    {\n        return this;\n    }\n\n    /**\n     * Returns an array of controls that represents the `ContainerControl`'s child controls. \n     * It is always set internally. \n     */\n    public get containerControlChildren(): any[]\n    {\n        return this.content.containerControlChildren;\n    }\n\n    /**\n     * If the `content.formSection` represents a `FormArray`, then this field returns \n     * a pattern content that is `content.formSectionContent[0]` value; otherwise, returns `undefined`. \n     * It is shared among controls. \n     * It is used for adding a new element in the `content.formSectionContent`, that is, \n     * for adding a new control in the `FormArray`. \n     * By default, its value is `undefined`. \n     */\n    public get formArrayPatternContent(): any\n    {\n        return this._formArrayPatternContent;\n    }\n\n    /**\n     * If the `content.formSection` represents a `FormArray`, then this field returns \n     * a pattern value that is a clone of the `content.value[0]` value, and sets all \n     * its properties/values of built-in type to `undefined`; otherwise, returns `undefined`. \n     * It is used for adding a new element in the `content.formSectionContent`. \n     * By default, its value is `undefined`. \n     */\n    public get formArrayPatternValue(): any\n    {\n        return this._formArrayPatternValue;\n    }\n\n    /**\n     * Returns true if the container control has a dynamic length, that is, the `content.formSection` field \n     * represents a `FormArray` and its length is not fixed; otherwise, false. \n     * This property has sense only when the `content.formSection` field represents a `FormArray`. \n     */\n    public get isDynamic(): boolean\n    {\n        return this.content.isDynamic;\n    }\n\n    /**\n     * Returns true if the container control is a `FormArray`, that is, the `content.formSection` field \n     * represents a `FormArray`; otherwise, false. \n     */\n    public get isFormArray(): boolean\n    {\n        return this._isFormArray;\n    }\n\n\t/**\n\t * Returns true if this container is empty; otherwise, false. \n\t */\n\tpublic get isEmpty(): boolean\n\t{\n\t\treturn (this.content.formSectionContent.length == 0);\n    }\n\n\t/**\n\t * Returns true if an element can be removed from the `content.formSection`; otherwise, false. \n     * Use along with `removeFromFormArray` and `clearFormArray` methods. \n     * The `content.formSection` must be an instance of `FormArray`. \n\t */\n\tpublic get canRemoveFromFormArray(): boolean\n\t{\n        /* The method uses the `_formArrayLength` instead of `content.formSection` because \n        the first one field is updated first and it has the answer more accurate than the second one field. */\n\n        if (this.content.required)\n        {\n            return (this._formArrayLength > 1);\n        }\n        else\n        {\n            return (this._formArrayLength != 0);\n        }\n    }\n\n    /**\n     * Adds an empty element at the end of the `content.formSectionContent`; therefore one element \n     * is added at the end of the `content.formSection` `FormArray`. \n     * The `content.formSection` must be an instance of `FormArray`. \n     */\n\tpublic addToFormArray(): void\n\t{\n        console.log('addToFormArray');\n\n        if (this._isFormArray)\n        {\n            this.createChildComponents(\n                this._initElemFormSectionContentToFormArray(this._formArrayPatternValue)\n            );\n        }\n        else\n        {\n            throw new Error(`For the '${ this.content.name }' control, the 'content.formSection' value must be an instance of 'FormArray'.`);\n        }\n\t}\n\n    /**\n     * Removes the element at the given `index` in the `content.formSectionContent`; therefore \n     * the element at the given `index` is removed in the `content.formSection` `FormArray`. \n     * The `content.formSection` must be an instance of `FormArray`. \n     * @param index Index in the array to remove the element. \n     */\n\tpublic removeFromFormArray(index: number): void\n\t{\n        console.log('removeFromFormArray', index);\n\n        if (this._isFormArray)\n        {\n            //TODO: la variable `formArrayPatternContentLength` podría ser un campo de la clase. \n            let formArrayPatternContentLength: number = this._formArrayPatternContent.length;\n            let i: number, j: number, k: number;\n\n            this.content.containerControlChildren.splice(index, 1);\n            this.content.formSectionContent.splice((index * formArrayPatternContentLength), formArrayPatternContentLength);\n            (this.content.formSection as FormArray).removeAt(index);\n            for (i = formArrayPatternContentLength, j = index * formArrayPatternContentLength; i != 0; i--)\n            { this._viewContainerRef.remove(j); }\n            this._formArrayLength--;\n\n            /* Updates the elements' index in the `content.formSectionContent` array from \n            the specified `index` onwards. */\n            for (k = (i = index * formArrayPatternContentLength) + formArrayPatternContentLength, j = this.content.formSectionContent.length; i < j; i++)\n            {\n                if (i == k) { index++; k += formArrayPatternContentLength; }\n                this.content.formSectionContent[i].name = index.toString(10);\n            }\n        }\n        else\n        {\n            throw new Error(`For the '${ this.content.name }' control, the 'content.formSection' value must be an instance of 'FormArray'.`);\n        }\n    }\n\n    /**\n     * Removes all elements in the `content.formSectionContent`; therefore \n     * all elements are removed in the `content.formSection` `FormArray`. \n     * The `content.formSection` must be an instance of `FormArray`. \n     */\n\tpublic clearFormArray(): void\n\t{\n        console.log('clearFormArray');\n\n        if (this._isFormArray)\n        {\n            this.content.containerControlChildren = [ ];\n            this.content.formSectionContent = [ ];\n            (this.content.formSection as FormArray).clear();\n            this._viewContainerRef.clear();\n            this._formArrayLength = 0;\n\n            if (this.content.required)\n            {\n                /* The `FormArray` always has one element at least. */\n                this.addToFormArray();\n            }\n        }\n        else\n        {\n            throw new Error(`For the '${ this.content.name }' control, the 'content.formSection' value must be an instance of 'FormArray'.`);\n        }\n    }\n}\n","\nimport { Component, OnInit, Input, OnChanges } from \"@angular/core\";\n\nimport { ContainerContent, ContainerControl } from \"../container.control\";\n\n/**\n * This interface is deprecated. \n */\nexport interface FormContainerAction {\n  doit(data: any): void;\n}\n\n/**\n * This interface is deprecated. \n * An interface that represents the content of an expansion control.\n */\nexport interface PanelContent_Depr extends ContainerContent {\n  /**\n   * Returns the panel's title.\n   */\n  title: string;\n\n  /**\n   * Returns the panel's description.\n   */\n  description: string;\n\n  /**\n   * Returns the panel's icon name.\n   */\n  iconName: string;\n\n  /**\n   * Returns the action and action labels for each panel.\n   */\n  action?: FormContainerAction;\n  actionLabel?: string;\n\n  /**\n   * Returns true is the panel is open; otherwise, false.\n   */\n  open?: boolean;\n}\n\n/**\n * This component is deprecated. \n * Represents a control that contains a list of panels and sends that information to the server.\n */\n@Component({\n  selector: \"toco-form-container\",\n  templateUrl: \"./form-container.component.html\",\n  styleUrls: [\"./form-container.component.scss\"],\n})\nexport class FormContainerComponent extends ContainerControl\n  implements OnInit, OnChanges {\n  /**\n   * Input field that contains the content of this class. The array of panels to show.\n   */\n  @Input()\n  public panelsContent: PanelContent_Depr[];\n\n  @Input()\n  public useAccordion: boolean = true;\n\n  @Input()\n  public useContainer: boolean = true;\n\n  @Input()\n  public actionButtonIsStepperNext: boolean = false;\n\n  @Input()\n  public action: FormContainerAction;\n\n  /**\n   * An string that represents the action label of the last panel.\n   */\n  @Input()\n  public actionLabel: string;\n\n  @Input()\n  public deleteValuesAfterAction: boolean = true;\n\n  /**\n   * The current expanded panel position.\n   */\n  public step: number;\n\n  public constructor() {\n    super();\n\n    /* By default, the first panel is expanded. */\n    this.step = 0;\n  }\n\n  private setFormGroupToPanels(): void {\n    this.panelsContent.forEach((panel) => {\n      panel.formSection = panel.formSection;\n    });\n  }\n\n  public ngOnInit(): void {\n    console.log(\"on INIT call\", this.panelsContent);\n\n    /* Sets the default values. */\n    if (this.panelsContent.length > 0) {\n      this.content = {\n        formSection: this.panelsContent[0].formSection,\n        name: \"FormContainerComponent\",\n        label: \"FormContainerComponent_Label\",\n        type: undefined,\n        value: \"FormContainerComponent\",\n        //            'width': '100%',\n        ariaLabel: \"FormContainerComponent\",\n        formSectionContent: this.panelsContent[0].formSectionContent,\n      };\n    }\n\n    this.init(undefined);\n\n    // if actionLabel is undefined, means that there is no actionLabel, the user must decide!!!\n    // if (this.actionLabel == undefined) this.actionLabel = 'Adicionar';\n    this.setFormGroupToPanels();\n  }\n\n  public ngOnChanges(): void {\n    console.log(\"on CHANGES call\", this.panelsContent);\n    this.ngOnInit();\n\n    // this.init(this.content.label, false, false);\n    // this.setFormGroupToPanels();\n  }\n\n  /**\n   * Sets the new expanded panel position.\n   * @param newStep The new position.\n   */\n  public setStep(newStep: number): void {\n    this.step = newStep;\n  }\n\n  /**\n   * Sets the expanded panel position to the next position.\n   */\n  public nextStep(): void {\n    this.step++;\n  }\n\n  /**\n   * Sets the expanded panel position to the previous position.\n   */\n  public prevStep(): void {\n    this.step--;\n  }\n\n  /**\n   * Sends data to the server. Collects all added information from the component.\n   * Creates a JSON object based on `form.name` and `form.value` fields.\n   */\n  public doAction(): void {\n    //TODO: poner este method in `ContainerControl`.\n\n    /* Prepares all data. */\n\n    const data = {};\n\n    this.panelsContent.forEach((panel) => {\n      panel.formSectionContent.forEach((controlContent) => {\n        data[controlContent.name] = controlContent.value;\n      });\n    });\n\n    if (this.action) {\n      this.action.doit(data);\n    }\n\n    if (this.deleteValuesAfterAction) {\n      this.panelsContent.forEach((panel) => {\n        panel.formSectionContent.forEach((controlContent) => {\n          controlContent.value = undefined;\n        });\n      });\n    }\n  }\n}\n","\nimport { Component, OnInit, Input } from '@angular/core';\n\nimport { ContainerContent, ContainerControl } from '../container.control';\n\n/**\n * An interface that represents the content of a panel control. \n */\nexport interface PanelContent extends ContainerContent\n{\n    /**\n     * In this case, the `label?: string` field inherited from `FormFieldContent` is interpreted as: \n     * Returns the control's title. \n     * By default, its value is `''`. Each control sets its own label (title). \n     */\n\n    /**\n     * Returns the panel's description. \n     * By default, its value is `undefined`. \n     */\n    description?: string;\n\n    /**\n     * Returns the panel's icon name. \n     * By default, its value is `undefined`. \n     */\n    iconName?: string;\n}\n\n/**\n * Represents a container control that is showed as a panel. \n * Usage notes: \n *  - It can be used as: \n * <container-panel [content]=\"panelContent\"></container-panel> \n * Where `content.formSection` is created, for example, as this: \n * this.content.formSection = new FormGroup({ }, [ ]); \n */\n@Component({\n\tselector: 'container-panel',\n\ttemplateUrl: './panel-container.component.html',\n\tstyleUrls: ['./panel-container.component.scss'],\n\thost: {\n\t\t'[style.minWidth]': 'content.minWidth',\n\t\t'[style.width]': 'content.width'\n\t}\n})\nexport class ContainerPanelComponent extends ContainerControl implements OnInit\n{\n    /**\n     * Input field that contains the content of this class. \n     */\n    @Input()\n\tpublic content: PanelContent;\n\n\tpublic constructor()\n\t{\n        super();\n\t}\n\n\tpublic ngOnInit(): void\n\t{\n\t\t/* Sets the default values. */\n        this.init('');\n    }\n\n    /**\n     * Initializes the `content` input property. \n     * @param label The default label to use. It is used if the `content.label` is not specified. \n     */\n    protected init(label: string): void\n    {\n        /* Sets the default values. */\n\n        super.init(label);\n\n        /* The `content.description`, and `content.iconName` fields \n        have the `undefined` value by default. */\n    }\n}\n","\nimport { Component, OnInit } from '@angular/core';\n\nimport { ContainerControl } from '../container.control';\n\n/**\n * Represents a container control that is showed very simple. \n * Usage notes: \n *  - It can be used as: \n * <container-simple [content]=\"simpleContent\"></container-simple> \n * Where `content.formSection` is created, for example, as this: \n * this.content.formSection = new FormGroup({ }, [ ]); \n */\n@Component({\n\tselector: 'container-simple',\n\ttemplateUrl: './simple-container.component.html',\n\tstyleUrls: ['./simple-container.component.scss'],\n\thost: {\n\t\t'[style.minWidth]': 'content.minWidth',\n\t\t'[style.width]': 'content.width'\n\t}\n})\nexport class ContainerSimpleComponent extends ContainerControl implements OnInit\n{\n\tpublic constructor()\n\t{\n        super();\n\t}\n\n\tpublic ngOnInit(): void\n\t{\n\t\t/* Sets the default values. */\n        this.init('');\n\t}\n\n    /**\n     * Initializes the `content` input property. \n     * @param label The default label to use. It is used if the `content.label` is not specified. \n     */\n    protected init(label: string): void\n    {\n        /* Sets the default values. */\n\n        super.init(label);\n    }\n}\n","\nimport { Component, OnInit, OnDestroy, ViewChild, Input } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { MatTableDataSource, MatSort, MatPaginator, Sort, PageEvent } from '@angular/material';\nimport { Observable, Subscription, Subject, combineLatest } from 'rxjs';\nimport { startWith, switchMap, finalize, debounceTime, distinctUntilChanged } from 'rxjs/operators';\n\nimport { SortDirection, FilterControls, FilterValues, Page, Params, BackendDataSourceFunction } from '../../../core/public-api';\n\n/**\n * A collection of CSS styles. \n */\nexport type CssStyles = Params<string>;\n\n/**\n * An enum that represents how to wrap the content of a table cell. \n */\nexport enum CellContentWrap\n{\n    /**\n     * The `break` wrap breaks the content when reaching the end of a line. \n     */\n    break,\n\n    /**\n     * The `ellipsis` wrap clips the remaining content and renders an ellipsis (\"...\") \n     * to represent the clipped content. \n     */\n    ellipsis,\n\n    /**\n     * The `responsible` wrap is the default style. It only applies the responsible styles \n     * that are defined in the table. \n     */\n    responsible\n}\n\nexport interface TableAction {\n    icon: string;\n    route: string;\n    tooltip: string;\n}\n\n/**\n * A interface that represents the content of a table control. \n * The generic parameter T always refers to the type of data that it is dealing with. \n */\nexport interface TableContent<T>\n{\n    /**\n     * Returns the array of strings that indicates the object property name of the columns. \n     * By default, its value is `[]`. \n     */\n    columnsObjectProperty?: string[];\n\n    /**\n     * Returns the array of strings that indicates the header text of the columns. \n     * By default, its value is `[]`. \n     */\n    columnsHeaderText?: string[];\n\n    /**\n     * Returns the array of strings that indicates the width of the columns. \n     * By default, its value is `[]`. \n     */\n    columnsWidth?: string[];\n\n    /**\n     * Returns the array of `CellContentWrap` that indicates how to wrap the content of the columns. \n     * By default, its value is `[]`. \n     */\n    columnContentWrap?: CellContentWrap[];\n\n    /**\n     * Returns a function that creates the list of CSS classes to apply to the table rows. \n     * In order to take effect these classes, the table CSS file must have defined these classes. \n     * By default, its value is `undefined`. \n     * @param rowData The data that is contained in the row. \n     */\n    createCssClassesForRow?: (rowData: any) => { [className: string]: boolean; };\n\n\n\n    /**\n     * Returns the property name of the data contained in `page` that is used to identify that data. \n     * By default, its value is `''`. \n     */\n    propertyNameToIdentify?: string;\n\n\n\n    /**\n     * The current filter state. \n     * By default, its value is `{}`. \n     */\n    filter?: FilterControls;\n\n    /**\n     * The current sort state. \n     * By default, its value is `{ 'active': propertyNameToIdentify, 'direction': SortDirection.asc }`. \n     */\n    sort?: Sort;\n\n    /**\n     * Returns the length of the total number of items that are being paginated. \n     * By default, its value is `0`. \n     */\n    length?: number;\n\n    /**\n     * Returns the zero-based page index of the displayed list of items. \n     * By default, its value is `0`. \n     */\n    pageIndex?: number;\n\n    /**\n     * Returns the number of items to display on a page. \n     * By default, its value is `50`. \n     */\n    pageSize?: number;\n\n    /**\n     * Returns the set of provided page size options to display to the user. \n     * By default, its value is `[10, 20, 50]`. \n     */\n    pageSizeOptions?: number[];\n\n    /**\n     * Returns true if it hides the page size selection UI from the user; otherwise, false. \n     * By default, its value is `false`. \n     */\n    hidePageSize?: boolean;\n\n    /**\n     * Returns true if it shows the first/last buttons UI to the user; otherwise, false. \n     * By default, its value is `false`. \n     */\n    showFirstLastButtons?: boolean;\n\n\n\n    /**\n     * Returns the function that is used to get the data source from backend. \n     * The generic parameter T always refers to the type of data that it is dealing with. \n     * By default, its value is `undefined`. \n     */\n    endpoint?: BackendDataSourceFunction<T>;\n\n    actions?: TableAction[];\n}\n\n/**\n * Returns a new object that represents the default `TableContent`. \n */\nexport function defaultTableContent(): TableContent<any>\n{\n    return {\n        'columnsObjectProperty': [],\n        'columnsHeaderText': [],\n        'columnsWidth': [],\n        'columnContentWrap': [],\n        'createCssClassesForRow': undefined,\n\n        'propertyNameToIdentify': '',\n\n        'filter': {},\n        'sort': {\n            'active': this._content.propertyNameToIdentify,\n            'direction': SortDirection.asc\n        },\n        'length': 0,\n        'pageIndex': 0,\n        'pageSize': 50,\n        'pageSizeOptions': [10, 20, 50],\n        'hidePageSize': false,\n        'showFirstLastButtons': false,\n\n        'endpoint': undefined\n    };\n}\n\n/**\n * @description\n * Represents a table control. \n */\n@Component({\n    selector: 'toco-table',\n    templateUrl: './table.component.html',\n    styleUrls: ['./table.component.scss']\n})\nexport class TableComponent implements OnInit, OnDestroy\n{\n    /**\n     * Returns the amount of backend subscriptions. \n     * When its value is different of 0, means the component is loading the data source. \n     * In this way, it shows/hides the loading progress control. \n     * By default, its value is `0`. \n     */\n    private _countBackendSubscriptions: number;\n\n    private _content: TableContent<any>;\n\n    /**\n     * Returns the stream that emits the page that should be rendered by the table, \n     * when there is a change in the filtering, sorting, or pagination of the data. Each object \n     * in the `data` field represents one row. This is made for someone that wants to know it. \n     */\n    private readonly _page: Subject<Page<any>>;  \n    private _pageAsObservable: Observable<Page<any>>;\n    private _dataSource: MatTableDataSource<any>;\n    /* Returns a data source with only one empty element. */\n    private static readonly _defaultDataSource: MatTableDataSource<any> = new MatTableDataSource([ { } ]);\n    private _selectedRow: number;  /* Represents the selected row. */\n\n    /**\n     * Stream that emits when a new filter is set on the data source. \n     * Because of the behavior and appearance of the component, it is necessary to use \n     * `Subject` instead of `BehaviorSubject` to represent the `_filterValuesChange`. \n     */\n    private readonly _filterValuesChange: Subject<FilterValues>;\n    /* The current filter values. */\n    private _filterValues: FilterValues;\n    /* The current subscriptions for observing the changes in the filter controls value. It has the same properties than `_filterValues` */\n    private _filterValuesSubscription: Params<Subscription>;\n\n    @ViewChild(MatSort, { static: true })\n    private _sort: MatSort;\n\n    @ViewChild(MatPaginator, { static: true })\n    private _paginator: MatPaginator;\n\n    /**\n     * Subscription to the changes that should trigger an update to the table's rendered rows, such \n     * as filtering, sorting, or pagination. \n     */\n    private _renderChangesSubscription: Subscription;\n\n    public constructor(private _router: Router, private _activatedRoute: ActivatedRoute)\n    {\n        /* By default, its value is `0`, means the component is NOT loading the data source. */\n        this._countBackendSubscriptions = 0;\n\n        this._page = new Subject<Page<any>>();\n        this._pageAsObservable = this._page.asObservable();\n\n        this._dataSource = new MatTableDataSource();\n\n        this._selectedRow = undefined;\n\n        this._filterValuesChange = new Subject<FilterValues>();\n        this._filterValues = {};\n        this._filterValuesSubscription = {};\n\n        this._renderChangesSubscription = Subscription.EMPTY;\n    }\n\n    public ngOnInit(): void\n    {\n        /* Sets the default values only if the `_content` has not been set yet. */\n        if (this._content == undefined)\n        {\n            this.init();\n        }\n    }\n\n    public ngOnDestroy(): void\n    {\n        /* Disposes the resources held by the subscription. */\n        Object.keys(this._filterValuesSubscription).forEach((name: string) => {\n            this._filterValuesSubscription[name].unsubscribe();\n        });\n\n        /* Disposes the resources held by the subscription. */\n        this._renderChangesSubscription.unsubscribe();\n    }\n\n    /**\n     * Returns true if the data source is empty; otherwise, false. \n     */\n    public get isEmpty(): boolean\n    {\n        return (this._dataSource.data.length == 0);\n    }\n\n    /**\n     * Initializes the component. \n     */\n    protected init(): void\n    {\n        this._initContent();\n\n        this._updateChangeSubscription();\n    }\n\n    /**\n     * Initializes the `content` input property. \n     */\n    private _initContent(): void\n    {\n        /* Sets the default values. */\n\n        if (this._content == undefined) this._content = { };  /* This code line must be here. */\n\n        /**************************** `mat-cell` properties. ******************************/\n        if (this._content.columnsObjectProperty == undefined) this._content.columnsObjectProperty = [];\n        if (this._content.columnsHeaderText == undefined) this._content.columnsHeaderText = [];\n        if (this._content.columnsWidth == undefined) this._content.columnsWidth = [];\n        if (this._content.columnContentWrap == undefined) this._content.columnContentWrap = [];\n        if (this._content.createCssClassesForRow == undefined) this._content.createCssClassesForRow = this.defaultCreateCssClassesForRow.bind(this);\n\n        /**************************** `mat-row` properties. *******************************/\n        if (this._content.propertyNameToIdentify == undefined) this._content.propertyNameToIdentify = '';\n\n        /**************************** `filter` properties. ********************************/\n        if (this._content.filter == undefined) this._content.filter = {};\n\n        /***************************** `sort` properties. *********************************/\n        if (this._content.sort == undefined) this._content.sort = {\n            'active': this._content.propertyNameToIdentify,\n            'direction': SortDirection.asc\n        };\n\n        /************************* `mat-paginator` properties. ****************************/\n        if (this._content.length == undefined) this._content.length = 0;\n        if (this._content.pageIndex == undefined) this._content.pageIndex = 0;\n        if (this._content.pageSize == undefined) this._content.pageSize = 50;\n        if (this._content.pageSizeOptions == undefined) this._content.pageSizeOptions = [10, 20, 50];\n        if (this._content.hidePageSize == undefined) this._content.hidePageSize = false;\n        if (this._content.showFirstLastButtons == undefined) this._content.showFirstLastButtons = false;\n\n        /************************** Internal control properties. **************************/\n\n        /******************************* Other properties. ********************************/\n        /* The `_content.endpoint` field is `undefined` by default. */\n\n        /************************ Must be the last initialization. ************************/\n        this.checkColumn();\n    }\n\n    /**\n     * Updates the fields related to the filter component. \n     */\n    private _updateFilter(): void\n    {\n        /* For each filter property. */\n        Object.keys(this._content.filter).forEach((filterName: string) => {\n            /* Saves the initial values. */\n            this._filterValues[filterName] = this._content.filter[filterName].content.formControl.value;\n\n            /* Disposes the resources held by the subscription. */\n            if (this._filterValuesSubscription[filterName] != undefined) this._filterValuesSubscription[filterName].unsubscribe();\n\n            /* Subscribes to observe the changes in the control value when there is an external change. */\n            this._filterValuesSubscription[filterName] = this._content.filter[filterName].content.formControl.valueChanges.pipe(\n                /* Waits 500ms after each keystroke before considering the term. */\n                debounceTime(500),\n                /* Ignores new term if same as previous term. */\n                distinctUntilChanged()\n            )\n            .subscribe((value: any) => {\n                this.applyFilter(filterName, value);\n            });\n        });\n    }\n\n    /**\n     * Updates the fields related to sorting. \n     * @param sortEvent The new sorting to set. \n     */\n    private _updateSort(sortEvent: Sort): void\n    {\n        /* In this case, `_content` is updated with the new values; the `MatSort` already has them. */\n        this._content.sort.active = sortEvent.active;\n        this._content.sort.direction = sortEvent.direction;\n    }\n\n    /**\n     * Sets the `MatSort` initial values. \n     * The filter component and `MatPaginator` are initialized in a different way. \n     */\n    private _setMatSortInitialValue(): void\n    {\n        /* Saves the initial values. */\n        this._sort.active = this._content.sort.active;\n        this._sort.direction = this._content.sort.direction;\n    }\n\n    /**\n     * Updates the fields related to pagination. \n     * @param newPage The new page to set. Its type is `Page<any>` or `PageEvent`. \n     */\n    private _updatePaginator(newPage: any): void\n    {\n        /* In this case, `_content` is updated with the new values, then the `MatPaginator` \n         * takes the values via property binding from `_content` (through the template). */\n        this._content.length = (newPage.totalData || newPage.length);\n        this._content.pageIndex = newPage.pageIndex;\n        this._content.pageSize = newPage.pageSize;\n    }\n\n    /**\n     * Sets the `MatSort` and `MatPaginator` disabled or not. \n     * @param disabled Whether the `MatSort` and `MatPaginator` are disabled. \n     */\n    private _disabledSortPaginator(disabled: boolean): void\n    {\n        this._sort.disabled = disabled;\n        this._paginator.disabled = disabled;\n    }\n\n    /**\n     * Subscribes to changes that should trigger an update to the table's rendered rows. When the \n     * changes occur, process the current state of the filter, sort, and pagination along with \n     * the provided base data and send it to the table for rendering. \n     */\n    private _updateChangeSubscription(): void\n    {\n        if (this._content.endpoint == undefined) return;\n\n        /* Disposes the resources held by the subscription. */\n        this._renderChangesSubscription.unsubscribe();\n\n        /* Updates the fields related to the filter component; the `MatSort` and `MatPaginator` are updated later. */\n        this._updateFilter();\n        /* Sets the `MatSort` initial values; the filter component and `MatPaginator` are initialized in a different way. */\n        this._setMatSortInitialValue();\n\n        /* The `_filterValuesChange` is always present; although the user decides if it is used or not. \n         * Also, `MatSort` and `MatPaginator` are always present because they are managed by the component completely. \n         * Subscribes to get the values when there is a change in the filtering, sorting, or pagination of the data. */\n        this._renderChangesSubscription = combineLatest([\n            this._filterValuesChange.pipe(\n                /* Emits the first value. Filters using the initial values. The operators must be called in this order. */\n                startWith(this._filterValues)\n            ),\n            this._sort.sortChange.pipe(\n                /* Emits the first value. Sorts using the initial values. The operators must be called in this order. */\n                startWith(this._content.sort)\n            ),\n            this._paginator.page.pipe(\n                /* Emits the first value. Paginates using the initial values. */\n                startWith({\n                    'pageIndex': this._content.pageIndex,\n                    'pageSize': this._content.pageSize,\n                    'length': 0  /* In the first value, it is not important. */\n                })\n            )\n        ]).pipe(\n            /* Switches to new search observable each time the term changes. */\n            switchMap(([filterEvent, sortEvent, pageEvent]): Observable<Page<any>> => {\n\n                /* Adds the new backend subscription. It begins/continues the loading of the data. \n                 * In this way, it shows the loading progress control. */\n                this._countBackendSubscriptions++;\n                console.log('Call _countBackendSubscriptions: ', this._countBackendSubscriptions);\n\n                /* Erases the data from the table. */\n                this._setDataBeforeCallEndpoint(sortEvent, pageEvent);\n\n                return this._content.endpoint({\n                    'filter': filterEvent,\n                    'sort': sortEvent,\n                    'paginator': pageEvent\n                }).pipe(\n                    finalize(() => {\n                        /* Removes the last backend subscription. In this way, when its value is `0`, \n                         * means the component is NOT loading the data source; it then hides the loading progress control. */\n                        this._countBackendSubscriptions--;\n                    })\n                );\n            })\n        ).subscribe((response: Page<any>): void => {\n            //console.log('Endpoint Response: ', response);\n\n            /* Sets the new data on the table. */\n            this._setDataAfterCallEndpoint(response);\n\n            /* Emits the new page for someone that wants to know it. */\n            this._page.next(response);\n        });\n    }\n\n    /**\n     * Returns the list of CSS classes to apply to the table rows. This method must be only overwrite, \n     * but must never be called for performance reason; it is called in the correct places internally. \n     * In order to take effect these classes, the table CSS file must have defined these classes. \n     * @param rowData The data that is contained in the row. \n     */\n    protected defaultCreateCssClassesForRow(rowData: any): { [className: string]: boolean; }\n    {\n        return {\n            'selected-row': (rowData[this._content.propertyNameToIdentify]) == this._selectedRow\n        };\n    }\n\n    /**\n     * Returns the list of CSS styles to apply to the table headers. This method must never be called \n     * because it is for internal use only; it is called in the correct places internally. \n     * @param pos The column position. \n     */\n    public _createCssStylesForHeader(pos: number): CssStyles\n    {\n        let result: CssStyles = {};\n\n        this._addCssStyles_CellWidth(result, pos);\n\n        return result;\n    }\n\n    /**\n     * Returns the list of CSS styles to apply to the table cells. This method must never be called \n     * because it is for internal use only; it is called in the correct places internally. \n     * @param pos The column position. \n     */\n    public _createCssStylesForCell(pos: number): CssStyles\n    {\n        let result: CssStyles = {};\n\n        this._addCssStyles_CellWidth(result, pos);\n        this._addCssStyles_CellContentWrap(result, pos);\n\n        return result;\n    }\n\n    private _addCssStyles_CellWidth(cssStyles: CssStyles, pos: number): void\n    {\n        cssStyles['flex'] = '0 0 ' + this._content.columnsWidth[pos];\n        cssStyles['width'] = this._content.columnsWidth[pos];\n    }\n\n    private _addCssStyles_CellContentWrap(cssStyles: CssStyles, pos: number): void\n    {\n        switch(this._content.columnContentWrap[pos])\n        {\n            case CellContentWrap.break:\n            {\n                cssStyles['word-wrap'] = 'break-word' /*!important*/;\n                cssStyles['white-space'] = 'unset' /*!important*/;\n                cssStyles['overflow-wrap'] = 'break-word';\n                cssStyles['word-break'] = 'break-word';\n                \n                cssStyles['-ms-hyphens'] = 'auto';\n                cssStyles['-moz-hyphens'] = 'auto';\n                cssStyles['-webkit-hyphens'] = 'auto';\n                cssStyles['hyphens'] = 'auto';\n\n                break;\n            }\n            case CellContentWrap.ellipsis:\n            {\n                cssStyles['overflow'] = 'hidden';\n                cssStyles['text-overflow'] = 'ellipsis';\n                cssStyles['white-space'] = 'nowrap';\n\n                break;\n            }\n            default: /* CellContentWrap.responsible */\n            {\n                /* The `responsible` wrap is the default style. It only applies the responsible styles \n                 * that are defined in the table. */\n\n                break;\n            }\n        }\n    }\n\n    /**\n     * Returns true if it is loading the data source; otherwise, false. \n     */\n    public get isLoading(): boolean\n    {\n        /* When the `_countBackendSubscriptions` value is different of 0, \n         * means the component is loading the data source. */\n        return (this._countBackendSubscriptions != 0);\n    }\n\n    /**\n     * Returns the selected row. \n     */\n    public get selectedRow(): number\n    {\n        return this._selectedRow;\n    }\n\n    /**\n     * Returns the input field that contains the content of this class (the table control content to show). \n     */\n    @Input()\n    public get content(): TableContent<any>\n    {\n        return this._content;\n    }\n\n\t/**\n\t * Sets the input field that contains the content of this class (the table control content to show). \n     * In this way, the component is updated correctly. \n     * @param newContent The new content to set. \n     * If the value is null, sets to `defaultTableContent`. \n\t */\n    public set content(newContent: TableContent<any> | null)\n    {\n        this._content = newContent;\n        this.init();\n    }\n\n    /**\n     * Returns the stream that emits the page that should be rendered by the table, \n     * when there is a change in the filtering, sorting, or pagination of the data. Each object \n     * in the `data` field represents one row. This is made for someone that wants to know it. \n     */\n    public get page(): Observable<Page<any>>\n    {\n        return this._pageAsObservable;\n    }\n\n\t/**\n\t * Sets the page that should be rendered by the table, it erases the data. For internal use only. \n     * @param sortEvent The current sort state. \n     * @param pageEvent The current paginator state. \n\t */\n    private _setDataBeforeCallEndpoint(sortEvent: Sort, pageEvent: PageEvent): void\n    {\n        /* Erases the data from the table. */\n        this._dataSource.data = [];\n\n        /* Updates the fields related to sorting and pagination; the filter component is updated in a different way. */\n        this._updateSort(sortEvent);\n        this._updatePaginator(pageEvent);\n\n        /* The `MatSort` and `MatPaginator` are always enabled. */\n        this._disabledSortPaginator(false);\n    }\n\n\t/**\n\t * Sets the page that should be rendered by the table, where each object in the `newPage.data` \n     * represents one row. For internal use only. \n     * @param newPage The new page to set. \n\t */\n    private _setDataAfterCallEndpoint(newPage: Page<any>): void\n    {\n        /* In `_dataSource`, needs to update the data only. */\n        this._dataSource.data = newPage.data;\n\n        /* Updates the fields related to pagination; the filter component and sorting do not need to update. */\n        this._updatePaginator(newPage);\n\n        /* The `MatSort` and `MatPaginator` are disabled if the table is empty. */\n        this._disabledSortPaginator(this.isEmpty);\n    }\n\n    /**\n     * Returns the data source to render. If the data source is empty, then returns the default data source \n     * that contains only one empty element (it is used to show one row that contains the empty \n     * table information). For internal use only. \n     */\n    public get _getDataSource(): MatTableDataSource<any>\n    {\n        if (this.isEmpty) return TableComponent._defaultDataSource;\n\n        return this._dataSource;\n    }\n\n    /**\n     * Checks column. Logs a warn to the console is the array of columns is empty. \n     */\n    public checkColumn(): void\n    {\n        const len: number = this._content.columnsObjectProperty.length;\n\n        if ((len == 0)\n            || (len != this._content.columnsHeaderText.length)\n            || (len != this._content.columnsWidth.length)\n            || (len != this._content.columnContentWrap.length))\n        {\n            console.warn(\"The 'columnsObjectProperty', 'columnsHeaderText', 'columnsWidth' and 'columnContentWrap' arrays must be different of empty, and must have the same amount of elements.\");\n        }\n    }\n\n    /**\n     * Navigates to the view that shows information about the specified `rowData`. \n     * @param relativeUrl The relative URL to navigate. \n     * @param rowData The data that is contained in the row. \n     */\n    public navigateTo(relativeUrl: string, rowData: any): void\n    {\n        /* Selects the specified row. */\n        this.selectRow(rowData);\n\n        /* Navigates to the specified view. */\n        this._router.navigate([ rowData[this._content.propertyNameToIdentify], relativeUrl ], { relativeTo: this._activatedRoute });\n    }\n\n    /**\n     * Selects the specified row. \n     * @param rowData The data that is contained in the row. \n     */\n    public selectRow(rowData: any): void\n    {\n        /* Saves the selected row. */\n        this._selectedRow = rowData[this._content.propertyNameToIdentify];\n    }\n\n    /**\n     * Applies the filter model that should be used to filter out objects from the data source. \n     * Assumes that the backend will call the `trim()` method over its properties. \n     * This method is accepting a partial representation of the filter model. \n     * It combines the specified filter with the last one. This way old filter properties \n     * won't be overridden when only one property is updated. \n     * @param filter The partial representation of the filter model to combine. \n     */\n    public applyFilters(filter: Partial<FilterValues>): void\n    {\n        /* This method is accepting a partial representation of the filter model. \n         * It combines the specified filter with the last one by merging both filters \n         * via the spread operator. This way old filter properties won't be overridden \n         * when only one property is updated. \n         * It is not necessary to call the `trim()` method over its properties because it is called \n         * in the backend internally. */\n\n        this._filterValues = { ...this._filterValues, ...filter };\n\n        this._filterValuesChange.next(this._filterValues);\n    }\n\n    /**\n     * Applies the filter model that should be used to filter out objects from the data source. \n     * Assumes that the backend will call the `trim()` method over its properties. \n     * It combines the specified filter property with the last one. This way old filter properties \n     * won't be overridden when only one property is updated. \n     * @param name The filter name. \n     * @param value The filter value. \n     */\n    public applyFilter(name: string, value: any): void\n    {\n        /* It combines the specified filter property with the last one by merging both filters \n         * via the spread operator. This way old filter properties won't be overridden \n         * when only one property is updated. \n         * It is not necessary to call the `trim()` method over its properties because it is called \n         * in the backend internally. */\n\n        this._filterValues = { ...this._filterValues };\n        this._filterValues[name] = value;\n\n        this._filterValuesChange.next(this._filterValues);\n    }\n}\n","\nimport { Component, OnInit } from '@angular/core';\n\nimport { ContainerControl } from '../../container/container.control';\n\n/**\n * Represents a container control that allows the writing of a name of something in different language. \n */\n@Component({\n\tselector: 'container-label-diff-lang',\n\ttemplateUrl: './label-diff-lang-container.component.html',\n\tstyleUrls: ['./label-diff-lang-container.component.scss'],\n    host: {\n        '[style.minWidth]': 'content.minWidth',\n        '[style.width]': 'content.width'\n    }\n})\nexport class ContainerLabelDiffLangComponent extends ContainerControl implements OnInit\n{\n\tpublic constructor()\n\t{\n\t\tsuper();\n\t}\n\n\tpublic ngOnInit(): void\n\t{\n\t\t/* Sets the default values. */\n        this.init(undefined);\n\t}\n\n    /**\n     * Initializes the `content` input property. \n     * @param label The label to set. If the value is `undefined`, sets the label to `content.label`. \n     * @param isAbbreviation If it is true then the `label` argument represents an abbreviation; otherwise, false. \n     * @param alwaysHint If it is true then there is always at leat one hint start-aligned. \n     */\n    protected init(label: string | undefined): void\n    {\n        /* Sets the default values. */\n\n        super.init(label);\n    }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Input, ViewChild } from '@angular/core';\nimport { Validators, ValidationErrors, FormControl } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { isNullOrUndefined } from 'util';\n\nimport { ContentPosition, IconValue, HintPosition, HintValue,\n    FormFieldContent, FormFieldControl, ValidatorArguments } from '../form-field.control';\n\n/**\n * An enum that represents the appearance style of an `InputControl`. \n */\nexport enum TextInputAppearance\n{\n    /**\n     * The `standard` appearance is the default style. It shows the input box with an underline underneath it. \n     */\n    standard = 'standard',\n\n    /**\n     * The `fill` appearance displays the form field with a filled background box in addition to the underline. \n     */\n    fill = 'fill',\n\n    /**\n     * The `outline` appearance shows the form field with a border all the way around, not just an underline. \n     */\n    outline = 'outline'\n}\n\n/**\n * A base interface that represents the content of an `InputControl`. \n */\nexport interface InputContent extends FormFieldContent\n{\n    /**\n\t * Returns the `FormControl` that tracks the value and validity state of the internal control that contains the text input. \n     * Implementation notes: There are two cases: \n     *  - You only have the `content.formControl` field as the `InputEmailComponent` class. \n     *  - You have the `content.formControl` and `InputControl.internalComponent` fields as the `InputIssnComponent` class. \n     *  - It must be specified; otherwise, an exception is thrown. \n\t */\n    formControl?: FormControl;\n\n\n\n    /**\n     * Returns the control's appearance. \n     * By default, its value is `TextInputAppearance.standard`. \n     */\n    appearance?: TextInputAppearance;\n\n\n\n    /**\n     * Returns the control's prefix icon. \n     * By default, its value is `undefined`. \n     */\n    prefixIcon?: IconValue;\n\n    /**\n     * Returns the control's suffix icon. \n     * By default, its value is `undefined`. \n     */\n    suffixIcon?: IconValue;\n\n\n\n    /**\n     * Returns the control's prefix text. \n     * By default, its value is `undefined`. \n     */\n    prefixText?: string;\n\n    /**\n     * Returns the control's suffix text. \n     * By default, its value is `undefined`. \n     */\n    suffixText?: string;\n\n\n\n\t/**\n\t * Returns the control's start hint. \n\t * By default, its value is `undefined`. \n\t */\n    startHint?: HintValue;\n\n\t/**\n\t * Returns the control's end hint. \n\t * By default, its value is `undefined`. \n\t */\n    endHint?: HintValue;\n}\n\n/**\n * An interface which allows to manipulate the internal component that contains the text input. \n * This interface is implemented when it is created a custom `MatFormFieldControl`. \n */\nexport interface IInternalComponent\n{\n\t/**\n\t * Tracks the value and validity state of the internal control that contains the text input. \n\t */\n    readonly formControl: FormControl;\n\n\t/**\n\t * Returns or sets the value of the control. \n\t */\n    value: any | undefined;\n\n\t/**\n\t * Returns true if the control is empty; otherwise, false. \n     * A control is empty if its value is `undefined` or empty string. \n\t */\n\treadonly empty: boolean;\n\n    /**\n     * Returns true if the control is in an error state; otherwise, false. \n     */\n    readonly errorState: boolean;\n\n    /**\n     * Returns an error string if the control is in an error state; otherwise, empty string. \n     */\n    getErrorMessage(): string;\n}\n\n/**\n * Represents the base abstract class for a control that allows the writing/selection of a text. \n */\nexport abstract class InputControl extends FormFieldControl\n{\n    /**\n     * Returns a `FormControl` by default. \n     * Its value is empty, and does not have validators. \n     * @param validatorArguments A collection of key/value elements, where the key is the validator name \n     * and the value is the value that the validator needs to check. \n     */\n    public static getFormControlByDefault(validatorArguments: ValidatorArguments = undefined): FormControl\n    {\n        return new FormControl('', [ ]);\n    }\n\n    /**\n     * Input field that contains the content of this class. \n     */\n    @Input()\n    public content: InputContent;\n\n    /**\n\t * Tracks the value and validity state of the internal component that contains the text input. \n     * Implementation notes: There are two cases: \n     *  - You only have the `content.formControl` field as the `InputEmailComponent` class. \n     *  - You have the `content.formControl` and `internalComponent` fields as the `InputIssnComponent` class. \n\t */\n\t@ViewChild('internalComponent', { static: true })\n    protected readonly internalComponent: IInternalComponent;\n\n    protected static toco_ng_Error_Msg_Requerido: string = '';\n\n    /**\n     * Represents the validation error of required. Its default value can be overwritten. \n     */\n    protected validationError_required: string;\n\n    /**\n     * Constructs a new instance of this class. \n     */\n    public constructor()\n    {\n        super();\n\n        this.validationError_required = '';\n    }\n\n    /**\n     * Sets the new language. \n     * @param transServ The `TranslateService` instance injected. \n     */\n    protected setNewLanguage(transServ: TranslateService): void\n    {\n        /* The `InputControl.currentLang != transServ.currentLang` test is NOT necessary here because it is done in the non-abstract child classes. */\n\n        super.setNewLanguage(transServ);\n\n        /* The `InputControl.currentLang` value is updated correctly in the parent class. */\n\n        transServ.get('TOCO_NG_ERROR_MSG_REQUERIDO').subscribe((res: string) => {\n            InputControl.toco_ng_Error_Msg_Requerido = res;\n        });\n    }\n\n    /**\n     * Initializes the `content` input property. \n     * @param label The default label to use. It is used if the `content.label` is not specified. \n     * @param placeholder The default placeholder to use. It is used if the `content.placeholder` is not specified. \n     * @param isAbbreviation If it is true then the `label` argument represents an abbreviation; otherwise, false. \n     * @param alwaysHint If it is true then there is always at leat one hint start-aligned. \n     */\n    protected init(label: string, placeholder: string = '', isAbbreviation: boolean = false, alwaysHint: boolean = true): void\n    {\n        /* Sets the default values. */\n\n        super.init(label, placeholder);\n\n        if (this.content.formControl == undefined)\n        {\n            if (this.internalComponent == undefined) throw new Error(`For the '${ this.content.name }' control, the 'content.formControl' value can not be undefined; it must be a 'FormControl' value.`);\n\n            this.content.formControl = this.internalComponent.formControl;\n        }\n\n        // let temp: string = (isAbbreviation) ? this.content.label : this.content.label.toLowerCase();\n        this.validationError_required = 'TOCO_NG_ERROR_MSG_REQUERIDO';\n\n        /************************** Internal control properties. **************************/\n        if (this.content.required == undefined) this.content.required = false;\n\n        /************************** `mat-form-field` properties. **************************/\n        if (this.content.appearance == undefined) this.content.appearance = TextInputAppearance.standard;\n\n        /***************************** `mat-icon` properties. *****************************/\n        if (this.content.prefixIcon != undefined) this.content.prefixIcon.setDefaultValueIfUndefined_setPosition(ContentPosition.prefix);\n        if (this.content.suffixIcon != undefined) this.content.suffixIcon.setDefaultValueIfUndefined_setPosition(ContentPosition.suffix);\n\n        /***************************** `mat-hint` properties. *****************************/\n        if (alwaysHint && (this.content.startHint == undefined) && (this.content.endHint == undefined))\n        {\n            this.content.startHint = new HintValue(HintPosition.start, 'TOCO_NG_HINT_TEXTO_POR_DEFECTO');\n        }\n        else\n        {\n            if (this.content.startHint != undefined) this.content.startHint.setDefaultValueIfUndefined_setPosition(HintPosition.start);\n            if (this.content.endHint != undefined) this.content.endHint.setDefaultValueIfUndefined_setPosition(HintPosition.end);\n        }\n\n        /* Adds this control as a child to the `content.parentFormSection`. \n        It must be called at the end. */\n        if (this.content.parentFormSection != undefined)\n        {\n            console.log('addAsChildControl(this.content.formControl)');\n\n            this.addAsChildControl(this, this.content.formControl);\n        }\n    }\n\n\t/**\n\t * Initializes the control's value. It uses the `content.value` and it is already different of `undefined`. \n     * It also checks if the specified `content.value` is correct. For internal use only. \n\t */\n\tprotected initValue(): void\n\t{\n        /* In this way, checks if the specified `content.value` is correct. */\n        this.content.formControl.setValue(this.content.value);\n\n        /* Marks the control as `touched`. */\n        this.content.formControl.markAsTouched({\n            onlySelf: true\n        });\n    }\n\n    /**\n     * Returns this instance. \n     */\n    public get getInstance(): InputControl\n    {\n        return this;\n    }\n\n\t/**\n\t * Returns true if the control is empty; otherwise, false. \n     * A control is empty if its value is `undefined` or empty string. \n\t */\n\tpublic get empty(): boolean\n\t{\n        if (this.internalComponent == undefined) return ((isNullOrUndefined(this.content.formControl.value)) || (this.content.formControl.value === ''));\n        return this.internalComponent.empty;\n    }\n\n    /**\n     * Returns true if the control is in a hint state; otherwise, false. \n     */\n    public get hintState(): boolean\n    {\n        return this.empty;\n    }\n\n    /**\n     * Returns true if the control is in an error state; otherwise, false. \n     */\n    public get errorState(): boolean\n    {\n        /* The control does not display errors before the user has a \n         * chance to edit the form. The checks for dirty and touched prevent errors \n         * from showing until the user does one of two things: changes the value, \n         * turning the control dirty; or blurs the form control element, setting the \n         * control to touched. \n         * Thus, it reveals an error message only if the control is invalid and \n         * the control is either dirty or touched. */\n        if (this.internalComponent == undefined) return ((this.content.formControl.invalid) && (this.content.formControl.dirty || this.content.formControl.touched));\n        return this.internalComponent.errorState;\n    }\n\n\t/**\n\t * Handler method that is called when the control's value changes in the UI. For internal use only. \n     * If a derived class wants to do some specific handling then it must overwrite \n     * the `handleSpecificInput` method. \n\t */\n\tpublic handleInput(): void\n\t{\n        /* Calls the specific handling of the input that the derived class wants to do. */\n        this.handleSpecificInput();\n\n        // TODO: hacer la salva del valor del control para `this.content.value` de una mejor forma \n        // porque hacerlo aquí genera inconsistencias. Una mejor forma sería proporcionar un method que \n        // haga la función de salvar el valor y entonces es llamado cuando haga falta. \n        /* If the control does not have error ... */\n        if (!this.errorState)\n        {\n            /* ... sets the new value of the control in the `content`. */\n            this.content.value = this.content.formControl.value;\n        }\n\n        /* If the control is not marked as `touched` ... */\n        if (this.content.formControl.untouched)\n        {\n            /* ... marks the control as `touched`. */\n            this.content.formControl.markAsTouched({\n                onlySelf: true\n           });\n        }\n    }\n\n\t/**\n\t * Returns the control's default value. \n     * This function can be overwrite in the derived class. \n\t */\n    public get getDefaultValue(): any\n    {\n        /* By default, its implementation is returning the empty string. */\n\n        return '';\n    }\n\n    /**\n     * Returns an error string if the control is in an error state; otherwise, empty string. \n     * This function can be overwrite in the derived class. \n     */\n    public getErrorMessage(): string\n\t{\n        /* By default, its implementation is returning the error of the `internalComponent.getErrorMessage` \n         * method or returning the text errors. */\n\n        if (this.internalComponent != undefined) return this.internalComponent.getErrorMessage();\n\n        let validationErrors: ValidationErrors = this.content.formControl.errors;\n\n        /* Shows the text errors. */\n        if (validationErrors)\n        {\n            if (validationErrors[Validators.required.name])\n            {\n                return ((this.isTranslationBuiltByControl) ? InputControl.toco_ng_Error_Msg_Requerido : this.validationError_required);\n            }\n        }\n\n        return '';\n\t}\n    \n\t/**\n\t * Handler method that is called by the internal logic when the control's value changes in the UI. \n     * This method contains the specific handling of the input that the derived class wants to do. \n     * This function can be overwrite in the derived class. \n\t */\n    public handleSpecificInput(): void\n\t{\n        /* By default, its implementation has nothing to do. */\n    }\n}\n","\nimport { Component, OnInit } from '@angular/core';\nimport { isBoolean, isNullOrUndefined } from 'util';\n\nimport { InputControl } from '../input.control';\nimport { HintPosition, HintValue } from '../../form-field.control';\n\n/**\n * Represents a control that allows to select true or false value. \n */\n@Component({\n\tselector: 'input-bool',\n\ttemplateUrl: './bool-input.component.html',\n\tstyleUrls: ['./bool-input.component.scss'],\n\thost: {\n\t\t'[style.minWidth]': 'content.minWidth',\n\t\t'[style.width]': 'content.width'\n\t}\n})\nexport class InputBoolComponent extends InputControl implements OnInit\n{\n\tpublic constructor()\n\t{\n        super();\n\t}\n\n\tpublic ngOnInit(): void\n\t{\n        /* Sets the default values. */\n\t\tthis.init('', '', false, true);\n\n\t\tthis.onSelectionChange();\n\t}\n\n    /**\n     * Initializes the `content` input property. \n     * @param label The default label to use. It is used if the `content.label` is not specified. \n\t * @param placeholder The default placeholder to use. It is used if the `content.placeholder` is not specified. \n     * @param isAbbreviation If it is true then the `label` argument represents an abbreviation; otherwise, false. \n     * @param alwaysHint If it is true then there is always at leat one hint start-aligned. \n     */\n\t protected init(label: string, placeholder: string = '', isAbbreviation: boolean, alwaysHint: boolean): void\n\t {\n\t\t/* Sets the default values. */\n\n\t\tsuper.init(label, placeholder, isAbbreviation, alwaysHint);\n\n\t\tif (!isBoolean(this.content.value) && !isNullOrUndefined(this.content.value)) throw new Error(`For the '${ this.content.name }' control, the 'content.value' value must have a boolean type.`);\n\n\t\tif (this.content.startHint != undefined)\n\t\t{\n\t\t\tif (this.content.startHint.label == 'TOCO_NG_HINT_TEXTO_POR_DEFECTO') this.content.startHint.label = 'TOCO_NG_HINT_TEXTO_SELECC_POR_DEFECTO';\n\t\t}\n\t\telse this.content.startHint = new HintValue(HintPosition.start, 'TOCO_NG_HINT_TEXTO_SELECC_POR_DEFECTO');\n\t }\n\n\tpublic onSelectionChange(): void\n\t{\n\t\tif ((this.content.extraContent) && (this.content.extraContent.selectionChange))\n\t\t{\n\t\t\tthis.content.extraContent.selectionChange(this.content.formControl.value);\n\t\t}\n\n\t\t// console.log('Select value: ', this.content.formControl.value);\n\t}\n}\n","\n/**\n * Data structure for holding an email. \n */\nexport class EmailValue\n{\n\t/**\n\t * Represents the email label. \n\t */\n\tpublic static readonly email_Label: string = 'Email';\n\n\t/**\n\t * Represents the email placeholder.\n\t */\n\tpublic static readonly email_Placeholder: string = 'nick@gmail.com';\n\n\t/**\n\t * The email value.\n\t */\n\tpublic email: string;\n\n\tpublic constructor(e: string)\n\t{\n\t\tthis.email = e;\n\t}\n\n    /**\n     * Returns a string representation of this `EmailValue` object. \n     */\n\t public toString(): string\n\t {\n\t\treturn EmailValue.email_Label + ' ' + this.email;\n\t }\n}\n","\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, Validators, ValidationErrors } from '@angular/forms';\n\nimport { InputControl } from '../input.control';\nimport { ValidatorArguments } from '../../form-field.control';\nimport { EmailValue } from './email-value';\n\n/**\n * Represents a control that allows the writing of an email. \n * It uses the `EmailValue.email_Label` as a label if the `content.label` is not specified. \n * It uses the `EmailValue.email_Placeholder` as a placeholder if the `content.placeholder` is not specified. \n */\n@Component({\n    selector: 'input-email',\n    templateUrl: '../text/text-input.component.html',\n    styleUrls: ['../text/text-input.component.scss'],\n    host: {\n        '[style.minWidth]': 'content.minWidth',\n        '[style.width]': 'content.width'\n    }\n})\nexport class InputEmailComponent extends InputControl implements OnInit\n{\n    /**\n     * Returns a `FormControl` by default. \n     * It is used to initialized the `InputEmailComponent`'s `content.formControl` value by default. \n     * In this case, the `validatorArguments` argument is always `undefined`. \n     */\n    public static getFormControlByDefault(validatorArguments: ValidatorArguments = undefined): FormControl\n    {\n        return new FormControl('', [\n            Validators.email\n        ]);\n    }\n\n    public constructor()\n    {\n        super();\n    }\n\n    public ngOnInit(): void\n    {\n        /* Sets the default values. */\n        this.init(EmailValue.email_Label, EmailValue.email_Placeholder, false, true);\n    }\n\n    /**\n     * Returns an error string if the control is in an error state; otherwise, empty string. \n     */\n    public getErrorMessage(): string\n    {\n        let validationErrors: ValidationErrors = this.content.formControl.errors;\n\n        /* Shows the email errors. */\n        if (validationErrors)\n        {\n            if (validationErrors[Validators.required.name])\n            {\n                return this.validationError_required;\n            }\n            else\n            {\n                /* It is `validationErrors[Validators.email.name]`. */\n                return 'TOCO_NG_ERROR_MSG_CORREO_INVAL';\n            }\n        }\n\n        return '';\n    }\n}\n","\n/**\n * Data structure for holding an identifier. \n */\nexport class IdentifierValue\n{\n\t/**\n\t * Represents the identifier label. \n\t */\n\tpublic static readonly identifier_Label: string = 'TOCO_NG_ID';\n\n\t/**\n\t * The identifier value.\n\t */\n\tpublic identifier: string;\n\n\tpublic constructor(id: string)\n\t{\n\t\tthis.identifier = id;\n\t}\n\n    /**\n     * Returns a string representation of this `IdentifierValue` object. \n     */\n\t public toString(): string\n\t {\n\t\treturn IdentifierValue.identifier_Label + ' ' + this.identifier;\n\t }\n}\n","\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, Validators, ValidationErrors } from '@angular/forms';\n\nimport { InputControl } from '../input.control';\nimport { ValidatorArguments } from '../../form-field.control';\nimport { IdentifierValue } from './identifier-value';\n\n/**\n * Represents a control that allows the writing of an identifier. \n * It uses the `IdentifierValue.identifier_Label` as a label if the `content.label` is not specified. \n */\n@Component({\n    selector: 'input-identifier',\n    templateUrl: '../text/text-input.component.html',\n    styleUrls: ['../text/text-input.component.scss'],\n    host: {\n        '[style.minWidth]': 'content.minWidth',\n        '[style.width]': 'content.width'\n    }\n})\nexport class InputIdentifierComponent extends InputControl implements OnInit\n{\n    /**\n     * Returns a `FormControl` by default. \n     * It is used to initialized the `InputIdentifierComponent`'s `content.formControl` value by default. \n     * @param validatorArguments An object that has only one field of `pattern` name and its value is a string. \n     * The `pattern` name is the validator name and the value is the value that the validator needs to check. \n     * For example, you can call the `getFormControlByDefault` method in this way: \n     * InputIdentifierComponent.getFormControlByDefault({ 'pattern': '^[a-zA-Z\\_][a-zA-Z\\-\\_0-9]*$' });\n     * If this argument is not specified, by default its value is { 'pattern': '^[a-zA-Z\\-\\_]*$' }. \n     */\n    public static getFormControlByDefault(validatorArguments: ValidatorArguments = undefined): FormControl\n    {\n        return new FormControl('', [\n            (((validatorArguments) && (validatorArguments.pattern)) ? Validators.pattern(validatorArguments.pattern) : Validators.pattern('^[a-zA-Z\\-\\_]*$'))\n            // Validators.pattern(/((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[\\-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9\\.\\-]+|(?:www\\.|[\\-;:&=\\+\\$,\\w]+@)[A-Za-z0-9\\.\\-]+)((?:\\/[\\+~%\\/\\.\\w\\-_]*)?\\??(?:[\\-\\+=&;%@\\.\\w_]*)#?(?:[\\.\\!\\/\\\\\\w]*))?)/i)\n        ]);\n    }\n\n    public constructor()\n    {\n        super();\n    }\n\n    public ngOnInit(): void\n    {\n        /* Sets the default values. */\n        this.init(IdentifierValue.identifier_Label, '', false, true);\n    }\n\n    /**\n     * Returns an error string if the control is in an error state; otherwise, empty string. \n     */\n    public getErrorMessage(): string\n    {\n        let validationErrors: ValidationErrors = this.content.formControl.errors;\n\n        /* Shows the identifier errors. */\n        if (validationErrors)\n        {\n            if (validationErrors[Validators.required.name])\n            {\n                return this.validationError_required;\n            }\n            else\n            {\n                /* It is `validationErrors[Validators.pattern.name]`. */\n                return 'TOCO_NG_ERROR_MSG_ID_INVAL';\n            }\n        }\n\n        return '';\n    }\n}\n","\n/**\n * Represents the abbreviation for an ISSN type. \n */\nexport enum IssnType_Abbreviation\n{\n\t/**\n\t * The ISSN abbreviation by default. \n\t */\n\tISSN = 'ISSN',\n\n\t/**\n\t * The ISSN abbreviation for the print media (paper) version of a serial. \n\t * Usually it is the \"default media\", so the \"default ISSN\". \n\t */\n\tp_ISSN = 'p-ISSN',\n\n\t/**\n\t * The ISSN abbreviation for the electronic media (online) version of a serial. \n\t */\n\te_ISSN = 'e-ISSN',\n\n\t/**\n\t * The ISSN abbreviation for the linking ISSN. \n\t * It is a specific ISSN that groups the different media of the same serial publication. \n\t * A single ISSN-L is designated for all media of a serial publication, irrespective of how many there are. \n\t * A serial publication is associated with a single ISSN-L. \n\t */\n\tISSN_L = 'ISSN-L'\n}\n\n/**\n * Represents the label for an ISSN type. \n */\nexport enum IssnType_Label\n{\n\t/**\n\t * The ISSN label. \n\t */\n\tISSN = 'TOCO_NG_ISSN',\n\n\t/**\n\t * The ISSN label for the print ISSN. \n\t */\n\tp_ISSN = 'TOCO_NG_P_ISSN',\n\n\t/**\n\t * The ISSN label for the electronic ISSN. \n\t */\n\te_ISSN = 'TOCO_NG_E_ISSN',\n\n\t/**\n\t * The ISSN label for the linking ISSN. \n\t */\n\tISSN_L = 'TOCO_NG_ISSN_L'\n}\n\n/**\n * Data structure for holding an ISSN. \n * An ISSN (International Standard Serial Number) is an 8-digit code. \n * This control stores the code as a string of length 11, with the form 'XXXX – XXXX'. \n * It is used to identify newspapers, journals, magazines and periodicals \n * of all kinds and on all media–print and electronic. For more information \n * follow the link: https://www.issn.org/understanding-the-issn/what-is-an-issn/. \n */\nexport class IssnValue\n{\n\t/**\n\t * Represents the ISSN placeholder.\n\t */\n\tpublic static readonly issn_Placeholder: string = 'XXXX – XXXX';\n\n\t/**\n\t * The amount of characters in the code. \n\t */\n\tpublic static readonly codeLength: number = 11;\n\n\t/**\n\t * The amount of characters in the code as string value. \n\t */\n\tpublic static readonly codeLengthAsString: string = IssnValue.codeLength.toString(10);\n\n\t/**\n\t * The character that represents the code group separator. \n\t */\n\tpublic static readonly codeGroupSeparator: string = '–';\n\n\t/**\n\t * The string that represents the code group separator with space. \n\t */\n\tpublic static readonly codeGroupSeparatorWithSpace: string = ' ' + IssnValue.codeGroupSeparator + ' ';\n\n\t/**\n\t * The regular expression that matches an ISSN code as a string of length 11, with the form 'XXXX – XXXX'. \n\t */\n\tpublic static readonly regExpIssnWithLength_11: string = '^[0-9]{4} ' + IssnValue.codeGroupSeparator + ' [0-9]{3}[0-9xX]$';\n\n\t/**\n\t * The regular expression that matches an ISSN code as a string of length 9, with the form 'XXXX–XXXX'. \n\t */\n\tpublic static readonly regExpIssnWithLength_9: string = '^[0-9]{4}' + IssnValue.codeGroupSeparator + '[0-9]{3}[0-9xX]$';\n\n\t/**\n\t * The regular expression that matches an ISSN code as a string of length 8, with the form 'XXXXXXXX'. \n\t */\n\tpublic static readonly regExpIssnWithLength_8: string = '^[0-9]{7}[0-9xX]$';\n\n\t/**\n\t * General purpose method. \n\t * Converts the specified ISSN code to a code with length 11 with the form 'XXXX – XXXX'. \n\t * @param code The code to convert. \n\t */\n\tpublic static convertIssnToLength_11(code: string): string\n\t{\n\t\tlet fg: string;\n\t\tlet sg: string;\n\n\t\tif (code.length == 8)\n\t\t{\n\t\t\tfg = code.slice(0, 4);\n\t\t\tsg = code.slice(4, 7);\n\n\t\t\treturn (fg + ' ' + IssnValue.codeGroupSeparator + ' ' + sg + ((code[7] == 'x') ? 'X' : code[7]));\n\t\t}\n\t\telse if (code.length == 9)\n\t\t{\n\t\t\tfg = code.slice(0, 4);\n\t\t\tsg = code.slice(5, 8);\n\n\t\t\treturn (fg + ' ' + IssnValue.codeGroupSeparator + ' ' + sg + ((code[8] == 'x') ? 'X' : code[8]));\n\t\t}\n\t\telse  /* The code length is 11. */\n\t\t{\n\t\t\tfg = code.slice(0, 5);\n\t\t\tsg = code.slice(6, 10);\n\n\t\t\treturn (fg + IssnValue.codeGroupSeparator + sg + ((code[10] == 'x') ? 'X' : code[10]));\n\t\t}\n\t}\n\n\t/**\n\t * General purpose method. \n\t * Converts the specified ISSN code to a code with length 9 with the form 'XXXX–XXXX'. \n\t * @param code The code to convert. \n\t */\n\tpublic static convertIssnToLength_9(code: string): string\n\t{\n\t\tlet fg: string;\n\t\tlet sg: string;\n\n\t\tif (code.length == 8)\n\t\t{\n\t\t\tfg = code.slice(0, 4);\n\t\t\tsg = code.slice(4, 7);\n\n\t\t\treturn (fg + IssnValue.codeGroupSeparator + sg + ((code[7] == 'x') ? 'X' : code[7]));\n\t\t}\n\t\telse if (code.length == 9)\n\t\t{\n\t\t\tfg = code.slice(0, 4);\n\t\t\tsg = code.slice(5, 8);\n\n\t\t\treturn (fg + IssnValue.codeGroupSeparator + sg + ((code[8] == 'x') ? 'X' : code[8]));\n\t\t}\n\t\telse  /* The code length is 11. */\n\t\t{\n\t\t\tfg = code.slice(0, 4);\n\t\t\tsg = code.slice(7, 10);\n\n\t\t\treturn (fg + IssnValue.codeGroupSeparator + sg + ((code[10] == 'x') ? 'X' : code[10]));\n\t\t}\n\t}\n\n\t/**\n\t * General purpose method. \n\t * Converts the specified ISSN code to a code with length 8 with the form 'XXXXXXXX'. \n\t * @param code The code to convert. \n\t */\n\tpublic static convertIssnToLength_8(code: string): string\n\t{\n\t\tlet fg: string;\n\t\tlet sg: string;\n\n\t\tif (code.length == 9)\n\t\t{\n\t\t\tfg = code.slice(0, 4);\n\t\t\tsg = code.slice(5, 8);\n\n\t\t\treturn (fg + sg + ((code[8] == 'x') ? 'X' : code[8]));\n\t\t}\n\t\tif (code.length == 11)\n\t\t{\n\t\t\tfg = code.slice(0, 4);\n\t\t\tsg = code.slice(7, 10);\n\n\t\t\treturn (fg + sg + ((code[10] == 'x') ? 'X' : code[10]));\n\t\t}\n\t\telse  /* The code length is 8. */\n\t\t{\n\t\t\treturn code;\n\t\t}\n\t}\n\n\t/**\n\t * The code of `IssnValue.codeLength` characters. \n\t */\n\tpublic code: string;\n\n\tpublic constructor(c: string)\n\t{\n\t\tthis.code = IssnValue.convertIssnToLength_11(c);\n\t}\n\n\t/**\n\t * Returns true if the ISSN is complete; otherwise, false. \n\t * It is complete if the code of characters has the correct length. It does not check if the ISSN has \n\t * the correct digits. \n\t */\n\tpublic isComplete(): boolean\n\t{\n\t\treturn (this.code.length == IssnValue.codeLength);\n\t}\n\n\t/**\n\t * Returns a string representation of this `IssnValue` object. \n\t * @param acronym The acronym to use. \n\t */\n\tpublic toString(acronym: IssnType_Abbreviation | IssnType_Label): string\n\t{\n\t\treturn acronym + ' ' + this.code;\n\t}\n}\n","\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, Validators, ValidationErrors } from '@angular/forms';\n\nimport { ExtraValidators } from '../../../core/utils/validator';\n\nimport { IssnType_Abbreviation, IssnValue } from './issn-value';\nimport { InputControl } from '../input.control';\nimport { ValidatorArguments } from '../../form-field.control';\n\n/**\n * Represents a control that allows the writing of an ISSN. \n * An ISSN (International Standard Serial Number) is an 8-digit code. \n * This control stores the code as a string of length 11, with the form 'XXXX – XXXX'. \n * It is used to identify newspapers, journals, magazines and periodicals \n * of all kinds and on all media–print and electronic. For more information \n * follow the link: https://www.issn.org/understanding-the-issn/what-is-an-issn/. \n * It uses the `IssnType_Abbreviation.ISSN` as a label if the `content.label` is not specified. \n * It uses the `IssnValue.issn_Placeholder` as a placeholder if the `content.placeholder` is not specified. \n */\n@Component({\n    selector: 'input-issn',\n    templateUrl: '../text/text-input.component.html',\n    styleUrls: ['../text/text-input.component.scss'],\n    host: {\n        '[style.minWidth]': 'content.minWidth',\n        '[style.width]': 'content.width'\n    }\n})\nexport class InputIssnComponent extends InputControl implements OnInit\n{\n    /* Note: Before, this control worked well with a 'width' = '310px' or '285px'. */\n\n    /**\n     * Returns a `FormControl` by default. \n     * It is used to initialized the `InputIssnComponent`'s `content.formControl` value by default. \n     * In this case, the `validatorArguments` argument is always `undefined`. \n     */\n    public static getFormControlByDefault(validatorArguments: ValidatorArguments = undefined): FormControl\n    {\n        let res: FormControl = new FormControl('', [\n            ExtraValidators.equalLength(IssnValue.codeLength),\n            Validators.pattern(IssnValue.regExpIssnWithLength_11),\n            ExtraValidators.issnConfirmCheckDigitOneField(IssnValue.codeLength)\n        ]);\n\n        return res;\n    }\n\n\t/**\n\t * It is used by `handleSpecificInput` method. \n\t */\n    private _codeOldValue: string;\n\n    public constructor()\n    {\n        super();\n\n        this._codeOldValue = undefined;\n    }\n\n    public ngOnInit(): void\n    {\n        /* Sets the default values. */\n\n        this.init(IssnType_Abbreviation.ISSN, IssnValue.issn_Placeholder, true, true);\n\n        if ((typeof this.content.value !== 'string') && (typeof this.content.value !== 'undefined'))\n        {\n            throw new Error(`For the '${ this.content.name }' control, the 'content.value' value must be of string type.`);\n        }\n\n        /* The '_codeOldValue' must be set after the 'content.formControl.value' is set. */\n        this.handleSpecificInput();\n    }\n\n   /**\n     * Returns an error string if the control is in an error state; otherwise, empty string. \n     */\n    public getErrorMessage(): string\n    {\n        let result: string = '';\n        let result_alreadyHaveErrorInfo: boolean = false;\n        let validationErrors: ValidationErrors = this.content.formControl.errors;\n\n        /* Shows the code errors. */\n\n        if (validationErrors)\n        {\n            if ((validationErrors[ExtraValidators.equalLength.name]) || (validationErrors[Validators.required.name]))\n            {\n                result = 'TOCO_NG_ERROR_MSG_ISSN_LONG_INVAL';\n                result_alreadyHaveErrorInfo = true;\n            }\n\n            if (validationErrors[Validators.pattern.name])\n            {\n                if (result_alreadyHaveErrorInfo)\n                {\n                    result = 'TOCO_NG_ERROR_MSG_ISSN_LONG_Y_DIG_INVAL';\n                }\n                else\n                {\n                    result = 'TOCO_NG_ERROR_MSG_ISSN_DIG_INVAL';\n                }\n\n                result_alreadyHaveErrorInfo = true;\n            }\n        }\n\n\t\t/* Only shows the `issnConfirmCheckDigitOneField` error if there isn't any previous error. */\n\t\tif (!result_alreadyHaveErrorInfo)\n\t\t{\n            if (validationErrors)\n\t\t\t{\n\t\t\t\tif (validationErrors[ExtraValidators.issnConfirmCheckDigitOneField.name])\n\t\t\t\t{\n\t\t\t\t\tresult = 'TOCO_NG_ERROR_MSG_ISSN_DIG_CHEQUEO_INVAL';\n\t\t\t\t\tresult_alreadyHaveErrorInfo = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n        return result;\n    }\n\n\t/**\n\t * Handler method that is called by the internal logic when the control's value changes in the UI. \n     * This method contains the specific handling of the input that the derived class wants to do. \n\t */\n\tpublic handleSpecificInput(): void\n\t{\n        /* Forma de entrada del código ISSN por parte del usuario: \n         * El control ISSN permite copiar códigos ISSN con el separador de menos (-) o con \n         * el separador de raya (–), y son copiados correctamente para un código ISSN \n         * con el separador de raya (–); es decir, los siguientes ejemplos muestran \n         * el resultado de copiar una forma de código en particular. \n         *  - Si se copia 01234560, entonces se muestra 0123 – 4560\n         *  - Si se copia 0123-4560, entonces se muestra 0123 – 4560\n         *  - Si se copia 0123 - 4560, entonces se muestra 0123 – 4560\n         *  - Si se copia 0123–4560, entonces se muestra 0123 – 4560\n         *  - Si se copia 0123 – 4560, entonces se muestra 0123 – 4560\n         *  - Si se copia 0123 – 45601, entonces se muestra 0123 – 4560\n         *  - Si se copia un código ISSN con más de 8 dígitos en la forma que sea, \n         *    entonces no se copia y se sigue mostrando el código anterior. \n         * Recuerde que el caracter 'x' or 'X' puede aparecer solamente en la última \n         * posición del código ISSN. Además, aunque los dos caracteres significan lo mismo, \n         * siempre se trata de mostrar el caracter 'X' en mayúscula. \n         */\n\n        let tempCode: string = this.content.formControl.value;\n        let len: number = tempCode.length;\n\n        /* Checks that the code length can not be longer than `IssnValue.codeLength`. */\n\t\tif (len > IssnValue.codeLength)  /* This case is used for code with length 11. */\n\t\t{\n\t\t\t/* Sets the old value. */\n            this.content.formControl.setValue(this._codeOldValue);\n            return;\n        }\n\n        let i: number;\n        let newCode: string = '';\n        let alreadyHasSpace: boolean = false;\n        let count: number = 0;\n\n        for (i = 0; i < len; i++)\n        {\n            switch(tempCode[i])\n            {\n                case '0': case '1': case '2': case '3': case '4':\n                case '5': case '6': case '7': case '8': case '9':\n                {\n                    if (((++count) == 4) && (!alreadyHasSpace))\n                    {\n                        alreadyHasSpace = true;\n                        newCode += tempCode[i] + IssnValue.codeGroupSeparatorWithSpace;\n                    }\n                    else\n                    {\n                        newCode += tempCode[i];\n                    }\n                    break;\n                }\n\n                case 'x': case 'X':\n                {\n                    if ((i + 1) == len)  /* The 'x' or 'X' character can only appear in the last position. */\n                    {\n                        count++;\n                        newCode += 'X';\n                    }\n                    break;\n                }\n\n                case ' ':\n                {\n                    if (!alreadyHasSpace)\n                    {\n                        alreadyHasSpace = true;\n                        newCode += IssnValue.codeGroupSeparatorWithSpace;\n                    }\n                    break;\n                }\n            }\n        }\n\n        /* Checks that the code length can not be longer than `IssnValue.codeLength`. */\n        if (count > 8)  /* This case is used for code with length 8 and 9. */\n\t\t{\n\t\t\t/* Sets the old value. */\n            this.content.formControl.setValue(this._codeOldValue);\n        }\n        else\n        {\n            /* Sets the new value, and updates the old value. */\n            this.content.formControl.setValue((this._codeOldValue = newCode));\n        }\n    }\n}\n","\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, Validators, ValidationErrors } from '@angular/forms';\nimport { LangChangeEvent, TranslateService } from '@ngx-translate/core';\n\nimport { ValidatorArguments } from '../../form-field.control';\n\nimport { InputControl } from '../input.control';\n\n/**\n * Represents a control that allows the writing of a number. \n */\n@Component({\n    selector: 'input-number',\n    templateUrl: '../text/text-input.component.html',\n    styleUrls: ['../text/text-input.component.scss'],\n    host: {\n        '[style.minWidth]': 'content.minWidth',\n        '[style.width]': 'content.width'\n    }\n})\nexport class InputNumberComponent extends InputControl implements OnInit\n{\n    // TODO: Puedo hacer que este control sea más general, que permita la entrada de valores \n    // enteros y doubles haciendo las siguientes modificaciones: \n    //  * Inicializar el `Validators.pattern('----')` con un patrón para double values según valor que recibe en \n    //    `validatorArguments` que dice si integer o double. \n    //  * Hacer tratamiento de error correctamente em método `getErrorMessage()`. \n\n    /**\n     * Returns a `FormControl` by default. \n     * It is used to initialized the `InputNumberComponent`'s `content.formControl` value by default. \n     * @param validatorArguments A collection of key/value elements, where the key is the validator name \n     * and the value is the value that the validator needs to check. \n     * In the `validatorArguments` argument, you can specify an object with the minimum and maximum possible \n     * values for the number that holds the control. \n     * For example: If the minimum possible value is 0 and maximum is 50, you can call the `getFormControlByDefault` \n     * method in this way: \n     * InputNumberComponent.getFormControlByDefault({ 'min': 0, 'max': 50 });\n     */\n    public static getFormControlByDefault(validatorArguments: ValidatorArguments = undefined): FormControl\n    {\n        return new FormControl(0, [\n            Validators.pattern('^-?[0-9]+$'),\n            Validators.min(((validatorArguments) && (validatorArguments.min != undefined)) ? validatorArguments.min : Number.MIN_SAFE_INTEGER),\n            Validators.max(((validatorArguments) && (validatorArguments.max != undefined)) ? validatorArguments.max : Number.MAX_SAFE_INTEGER),\n        ]);\n    }\n\n    protected static toco_ng_Error_Msg_Num_Inval: string = '';\n    protected static toco_ng_Error_Msg_Num_Minimo: string = '';\n    protected static toco_ng_Error_Msg_Num_Maximo: string = '';\n\n    public constructor(private _transServ: TranslateService)\n    {\n        super();\n\n        /* The translation is built by the control. */\n        this.isTranslationBuiltByControl = true;\n    }\n\n    public ngOnInit(): void\n    {\n        /* This needs to be called at first. */\n        this.setNewLanguage(this._transServ);\n\n        /* Sets the default values. */\n        this.init('', '', false, false);\n\n\t\t/* Changes the translation when the language changes. */\n\t\tthis._transServ.onLangChange.subscribe((params: LangChangeEvent) => {\n\t\t\tthis.setNewLanguage(this._transServ);\n\t\t});\n    }\n\n    /**\n     * Sets the new language. \n     * @param transServ The `TranslateService` instance injected. \n     */\n    protected setNewLanguage(transServ: TranslateService): void\n    {\n        /* First, do this test for optimization. */\n        if (InputNumberComponent.currentLang != transServ.currentLang)\n        {\n            super.setNewLanguage(transServ);\n\n            /* The `InputNumberComponent.currentLang` value is updated correctly in the parent class. */\n\n            transServ.get(['TOCO_NG_ERROR_MSG_NUM_INVAL', 'TOCO_NG_ERROR_MSG_NUM_MINIMO', 'TOCO_NG_ERROR_MSG_NUM_MAXIMO']).subscribe((res: any) => {\n                InputNumberComponent.toco_ng_Error_Msg_Num_Inval = res.TOCO_NG_ERROR_MSG_NUM_INVAL;\n                InputNumberComponent.toco_ng_Error_Msg_Num_Minimo = res.TOCO_NG_ERROR_MSG_NUM_MINIMO;\n                InputNumberComponent.toco_ng_Error_Msg_Num_Maximo = res.TOCO_NG_ERROR_MSG_NUM_MAXIMO;\n            });\n        }\n    }\n\n    /**\n     * Returns an error string if the control is in an error state; otherwise, empty string. \n     */\n    public getErrorMessage(): string\n    {\n        let validationErrors: ValidationErrors = this.content.formControl.errors;\n\n        /* Shows the code errors. */\n        if (validationErrors)\n        {\n            if (validationErrors[Validators.required.name])\n            {\n                return InputNumberComponent.toco_ng_Error_Msg_Requerido;\n            }\n\n            if (validationErrors[Validators.pattern.name])\n            {\n                return InputNumberComponent.toco_ng_Error_Msg_Num_Inval;\n            }\n\n            if (validationErrors[Validators.min.name])\n            {\n                return InputNumberComponent.toco_ng_Error_Msg_Num_Minimo + validationErrors[Validators.min.name].min + '.';\n            }\n\n            if (validationErrors[Validators.max.name])\n            {\n                return InputNumberComponent.toco_ng_Error_Msg_Num_Maximo + validationErrors[Validators.max.name].max + '.';\n            }\n        }\n\n        return '';\n    }\n}\n","\n/**\n * Data structure for holding an RNPS. \n * An RNPS (Registro Nacional de Publicaciones Seriadas) is an 4-digit code used to control \n * las publicaciones seriadas autorizadas a editarse, imprimirse y circular en Cuba. \n * For more information follow the link: http://www.seriadas.cult.cu/. \n */\nexport class RnpsValue\n{\n\t/**\n\t * Represents the RNPS placeholder.\n\t */\n\tpublic static readonly rnps_Placeholder: string = 'XXXX';\n\n\t/**\n\t * The amount of digits in the code. \n\t */\n\tpublic static readonly codeLength: number = 4;\n\n\t/**\n\t * The amount of digits in the code as string value. \n\t */\n\tpublic static readonly codeLengthAsString: string = RnpsValue.codeLength.toString(10);\n\n\t/**\n\t * Represents the RNPS abbreviation. \n\t */\n\tpublic static readonly rnps_Abbreviation: string = 'RNPS';\n\n\t/**\n\t * Represents the RNPS label. \n\t */\n\tpublic static readonly rnps_Label: string = 'TOCO_NG_RNPS';\n\n\t/**\n\t * The code of `RnpsValue.codeLength` digits.\n\t */\n\tpublic code: string;\n\n\tpublic constructor(c: string)\n\t{\n\t\tthis.code = c;\n\t}\n\n\t/**\n\t * Returns true if the RNPS is complete; otherwise, false. \n\t * It is complete if the code of digits has the correct length. It does not check if the RNPS has \n\t * the correct digits. \n\t */\n\tpublic isComplete(): boolean\n\t{\n\t\treturn (this.code.length == RnpsValue.codeLength);\n\t}\n\n    /**\n     * Returns a string representation of this `RnpsValue` object. \n     */\n\t public toString(): string\n\t {\n\t\treturn RnpsValue.rnps_Abbreviation + ' ' + this.code;\n\t }\n}\n","\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, Validators, ValidationErrors } from '@angular/forms';\n\nimport { ExtraValidators } from '../../../core/utils/validator';\n\nimport { RnpsValue } from './rnps-value';\nimport { InputControl } from '../input.control';\nimport { ValidatorArguments } from '../../form-field.control';\n\n/**\n * Represents a control that allows the writing of an RNPS. \n * An RNPS (Registro Nacional de Publicaciones Seriadas) is an 4-digit code used to control \n * the serial publications authorized to be edited, printed and circulated in Cuba. \n * For more information follow the link: http://www.seriadas.cult.cu/. \n * It uses the `RnpsValue.rnps_Abbreviation` as a label if the `content.label` is not specified. \n * It uses the `RnpsValue.rnps_Placeholder` as a placeholder if the `content.placeholder` is not specified. \n */\n@Component({\n    selector: 'input-rnps',\n    templateUrl: '../text/text-input.component.html',\n    styleUrls: ['../text/text-input.component.scss'],\n    host: {\n        '[style.minWidth]': 'content.minWidth',\n        '[style.width]': 'content.width'\n    }\n})\nexport class InputRnpsComponent extends InputControl implements OnInit\n{\n    /**\n     * Returns a `FormControl` by default. \n     * It is used to initialized the `InputRnpsComponent`'s `content.formControl` value by default. \n     * In this case, the `validatorArguments` argument is always `undefined`. \n     */\n    public static getFormControlByDefault(validatorArguments: ValidatorArguments = undefined): FormControl\n    {\n        return new FormControl('', [\n            ExtraValidators.equalLength(RnpsValue.codeLength),\n            Validators.pattern('^[0-9]*$')\n        ]);\n    }\n\n\t/**\n\t * It is used by `handleSpecificInput` method. \n\t */\n    private _codeOldValue: string;\n\n    public constructor()\n    {\n        super();\n\n        this._codeOldValue = undefined;\n    }\n\n    public ngOnInit(): void\n    {\n        /* Sets the default values. */\n\n        this.init(RnpsValue.rnps_Abbreviation, RnpsValue.rnps_Placeholder, true, true);\n\n        /* The '_codeOldValue' must be set after the 'content.formControl.value' is set. */\n        this.handleSpecificInput();\n    }\n\n    /**\n     * Returns an error string if the control is in an error state; otherwise, empty string. \n     */\n    public getErrorMessage(): string\n    {\n        let result: string = '';\n        let result_alreadyHaveErrorInfo: boolean = false;\n        let validationErrors: ValidationErrors = this.content.formControl.errors;\n\n        /* Shows the code errors. */\n        if (validationErrors)\n        {\n            if ((validationErrors[ExtraValidators.equalLength.name]) || (validationErrors[Validators.required.name]))\n            {\n                result = 'TOCO_NG_ERROR_MSG_RNPS_LONG_INVAL';\n                result_alreadyHaveErrorInfo = true;\n            }\n\n            if (validationErrors[Validators.pattern.name])\n            {\n                if (result_alreadyHaveErrorInfo)\n                {\n                    result = 'TOCO_NG_ERROR_MSG_RNPS_LONG_Y_DIG_INVAL';\n                }\n                else\n                {\n                    result = 'TOCO_NG_ERROR_MSG_RNPS_DIG_INVAL';\n                }\n\n                result_alreadyHaveErrorInfo = true;\n            }\n        }\n\n        return result;\n    }\n\n\t/**\n\t * Handler method that is called by the internal logic when the control's value changes in the UI. \n     * This method contains the specific handling of the input that the derived class wants to do. \n\t */\n\tpublic handleSpecificInput(): void\n\t{\n\t\tif (this.content.formControl.value.length > RnpsValue.codeLength)\n\t\t{\n\t\t\t/* Sets the old value. */\n\t\t\tthis.content.formControl.setValue(this._codeOldValue);\n        }\n        else\n        {\n            /* Updates the old values. */\n            this._codeOldValue = this.content.formControl.value;\n        }\n    }\n}\n","\nimport { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { TooltipPosition } from '@angular/material/tooltip';\nimport { LangChangeEvent, TranslateService } from '@ngx-translate/core';\nimport { isArray } from 'util';\n\nimport { InputControl, InputContent } from '../input.control';\nimport { HintPosition, HintValue } from '../../form-field.control';\n\n/**\n * An interface that represents a selectable option. \n */\nexport interface SelectOption\n{\n\t/**\n\t * Returns the label that is showed. \n\t */\n\tlabel: string;\n\n\t/**\n\t * Returns the value that is stored internally. \n\t */\n\tvalue: any;\n\n\t/**\n\t * Returns true if this option is selected; otherwise, false. \n\t */\n\t// selected?: boolean;\n}\n\n/**\n * An interface that represents the content of a select control. \n */\nexport interface SelectContent extends InputContent\n{\n\t/**\n\t * Returns the options list that can be selected. \n\t * This field can be set using three ways: \n\t *  - Its value is `undefined`, then it takes the options from the `content.value` field. \n\t *  - Its value is a `SelectOption[]`, then it already contains the options. \n\t *  - Its value is an `Observable<SelectOption[]>`, then it takes the options when the observable emits values. \n\t * By default, its value is `[]`. \n\t */\n\tselectOptions?: SelectOption[] | Observable<SelectOption[]>;\n\n\t/**\n\t * Returns true if the selection can be multiple; otherwise, false. \n\t * By default, its value is `false`. \n\t */\n\tmultiple?: boolean;\n\n\t/**\n\t * Returns true if the tooltip is showed; otherwise, false. \n\t * By default, its value is `false`. \n\t */\n\tshowTooltip?: boolean;\n\n\t/**\n\t * Returns a value that allows the user to define the position of the tooltip for the select control. \n\t * It is used if the `showTooltip` field value is `true`. \n\t * By default, its value is `'below'`. \n\t * Its value can be one of these values: 'left', 'right', 'above', 'below', 'after', 'before' \n\t */\n\tselectTooltipPosition?: TooltipPosition;\n\n\t/**\n\t * Returns a value that allows the user to define the position of the tooltip for the select control's options. \n\t * It is used if the `showTooltip` field value is `true`. \n\t * By default, its value is `'right'`. \n\t * Its value can be one of these values: 'left', 'right', 'above', 'below', 'after', 'before' \n\t */\n\toptionsTooltipPosition?: TooltipPosition;\n}\n\n/**\n * Represents a control that allows to select one value or multiple values. \n * Implementation notes: \n * The `extraContent` recibe una funcion llamada getOptions() que se encarga de contruir un SelectOption[]. \n * Si es multiple, entonces el `value` es un array de valores. \n */\n@Component({\n\tselector: 'input-select',\n\ttemplateUrl: './select-input.component.html',\n\tstyleUrls: ['./select-input.component.scss'],\n\thost: {\n\t\t'[style.minWidth]': 'content.minWidth',\n\t\t'[style.width]': 'content.width'\n\t}\n})\nexport class InputSelectComponent extends InputControl implements OnInit, OnDestroy\n{\n\t/**\n     * Input field that contains the content of this class. \n     */\n    @Input()\n\tpublic content: SelectContent;\n\n\t/**\n\t * Returns the current selected option tooltip. \n\t * If nothing is selected, then its value is `''`. \n\t */\n\tpublic selectTooltip: string;\n\n\tprivate _selectOptionsSubscription: Subscription = null;\n\n\tpublic constructor(private _transServ: TranslateService)\n\t{\n        super();\n\n\t\tthis.selectTooltip = '';\n\t}\n\n\tpublic ngOnInit(): void\n\t{\n        /* Sets the default values. */\n\t\tthis.init('', '', false, true);\n\n\t\t/* The `selectTooltip` value is set in `onSelectionChange` method when happening initialization or selection change. */\n\t\tthis.onSelectionChange();\n\t}\n\n\tpublic ngOnDestroy(): void\n\t{\n\t\t/* Disposes the resources held by the subscription. */\n\t\tthis._selectOptions_Unsubscription();\n\t}\n\n    /**\n     * Initializes the `content` input property. \n     * @param label The default label to use. It is used if the `content.label` is not specified. \n\t * @param placeholder The default placeholder to use. It is used if the `content.placeholder` is not specified. \n     * @param isAbbreviation If it is true then the `label` argument represents an abbreviation; otherwise, false. \n     * @param alwaysHint If it is true then there is always at leat one hint start-aligned. \n     */\n    protected init(label: string, placeholder: string = '', isAbbreviation: boolean, alwaysHint: boolean): void\n    {\n\t\t/* Changes the translation when the language changes. */\n\t\tthis._transServ.onLangChange.subscribe((params: LangChangeEvent) => {\n\t\t\tthis._setSelectTooltip();\n\t\t});\n\n        /* Sets the default values. */\n\n\t\tsuper.init(label, placeholder, isAbbreviation, alwaysHint);\n\n\t\tif (this.content.startHint != undefined)\n\t\t{\n\t\t\tif (this.content.startHint.label == 'TOCO_NG_HINT_TEXTO_POR_DEFECTO') this.content.startHint.label = 'TOCO_NG_HINT_TEXTO_SELECC_POR_DEFECTO';\n\t\t}\n\t\telse this.content.startHint = new HintValue(HintPosition.start, 'TOCO_NG_HINT_TEXTO_SELECC_POR_DEFECTO');\n\n\t\tif (this.content.multiple == undefined) this.content.multiple = false;\n\t\tif (this.content.showTooltip == undefined) this.content.showTooltip = false;\n\t\tif (this.content.selectTooltipPosition == undefined) this.content.selectTooltipPosition = 'below';\n\t\tif (this.content.optionsTooltipPosition == undefined) this.content.optionsTooltipPosition = 'right';\n\n\t\tif (this.content.selectOptions == undefined)\n\t\t{\n\t\t\tif (this.content.value == undefined)\n\t\t\t{\n\t\t\t\tthis.content.selectOptions = [ ];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t/* Gets the `content.selectOptions` from the `content.value` field. */\n\n\t\t\t\tif (isArray(this.content.value))\n\t\t\t\t{\n\t\t\t\t\tthis.content.multiple = true;  /* The control must be multiple. */\n\t\t\t\t\tthis.content.selectOptions = [ ];\n\n\t\t\t\t\tthis.content.value.forEach(\n\t\t\t\t\t\t(option: string): void => {\n\t\t\t\t\t\t\t(this.content.selectOptions as SelectOption[]).push({\n\t\t\t\t\t\t\t\t'label': option,\n\t\t\t\t\t\t\t\t'value': option.toUpperCase()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.content.selectOptions = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'label': this.content.value,\n\t\t\t\t\t\t\t'value': this.content.value.toUpperCase()\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (isArray(this.content.selectOptions))\n\t\t{\n\t\t\t/* Nothing to do here, but this case must be here. */\n\t\t}\n\t\telse if (this.content.selectOptions instanceof Observable)\n\t\t{\n\t\t\t/* Gets the `content.selectOptions` from an `Observable` when it emits values. */\n\n\t\t\tthis._selectOptions_Unsubscription();\n\n\t\t\tthis._selectOptionsSubscription = this.content.selectOptions.subscribe(\n\t\t\t\t(selectOptions: SelectOption[]): void => {\n\t\t\t\t\tthis.content.selectOptions = selectOptions;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error(`For the '${ InputSelectComponent.name }' control, the 'content.selectOptions' type value has a configuration error because the programme does not know what to do with it!`);\n\t\t}\n\n\t\t/* The `selectTooltip` value is set in `onSelectionChange` method when happening initialization or selection change. */\n\t}\n\t\n\tprivate _selectOptions_Unsubscription(): void\n\t{\n\t\t/* Disposes the resources held by the subscription. */\n\t\tif (this._selectOptionsSubscription)\n\t\t{\n\t\t\tthis._selectOptionsSubscription.unsubscribe();\n\t\t}\n\t}\n\n\tpublic onSelectionChange(): void\n\t{\n\t\t// console.log('Call `onSelectionChange` - ', 'Select value: ', this.content.formControl.value);\n\n\t\tthis._setSelectTooltip();\n\n\t\tif ((this.content.extraContent) && (this.content.extraContent.selectionChange))\n\t\t{\n\t\t\tthis.content.extraContent.selectionChange(this.content.formControl.value);\n\t\t}\n\t}\n\n\t/**\n\t * Does the translation for a key (or an array of keys). \n\t * @param key The key (or an array of keys) to translate. \n\t */\n\tprivate _doTranslation(key: string | Array<string>): void\n\t{\n\t\tif (key.length == 0)\n\t\t{\n\t\t\tthis.selectTooltip = '';\n\t\t\treturn;\n\t\t}\n\n\t\tthis._transServ.get(key).subscribe((res: any) => {\n\t\t\t// console.log(key, ' --> ', res);\n\n\t\t\tif (this.content.multiple)\n\t\t\t{\n\t\t\t\t/* `res` is an object of translated keys. */\n\n\t\t\t\tlet translationKeys: string[] = Object.keys(res);\n\t\t\t\tlet len: number = translationKeys.length;\n\n\t\t\t\tlet translationRes: string = res[translationKeys[0]];\n\n\t\t\t\tfor (let i = 1; i < len; ++i)\n\t\t\t\t{\n\t\t\t\t\ttranslationRes += '\\n' + res[translationKeys[i]];\n\t\t\t\t}\n\n\t\t\t\tthis.selectTooltip = translationRes;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t/* `res` is a translated key. */\n\n\t\t\t\tthis.selectTooltip = res;\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Finds the label for a value (or an array of values). \n\t * @param value The value (or an array of values) to find the label. \n\t * @returns Returns a label (or an array of labels). \n\t */\n\tprivate _findLabel(value: string | Array<string>): string | Array<string>\n\t{\n\t\tif (this.content.multiple)\n\t\t{\n\t\t\tlet label: Array<string> = [ ];\n\n\t\t\tfor (let val of value)\n\t\t\t{\n\t\t\t\tfor (let opt of (this.content.selectOptions as SelectOption[]))\n\t\t\t\t{\n\t\t\t\t\tif (opt.value == val)\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel.push(opt.label);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn label;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet label: string = '';\n\n\t\t\tfor (let opt of (this.content.selectOptions as SelectOption[]))\n\t\t\t{\n\t\t\t\tif (opt.value == value)\n\t\t\t\t{\n\t\t\t\t\tlabel = opt.label;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn label;\n\t\t}\n\t}\n\n\t/**\n\t * Sets the `selectTooltip` field value. \n\t */\n\tprivate _setSelectTooltip(): void\n\t{\n\t\tif (this.content.formControl.value != undefined)\n\t\t{\n\t\t\tthis._doTranslation(this._findLabel(this.content.formControl.value));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.selectTooltip = '';\n\t\t}\n\t}\n}\n","\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, Validators, ValidationErrors } from '@angular/forms';\n\nimport { InputControl } from '../input.control';\nimport { ValidatorArguments } from '../../form-field.control';\n\n/**\n * Represents a control that allows the writing of a text. \n */\n@Component({\n    selector: 'input-text',\n    templateUrl: './text-input.component.html',\n    styleUrls: ['./text-input.component.scss'],\n    host: {\n        '[style.minWidth]': 'content.minWidth',\n        '[style.width]': 'content.width'\n    }\n})\nexport class InputTextComponent extends InputControl implements OnInit\n{\n    /**\n     * Returns a `FormControl` by default. \n     * It is used to initialized the `InputTextComponent`'s `content.formControl` value by default. \n     * @param validatorArguments An object that has only one field of `pattern` name and its value is a string. \n     * The `pattern` name is the validator name and the value is the value that the validator needs to check. \n     * For example, you can call the `getFormControlByDefault` method in this way: \n     * InputTextComponent.getFormControlByDefault({ 'pattern': '^[a-zA-Z][a-zA-Z\\-\\_\\ 0-9]*$' });\n     * If this argument is not specified, by default its value is `undefined`. \n     */\n    public static getFormControlByDefault(validatorArguments: ValidatorArguments = undefined): FormControl\n    {\n        return new FormControl('', (((validatorArguments) && (validatorArguments.pattern)) ? [Validators.pattern(validatorArguments.pattern)] : [ ]));\n    }\n\n    public constructor()\n    {\n        super();\n    }\n\n    public ngOnInit(): void\n    {\n        /* Sets the default values. */\n        this.init('', '', false, true);\n    }\n\n    /**\n     * Returns an error string if the control is in an error state; otherwise, empty string. \n     */\n    public getErrorMessage(): string\n    {\n        let validationErrors: ValidationErrors = this.content.formControl.errors;\n\n        /* Shows the identifier errors. */\n        if (validationErrors)\n        {\n            if (validationErrors[Validators.required.name])\n            {\n                return this.validationError_required;\n            }\n            else\n            {\n                /* It is `validationErrors[Validators.pattern.name]`. */\n                return 'TOCO_NG_ERROR_MSG_TEXTO_INVAL';\n            }\n        }\n\n        return '';\n    }\n}\n","\n/**\n * Data structure for holding an url. \n */\nexport class UrlValue\n{\n\t/**\n\t * Represents the url label. \n\t */\n\tpublic static readonly url_Label: string = 'Url';\n\n\t/**\n\t * Represents the url placeholder.\n\t */\n\tpublic static readonly url_Placeholder: string = 'https://www.google.com/';\n\n\t/**\n\t * The url value.\n\t */\n\tpublic url: string;\n\n\tpublic constructor(u: string)\n\t{\n\t\tthis.url = u;\n\t}\n\n    /**\n     * Returns a string representation of this `UrlValue` object. \n     */\n\t public toString(): string\n\t {\n\t\treturn UrlValue.url_Label + ' ' + this.url;\n\t }\n}\n","\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, Validators, ValidationErrors } from '@angular/forms';\n\nimport { UrlValue } from './url-value';\nimport { InputControl } from '../input.control';\nimport { ValidatorArguments } from '../../form-field.control';\n\n/**\n * Represents a control that allows the writing of a url.\n * It uses the `UrlValue.url_Label` as a label if the `content.label` is not specified. \n * It uses the `UrlValue.url_Placeholder` as a placeholder if the `content.placeholder` is not specified. \n */\n@Component({\n    selector: 'input-url',\n    templateUrl: '../text/text-input.component.html',\n    styleUrls: ['../text/text-input.component.scss'],\n    host: {\n        '[style.minWidth]': 'content.minWidth',\n        '[style.width]': 'content.width'\n    }\n})\nexport class InputUrlComponent extends InputControl implements OnInit\n{\n    /**\n     * Returns a `FormControl` by default. \n     * It is used to initialized the `InputUrlComponent`'s `content.formControl` value by default. \n     * In this case, the `validatorArguments` argument is always `undefined`. \n     */\n    public static getFormControlByDefault(validatorArguments: ValidatorArguments = undefined): FormControl\n    {\n        // const reg = '/(^|\\s)((https?:\\/\\/)?[\\w-]+(\\.[\\w-]+)+\\.?(:\\d+)?(\\/\\S*)?)/gi';\n        // const reg2 = '[a-z.]*';\n        const reg3 = '(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-]*/?';\n        return new FormControl('', [\n            Validators.pattern(reg3)\n            // Validators.pattern('/(^|\\s)((https?:\\/\\/)?[\\w-]+(\\.[\\w-]+)+\\.?(:\\d+)?(\\/\\S*)?)/i')\n            // Validators.pattern(/((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[\\-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9\\.\\-]+|(?:www\\.|[\\-;:&=\\+\\$,\\w]+@)[A-Za-z0-9\\.\\-]+)((?:\\/[\\+~%\\/\\.\\w\\-_]*)?\\??(?:[\\-\\+=&;%@\\.\\w_]*)#?(?:[\\.\\!\\/\\\\\\w]*))?)/i)\n        ]);\n    }\n\n    public constructor()\n    {\n        super();\n    }\n\n    public ngOnInit(): void\n    {\n        /* Sets the default values. */\n        this.init(UrlValue.url_Label, UrlValue.url_Placeholder, false, true);\n    }\n\n    /**\n     * Returns an error string if the control is in an error state; otherwise, empty string.\n     */\n    public getErrorMessage(): string\n    {\n        let validationErrors: ValidationErrors = this.content.formControl.errors;\n\n        /* Shows the url errors. */\n        if (validationErrors)\n        {\n            if (validationErrors[Validators.required.name])\n            {\n                return this.validationError_required;\n            }\n            else\n            {\n                /* It is `validationErrors[Validators.pattern.name]`. */\n                return 'TOCO_NG_ERROR_MSG_URL_INVAL';\n            }\n        }\n\n        return '';\n    }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\nimport { Component, OnInit } from \"@angular/core\";\nimport {\n  FormControl,\n  AbstractControl,\n  ValidationErrors,\n  FormGroup\n} from \"@angular/forms\";\nimport { Observable, PartialObserver } from \"rxjs\";\nimport { startWith, map } from \"rxjs/operators\";\nimport { TaxonomyService } from '../../../backend/public-api';\nimport { VocabulariesInmutableNames, TermNode, Term } from '../../../entities/public-api';\n\nimport { InputControl } from '../../input/input.control';\n\nimport { Response } from '../../../core/public-api';\n\ninterface VocabularyComponentExtraContent{\n  multiple: boolean;\n  selectedTermsIds: [];\n  excludeTermsIds: [];\n\n  level: number;\n\n  vocab: VocabulariesInmutableNames;\n}\n\n/**\n * A control to select a term or terms in a vocabulary.\n */\n@Component({\n  selector: \"toco-vocabulary\",\n  templateUrl: \"./vocabulary.component.html\",\n  styleUrls: [\"./vocabulary.component.scss\"],\n  host: {\n    \"[style.minWidth]\": \"content.minWidth\",\n    \"[style.width]\": \"content.width\"\n  }\n})\nexport class VocabularyComponent extends InputControl\n  implements OnInit {\n\n  // internalControl = new FormControl();\n\n  //this control is used by the chips,not necessary to expose it\n  chipsFormControl = new FormControl();\n  inputId: string;\n  filteredOptions: Observable<TermNode[]>;\n  chipsList: TermNode[] = [];\n  selectOptions: TermNode[] = [];\n\n  terms: TermNode[] = [];\n\n  loading = true;\n\n  extraContent: VocabularyComponentExtraContent;\n\n  // selectedTermsIds = [];\n\n  searchText = \"Seleccione las opciones\";\n\n  private termsTreeObserver: PartialObserver<Response<any>> = {\n    next: (response: Response<any>) => {\n      console.log(\"VOCABULARY COMPONENT RESPONSE \",response)\n      console.log(response.data.tree);\n\n      this.terms = response.data.tree.term_node;\n\n      this.terms.forEach(element => {\n        this.selectOptions = this.selectOptions.concat(\n          this._get_terms(element)\n        );\n      });\n\n    },\n\n    error: (err: any) => {\n      console.log(\"The observable got an error notification: \" + err + \".\");\n    },\n\n    complete: () => {\n      console.log(\"The observable got a complete notification.\");\n      this.loading = !this.loading;\n    }\n  };\n\n  constructor(private service: TaxonomyService)\n  {\n    super();\n  }\n\n  ngOnInit()\n  {\n    this.init('', '', false, true);\n    // (this.content.parentFormSection as FormGroup).addControl(\n    //   this.content.name,\n    //   this.internalControl\n    // );\n\n    if (this.content.required) {\n      this.content.formControl.setValidators(\n        (control: AbstractControl): ValidationErrors | null => {\n          return !this.content.value || this.content.value.length == 0\n            ? { requiredTerms: \"No Terms Selected\" }\n            : null;\n        }\n      );\n    }\n\n    this.inputId = this.content.label.trim().toLowerCase();\n    if (this.content.extraContent) {\n      this.extraContent = this.content.extraContent;\n\n      // if (this.extraContent.multiple !== null) {\n      //   this.multiple = this.extraContent.multiple;\n      // }\n      // if (this.extraContent.selectedTermsIds) {\n      //   this.content.value = this.extraContent.selectedTermsIds;\n      // } else {\n      //   this.content.value = [];\n      // }\n\n      // already selected terms\n      if (!this.extraContent.selectedTermsIds) {\n        this.extraContent.selectedTermsIds = [];\n      }\n\n      // terms ids to exclude of the possible options.\n      if (!this.extraContent.excludeTermsIds) {\n        this.extraContent.excludeTermsIds = [];\n      }\n      this.content.value = [];\n\n      if (this.extraContent.level == undefined) {\n        this.extraContent.level = 10;\n      }\n      if (this.extraContent.vocab) {\n        // this.vocab = this.extraContent.vocab;\n        this.service\n          .getTermsTreeByVocab(this.extraContent.vocab, this.extraContent.level)\n          .subscribe(this.termsTreeObserver);\n      }\n    //   else if(this.extraContent.termID){\n    //     this.service.getTermByUUID(this.extraContent.termID, this.extraContent.level)\n    //     .subscribe(this.termsTreeObserver);\n    // }\n      this._updateFilteredOptions();\n    }\n  }\n\n  private setValidation() {\n    if (this.content.formControl.valid) {\n      this.chipsFormControl.setErrors(null);\n    } else {\n      this.chipsFormControl.setErrors({ requiered: true });\n    }\n  }\n  private addTermToValue(term: Term) {\n    if (this.extraContent.multiple) {\n      this.content.value.unshift(term);\n    } else {\n      this.content.value = [term];\n    }\n    this.content.formControl.setValue(this.content.value);\n    this.setValidation();\n  }\n\n  private removeTermFromValue(term: Term) {\n    this.content.value = (this.content.value as []).filter(\n      (e: Term) => e.id !== term.id\n    );\n    this.content.formControl.setValue(this.content.value);\n    this.setValidation();\n  }\n\n  private _updateFilteredOptions() {\n    this.filteredOptions = this.chipsFormControl.valueChanges.pipe<\n      string,\n      TermNode[]\n    >(\n      startWith(\"\"),\n      map(value => {\n        const filterValue = value ? value.toLowerCase() : \"\";\n        console.log('************************************')\n        console.log(this.selectOptions);\n        console.log('************************************')\n\n        return this.selectOptions.filter(option =>\n          option.term.identifier.toLowerCase().includes(filterValue)\n        );\n      })\n    );\n  }\n\n  private _get_terms(node: TermNode, parent: TermNode = null): TermNode[] {\n    let result: TermNode[] = [];\n    node.parent = parent;\n    // if is in selected terms ids list, then is part of the value\n    if (\n      (this.extraContent.selectedTermsIds as []).some(\n        id => id === node.term.uuid\n      )\n    ) {\n      this.addTermToValue(node.term);\n      this.chipsList.push(node);\n    } else {\n      // if is not in any of the exclude term ids, then push\n      if (\n        !(this.extraContent.excludeTermsIds as []).some(\n          id => id === node.term.uuid\n        )\n      ) {\n        result.push(node);\n      }\n    }\n    if(node.children){\n      node.children.forEach(child => {\n        result = result.concat(this._get_terms(child, node));\n      });\n    }\n\n\n    return result;\n  }\n\n  addChips(value: TermNode) {\n    if (this.extraContent.multiple) {\n      this.chipsList.unshift(value);\n    } else {\n      // if not is multiple, then the element in the chipsList goes back to the options\n      if (this.chipsList.length > 0) {\n        this.selectOptions.push(this.chipsList[0]);\n      }\n      this.chipsList = [value];\n    }\n    this.addTermToValue(value.term);\n    this.selectOptions = this.selectOptions.filter(\n      option => option.term.id !== value.term.id\n    );\n\n    this.chipsFormControl.setValue(\"\");\n    // document.getElementById(this.inputId).blur();\n    this._updateFilteredOptions();\n  }\n\n  removeChip(index: number) {\n    this.selectOptions.push(this.chipsList[index]);\n    this.removeTermFromValue(this.chipsList[index].term);\n    this.chipsList.splice(index, 1);\n    this._updateFilteredOptions();\n  }\n\n  getTermNameInATree(node: TermNode) {\n    if (node.parent != null) {\n      return this.getTermNameInATree(node.parent) + \" / \" + node.term.description;\n    } else {\n      return node.term.description;\n    }\n  }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\nimport { Component, OnInit } from \"@angular/core\";\nimport {\n  FormControl,\n  AbstractControl,\n  ValidationErrors,\n  FormGroup,\n} from \"@angular/forms\";\nimport { Observable, PartialObserver } from \"rxjs\";\nimport { startWith, map } from \"rxjs/operators\";\nimport { TaxonomyService } from '../../../backend/public-api';\nimport { VocabulariesInmutableNames, TermNode, Term } from '../../../entities/public-api';\n\nimport { InputControl } from '../../input/input.control';\n\nimport { Response } from '../../../core/public-api';\n\n\ninterface VocabularyComponentExtraContent {\n  multiple: boolean;\n  selectedTermsIds: [];\n  excludeTermsIds: [];\n\n  level: number;\n\n  vocab: VocabulariesInmutableNames;\n}\n\n/**\n * A control to select a term or terms in a vocabulary.\n */\n@Component({\n  selector: \"toco-vocabulary-tree\",\n  templateUrl: \"./vocabulary-tree.component.html\",\n  styleUrls: [\"./vocabulary-tree.component.scss\"],\n  host: {\n    \"[style.minWidth]\": \"content.minWidth\",\n    \"[style.width]\": \"content.width\",\n  },\n})\nexport class VocabularyTreeComponent extends InputControl\n  implements OnInit {\n  // internalControl = new FormControl();\n\n  //this control is used by the chips,not necessary to expose it\n  chipsFormControl = new FormControl();\n\n  levelsOptions: Array<TermNode[]> = null;\n  levelsSelection: Array<Term> = new Array<Term>();\n\n  lastLevelTerm: Term = null;\n\n  inputId: string;\n  filteredOptions: Observable<TermNode[]>;\n  chipsList: TermNode[] = [];\n  leafsOptions: TermNode[] = null;\n\n  terms: TermNode[] = [];\n\n  loading = true;\n\n  extraContent: VocabularyComponentExtraContent;\n\n  // selectedTermsIds = [];\n\n  searchText = \"Seleccione las opciones\";\n\n  constructor(private service: TaxonomyService) {\n    super();\n  }\n\n  ngOnInit() {\n    this.init('', '', false, true);\n    // (this.content.parentFormSection as FormGroup).addControl(\n    //   this.content.name,\n    //   this.content.formControl\n    // );\n    if (this.content.required) {\n      this.content.formControl.setValidators(\n        (control: AbstractControl): ValidationErrors | null => {\n          return !this.content.value || this.content.value.length == 0\n            ? { requiredTerms: \"No Terms Selected\" }\n            : null;\n        }\n      );\n    }\n\n    this.inputId = this.content.label.trim().toLowerCase();\n    if (this.content.extraContent) {\n      this.extraContent = this.content.extraContent;\n\n      // already selected terms\n      if (!this.extraContent.selectedTermsIds) {\n        this.extraContent.selectedTermsIds = [];\n      }\n\n      // terms ids to exclude of the possible options.\n      if (!this.extraContent.excludeTermsIds) {\n        this.extraContent.excludeTermsIds = [];\n      }\n      this.content.value = [];\n      this.content.formControl.setValue(this.content.value);\n\n      if (this.extraContent.level == undefined) {\n        this.extraContent.level = 10;\n      }\n      if (this.extraContent.vocab) {\n        this.loading = true;\n        this.service.getTermsTreeByVocab(this.extraContent.vocab, 0).subscribe(\n          (response: Response<any>) => {\n            this.loading = false;\n            const nextLevel = response.data.tree.term_node;\n            if (this.extraContent.level > 0) {\n              this.levelsOptions = new Array<TermNode[]>();\n              // this.levelsSelection = new Array<TermNode>();\n              this._setLevelsOptions(nextLevel, 0);\n            } else {\n              this.leafsOptions = this._get_terms(nextLevel);\n              this._updateFilteredOptions();\n            }\n          },\n\n          (err: any) => {\n            console.log(\n              \"The observable got an error notification: \" + err + \".\"\n            );\n          },\n\n          () => {\n            console.log(\"The observable got a complete notification.\");\n            this.loading = !this.loading;\n          }\n        );\n      }\n      //   else if(this.extraContent.termID){\n      //     this.service.getTermByUUID(this.extraContent.termID, this.extraContent.level)\n      //     .subscribe(this.termsTreeObserver);\n      // }\n    }\n  }\n  private _setLevelsOptions(nextLevel: TermNode[], level: number) {\n    console.log('VOCABULARY TREE *****')\n    console.log(this.extraContent.selectedTermsIds, nextLevel)\n    let result: TermNode[] = [];\n    nextLevel.forEach((node) => {\n      if (\n        !(this.extraContent.excludeTermsIds as []).some(\n          (id) => id === node.term.uuid\n        )\n      ) {\n        result.push(node);\n      }\n\n      if (\n        (this.extraContent.selectedTermsIds as []).some(\n          (id) => id === node.term.uuid\n\n        )\n      ) {\n        this.onSelectionChange(level, node.term)\n        // this.addTermToValue(node.term);\n        // this.levelsSelection[level] = node.term;\n      }\n\n\n    });\n    this.levelsOptions.push(result);\n  }\n  onSelectionChange(level, item: Term) {\n    console.log(level, item);\n    this.leafsOptions = null;\n    this.chipsList = [];\n    this.loading = true;\n    this.lastLevelTerm = item;\n    this.levelsOptions = this.levelsOptions.slice(0, level+1);\n\n    // this.removeTermFromValue(this.levelsSelection[level]);\n    // this.levelsSelection[level] = item;\n    // this.addTermToValue(this.levelsSelection[level]);\n\n    this.content.value = [];\n\n    this.levelsSelection = this.levelsSelection.slice(0, level);\n    this.levelsSelection.push(item);\n    this.levelsSelection.forEach(element => {\n      this.addTermToValue(element, false);\n    });\n\n    this.service.getTermByUUID(item.uuid, 1).subscribe(\n      (response: Response<any>) => {\n        console.log(response);\n        this.loading = false;\n        const nextLevel = response.data.term_node.children;\n        if (this.extraContent.level > level + 1) {\n          this._setLevelsOptions(nextLevel, level);\n        } else {\n          this.leafsOptions = this._get_terms(nextLevel);\n          this._updateFilteredOptions();\n        }\n      },\n\n      (err: any) => {\n        console.log(\"The observable got an error notification: \" + err + \".\");\n      },\n\n      () => {\n        console.log(\"The observable got a complete notification.\");\n        this.loading = !this.loading;\n      }\n    );\n  }\n\n  private setValidation() {\n    if (this.content.formControl.valid) {\n      this.chipsFormControl.setErrors(null);\n    } else {\n      this.chipsFormControl.setErrors({ requiered: true });\n    }\n  }\n\n\n  private addTermToValue(term: Term, isLeaf=true) {\n    if (this.extraContent.multiple) {\n      this.content.value.unshift(term);\n    } else {\n      this.content.value = [];\n      this.levelsSelection.forEach(element => {\n        this.content.value.unshift(element);\n      });\n      this.content.value.unshift(term);\n    }\n    console.log(this.content.value)\n    this.content.formControl.setValue(this.content.value);\n    this.setValidation();\n    console.log(this.content.formControl);\n\n  }\n\n  private removeTermFromValue(term: Term) {\n    this.content.value = (this.content.value as []).filter(\n      (e: Term) => e.id !== term.id\n    );\n    this.content.formControl.setValue(this.content.value);\n    this.setValidation();\n    console.log(this.content.formControl);\n  }\n\n  private _updateFilteredOptions() {\n    this.filteredOptions = this.chipsFormControl.valueChanges.pipe<\n      string,\n      TermNode[]\n    >(\n      startWith(\"\"),\n      map((value) => {\n        const filterValue = value ? value.toLowerCase() : \"\";\n        return this.leafsOptions.filter((option) =>\n          option.term.description.toLowerCase().includes(filterValue)\n        );\n      })\n    );\n  }\n\n  private _get_terms(nodes: TermNode[]): TermNode[] {\n    this.chipsList = [];\n    let result: TermNode[] = [];\n    nodes.forEach((node) => {\n      if (\n        (this.extraContent.selectedTermsIds as []).some(\n          (id) => id === node.term.uuid\n        )\n      ) {\n        this.addTermToValue(node.term);\n        this.chipsList.push(node);\n      } else {\n        // if is not in any of the exclude term ids, then push\n        if (\n          !(this.extraContent.excludeTermsIds as []).some(\n            (id) => id === node.term.uuid\n          )\n        ) {\n          result.push(node);\n        }\n      }\n    });\n\n    return result;\n  }\n\n  addChips(value: TermNode) {\n    if (this.extraContent.multiple) {\n      this.chipsList.unshift(value);\n    } else {\n      // if not is multiple, then the element in the chipsList goes back to the options\n      if (this.chipsList.length > 0) {\n        this.leafsOptions.push(this.chipsList[0]);\n      }\n      this.chipsList = [value];\n    }\n    console.log(value, this.chipsList);\n    this.addTermToValue(value.term);\n    this.leafsOptions = this.leafsOptions.filter(\n      (option) => option.term.id !== value.term.id\n    );\n\n    this.chipsFormControl.setValue(\"\");\n    // document.getElementById(this.inputId).blur();\n    this._updateFilteredOptions();\n  }\n\n  removeChip(index: number) {\n    this.leafsOptions.push(this.chipsList[index]);\n    this.removeTermFromValue(this.chipsList[index].term);\n    this.chipsList.splice(index, 1);\n    this._updateFilteredOptions();\n  }\n\n  getTermNameInATree(node: TermNode) {\n    if (node.parent != null) {\n      return (\n        this.getTermNameInATree(node.parent) + \" / \" + node.term.description\n      );\n    } else {\n      return node.term.description;\n    }\n  }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl, AbstractControl, ValidationErrors, FormGroup } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport { startWith, map } from 'rxjs/operators';\n\n\nimport { FormFieldControl_Experimental } from '../form-field.control.experimental';\nimport { InputControl } from '../../input/input.control';\nimport { Term, TermNode } from '../../../entities/public-api';\n\n@Component({\n    selector: 'toco-term-parent',\n    templateUrl: './term-parent.component.html',\n    styleUrls: ['./term-parent.component.scss'],\n    host: {\n        '[style.minWidth]': 'content.minWidth',\n        '[style.width]': 'content.width'\n    }\n})\nexport class TermParentComponent extends InputControl implements OnInit {\n\n    // internalControl = new FormControl();\n\n\n    formControl = new FormControl();\n    inputId: string;\n    filteredOptions: Observable<Term[]>;\n    selectOptions: Term[] = [];\n    currentTerm: Term = null;\n    parentTerm: Term = null;\n\n    constructor()\n    {\n        super();\n    }\n\n    ngOnInit() {\n\n      this.init('', '', false, true);\n        // (this.content.parentFormSection as FormGroup).addControl(\n        //     this.content.name,\n        //     this.internalControl\n        //   );\n\n        console.log(this.content.value)\n        console.log(this.content.required);\n\n        console.log(this.content.required && (this.content.value == 0 || this.content.value == null || this.content.value == undefined));\n\n        if (this.content.required) {\n            this.content.formControl.setValidators((control: AbstractControl): ValidationErrors | null => {\n                return (control.value == 0 || control.value == null || control.value == undefined)\n                    ? { 'requiredTerms': 'No Terms Selected' }\n                    : null;\n            });\n        }\n        this.setValueToInternalControl();\n\n\n        this.inputId = this.content.label.trim().toLowerCase();\n        if (this.content.extraContent && this.content.extraContent.terms) {\n\n            if (this.content.extraContent.currentTerm) {\n                this.currentTerm = this.content.extraContent.currentTerm;\n            }\n\n            (this.content.extraContent.terms as TermNode[]).forEach(element => {\n                this.selectOptions = this.selectOptions.concat(this._get_terms(element));\n            });\n\n            this._updateFilteredOptions();\n        }\n    }\n\n    private _updateFilteredOptions() {\n        this.filteredOptions = this.formControl.valueChanges.pipe<string, Term[]>(\n            startWith(''),\n            map(value => {\n                const filterValue = value.toLowerCase();\n                return this.selectOptions.filter(option => option.identifier.toLowerCase().includes(filterValue));\n            }));\n    }\n\n    private _get_terms(node: TermNode): Term[] {\n        let result: Term[] = [];\n        if (!this.currentTerm) {\n            result.push(node.term);\n        } else {\n            if (this.currentTerm.id !== node.term.id) {\n                if (this.currentTerm.parent_id && this.currentTerm.parent_id === node.term.id) {\n                    this.parentTerm = node.term;\n                } else {\n                    result.push(node.term);\n                }\n            }\n        }\n\n        node.children.forEach(child => {\n            result = result.concat(this._get_terms(child));\n        });\n\n        return result;\n    }\n\n    addParent(value: Term) {\n\n        this.parentTerm = value;\n        this.selectOptions = this.selectOptions.filter(option => option.id !== value.id);\n\n        this.formControl.setValue('');\n        this._updateFilteredOptions();\n        // document.getElementById(this.inputId).blur();\n\n        (this.currentTerm) ? this.currentTerm.parent_id = this.parentTerm.id : this.parentTerm.id;\n        this.setValueToInternalControl();\n    }\n\n    removeParent() {\n        this.selectOptions.push(this.parentTerm);\n        this._updateFilteredOptions();\n        this.parentTerm = null;\n        this.setValueToInternalControl();\n    }\n\n    private setValueToInternalControl(){\n        if( this.parentTerm == null){\n            this.content.value = null;\n            this.content.formControl.setValue(null);\n        }else{\n            this.content.value = this.parentTerm.id;\n            this.content.formControl.setValue(this.content.value);\n        }\n\n        if (this.content.formControl.valid){\n            this.formControl.setErrors(null);\n        }else{\n            this.formControl.setErrors({requiered:true});\n        }\n    }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\nimport { Component, OnInit } from '@angular/core';\n\nimport { InputControl } from '../../input/input.control';\n\n/**\n * This interface is deprecated. \n * An interface that represents a selectable option. \n */\ninterface SelectOption\n{\n\t/**\n\t * Returns the label that is showed. \n\t */\n\tlabel: string;\n\n\t/**\n\t * Returns the value that is stored internally. \n\t */\n\tvalue: any;\n\n\t/**\n\t * Returns true if this option is selected; otherwise, false. \n\t */\n\t// selected?: boolean;\n}\n\n/**\n * This component is deprecated. \n * The `extraContent` recibe una funcion llamada getOptions() que se encarga de contruir un SelectOption[]. \n * Si es multiple, entonces el `value` es un array de valores. \n */\n@Component({\n\tselector: 'toco-select',\n\ttemplateUrl: './select.component.html',\n\tstyleUrls: ['./select.component.scss'],\n\thost: {\n\t\t'[style.minWidth]': 'content.minWidth',\n\t\t'[style.width]': 'content.width'\n\t}\n})\nexport class SelectComponent extends InputControl/*FormFieldControl_Experimental*/ implements OnInit\n{\n\t/**\n\t * Returns the options list that can be selected. \n\t * By default, its value is `[]`. \n\t */\n\tpublic selectOptions: SelectOption[];\n\n\t/**\n\t * Returns true if the selection can be multiple; otherwise, false. \n\t * By default, its value is `false`. \n\t */\n\tpublic multiple: boolean;\n\n\tpublic constructor()\n\t{\n        super();\n\n\t\tthis.selectOptions = [ ];\n\t\tthis.multiple = false;\n\t}\n\n\tpublic ngOnInit(): void\n\t{\n\t\tconsole.log('SelectComponent OnInit');\n\n        /* Sets the default values. */\n\t\tthis.init('', '', false, false);\n\n\t\tthis.onSelectionChange();\n\t}\n\n    /**\n     * Initializes the `content` input property. \n     * @param label The default label to use. It is used if the `content.label` is not specified. \n\t * @param placeholder The default placeholder to use. It is used if the `content.placeholder` is not specified. \n     * @param isAbbreviation If it is true then the `label` argument represents an abbreviation; otherwise, false. \n     * @param alwaysHint If it is true then there is always at leat one hint start-aligned. \n     */\n    protected init(label: string | undefined, placeholder: string = '', isAbbreviation: boolean, alwaysHint: boolean): void\n    {\n        /* Sets the default values. */\n\n\t\tsuper.init(label, placeholder, isAbbreviation, alwaysHint);\n\n//\t\tif (this.content.appearance == undefined) this.content.appearance = false;\n\t\tthis.multiple = this.content.extraContent['multiple'] ? this.content.extraContent['multiple'] : false;\n\n\t\tif (this.content.extraContent.observable)\n\t\t{\n\t\t\tthis.content.extraContent.observable.subscribe(\n\n\t\t\t\t// next\n\t\t\t\t(response: any) => {\n\t\t\t\t\tthis.selectOptions = this.content.extraContent.getOptions(response);\n\t\t\t\t},\n\n\t\t\t\t// error\n\t\t\t\t(error: any) => { console.log(error); }\n\t\t\t\t,\n\n\t\t\t\t// complete\n\t\t\t\t() => { }\n\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.selectOptions = this.content.extraContent.getOptions();\n\t\t}\n    }\n\n\tpublic onSelectionChange(): void\n\t{\n\t\tif ((this.content.extraContent) && (this.content.extraContent.selectionChange))\n\t\t{\n\t\t\tthis.content.extraContent.selectionChange(this.content.value);\n\t\t}\n\n\t\tconsole.log('Select value: ', this.content.formControl.value);\n\t}\n}\n","import { Component, OnInit } from \"@angular/core\";\nimport { FormFieldControl_Experimental } from \"../form-field.control.experimental\";\nimport { FormControl, FormGroup } from \"@angular/forms\";\nimport { InputControl } from '../../input/input.control';\n\n@Component({\n  selector: \"toco-textarea\",\n  templateUrl: \"./textarea.component.html\",\n  styleUrls: [\"./textarea.component.scss\"],\n  host: {\n    \"[style.minWidth]\": \"content.minWidth\",\n    \"[style.width]\": \"content.width\",\n  },\n})\nexport class TextareaComponent extends InputControl\n  implements OnInit {\n  // internalControl = new FormControl();\n\n  constructor() {\n    super();\n  }\n\n  ngOnInit() {\n    this.init('', '', false, true);\n    // (this.content.parentFormSection as FormGroup).addControl(\n    //   this.content.name,\n    //   this.internalControl\n    // );\n    // console.log(this.content);\n    // this.content.formControl.setValue(this.content.value);\n  }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\nimport { Component, OnInit } from \"@angular/core\";\nimport { AbstractControl, FormControl, ValidationErrors } from \"@angular/forms\";\nimport { Observable } from \"rxjs\";\nimport { map, startWith } from \"rxjs/operators\";\nimport { isArray } from \"util\";\nimport { InputControl } from '../../input/input.control';\nimport { SelectOption } from \"../../input/select/select-input.component\";\n\n\n\ninterface SelectFilterComponentExtraContent{\n  multiple: boolean;\n  selectedTermsIds: [];\n  excludeTermsIds: [];\n\n}\n\n\n\n@Component({\n  selector: \"toco-select-filter\",\n  templateUrl: \"./select-filter.component.html\",\n  styleUrls: [\"./select-filter.component.scss\"],\n  host: {\n    \"[style.minWidth]\": \"content.minWidth\",\n    \"[style.width]\": \"content.width\",\n  },\n})\nexport class SelectFilterComponent extends InputControl\n  implements OnInit {\n  //   internalControl = new FormControl();\n\n  // internalControl = new FormControl();\n\n  //this control is used by the chips,not necessary to expose it\n  chipsFormControl = new FormControl();\n  inputId: string;\n  filteredOptions: Observable<SelectOption[]>;\n  chipsList: SelectOption[] = [];\n  selectOptions: SelectOption[] = [];\n\n  terms: SelectOption[] = [];\n\n  loading = true;\n\n  extraContent: SelectFilterComponentExtraContent;\n\n  // selectedTermsIds = [];\n\n  searchText = \"Seleccione las opciones\";\n\n\n  constructor()\n  {\n    super();\n  }\n\n  ngOnInit()\n  {\n    this.init('', '', false, true);\n    // (this.content.parentFormSection as FormGroup).addControl(\n    //   this.content.name,\n    //   this.internalControl\n    // );\n\n    if (this.content.required) {\n      this.content.formControl.setValidators(\n        (control: AbstractControl): ValidationErrors | null => {\n          return !this.content.value || this.content.value.length == 0\n            ? { requiredTerms: \"No Terms Selected\" }\n            : null;\n        }\n      );\n    }\n\n    this.inputId = this.content.label.trim().toLowerCase();\n    if (this.content.extraContent) {\n      this.extraContent = this.content.extraContent;\n\n      // if (this.extraContent.multiple !== null) {\n      //   this.multiple = this.extraContent.multiple;\n      // }\n      // if (this.extraContent.selectedTermsIds) {\n      //   this.content.value = this.extraContent.selectedTermsIds;\n      // } else {\n      //   this.content.value = [];\n      // }\n\n      // already selected terms\n      if (!this.extraContent.selectedTermsIds) {\n        this.extraContent.selectedTermsIds = [];\n      }\n\n      // terms ids to exclude of the possible options.\n      if (!this.extraContent.excludeTermsIds) {\n        this.extraContent.excludeTermsIds = [];\n      }\n      this.content.value = [];\n\n      if (this.content.extraContent.observable) {\n        this.content.extraContent.observable.subscribe(\n          // next\n          (response: any) => {\n            this.selectOptions = this.content.extraContent.getOptions(response);\n            this.selectOptionsLoaded();\n          },\n\n          // error\n          (error: any) => {\n            console.log(error);\n          },\n          // complete\n          () => {}\n        );\n      } else {\n        this.selectOptions = this.content.extraContent.getOptions();\n        this.selectOptionsLoaded();\n      }\n    //   else if(this.extraContent.termID){\n    //     this.service.getTermByUUID(this.extraContent.termID, this.extraContent.level)\n    //     .subscribe(this.termsTreeObserver);\n    // }\n      // this._updateFilteredOptions();\n    }\n  }\n\n\n  private selectOptionsLoaded() {\n    this.selectOptions.forEach((option) => {\n      if (\n        (this.extraContent.selectedTermsIds as []).some(\n          val => val === option.value\n        )\n      ){\n        this.addChips(option);\n      }\n\n      // if (this.extraContent.multiple) {\n      //   try {\n      //     const index = this.content.value.indexOf(option.value);\n      //     if (index >= 0) {\n      //       this.addChips(option);\n      //     }\n      //   } catch (error) {}\n      // } else {\n      //   if (option.value == this.content.value) {\n      //     this.addChips(option);\n      //   }\n      // }\n    });\n    if (\n      this.extraContent.multiple &&\n      (this.content.value == null ||\n        this.content.value == undefined ||\n        !isArray(this.content.value))\n    ) {\n      this.content.value = [];\n    }\n\n    this._updateFilteredOptions();\n    this.loading = false;\n  }\n\n  private setValidation() {\n    if (this.content.formControl.valid) {\n      this.chipsFormControl.setErrors(null);\n    } else {\n      this.chipsFormControl.setErrors({ requiered: true });\n    }\n  }\n  private addTermToValue(term: SelectOption) {\n    if (this.extraContent.multiple) {\n      this.content.value.unshift(term);\n    } else {\n      this.content.value = [term];\n    }\n    this.content.formControl.setValue(this.content.value);\n    this.setValidation();\n  }\n\n  private removeTermFromValue(term: SelectOption) {\n    this.content.value = (this.content.value as []).filter(\n      (e: SelectOption) => e.value !== term.value\n    );\n    this.content.formControl.setValue(this.content.value);\n    this.setValidation();\n  }\n\n  private _updateFilteredOptions() {\n    this.filteredOptions = this.chipsFormControl.valueChanges.pipe<\n      string,\n      SelectOption[]\n    >(\n      startWith(\"\"),\n      map(value => {\n        const filterValue = value ? value.toLowerCase() : \"\";\n        console.log('************************************')\n        console.log(this.selectOptions);\n        console.log('************************************')\n\n        return this.selectOptions.filter(option =>\n          option.label.toLowerCase().includes(filterValue)\n        );\n      })\n    );\n  }\n\n\n\n  addChips(value: SelectOption) {\n    if (this.extraContent.multiple) {\n      this.chipsList.unshift(value);\n    } else {\n      // if not is multiple, then the element in the chipsList goes back to the options\n      if (this.chipsList.length > 0) {\n        this.selectOptions.push(this.chipsList[0]);\n      }\n      this.chipsList = [value];\n    }\n    this.addTermToValue(value);\n    // console.log(this.selectOptions);\n    this.selectOptions = this.selectOptions.filter(\n      option => option.value !== value.value\n    );\n    // console.log(this.selectOptions);\n\n    this.chipsFormControl.setValue(\"\");\n    // document.getElementById(this.inputId).blur();\n    this._updateFilteredOptions();\n  }\n\n  removeChip(index: number) {\n    // console.log(this.selectOptions);\n\n    this.selectOptions.push(this.chipsList[index]);\n    // console.log(this.selectOptions);\n    this.removeTermFromValue(this.chipsList[index]);\n    this.chipsList.splice(index, 1);\n    this._updateFilteredOptions();\n  }\n\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\nimport { Component, OnInit } from \"@angular/core\";\nimport { FormControl, FormGroup } from \"@angular/forms\";\nimport { FlatTreeControl } from \"@angular/cdk/tree\";\nimport { MatTreeFlattener, MatTreeFlatDataSource } from \"@angular/material\";\nimport { SelectionModel } from \"@angular/cdk/collections\";\nimport { of } from \"rxjs\";\n\nimport { FormFieldControl_Experimental } from \"../form-field.control.experimental\";\nimport { SelectOption } from '../../input/select/select-input.component';\nimport { InputControl } from '../../input/input.control';\n\nexport interface SelectOptionNode {\n  element: SelectOption;\n  parent?: SelectOptionNode;\n  children?: SelectOptionNode[];\n}\n\nexport interface FlatTreeNode {\n  name: string;\n  level: number;\n  expandable: boolean;\n  element: SelectOption;\n}\ninterface TreeFilterData {\n  selectOptions: SelectOptionNode[];\n  type: string;\n  placeholder: string;\n  text: string;\n  field: string;\n  index: number;\n  value: any;\n  idVocab: number;\n}\n\n@Component({\n  selector: \"toco-select-tree\",\n  templateUrl: \"./select-tree.component.html\",\n  styleUrls: [\"./select-tree.component.scss\"]\n})\nexport class SelectTreeComponent extends InputControl\n  implements OnInit {\n  data: SelectOptionNode[];\n\n  // internalControl = new FormControl();\n\n  treeControl: FlatTreeControl<FlatTreeNode>;\n  treeFlattener: MatTreeFlattener<SelectOptionNode, FlatTreeNode>;\n  dataSource: MatTreeFlatDataSource<SelectOptionNode, FlatTreeNode>;\n  checklistSelection = new SelectionModel<FlatTreeNode>(true /* multiple */);\n\n  constructor() {\n    super();\n    this.treeFlattener = new MatTreeFlattener(\n      this.transformer,\n      this.getLevel,\n      this.isExpandable,\n      this.getChildren\n    );\n\n    this.treeControl = new FlatTreeControl(this.getLevel, this.isExpandable);\n    this.dataSource = new MatTreeFlatDataSource(\n      this.treeControl,\n      this.treeFlattener\n    );\n  }\n\n  ngOnInit() {\n\n    // (this.content.parentFormSection as FormGroup).addControl(\n    //   this.content.name,\n    //   this.internalControl\n    // );\n\n    this.init('', '', false, true);\n    if (this.content.extraContent){\n      if (this.content.extraContent.observable) {\n        this.content.extraContent.observable.subscribe(\n          // next\n          (response: any) => {\n            console.log(response);\n\n            this.data = this.content.extraContent.getOptions(response);\n            console.log(this.data);\n            this.dataSource.data = this.data;\n            console.log(this.dataSource);\n            this.content.extraContent.selectedTermsIds.forEach((uuid:string) => {\n              console.log(uuid);\n\n              this.treeControl.dataNodes.forEach(node => {\n\n\n                if (node.element.value == uuid){\n                  console.log(node);\n\n                  if(node.expandable){\n                    this.itemSelectionToggle(node);\n                  } else {\n                    this.leafItemSelectionToggle(node);\n                  }\n                }\n              })\n            });\n          },\n\n          // error\n          (error: any) => {\n            console.log(error);\n          },\n          // complete\n          () => {}\n        );\n      } else {\n        this.data = this.content.extraContent.getOptions();\n        this.dataSource.data = this.data;\n      }\n      if (!this.content.extraContent.selectedTermsIds) {\n        this.content.extraContent.selectedTermsIds = [];\n      }\n    }\n\n\n    this.content.value = \"\";\n  }\n\n  remove_component() {}\n\n  onChange() {\n    console.log(\"ttree change\");\n  }\n\n  emitSelection() {\n    this.content.formControl.setValue(this.checklistSelection.selected);\n\n    // this.content.extraContent.selectionChange(this.checklistSelection.selected)\n    // var valueEmiter = \"OR\";\n    // this.checklistSelection.selected.forEach(node => {\n    //   valueEmiter = valueEmiter + \",\" + node.element.value;\n    // });\n\n    // if (this.content.extraContent.selectionChange) {\n    //   this.content.extraContent.selectionChange(this.content.value);\n    // }\n  }\n\n  /** Transform the data to something the tree can read. */\n  transformer(node: SelectOptionNode, level: number) {\n    const result = {\n      name: node.element.label,\n      level: level,\n      expandable: node.children.length > 0,\n      element: node.element\n    };\n    return result;\n  }\n\n  /** Get the level of the node */\n  getLevel(node: FlatTreeNode) {\n    return node.level;\n  }\n\n  /** Get whether the node is expanded or not. */\n  isExpandable(node: FlatTreeNode) {\n    return node.expandable;\n  }\n\n  /** Get whether the node has children or not. */\n  hasChild(index: number, node: FlatTreeNode) {\n    return node.expandable;\n  }\n\n  /** Get the children for the node. */\n  getChildren(node: SelectOptionNode) {\n    return of(node.children);\n  }\n\n  /** Whether all the descendants of the node are selected. */\n  descendantsAllSelected(node: FlatTreeNode): boolean {\n    if (this.treeControl.dataNodes != undefined) {\n      const descendants = this.treeControl.getDescendants(node);\n      const descAllSelected = descendants.every(child =>\n        this.checklistSelection.isSelected(child)\n      );\n      return descAllSelected;\n    }\n    return false;\n  }\n\n  /** Whether part of the descendants are selected */\n  descendantsPartiallySelected(node: FlatTreeNode): boolean {\n    if (this.treeControl.dataNodes != undefined) {\n      const descendants = this.treeControl.getDescendants(node);\n      const result = descendants.some(child =>\n        this.checklistSelection.isSelected(child)\n      );\n      return result && !this.descendantsAllSelected(node);\n    }\n    return false;\n  }\n\n  /** Select/deselect all the descendants node */\n  itemSelectionToggle(node: FlatTreeNode): void {\n    this.checklistSelection.toggle(node);\n    const descendants = this.treeControl.getDescendants(node);\n    this.checklistSelection.isSelected(node)\n      ? this.checklistSelection.select(...descendants)\n      : this.checklistSelection.deselect(...descendants);\n\n    // Force update for the parent\n    descendants.every(child => this.checklistSelection.isSelected(child));\n    this.checkAllParentsSelection(node);\n    this.emitSelection();\n  }\n\n  /** Check all the parents to see if they changed */\n  leafItemSelectionToggle(node: FlatTreeNode): void {\n    this.checklistSelection.toggle(node);\n    this.checkAllParentsSelection(node);\n    this.emitSelection();\n  }\n\n  /* Checks all the parents when a leaf node is selected/unselected */\n  checkAllParentsSelection(node: FlatTreeNode): void {\n    let parent: FlatTreeNode | null = this.getParentNode(node);\n    while (parent) {\n      this.checkRootNodeSelection(parent);\n      parent = this.getParentNode(parent);\n    }\n  }\n\n  /** Check root node checked state and change it accordingly */\n  checkRootNodeSelection(node: FlatTreeNode): void {\n    const nodeSelected = this.checklistSelection.isSelected(node);\n    const descendants = this.treeControl.getDescendants(node);\n    const descAllSelected = descendants.every(child =>\n      this.checklistSelection.isSelected(child)\n    );\n    if (nodeSelected && !descAllSelected) {\n      this.checklistSelection.deselect(node);\n    } else if (!nodeSelected && descAllSelected) {\n      this.checklistSelection.select(node);\n    }\n  }\n\n  /* Get the parent node of a node */\n  getParentNode(node: FlatTreeNode): FlatTreeNode | null {\n    const currentLevel = this.getLevel(node);\n\n    if (currentLevel < 1) {\n      return null;\n    }\n\n    const startIndex = this.treeControl.dataNodes.indexOf(node) - 1;\n\n    for (let i = startIndex; i >= 0; i--) {\n      const currentNode = this.treeControl.dataNodes[i];\n\n      if (this.getLevel(currentNode) < currentLevel) {\n        return currentNode;\n      }\n    }\n    return null;\n  }\n}\n","import { Component, OnInit } from \"@angular/core\";\nimport { FormFieldControl_Experimental } from \"../form-field.control.experimental\";\nimport { FormGroup } from \"@angular/forms\";\nimport { InputControl } from '../../input/input.control';\n\n@Component({\n  selector: \"toco-datepicker\",\n  templateUrl: \"./datepicker.component.html\",\n  styleUrls: [\"./datepicker.component.scss\"],\n})\nexport class DatepickerComponent extends InputControl\n  implements OnInit {\n\n        // TODO: for datepicker, !!!! use https://stackblitz.com/edit/angular-material2-year-picker-7z9k4t?file=app%2Fcustom-datepicker%2Fyear-picker-component%2Fyear-picker.component.html\n\n  constructor() {\n    super();\n  }\n\n  ngOnInit() {\n    this.init('', '', false, true);\n    // (this.content.parentFormSection as FormGroup).addControl(\n    //   this.content.name,\n    //   this.internalControl\n    // );\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { FormFieldControl_Experimental } from '../form-field.control.experimental';\nimport { FormGroup } from '@angular/forms';\nimport { InputControl } from '../../input/input.control';\n\n@Component({\n  selector: 'toco-checkbox',\n  templateUrl: './checkbox.component.html',\n  styleUrls: ['./checkbox.component.scss']\n})\nexport class CheckboxComponent extends InputControl\nimplements OnInit {\n\nconstructor() {\n  super();\n}\n\nngOnInit() {\n  this.init('', '', false, true);\n  // (this.content.parentFormSection as FormGroup).addControl(\n  //   this.content.name,\n  //   this.internalControl\n  // );\n}\n\n}\n","\nimport { Component, OnInit, Input } from '@angular/core';\n\nimport { ContainerContent, ContainerControl } from '../container.control';\n\n\n\nexport interface PanelAction {\n  doit(data: any): void;\n}\n\n\n\n/**\n * An interface that represents the content of a panel control.\n */\nexport interface PanelActionContent extends ContainerContent\n{\n    /**\n     * In this case, the `label?: string` field inherited from `FormFieldContent` is interpreted as:\n     * Returns the control's title.\n     * By default, its value is `''`. Each control sets its own label (title).\n     */\n\n    /**\n     * Returns the panel's description.\n     * By default, its value is `undefined`.\n     */\n    description?: string;\n\n    /**\n     * Returns the panel's icon name.\n     * By default, its value is `undefined`.\n     */\n    iconName?: string;\n\n      /**\n     * Returns the action and action labels for each panel.\n     */\n    action?: PanelAction;\n    actionLabel?: string;\n}\n\n/**\n * Represents a container control that is showed as a panel.\n * Usage notes:\n *  - It can be used as:\n * <container-panel [content]=\"panelContent\"></container-panel>\n * Where `content.formSection` is created, for example, as this:\n * this.content.formSection = new FormGroup({ }, [ ]);\n */\n@Component({\n\tselector: 'container-panel-action',\n\ttemplateUrl: './panel-action-container.component.html',\n\tstyleUrls: ['./panel-action-container.component.scss'],\n\thost: {\n\t\t'[style.minWidth]': 'content.minWidth',\n\t\t'[style.width]': 'content.width'\n\t}\n})\nexport class ContainerPanelActionComponent extends ContainerControl implements OnInit\n{\n    /**\n     * Input field that contains the content of this class.\n     */\n    @Input()\n\tpublic content: PanelActionContent;\n\n\tpublic constructor()\n\t{\n        super();\n\t}\n\n\tpublic ngOnInit(): void\n\t{\n\t\t/* Sets the default values. */\n        this.init('');\n    }\n\n    /**\n     * Initializes the `content` input property.\n     * @param label The default label to use. It is used if the `content.label` is not specified.\n     */\n    protected init(label: string): void\n    {\n        /* Sets the default values. */\n\n        super.init(label);\n\n        /* The `content.description`, and `content.iconName` fields\n        have the `undefined` value by default. */\n    }\n    public doAction(): void {\n\n      // const data = {};\n      // this.content..formSectionContent.forEach(element => {\n      //   element\n      // });\n      // this.panelsContent.forEach((panel) => {\n      //   panel.formSectionContent.forEach((controlContent) => {\n      //     data[controlContent.name] = controlContent.value;\n      //   });\n      // });\n\n      if (this.content.action) {\n        this.content.action.doit(this.content.value);\n      }\n\n\n    }\n}\n\n","import { InputControl } from '../../input/input.control';\n\nimport { Component, Input, forwardRef, ViewChild, ViewEncapsulation, OnInit } from '@angular/core';\nimport { FormControl, NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\nimport { DateAdapter, MAT_DATE_FORMATS, MAT_DATE_LOCALE, MatDatepicker } from '@angular/material';\nimport { MomentDateAdapter } from '@angular/material-moment-adapter';\n\nimport moment from 'moment';\nimport { defaultFormat as _rollupMoment, Moment } from 'moment';\n// const moment = _rollupMoment || _moment;\n\n\nexport const YEAR_MODE_FORMATS = {\n  parse: {\n    dateInput: 'YYYY',\n  },\n  display: {\n    dateInput: 'YYYY',\n    monthYearLabel: 'MMM YYYY',\n    dateA11yLabel: 'LL',\n    monthYearA11yLabel: 'MMMM YYYY',\n  },\n};\n\n@Component({\n  selector: 'toco-datepicker-year',\n  templateUrl: './datepicker-year.component.html',\n  styleUrls: ['./datepicker-year.component.scss'],\n  providers: [\n    { provide: DateAdapter, useClass: MomentDateAdapter, deps: [MAT_DATE_LOCALE] },\n    { provide: MAT_DATE_FORMATS, useValue: YEAR_MODE_FORMATS },\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => DatepickerYearComponent),\n      multi: true,\n    },\n  ],\n  host: {\n    \"[style.minWidth]\": \"content.minWidth\",\n    \"[style.width]\": \"content.width\",\n  },\n})\nexport class DatepickerYearComponent  extends InputControl implements OnInit, ControlValueAccessor {\n\n  /** Component label */\n  @Input() label = '';\n\n  _max: Moment;\n  @Input() get max(): number | Date {\n    return this._max ? this._max.year() : undefined;\n  }\n  set max(max: number | Date) {\n    if (max) {\n      const momentDate = typeof max === 'number' ? moment([max, 0, 1]) : moment(max);\n      this._max = momentDate.isValid() ? momentDate : undefined;\n    }\n  }\n\n  _min: Moment;\n  @Input() get min(): number | Date {\n    return this._min ? this._min.year() : undefined;\n  }\n  set min(min: number | Date) {\n    if (min) {\n      const momentDate = typeof min === 'number' ? moment([min, 0, 1]) : moment(min);\n      this._min = momentDate.isValid() ? momentDate : undefined;\n    }\n  }\n\n  @Input() touchUi = false;\n\n  @ViewChild(MatDatepicker, { static: true }) _picker: MatDatepicker<Moment>;\n\n  // _inputCtrl: FormControl = new FormControl();\n\n  // Function to call when the date changes.\n  onChange = (year: Date) => { };\n\n  // Function to call when the input is touched (when a star is clicked).\n  onTouched = () => { };\n\n\n  ngOnInit() {\n    this.init('', '', false, true);\n    // this.value = moment(this.value.toString()).format(\"YYYY\")\n    if (this.label == '') {\n      this.label = this.content.label;\n    }\n\n    this.min = this.content.extraContent.minYear;\n    this.max = this.content.extraContent.maxYear;\n    console.log(this.content.extraContent, 'DATEPICKER YEAR EXTRA CONTENT....', this._min, this._max)\n\n    this.writeValue(new Date(this.content.value));\n   }\n   constructor() { super(); }\n\n\n  writeValue(date: Date): void {\n    if (date && this._isYearEnabled(date.getFullYear())) {\n      const momentDate = moment(date);\n      if (momentDate.isValid()) {\n        this.content.formControl.setValue(moment(date), { emitEvent: false });\n        this.content.value = moment(date).year;\n        // this.content.formControl.setValue(this.content.value);\n\n      }\n    }\n  }\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  // Allows Angular to disable the input.\n  setDisabledState(isDisabled: boolean): void {\n    isDisabled ? this._picker.disabled = true : this._picker.disabled = false;\n\n    isDisabled ? this.content.formControl.disable() : this.content.formControl.enable();\n  }\n\n  _yearSelectedHandler(chosenDate: Moment, datepicker: MatDatepicker<Moment>) {\n    if (!this._isYearEnabled(chosenDate.year())) {\n      datepicker.close();\n      return;\n    }\n\n    this.content.formControl.setValue(chosenDate, { emitEvent: false });\n    this.content.value = chosenDate.year;\n    // this.content.formControl.setValue(this.content.value);\n    this.onChange(chosenDate.toDate());\n    this.onTouched();\n    datepicker.close();\n  }\n\n  _openDatepickerOnClick(datepicker: MatDatepicker<Moment>) {\n    if (!datepicker.opened) {\n      datepicker.open();\n    }\n  }\n\n  _openDatepickerOnFocus(datepicker: MatDatepicker<Moment>) {\n    setTimeout(() => {\n      if (!datepicker.opened) {\n        datepicker.open();\n      }\n    });\n  }\n\n  /** Whether the given year is enabled. */\n  private _isYearEnabled(year: number) {\n    // disable if the year is greater than maxDate lower than minDate\n    if (year === undefined || year === null ||\n      (this._max && year > this._max.year()) ||\n      (this._min && year < this._min.year())) {\n      return false;\n    }\n\n    return true;\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FormControl, AbstractControl, ValidationErrors } from '@angular/forms';\n\nimport { InputControl } from '../../input/input.control';\nimport { OrganizationServiceNoAuth } from '../../../backend/organization.service';\nimport { HttpParams } from '@angular/common/http';\nimport { Hit, HitList } from '../../../entities/common';\nimport { Organization } from '../../../entities/organization.entity';\n\ninterface SelectOrgsComponentExtraContent{\n  multiple: boolean;\n  selectedOrgsIds: [];\n  /**\n    * Input `orgFilter` is a dict with `type` and `value` to filter the organizations,\n    * @Example { type: 'country' , value: 'Cuba\" }\n    */\n  orgFilter: { type: string, value: string};\n\n}\n\n@Component({\n  selector: 'toco-select-org',\n  templateUrl: './select-orgs.component.html',\n  styleUrls: ['./select-orgs.component.scss'],\n  host: {\n    \"[style.minWidth]\": \"content.minWidth\",\n    \"[style.width]\": \"content.width\"\n  }\n})\nexport class SelectOrgsComponent extends InputControl\nimplements OnInit {\n\n  /**\n   * Input `orgCtrl` is a FormControl\n   */\n   @Input()\n   orgCtrl = new FormControl();\n\n   filteredOrg = new  HitList<Organization>();\n\n   params= new HttpParams();\n\n\n   @Input()\n   placeholder: string = \"Escriba al menos 3 letras\";\n\n   @Input()\n   label: string = \"Busque una organización\";\n\n   @Input()\n   appearance: string = \"outline\";\n\n   /**\n    * Input `cleaning` is a boolen, if true then clean the search\n    */\n   @Input()\n   cleaning: boolean = false;\n\n   @Output()\n   selectedOrg: EventEmitter<Organization> = new EventEmitter<Organization>();\n\n   chipsList: Hit<Organization>[] = [];\n   extraContent: SelectOrgsComponentExtraContent;\n   loading = false;\n\n   toSearch=0;\n   constructor( private _orgService: OrganizationServiceNoAuth) {  super();}\n\n   ngOnInit() {\n    this.init('', '', false, false);\n    this.extraContent = this.content.extraContent;\n    this.content.value = [];\n\n    this.extraContent.selectedOrgsIds.forEach(uuid => {\n      this._orgService.getOrganizationByUUID(uuid).subscribe({\n        next: (response) => {\n          this.addChips(response);\n        }\n    });\n    });\n     this.params = this.params.set('size', '10');\n     this.params = this.params.set('page', '1');\n     if (this.extraContent.orgFilter != undefined) {\n       this.params = this.params.set(this.extraContent.orgFilter.type, this.extraContent.orgFilter.value);\n     }\n     this.orgCtrl.valueChanges\n     .subscribe({\n       next: (orgValueChanges) => {\n         this.toSearch++;\n         // this condition check if the param is a `string` an if at least write 3 letters\n         if (this.toSearch > 3 && typeof orgValueChanges === 'string') {\n           this.toSearch = 0;\n           this.params = this.params.set('q', orgValueChanges)\n           this.loading = true;\n           this._orgService.getOrganizations(this.params).subscribe({\n               next: (response) => {\n                 this.filteredOrg = response.hits\n                 this.loading = false;\n               }\n           });\n         } else if (typeof orgValueChanges === 'object') {\n           this.toSearch = 0;\n           this.selectedOrg.emit(orgValueChanges);\n           if (this.cleaning){\n             this.orgCtrl.setValue('');\n           }\n         }\n       }\n     })\n   }\n   /* This function return the organization name\n    * @param org the Organization object\n    */\n   displayFn(org?: Organization): string | undefined {\n     return org ? org.name : undefined;\n   }\n\n   addChips(value: Hit<Organization>) {\n    if (this.extraContent.multiple) {\n      if(!this.chipsList.find(x => x.id == value.id)){\n        this.chipsList.unshift(value);\n        this.content.value.unshift(value);\n      }\n    } else {\n      this.chipsList = [value];\n      this.content.value = [value];\n    }\n    this.content.formControl.setValue(this.content.value);\n    this.orgCtrl.setValue(\"\");\n    this.filteredOrg = new  HitList<Organization>();\n  }\n\n  removeChip(index: number) {\n    let todelete = this.chipsList[index]\n    this.content.value = (this.content.value as []).filter(\n      (e: Hit<Organization>) => e.id !== todelete.id\n    );\n    this.content.formControl.setValue(this.content.value);\n    this.chipsList.splice(index, 1);\n  }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { CoreModule } from '../core/core.module';\nimport { IconService } from '../core/services/icon.service';\n\nimport { ActionButtonComponent } from './action/button/button-action.component';\n\nimport { ComponentFactory_Depr } from './component-factory-depr/component-factory-depr.component';\n\nimport { FormContainerComponent } from './container/form-container/form-container.component';\nimport { ContainerPanelComponent } from './container/panel/panel-container.component';\nimport { ContainerSimpleComponent } from './container/simple/simple-container.component';\nimport { TableComponent } from './container/table/table.component';\n\nimport { ContainerLabelDiffLangComponent } from './container-specific/label-diff-lang/label-diff-lang-container.component';\n\nimport { InputBoolComponent } from './input/bool/bool-input.component';\nimport { InputEmailComponent } from './input/email/email-input.component';\nimport { InputIdentifierComponent } from './input/identifier/identifier-input.component';\nimport { InputIssnComponent } from './input/issn/issn-input.component';\nimport { InputNumberComponent } from './input/number/number-input.component';\nimport { InputRnpsComponent } from './input/rnps/rnps-input.component';\nimport { InputSelectComponent } from './input/select/select-input.component';\nimport { InputTextComponent } from './input/text/text-input.component';\nimport { InputUrlComponent } from './input/url/url-input.component';\n\nimport { VocabularyComponent } from './experimental/vocabulary/vocabulary.component';\nimport { VocabularyTreeComponent } from './experimental/vocabulary-tree/vocabulary-tree.component';\nimport { TermParentComponent } from './experimental/term-parent/term-parent.component';\nimport { SelectComponent } from './experimental/select/select.component';\nimport { TextareaComponent } from './experimental/textarea/textarea.component';\nimport { SelectFilterComponent } from './experimental/select-filter/select-filter.component';\nimport { SelectTreeComponent } from './experimental/select-tree/select-tree.component';\nimport { DatepickerComponent } from './experimental/datepicker/datepicker.component';\nimport { CheckboxComponent } from './experimental/checkbox/checkbox.component';\n\nimport { ContainerPanelActionComponent } from './container/panel-action/panel-action-container.component';\nimport { DatepickerYearComponent } from './experimental/datepicker-year/datepicker-year.component';\nimport { SelectOrgsComponent } from './experimental/select-orgs/select-orgs.component';\n\n@NgModule({\n  declarations: [\n    ActionButtonComponent,\n    ComponentFactory_Depr,\n    FormContainerComponent,\n    ContainerPanelComponent,\n    ContainerPanelActionComponent,\n    ContainerSimpleComponent,\n    TableComponent,\n    ContainerLabelDiffLangComponent,\n    InputBoolComponent,\n    InputEmailComponent,\n    InputIdentifierComponent,\n    InputIssnComponent,\n    InputNumberComponent,\n    InputRnpsComponent,\n    InputSelectComponent,\n    InputTextComponent,\n    InputUrlComponent,\n    VocabularyComponent,\n    VocabularyTreeComponent,\n    TermParentComponent,\n    SelectComponent,\n    SelectFilterComponent,\n    TextareaComponent,\n    SelectTreeComponent,\n    DatepickerComponent,\n    CheckboxComponent,\n    DatepickerYearComponent,\n    SelectOrgsComponent\n  ],\n\n  imports: [\n    SharedModule,\n    ReactiveFormsModule,\n    TranslateModule,\n    CoreModule\n  ],\n\n  /* In order to ensure that the compiler still generates a factory for all dynamically loaded components. */\n  entryComponents: [\n    ActionButtonComponent,\n    ContainerPanelComponent,\n    ContainerPanelActionComponent,\n    ContainerSimpleComponent,\n    InputBoolComponent,\n    InputEmailComponent,\n    InputIdentifierComponent,\n    InputIssnComponent,\n    InputNumberComponent,\n    InputRnpsComponent,\n    InputSelectComponent,\n    InputTextComponent,\n    InputUrlComponent,\n    VocabularyComponent,\n    VocabularyTreeComponent,\n    TermParentComponent,\n    SelectComponent,\n    SelectFilterComponent,\n    TextareaComponent,\n    SelectTreeComponent,\n    DatepickerComponent,\n    DatepickerYearComponent,\n    CheckboxComponent,\n    SelectOrgsComponent\n  ],\n\n  exports: [\n    ActionButtonComponent,\n    ComponentFactory_Depr,\n    FormContainerComponent,\n    ContainerPanelComponent,\n    ContainerPanelActionComponent,\n    ContainerSimpleComponent,\n    TableComponent,\n    ContainerLabelDiffLangComponent,\n    InputBoolComponent,\n    InputEmailComponent,\n    InputIdentifierComponent,\n    InputIssnComponent,\n    InputNumberComponent,\n    InputRnpsComponent,\n    InputSelectComponent,\n    InputTextComponent,\n    InputUrlComponent,\n    VocabularyComponent,\n    VocabularyTreeComponent,\n    TermParentComponent,\n    SelectComponent,\n    SelectFilterComponent,\n    TextareaComponent,\n    DatepickerComponent,\n    DatepickerYearComponent,\n    CheckboxComponent,\n    SelectOrgsComponent\n  ],\n\n  providers: []\n})\nexport class TocoFormsModule {\n  public constructor(private _iconService: IconService) {\n    //console.log('Icon Service: registers icons.');\n\n    this._iconService.registerIcons(\n      [\n        IconService.defaultIconName,  /* It is used by controls that want to have occupied the icon space, but nothing is showed. */\n        'outlined-bar_code-24px',\n        'outlined-mail-24px'\n      ],\n      '../assets/svg/icons'\n    );\n  }\n}\n","\nimport { Injectable } from '@angular/core';\nimport { HttpHeaders, HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nimport { Environment } from '../../../core/env';\n\nimport { Response } from '../../../core/public-api';\n\n/**\n * This service is deprecated.\n */\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class FormContainerService {\n\n\tprivate httpOptions = {\n\t\theaders: new HttpHeaders(\n\t\t\t{\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Authorization': 'Bearer '\n\t\t\t})\n\t};\n\n\tpublic constructor(private httpClient: HttpClient, private env: Environment)\n\t{ }\n\n\t/**\n\t * Sends data to the server.\n\t * @param endPoint The data end point. For example, `/add_new`.\n\t * @param token The autorization token.\n\t * @param data The data to send, must be parsed.\n\t */\n\tpublic sendPostData(endPoint: string, token: string, data: any ): Observable<Response<any>> {\n\n\t\tthis.httpOptions.headers = this.httpOptions.headers.set('Authorization', 'Bearer ' + token);\n\n\t\treturn this.httpClient.post<Response<any>>( this.env.sceibaApi+endPoint, data, this.httpOptions );\n\t}\n}\n","\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'toco-harvester',\n    templateUrl: './harvester.component.html',\n    styleUrls: ['./harvester.component.scss']\n})\nexport class HarvesterComponent implements OnInit\n{\n    constructor()\n    { }\n\n    ngOnInit()\n    { }\n}\n","\nimport { Component, ComponentFactoryResolver } from '@angular/core';\n\nimport { CatalogService } from '../../backend/public-api';\nimport { FilterContainerComponent, FilterContainerService } from '../../filters/public-api';\n\n@Component({\n    selector: 'toco-harvester-filters-container',\n    templateUrl: './harvester-filters.component.html',\n    styleUrls: ['./harvester-filters.component.scss']\n})\nexport class HarvesterFiltersComponent extends FilterContainerComponent{\n\n    constructor(protected componentFactoryResolver: ComponentFactoryResolver,\n        protected childrenService: FilterContainerService,\n        protected service:  CatalogService,)\n    {\n        super(componentFactoryResolver, childrenService)\n    }\n\n    ngOnInit() {\n        super.ngOnInit()\n\n        default_filters.forEach(filter => {\n            this.filters_data.push(filter);\n        });\n\n        this.service.getJournalsVocab().subscribe(response => {\n            response.data.vocabularies.forEach(vocab => {\n                this.service.getTerminosByVocab(vocab.name+'/any').subscribe(termsResponse => {\n                    this.filters_data.push({\n                        index: this.filters_data.length,\n                        field: 'terms',\n                        type: 'select-autocomplete',\n                        placeholder: vocab.name,\n                        name: vocab.name,\n                        idVocab: vocab.id,\n                        selectOptions: termsResponse.data.terms,\n                        is_enabled: true\n                    });\n                });\n            });\n        });\n    }\n}\n\nconst default_filters = [\n    {\n        index: 0,\n        field: 'title',\n        type: 'search',\n        placeholder: 'Título',\n        name: 'Título',\n        is_enabled: true\n    }\n];\n","\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport {animate, state, style, transition, trigger} from '@angular/animations';\nimport {merge,of as observableOf} from 'rxjs';\nimport { startWith, switchMap, map, catchError } from 'rxjs/operators';\nimport { MatPaginator, PageEvent } from '@angular/material/paginator';\nimport { MatTableDataSource } from '@angular/material/table';\n\nimport { CatalogService } from '../../backend/public-api';\nimport { MetadataService } from '../../core/public-api';\nimport { Journal, JournalData, ISSN } from '../../entities/public-api';\nimport { FilterHttpMap, FiltersService } from '../../filters/public-api';\n\nimport { Environment } from '../../core/env';\n\nimport { HarvesterFiltersComponent } from '../harvester-filters/harvester-filters.component';\n\n@Component({\n    selector: 'toco-repositories',\n    templateUrl: './repositories.component.html',\n    styleUrls: ['./repositories.component.scss'],\n    animations: [\n        trigger('detailExpand', [\n            state('collapsed', style({height: '0px', minHeight: '0', display: 'none'})),\n            state('expanded', style({height: '*'})),\n            transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')),\n        ]),\n    ],\n})\nexport class RepositoriesComponent implements OnInit {\n\n    journalList: Journal[] = [];\n    private loading: boolean = true;\n    dataSource = new MatTableDataSource<Journal>();\n    columnsToDisplay = ['title'];\n    expandedElement: Journal;\n    length = 0;\n    pageSize = 5;\n    pageSizeOptions: number[] = [5, 10, 20, 40, 60, 80, 100];\n    pageEvent: PageEvent;\n    params: Array<FilterHttpMap>;\n\n    sceibaHost = ''\n    currentlayout = {\n        name: 'Izquierda',\n        layout: 'row',\n        aling: 'center baseline',\n        width:  '22'\n    }\n\n    constructor(private service: CatalogService,\n        private metadata: MetadataService,\n        private filterService : FiltersService,\n        private env: Environment)\n    {\n        this.sceibaHost = env.sceibaHost + \"/catalog\"\n    }\n\n    @ViewChild(MatPaginator, { static: true })\n    paginator: MatPaginator;\n\n    @ViewChild(HarvesterFiltersComponent, { static: true })\n    filter_component : HarvesterFiltersComponent;\n\n    ngOnInit() {\n\n        this.metadata.setStandardMeta(\"Catálogo de Revistas Científicas\", \"\", \"\");\n        this.paginator.firstPage();\n        this.paginator.pageSize = this.pageSize;\n        this.service.getJournalsCount().subscribe(response =>{\n            this.length = response.data.count;\n        });\n        this.fetchJournalData();\n\n        this.filterService.paramsChanged.subscribe(params =>{\n            this.params = params;\n            this.fetchJournalData();\n        })\n    }\n\n    // onPaginatorChanged(){\n    //   this.filterService.changeFilter('count',this.paginator.pageSize, false);\n    //   this.filterService.changeFilter('page',this.paginator.pageIndex);\n    // }\n\n    fetchJournalData() {\n        this.loading = true;\n        //this.dataSource.data = this.service.getJournalsPage(this.count, this.page);\n        let arr = new Array<Journal>();\n        merge().pipe(\n            startWith({}),\n            switchMap(() => {\n                this.loading = true;\n                return this.service!.getJournalsPage(this.paginator.pageSize, this.paginator.pageIndex, this.params);\n            }),\n            map(response => {\n                // Flip flag to show that loading has finished.\n                this.loading = false;\n                // this.isRateLimitReached = false;\n                // this.resultsLength = response.total_count;\n                this.length = response.data.sources.count\n                response.data.sources.data.forEach(item =>{\n                    let j = new Journal();\n                    j.id = item.id;\n                    j.uuid = item.uuid;\n                    j.source_type = item.source_type;\n                    // j.harvest_type = item.harvest_type;\n                    j.data.oaiurl = item.harvest_endpoint;\n\n\n                        let info = new JournalData();\n                        info.url = item.data!= null ? item.data.url: \"\";\n                        info.title = item.name;\n                        info.subtitle = item.subtitle;\n                        info.shortname  = item.shortname;\n                            let issn = new ISSN();\n                            issn.e = item.data!= null ? item.data.issn.e : \"\";\n                            issn.l = item.data!= null ? item.data.issn.l : \"\";\n                            issn.p = item.data!= null ? item.data.issn.p : \"\";\n                        info.issn = issn;\n                        info.rnps = item.data!= null ? item.data.rnps : \"\";\n                        info.logo = item.data!= null ? item.data.logo : \"\";\n                        info.purpose  = item.purpose;\n                        info.description  = item.data!= null ? item.data.description : \"\";\n                    j.data = info;\n                    arr.push(j);\n                });\n                return arr;\n            }),\n            catchError(error => {\n                this.loading = false;\n                console.log(\"ERRORRR  \"+error)\n                // Catch if the GitHub API has reached its rate limit. Return empty data.\n                // this.isRateLimitReached = true;\n                return observableOf([]);\n            })\n        ).subscribe(data => this.dataSource.data = data);\n\n    }\n\n    onScrollUp() {\n        // console.log(\"scrolled up!!\");\n    }\n\n    isEmpty() {\n        if (this.journalList.length == 0) {\n            this.loading = false;\n            return true;\n        }\n        return false;\n    }\n\n    isLoading() {\n        return this.loading;\n    }\n\n    currentJournals(){\n        console.log(this.dataSource.data)\n    }\n}\n","\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HarvesterComponent } from './harvester/harvester.component';\nimport { RepositoriesComponent } from './repositories/repositories.component';\n\nconst routes: Routes = [{\n    path: '',\n    component: HarvesterComponent,\n    children: [\n        {\n            path: '',\n            component: RepositoriesComponent,\n            data: {\n                title: 'Revistas'\n            }\n        }\n    ]\n}];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule]\n})\nexport class HarvesterRoutingModule\n{ }\n","\nimport { Component, OnInit, Input } from '@angular/core';\n\nimport { Journal } from '../../entities/public-api';\n\n@Component({\n    selector: 'toco-harvester-repository',\n    templateUrl: './repository.component.html',\n    styleUrls: ['./repository.component.scss']\n})\nexport class RepositoryComponent implements OnInit {\n\n    @Input() repostitory: Journal;\n\n    constructor()\n    { }\n\n    ngOnInit() {\n    }\n\n    onIdentify(){\n        console.log('onIdentify'+this.repostitory.id);\n    }\n    \n    onHarvest(){\n        console.log('onHarvest'+this.repostitory.id);\n    }\n\n    onRecord(){\n        console.log('onRecord'+this.repostitory.id);\n    }\n}\n","\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from \"@angular/common/http\";\n\n@Injectable()\nexport class HarvesterService\n{\n    public constructor(private http: HttpClient)\n    { }\n}\n","\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/public-api';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { FiltersModule } from '../filters/public-api';\nimport { CatalogService } from '../backend/public-api';\n\nimport { HarvesterRoutingModule } from './harvester-routing.module';\nimport { RepositoriesComponent } from './repositories/repositories.component';\nimport { RepositoryComponent } from './repository/repository.component';\nimport { HarvesterComponent } from './harvester/harvester.component';\nimport { HarvesterService } from './harvester.service';\nimport { HarvesterFiltersComponent } from './harvester-filters/harvester-filters.component';\n\n@NgModule({\n    declarations: [\n        RepositoriesComponent,\n        RepositoryComponent,\n        HarvesterComponent,\n        HarvesterFiltersComponent\n    ],\n\n    imports: [\n        SharedModule,\n        ReactiveFormsModule,\n        HarvesterRoutingModule,\n        FiltersModule\n    ],\n\n    exports: [\n        RepositoriesComponent,\n        RepositoryComponent,\n        HarvesterComponent,\n        HarvesterFiltersComponent\n    ],\n\n    providers: [\n        CatalogService,\n        HarvesterService\n        // FiltersService,\n        // FilterContainerService\n    ]\n})\nexport class HarvesterModule\n{ }\n","import { Component, OnInit, Input } from '@angular/core';\nimport { of as observableOf, timer, Subscription, PartialObserver } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { MatSnackBar } from '@angular/material';\nimport moment from 'moment';\nimport { NotificationService } from '../../backend/public-api';\nimport { MessageHandler, StatusCode } from '../../core/public-api';\nimport { OAuthStorage } from 'angular-oauth2-oidc';\n\n@Component({\n    selector: 'toco-notification-button',\n    templateUrl: './notification-button.component.html',\n    styleUrls: ['./notification-button.component.scss']\n})\nexport class NotificationButtonComponent implements OnInit {\n\n    @Input() public color: string;\n\n    @Input() public buttonType: string;\n\n    public count: number = 0;\n    public notifications: Array<NotificationInfo>;\n    public moment: any = moment;\n\n    private timerSuscription: Subscription = null;\n    private timerObserver: PartialObserver<number> = {\n        next: (_) => {\n\n            // if (this.oauthStorage.getItem('access_token')){\n                this.service.getNotificationsList(5,0).pipe(\n                    catchError(error => {\n                        const m = new MessageHandler(this._snackBar);\n                        m.showMessage(StatusCode.serverError, error.message);\n                        return observableOf(null);\n                    })\n                )\n                .subscribe(response => {\n                    if (response && response.status === \"success\"){\n                        this.count = response.data.total_not_view;\n                        const arr: NotificationInfo[] = response.data.notifications\n                          .map( n => ({...n, classification: {\n                            label: n.classification,\n                            color: n.classification === 'INFO' ? '#2196F3' : n.classification === 'ALERT' ? '#FF5722' : '#d32f2f'\n                          }}))\n                            .filter(n => !n.viewed);\n                        this.notifications = arr;\n                    }\n                    else if(response){\n                        const m = new MessageHandler(this._snackBar);\n                        m.showMessage(StatusCode.serverError, response.message);\n                    } else {\n                        const m = new MessageHandler(this._snackBar);\n                        m.showMessage(StatusCode.serverError, 'Notificaciones no encontradas');\n                    }\n                });\n            // }\n        },\n\n        error: (err: any) => {\n            console.log('The observable got an error notification: ' + err + '.');\n        },\n\n        complete: () => {\n            console.log('The observable got a complete notification.');\n        }\n    };\n\n    constructor(private service: NotificationService, private _snackBar: MatSnackBar, private oauthStorage: OAuthStorage) { }\n\n    ngOnInit() {\n        // Emits, one every second (90000ms), starting after 0 seconds\n        this.timerSuscription = timer(0, 900000).subscribe(this.timerObserver);\n\n        if (this.color == undefined) this.color = \"primary\";\n\n        if (this.buttonType == undefined) this.buttonType = \"mat-mini-fab\";\n    }\n\n    notificationsCount(){\n      if(this.count == 0)\n        return '';\n      if (this.count > 10)\n            return '+10';\n        return this.count;\n    }\n\n}\n\nclass  UserNotification {\n  id: string;\n  name: string;\n  lastname: string;\n  email: string;\n}\n\nexport class NotificationInfo {\n  classification: { label: string, color: string };\n  receiver_id: UserNotification;\n  viewed: boolean;\n  viewed_date: string;\n  description: string;\n  createdAt: string;\n  emiter: UserNotification;\n  app: string;\n  data: {};\n}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { MatTableDataSource, MatPaginator, MatSnackBar, MatPaginatorIntl } from '@angular/material';\nimport { of } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport moment from 'moment';\nimport { NotificationService } from '../../backend/public-api';\nimport { MessageHandler, StatusCode } from '../../core/public-api';\nimport { NotificationInfo } from '../notification-button/notification-button.component';\n\n\n@Component({\n    selector: 'lib-notification-list',\n    templateUrl: './notification-list.component.html',\n    styleUrls: ['./notification-list.component.scss'],\n    animations: [\n        trigger('detailExpand', [\n            state('collapsed', style({ height: '0px', minHeight: '0' })),\n            state('expanded', style({ height: '*' })),\n            transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')),\n        ]),\n    ]\n})\n\nexport class NotificationListComponent implements OnInit {\n\n    dataSource = new MatTableDataSource<NotificationInfo>();\n    columnsToDisplay = ['action', 'description', 'classification', 'emiter', 'emiterEmail', 'createdAt' ];\n    columnsLabels = ['', 'Descripción', 'Clasificación', 'Emisor', 'Correo del emisor', 'Creada'];\n    expandedElement: Notification;\n    public moment: any = moment;\n\n    pageSizeOptions: number[] = [5, 10, 15, 20];\n\n    @ViewChild(MatPaginator, { static: true }) paginator: MatPaginator;\n\n    constructor(private service: NotificationService, private _snackBar: MatSnackBar) { }\n\n    ngOnInit() {\n        this.paginator.firstPage();\n        this.paginator.pageSize = 5;\n        this.getNotificationsListData();\n    }\n    getNotificationsListData() {\n        this.service.getNotificationsList(this.paginator.pageSize, this.paginator.pageIndex)\n            .pipe(\n                catchError(error => {\n                    const m = new MessageHandler(this._snackBar);\n                    m.showMessage(StatusCode.serverError, error.message);\n                    return of(null);\n                })\n            )\n            .subscribe(response => {\n                if (response) {\n                    this.paginator.length = response.data.total_not_view;\n                    const arr: NotificationInfo[] = response.data.notifications\n                    .map( n => ({...n, classification: {\n                        label: n.classification,\n                        color: n.classification === 'INFO' ? '#2196F3' : n.classification === 'ALERT' ? '#FF5722' : '#d32f2f'\n                      }}));\n                    this.dataSource.data = arr;\n                } else {\n                    this.paginator.length = 0;\n                    this.dataSource.data = null;\n                }\n\n            });\n    }\n    setnotificationViewed(id: number) {\n        console.log(id);\n        if (id) {\n          this.service.setNotificationViewed(id)\n            .pipe(\n              catchError(error => {\n                const m = new MessageHandler(this._snackBar);\n                m.showMessage(StatusCode.serverError, error.message);\n                return of(null);\n              })\n            )\n            .subscribe(response => {\n                if (response.status === 'success') {\n                  this.getNotificationsListData();\n                  const m = new MessageHandler(this._snackBar);\n                  m.showMessage(StatusCode.OK, 'La notificación fue marcada como leída');\n                } else {\n                  const m = new MessageHandler(this._snackBar);\n                  m.showMessage(StatusCode.serverError, response.message);\n                }\n              }\n            );\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\n\nimport { MatButtonModule, MatMenuModule, MatIconModule, MatBadgeModule, MatTableModule, MatPaginatorModule, MatDividerModule, MatTooltipModule } from '@angular/material';\n\nimport { NotificationService } from '../backend/public-api';\n\nimport { NotificationButtonComponent } from './notification-button/notification-button.component';\nimport { NotificationListComponent } from './notification-list/notification-list.component';\n\n@NgModule({\n    declarations: [\n        NotificationButtonComponent,\n        NotificationListComponent\n    ],\n    imports: [\n        CommonModule,\n        RouterModule,\n        MatButtonModule,\n        MatMenuModule,\n        MatIconModule,\n        MatBadgeModule,\n        MatTableModule,\n        MatPaginatorModule,\n        MatDividerModule,\n        MatTooltipModule\n    ],\n    exports: [\n        NotificationButtonComponent,\n        NotificationListComponent\n    ],\n    providers: [\n        NotificationService\n    ]\n})\nexport class NotificationModule { }\n","\nimport { Component, Input } from '@angular/core';\n\n/**\n * Represents a static control that shows an array of texts using chips. \n */\n@Component({\n\tselector: 'static-chips',\n\ttemplateUrl: './chips-static.component.html',\n\tstyleUrls: ['./chips-static.component.scss']\n})\nexport class StaticChipsComponent\n{\n    /**\n     * The control's appearance. \n     * By default, its value is `'outline'`. \n     */\n\t@Input()\n\tpublic appearance: string;\n\n\t/**\n\t * The control's description. \n\t * By default, its value is `undefined` and it is not showed. \n\t */\n\t@Input()\n\tpublic desc: string;\n\n\t/**\n\t * The array of items for displaying. \n\t * By default, its value is `[]`. \n\t */\n\t@Input()\n\tpublic value: string[];\n\n\tpublic constructor()\n\t{\n\t\tthis.appearance = 'outline';\n\t\tthis.desc = undefined;\n\t\tthis.value = [];\n\t}\n}\n","\nimport { Component, Input } from '@angular/core';\n\nimport { Params } from '../../core/public-api';\n\n/* For testing. */\nexport interface PeriodicElement\n{\n\tname: string;\n\tposition: number;\n\tweight: number;\n\tsymbol: string;\n}\n\n/* For testing. */\nconst ELEMENT_DATA: PeriodicElement[] = [\n\t{position: 1, name: 'Hydrogen', weight: 1.0079, symbol: 'H'},\n\t{position: 2, name: 'Helium', weight: 4.0026, symbol: 'He'},\n\t{position: 3, name: 'Lithium', weight: 6.941, symbol: 'Li'},\n\t{position: 4, name: 'Beryllium', weight: 9.0122, symbol: 'Be'},\n\t{position: 5, name: 'Boron', weight: 10.811, symbol: 'B'},\n\t{position: 6, name: 'Carbon', weight: 12.0107, symbol: 'C'},\n\t{position: 7, name: 'Nitrogen', weight: 14.0067, symbol: 'N'},\n\t{position: 8, name: 'Oxygen', weight: 15.9994, symbol: 'O'},\n\t{position: 9, name: 'Fluorine', weight: 18.9984, symbol: 'F'},\n\t{position: 10, name: 'Neon', weight: 20.1797, symbol: 'Ne'},\n];\n\n\n/**\n * Represents a static control that shows an array of objects using a table. \n */\n@Component({\n\tselector: 'static-table',\n\ttemplateUrl: './table-static.component.html',\n\tstyleUrls: ['./table-static.component.scss']\n})\nexport class StaticTableComponent\n{\n    /**\n     * The control's appearance. \n     * By default, its value is `'outline'`. \n     */\n\t@Input()\n\tpublic appearance: string;\n\n\t/**\n\t * The control's description. \n\t * By default, its value is `undefined` and it is not showed. \n\t */\n\t@Input()\n\tpublic desc: string;\n\n\t/**\n\t * The array of data that should be rendered by the table, where each object represents one row. \n     * By default, its value is `[]`. \n\t */\n\t@Input()\n\tpublic value: Params<any>[];\n\n    /**\n     * The array of strings that indicates the object property name of the columns. \n     * By default, its value is `[]`. \n     */\n\t@Input()\n\tpublic columnsObjectProperty: string[];\n\n    /**\n     * The array of strings that indicates the header text of the columns. \n     * By default, its value is `[]`. \n     */\n\t@Input()\n\tpublic columnsHeaderText: string[];\n\n\tpublic constructor()\n\t{\n\t\tthis.appearance = 'outline';\n\t\tthis.desc = undefined;\n\t\tthis.value = [];\n\n\t\tthis.columnsObjectProperty = [];\n\t\tthis.columnsHeaderText = [];\n\t}\n}\n","\nimport { Component, OnInit, Input} from '@angular/core';\nimport { FormControl } from '@angular/forms';\n\n/**\n * Represents a static control that shows a text. \n */\n@Component({\n\tselector: 'static-text',\n\ttemplateUrl: './text-static.component.html',\n\tstyleUrls: ['./text-static.component.scss'],\n    host: {\n        '[style.width]': 'width'\n    }\n})\nexport class StaticTextComponent implements OnInit\n{\n    /**\n     * The control's width. \n     * The width of the content area, padding area or border area (depending on `box-sizing`) of certain boxes. \n     * By default, its value is `'100%'`. \n     */\n\t@Input()\n\tpublic width: string;\n\n    /**\n     * The control's appearance. \n     * By default, its value is `'outline'`. \n     */\n\t@Input()\n\tpublic appearance: string;\n\n\t/**\n\t * The control's description. \n\t * By default, its value is `undefined` and it is not showed. \n\t */\n\t@Input()\n\tpublic desc: string;\n\n\t/**\n\t * The control's value. \n\t * By default, its value is `undefined`. \n\t */\n\t@Input()\n\tpublic value: string;\n\n\t/**\n\t * The control's default value. \n\t * By default, its value is `'There is not any text to show!'`. \n\t */\n\t@Input()\n\tpublic valueByDefault: string;\n\n    /**\n     * Returns the control's text align. \n     * By default, its value is `'left'`. \n     */\n\t@Input()\n    public textAlign: string;\n\n\t/**\n\t * Returns a reference to the `FormControl` that tracks the value and validity state \n\t * of the internal control that contains the text input. \n\t * For internal use only. \n\t */\n\tpublic input_static: FormControl;\n\n\tpublic constructor()\n\t{\n\t\tthis.width = '100%';\n\t\tthis.appearance = 'outline';\n\t\tthis.desc = undefined;\n\t\tthis.value = undefined;\n\t\tthis.valueByDefault = 'There is not any text to show!';\n\t\tthis.textAlign = 'left';\n\n\t\tthis.input_static = undefined;\n\t}\n\n    public ngOnInit(): void\n\t{\n\t\tif(this.value === undefined) this.value = this.valueByDefault;\n\n\t\tthis.input_static = new FormControl(this.value);\n\t}\n\n\t/**\n\t * Handler method that is called when the control's value changes in the UI. \n\t * It is always used to set the `value` input field as the component value. \n\t * For internal use only. \n\t */\n\tpublic handleInput(): void\n\t{\n\t\t/* It always sets the `value` input field as the component value. */\n\t\tthis.input_static.setValue(this.value);\n\t}\n}\n","\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { SharedModule } from '../shared/public-api';\n\nimport { StaticChipsComponent } from './chips/chips-static.component';\nimport { StaticTableComponent } from './table/table-static.component';\nimport { StaticTextComponent } from './text/text-static.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tStaticChipsComponent,\n\t\tStaticTableComponent,\n\t\tStaticTextComponent\n\t],\n\n\timports: [\n\t\tSharedModule,\n\t\tReactiveFormsModule\n\t],\n\n\texports: [\n\t\tStaticChipsComponent,\n\t\tStaticTableComponent,\n\t\tStaticTextComponent\n\t]\n})\nexport class StaticsModule\n{ }\n","\nimport { Component, Input, ViewChild, OnInit } from '@angular/core';\nimport { MatAccordion } from '@angular/material';\n\n/**\n * The `OrgViewAccordionComponent` type. \n */\nexport enum OrgViewAccordionType\n{\n\t/**\n\t * The `OrgViewAccordionComponent` is used to show relationships. \n\t */\n\tRelationships = 'Relación'/*'Relationship'*/,\n\n\t/**\n\t * The `OrgViewAccordionComponent` is used to show addresses. \n\t */\n\tAddresses = 'Dirección'/*'Address'*/\n};\n\n@Component({\n\tselector: 'toco-org-view-accordion',\n\ttemplateUrl: './org-view-accordion.component.html',\n\tstyleUrls: ['./org-view-accordion.component.scss']\n})\nexport class OrgViewAccordionComponent implements OnInit\n{\n    /**\n     * Represents the `OrgViewAccordionType` enum for internal use. \n     */\n\tpublic readonly orgViewAccordion_Type: typeof OrgViewAccordionType;\n\n    /**\n     * The control's appearance. \n     * By default, its value is `'outline'`. \n     */\n\t@Input()\n\tpublic appearance: string;\n\n\t/**\n\t * The control's description. \n\t * By default, its value is `undefined` and it is not showed. \n\t */\n\t@Input()\n\tpublic desc: string;\n\n\t/**\n\t * The array of data that should be rendered by the accordion, where each object represents one row. \n\t * This array has the same length than the `panelsTitle` field. \n     * By default, its value is `[]`. \n\t */\n\t@Input()\n\tpublic value: any[];\n\n\t/**\n\t * The `OrgViewAccordionComponent` type. \n     * By default, its value is `OrgViewAccordionType.Relationships`. \n\t */\n\t@Input()\n\tpublic orgViewAccordionType: OrgViewAccordionType;\n\n\t/**\n\t * The panels title. \n\t * This array has the same length than the `value` field. \n     * By default, its value is `[]`. \n\t */\n\t@Input()\n\tpublic panelsTitle: string[];\n\n\t@ViewChild(MatAccordion, { static: true })\n\tprivate _accordion: MatAccordion;\n\n\tpublic constructor()\n\t{\n\t\tthis.orgViewAccordion_Type = OrgViewAccordionType;\n\n\t\tthis.appearance = 'outline';\n\t\tthis.desc = undefined;\n\t\tthis.value = [];\n\t\tthis.orgViewAccordionType = OrgViewAccordionType.Relationships;\n\t\tthis.panelsTitle = [];  /* This array has the same length than the `value` field. */\n\t}\n\n\tpublic ngOnInit(): void\n\t{\n\t}\n\n\t/**\n\t * Returns the `MatAccordion` control. \n\t */\n\tpublic get getAccordion(): MatAccordion\n\t{\n\t\treturn this._accordion;\n\t}\n\n\t/**\n\t * Returns true if the panel has element; otherwise, false. \n\t * The panel always has element by default. \n\t * @param pos The panel position. \n\t */\n\tpublic panelHasElement(pos: number): boolean\n\t{\n\t\tswitch(this.orgViewAccordionType)\n\t\t{\n\t\t\tcase this.orgViewAccordion_Type.Relationships:\n\t\t\t{\n\t\t\t\treturn this.value[pos].links.length;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t{\n\t\t\t\t/* The panel always has element by default. */\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n}\n","\nimport { Component, Input, OnChanges, OnInit } from '@angular/core';\nimport { Address, Organization } from '../../entities/public-api';\nimport { OrgViewAccordionType } from './org-view-accordion/org-view-accordion.component';\n\n\n\nexport interface RelationshipLink\n{\n  url: string;\n  name: string;\n}\n\nexport interface RelationshipsValue\n{\n  links: RelationshipLink[];\n}\n\n@Component({\n  selector: 'toco-org-view',\n  templateUrl: './org-view.component.html',\n  styleUrls: ['./org-view.component.scss']\n})\nexport class OrgViewComponent implements OnInit, OnChanges\n{\n    /**\n     * Represents the `OrgViewAccordionType` enum for internal use.\n     */\n  public readonly orgViewAccordionType: typeof OrgViewAccordionType;\n\n  /**\n   * Represents the current organization.\n   */\n  @Input()\n  public org: Organization;\n\n  @Input()\n  public showContent: boolean = true;\n\n  private _panelsTitle_Relationships: string[];\n  private _relationshipsValue: RelationshipsValue[];\n\n  private _panelsTitle_Addresses: string[];\n  private _addressesValue: Address[];\n\n  public constructor()\n  {\n    this.orgViewAccordionType = OrgViewAccordionType;\n\n    this.org = undefined;\n  }\n\n  public ngOnInit(): void\n  {\n    // si se recibe un objeto que no tiene todos los campos.\n    let org_full = new Organization();\n    org_full.deepcopy(this.org);\n    this.org = org_full;\n\n    this._panelsTitle_Relationships = ['Organizaciones Padres', 'Organizaciones Hijas', 'Organizaciones Relacionadas'];\n    this._relationshipsValue = this._createRelationshipsValue();\n\n    this._addressesValue = this._createAddressesValue();  /* This initialization is first than the `_panelsTitle_Addresses` initialization. */\n    // this._panelsTitle_Addresses = (this.org.addresses) ? this._createPanelsTitle_Generic(this.orgViewAccordionType.Addresses, this.org.addresses.length) : [ ];\n    this._panelsTitle_Addresses = this._createPanelsTitle_Addresses();\n  }\n  public ngOnChanges(): void\n  {\n    this.ngOnInit();\n  }\n  /**\n   * Creates a generic array of panels title.\n   * Usage example:\n   * this._panelsTitle_Addresses = (this.org.addresses) ? this._createPanelsTitle_Generic(this.orgViewAccordionType.Addresses, this.org.addresses.length) : [ ];\n   * @param orgViewAccordionType The `OrgViewAccordionComponent` type.\n   * @param panelsTitleCount Amount of panels title.\n   */\n  private _createPanelsTitle_Generic(orgViewAccordionType: OrgViewAccordionType, panelsTitleCount: number): string[]\n  {\n    let panelsTitle: string[] = [ ];\n\n    /* Initializae the `panelsTitle` array. */\n    for (let i: number = 0; i < panelsTitleCount; )\n    {\n      panelsTitle.push(`${ orgViewAccordionType } (${ ++i }) of (${ panelsTitleCount })`);\n    }\n\n    return panelsTitle;\n  }\n\n  private _createPanelsTitle_Addresses(): string[]\n  {\n    let panelsTitle: string[] = [ ];\n    let panelsTitleCount = this._addressesValue.length;\n\n    /* Initializae the `panelsTitle` array. */\n    for (let i: number = 0; i < panelsTitleCount; i++)\n    {\n      panelsTitle.push(`${ this._addressesValue[i].city } | ${ this._addressesValue[i].country } ${ (this._addressesValue[i].primary) ? '(Principal)' : '' }`);\n    }\n\n    return panelsTitle;\n  }\n\n  private _createRelationshipsValue(): RelationshipsValue[]\n  {\n    /* The positions represent:\n     * pos = 0 --> Organizaciones Padres\n     * pos = 1 --> Organizaciones Hijas\n     * pos = 2 --> Organizaciones Relacionadas */\n    let result: RelationshipsValue[] = [ ];\n    let pos: number = -1;\n    let item: any;\n\n    for(item of this._panelsTitle_Relationships)\n    {\n      result.push({\n        'links': [ ]\n      });\n    }\n\n    if (this.org.relationships)\n    {\n      for(item of this.org.relationships)\n      {\n        switch(item.type)\n        {\n          case 'parent':\n          {\n            pos = 0;\n            break;\n          }\n\n          case 'child':\n          {\n            pos = 1;\n            break;\n          }\n\n          default:  /* 'related' */\n          {\n            pos = 2;\n            break;\n          }\n        }\n\n        result[pos].links.push({\n          // 'url': `${ item.id }/view`,\n          'url': '/' + item.id  + '/view',\n          'name': item.label\n        });\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns an array of addresses ordered by the `primary` field of its addresses,\n   * the true values are first than the false values.\n   */\n  private _createAddressesValue(): Address[]\n  {\n    let result: Address[] = [ ];\n    let noPrimary: Address[] = [ ];\n\n    for(let item of this.org.addresses)\n    {\n      if (item.primary)\n      {\n        result.push(item);\n      }\n      else\n      {\n        noPrimary.push(item);\n      }\n    }\n\n    return result.concat(noPrimary);\n  }\n\n  public get getPanelsTitle_Relationships(): string[]\n  {\n    return this._panelsTitle_Relationships;\n  }\n\n  public get getValue_Relationships(): RelationshipsValue[]\n  {\n    return this._relationshipsValue;\n  }\n\n  public get getPanelsTitle_Addresses(): string[]\n  {\n    return this._panelsTitle_Addresses;\n  }\n\n  public get getValue_Addresses(): Address[]\n  {\n    return this._addressesValue;\n  }\n}\n","\nimport { Component, Input } from '@angular/core';\n\nimport { Address } from '../../../entities/public-api';\n\n@Component({\n\tselector: 'toco-org-view-address',\n\ttemplateUrl: './org-view-address.component.html',\n\tstyleUrls: ['./org-view-address.component.scss']\n})\nexport class OrgViewAddressComponent\n{\n\t/**\n\t * An address associated with the organization. \n     * By default, its value is `undefined`. \n\t */\n\t@Input()\n\tpublic value: Address;\n\n\tpublic constructor()\n\t{\n\t\tthis.value = undefined;\n\t}\n}\n","\nimport { Component, Input } from '@angular/core';\n\nimport { Params } from '../../../core/public-api';\nimport { GeoNamesCity } from '../../../entities/public-api';\n\n@Component({\n\tselector: 'toco-org-view-geo-names-city',\n\ttemplateUrl: './org-view-geo-names-city.component.html',\n\tstyleUrls: ['./org-view-geo-names-city.component.scss']\n})\nexport class OrgViewGeoNamesCityComponent\n{\n    /**\n     * The control's appearance. \n     * By default, its value is `'outline'`. \n     */\n\t@Input()\n\tpublic appearance: string;\n\n\t/**\n\t * The control's description. \n\t * By default, its value is `undefined` and it is not showed. \n\t */\n\t@Input()\n\tpublic desc: string;\n\n\t/**\n\t * A linked GeoNames data associated with the organization. \n     * By default, its value is `undefined`. \n\t */\n\t@Input()\n\tpublic value: GeoNamesCity;\n\n\tprivate _geonames_admin1: Params<any>[];\n\tprivate _geonames_admin2: Params<any>[];\n\tprivate _nuts_level1: Params<any>[];\n\tprivate _nuts_level2: Params<any>[];\n\tprivate _nuts_level3: Params<any>[];\n\n\tpublic constructor()\n\t{\n\t\tthis.appearance = 'outline';\n\t\tthis.desc = undefined;\n\t\tthis.value = undefined;\n\n\t\tthis._geonames_admin1 = [];\n\t\tthis._geonames_admin2 = [];\n\t\tthis._nuts_level1 = [];\n\t\tthis._nuts_level2 = [];\n\t\tthis._nuts_level3 = [];\n\t}\n\n\tpublic ngOnInit(): void\n\t{\n\t\tif (this.value)\n\t\t{\n\t\t\tif (this.value.geonames_admin1) this._createValueAsArray(this.value.geonames_admin1, this._geonames_admin1);\n\t\t\tif (this.value.geonames_admin2) this._createValueAsArray(this.value.geonames_admin2, this._geonames_admin2);\n\t\t\tif (this.value.nuts_level1) this._createValueAsArray(this.value.nuts_level1, this._nuts_level1);\n\t\t\tif (this.value.nuts_level2) this._createValueAsArray(this.value.nuts_level2, this._nuts_level2);\n\t\t\tif (this.value.nuts_level3) this._createValueAsArray(this.value.nuts_level3, this._nuts_level3);\n\t\t}\n\t}\n\n\tprivate _createValueAsArray(objFromCopy: Params<any>, arrayToFill: Params<any>[]): void\n\t{\n\t\tObject.keys(objFromCopy).forEach((key: string): void => {\n\t\t\tarrayToFill.push({\n\t\t\t\t'property': key,\n\t\t\t\t'value': objFromCopy[key]\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Returns the `geonames_admin1` value as an array for using by `StaticTableComponent`. \n\t */\n\tpublic get getGeoNamesAdmin1(): Params<any>[]\n\t{\n\t\treturn this._geonames_admin1;\n\t}\n\n\t/**\n\t * Returns the `geonames_admin2` value as an array for using by `StaticTableComponent`. \n\t */\n\tpublic get getGeoNamesAdmin2(): Params<any>[]\n\t{\n\t\treturn this._geonames_admin2;\n\t}\n\n\t/**\n\t * Returns the `nuts_level1` value as an array for using by `StaticTableComponent`. \n\t */\n\tpublic get getNutsLevel1(): Params<any>[]\n\t{\n\t\treturn this._nuts_level1;\n\t}\n\n\t/**\n\t * Returns the `nuts_level2` value as an array for using by `StaticTableComponent`. \n\t */\n\tpublic get getNutsLevel2(): Params<any>[]\n\t{\n\t\treturn this._nuts_level2;\n\t}\n\n\t/**\n\t * Returns the `nuts_level3` value as an array for using by `StaticTableComponent`. \n\t */\n\tpublic get getNutsLevel3(): Params<any>[]\n\t{\n\t\treturn this._nuts_level3;\n\t}\n}\n","\nimport { Component, Input } from '@angular/core';\nimport { RelationshipsValue } from '../org-view.component';\n\n\n\n@Component({\n\tselector: 'toco-org-view-relationship',\n\ttemplateUrl: './org-view-relationship.component.html',\n\tstyleUrls: ['./org-view-relationship.component.scss']\n})\nexport class OrgViewRelationshipComponent\n{\n\t/**\n\t * A relationship the organization has to other. \n     * By default, its value is `undefined`. \n\t */\n\t@Input()\n\tpublic value: RelationshipsValue;\n\n\tpublic constructor()\n\t{\n\t\tthis.value = undefined;\n\t}\n}\n","\nimport { Component, OnInit, Input } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormGroup } from '@angular/forms';\n\nimport { Organization, Identifier } from '../../entities/public-api';\nimport { TextInputAppearance, OperationAction, FormSection, PanelContent, \n\tContainerContent, HintValue, HintPosition, IconValue, IconSource, ContentPosition, \n\tActionControl, ActionContent, ContainerPanelComponent, \n\tInputTextComponent, InputSelectComponent, ContainerSimpleComponent, \n\tInputUrlComponent, InputEmailComponent, ActionButtonComponent } from '../../forms/public-api';\n\n@Component({\n\tselector: 'toco-org-edit',\n\ttemplateUrl: './org-edit.component.html',\n\tstyleUrls: ['./org-edit.component.scss']\n})\nexport class OrgEditComponent implements OnInit\n{\n    /**\n     * Represents the `OperationAction` enum for internal use.\n     */\n\tpublic readonly operationAction: typeof OperationAction;\n\n\t/**\n\t * Represents the current organization.\n\t */\n\t@Input()\n\tpublic org: Organization;\n\n\t/**\n\t * Tracks the value and validity state of the internal child controls that contains this component.\n\t */\n    private panelFormSection: FormSection;\n\n    /**\n     * Contains the panel's content.\n     */\n\tpublic panelContent: PanelContent;\n\n\tpublic constructor(private _router: Router, private _activatedRoute: ActivatedRoute)\n\t{\n\t\tthis.operationAction = OperationAction;\n\t\tthis.panelFormSection = new FormGroup({ }, [ ]);\n\t}\n\n\tpublic ngOnInit(): void\n\t{\n\t\t// /* Gets the `Organization` data. */\n\t\t// this._activatedRoute.data.subscribe(\n\t\t// \t(data: { 'org': Organization }) => {\n\t\t// \t\tthis.org = data.org;\n\n\t\t// \t\tconsole.log('Data got for editing: ', this.org);\n\t\t// \t}\n\t\t// )\n\n\t\t/* Creates the panel's content. */\n\t\tthis.panelContent = this._initPanelContent();\n\t}\n\n    /**\n     * Returns the panel's content.\n     */\n    private _initPanelContent(): PanelContent\n    {\n\t\treturn {\n\t\t\t'formSection': this.panelFormSection,\n\t\t\t'name': 'panel',\n\t\t\t'label': 'Edita la organización seleccionada',\n\t\t\t'controlType': ContainerPanelComponent,\n\t\t\t'description': '',\n\t\t\t'iconName': undefined /*''*/,\n\t\t\t'formSectionContent': [\n\t\t\t\t{\n\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t'name': 'name',\n\t\t\t\t\t'label': 'Name typically used to refer to the institute',\n\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t'required': true,\n\t\t\t\t\t'value': this.org.name,\n\t\t\t\t\t'width': '100%',\n\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'Name typically used to refer to the institute'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'formControl': InputSelectComponent.getFormControlByDefault(),\n\t\t\t\t\t'name': 'status',\n\t\t\t\t\t'label': 'Institute status',\n\t\t\t\t\t'controlType': InputSelectComponent,\n\t\t\t\t\t'required': true,\n\t\t\t\t\t'value': this.org.status,\n\t\t\t\t\t'width': '45%',\n\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'Institute status',\n\t\t\t\t\t'selectOptions': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'label': 'Active',\n\t\t\t\t\t\t\t'value': 'active'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'label': 'Closed',\n\t\t\t\t\t\t\t'value': 'closed'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'label': 'Unknown',\n\t\t\t\t\t\t\t'value': 'unknown'\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t'multiple': false\n\t\t\t\t},\n\n\n\t\t\t\tthis._initIdentifiersContent('Organization Identifiers, different from GRID mapping', this.org.identifiers, false),\n\n\t\t\t\t{\n\t\t\t\t\t'formControl': InputSelectComponent.getFormControlByDefault(),\n\t\t\t\t\t'name': 'aliases',\n\t\t\t\t\t'label': 'The list of other names the institute is known as',\n\t\t\t\t\t'controlType': InputSelectComponent,\n\t\t\t\t\t'required': false,\n\t\t\t\t\t'value': this.org.aliases,\n\t\t\t\t\t'width': '100%',\n\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'The list of other names the institute is known as',\n\t\t\t\t\t/* The 'selectOptions' field is gotten from the 'value' field. */\n\t\t\t\t\t'multiple': true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'formControl': InputSelectComponent.getFormControlByDefault(),\n\t\t\t\t\t'name': 'acronyms',\n\t\t\t\t\t'label': 'The of short acronyms the institute is known as (e.g. MRC for the Medical Research Council)',\n\t\t\t\t\t'controlType': InputSelectComponent,\n\t\t\t\t\t'required': false,\n\t\t\t\t\t'value': this.org.acronyms,\n\t\t\t\t\t'width': '100%',\n\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'The list of short acronyms the institute is known as (e.g. MRC for the Medical Research Council)',\n\t\t\t\t\t/* The 'selectOptions' field is gotten from the 'value' field. */\n\t\t\t\t\t'multiple': true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'formControl': InputSelectComponent.getFormControlByDefault(),\n\t\t\t\t\t'name': 'types',\n\t\t\t\t\t'label': 'The list of types describing the institute',\n\t\t\t\t\t'controlType': InputSelectComponent,\n\t\t\t\t\t'required': true,\n\t\t\t\t\t'value': this.org.types,\n\t\t\t\t\t'width': '100%',\n\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'The list of types describing the institute',\n\t\t\t\t\t'selectOptions': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'label': 'Education',\n\t\t\t\t\t\t\t'value': 'Education'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'label': 'Healthcare',\n\t\t\t\t\t\t\t'value': 'Healthcare'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'label': 'Company',\n\t\t\t\t\t\t\t'value': 'Company'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'label': 'Archive',\n\t\t\t\t\t\t\t'value': 'Archive'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'label': 'Nonprofit',\n\t\t\t\t\t\t\t'value': 'Nonprofit'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'label': 'Government',\n\t\t\t\t\t\t\t'value': 'Government'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'label': 'Facility',\n\t\t\t\t\t\t\t'value': 'Facility'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'label': 'Other',\n\t\t\t\t\t\t\t'value': 'Other'\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t'multiple': true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'formControl': InputUrlComponent.getFormControlByDefault(),\n\t\t\t\t\t'name': 'wikipedia_url',\n\t\t\t\t\t'label': 'URL of the wikipedia page for the institute',\n\t\t\t\t\t'controlType': InputUrlComponent,\n\t\t\t\t\t'required': false,\n\t\t\t\t\t'value': this.org.wikipedia_url,\n\t\t\t\t\t'width': '45%',\n\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'URL of the wikipedia page for the institute'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'formControl': InputEmailComponent.getFormControlByDefault(),\n\t\t\t\t\t'name': 'email_address',\n\t\t\t\t\t'label': 'Contact email address for the institute',\n\t\t\t\t\t'controlType': InputEmailComponent,\n\t\t\t\t\t'required': true,\n\t\t\t\t\t'value': this.org.email_address,\n\t\t\t\t\t'width': '45%',\n\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'Contact email address for the institute'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'formControl': InputSelectComponent.getFormControlByDefault(),\n\t\t\t\t\t'name': 'ip_addresses',\n\t\t\t\t\t'label': 'The list of IP addresses known to belong to the institute',\n\t\t\t\t\t'controlType': InputSelectComponent,\n\t\t\t\t\t'required': false,\n\t\t\t\t\t'value': this.org.ip_addresses,\n\t\t\t\t\t'width': '100%',\n\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'The list of IP addresses known to belong to the institute',\n\t\t\t\t\t/* The 'selectOptions' field is gotten from the 'value' field. */\n\t\t\t\t\t'multiple': true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t'name': 'established',\n\t\t\t\t\t'label': 'Year the institute opened, CE',\n\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t'required': true,\n\t\t\t\t\t'value': this.org.established,\n\t\t\t\t\t'width': '45%',\n\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'Year the institute opened, CE'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t'formControl': InputSelectComponent.getFormControlByDefault(),\n\t\t\t\t\t'name': 'links',\n\t\t\t\t\t'label': 'The list of URLs linking to things like the homepage for the institute',\n\t\t\t\t\t'controlType': InputSelectComponent,\n\t\t\t\t\t'required': false,\n\t\t\t\t\t'value': this.org.links,\n\t\t\t\t\t'width': '100%',\n\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'The list of URLs linking to things like the homepage for the institute',\n\t\t\t\t\t/* The 'selectOptions' field is gotten from the 'value' field. */\n\t\t\t\t\t'multiple': true\n\t\t\t\t},\n\n\t\t\t\tthis._initLabelsSimpleContent(),\n\n\t\t\t\tthis._initRelationshipsSimpleContent(),\n\n\t\t\t\tthis._initAddressesSimpleContent()\n\t\t\t]\n\t\t};\n\t}\n\n    /**\n     * Returns the identifiers' content. \n     */\n    private _initIdentifiersContent(description: string, value: Identifier[], isDynamic: boolean): ContainerContent\n    {\n        let result: ContainerContent = {\n\t\t\t'formSection': ContainerSimpleComponent.getFormArrayByDefault(),\n\t\t\t'name': 'identifiers',\n\t\t\t'label': description,\n\t\t\t'controlType': ContainerSimpleComponent,\n\t\t\t'value': value,\n\t\t\t'width': '100%',\n//            'appearance': TextInputAppearance.outline,\n\t\t\t'required': true,\n\t\t\t'ariaLabel': description,\n\t\t\t'isDynamic': isDynamic,\n            'formSectionContent': [\n\t\t\t\t{\n\t\t\t\t\t'formSection': ContainerSimpleComponent.getFormGroupByDefault(),\n\t\t\t\t\t'name': '0',\n\t\t\t\t\t'label': 'Organization Identifier',\n\t\t\t\t\t'controlType': ContainerSimpleComponent,\n\t\t\t\t\t'width': '100%',\n\t\t//            'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'Organization Identifier',\n\t\t\t\t\t'formSectionContent': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'idtype',\n\t\t\t\t\t\t\t'label': 'Identifier type',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t'width': '50%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'Identifier type',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'value',\n\t\t\t\t\t\t\t'label': 'Identifier value',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t'width': '50%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'Identifier value',\n\t\t\t\t\t\t\t'startHint': new HintValue(HintPosition.start, 'Un identificador es una secuencia de letras')\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tif (isDynamic)\n\t\t{\n\t\t\tresult.formSectionContent[0].formSectionContent.push(this._initRemoveButtonContent('Remove identifier'));\n\t\t}\n\n\t\treturn result;\n\t}\n\n    /**\n     * Returns the labels' content. \n     */\n    private _initLabelsSimpleContent(): ContainerContent\n    {\n\t\treturn {\n\t\t\t'formSection': ContainerSimpleComponent.getFormArrayByDefault(),\n\t\t\t'name': 'labels',\n\t\t\t'label': 'Name of the institute in different languages',\n\t\t\t'controlType': ContainerSimpleComponent,\n\t\t\t'value': this.org.labels,\n\t\t\t'width': '100%',\n//            'appearance': TextInputAppearance.outline,\n\t\t\t'ariaLabel': 'Name of the institute in different languages',\n\t\t\t'formSectionContent': [\n\t\t\t\t{\n\t\t\t\t\t'formSection': ContainerSimpleComponent.getFormGroupByDefault(),\n\t\t\t\t\t'name': '0',\n\t\t\t\t\t'label': 'Label diff lang',\n\t\t\t\t\t'controlType': ContainerSimpleComponent,\n\t\t\t\t\t'width': '100%',\n\t\t//            'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'Label diff lang',\n\t\t\t\t\t'formSectionContent': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'label',\n\t\t\t\t\t\t\t'label': 'Institute name in a language variant',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t/* 'value': undefined, this is the default behavior. */\n\t\t\t\t\t\t\t'width': '70%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'Institute name in a language variant'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'iso639',\n\t\t\t\t\t\t\t'label': 'ISO-639-1 language code',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t/* 'value': undefined, this is the default behavior. */\n\t\t\t\t\t\t\t'width': '30%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'ISO-639-1 language code',\n\t\t\t\t\t\t\t//'startHint': new HintValue(HintPosition.start, 'ISO-639-1 language code')\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tthis._initRemoveButtonContent('Remove label')\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t}\n\n    /**\n     * Returns the relationships' content.\n     */\n    private _initRelationshipsSimpleContent(): ContainerContent\n    {\n\t\treturn {\n\t\t\t'formSection': ContainerSimpleComponent.getFormArrayByDefault(),\n\t\t\t'name': 'relationships',\n\t\t\t'label': 'Any relationships the institute has to others',\n\t\t\t'controlType': ContainerSimpleComponent,\n\t\t\t'value': this.org.relationships,\n\t\t\t'required': false,  /* The `relationships` can be empty by definition. */\n\t\t\t'width': '100%',\n//            'appearance': TextInputAppearance.outline,\n\t\t\t'ariaLabel': 'Any relationships the institute has to others',\n\t\t\t'formSectionContent': [\n\t\t\t\t{\n\t\t\t\t\t'formSection': ContainerSimpleComponent.getFormGroupByDefault(),\n\t\t\t\t\t'name': '0',\n\t\t\t\t\t'label': 'Relationship',\n\t\t\t\t\t'controlType': ContainerSimpleComponent,\n\t\t\t\t\t'width': '100%',\n\t\t//            'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'Relationship',\n\t\t\t\t\t'formSectionContent': [\n\n\t\t\t\t\t\t/* This `identifiers` value is `undefined` because it is inside a `FormArray`. */\n\t\t\t\t\t\tthis._initIdentifiersContent('Related Organization Identifiers', undefined, true),\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputSelectComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'type',\n\t\t\t\t\t\t\t'label': 'Relationship type',\n\t\t\t\t\t\t\t'controlType': InputSelectComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t'width': '45%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'Relationship type',\n\t\t\t\t\t\t\t'selectOptions': [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'label': 'Parent',\n\t\t\t\t\t\t\t\t\t'value': 'parent'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'label': 'Related',\n\t\t\t\t\t\t\t\t\t'value': 'related'\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'label': 'Child',\n\t\t\t\t\t\t\t\t\t'value': 'child'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t'multiple': false\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'label',\n\t\t\t\t\t\t\t'label': 'Name of the related institute',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t'width': '45%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'Name of the related institute'\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tthis._initRemoveButtonContent('Remove relationship')\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t}\n\n    /**\n     * Returns the addresses' content.\n     */\n    private _initAddressesSimpleContent(): ContainerContent\n    {\n\t\treturn {\n\t\t\t'formSection': ContainerSimpleComponent.getFormArrayByDefault(),\n\t\t\t'name': 'addresses',\n\t\t\t'label': 'An array of addresses associated with the institute',\n\t\t\t'controlType': ContainerSimpleComponent,\n\t\t\t'value': this.org.addresses,\n\t\t\t'required': true,  /* The `addresses` can not be empty by definition. */\n\t\t\t'width': '100%',\n//            'appearance': TextInputAppearance.outline,\n\t\t\t'ariaLabel': 'An array of addresses associated with the institute',\n\t\t\t'formSectionContent': [\n\t\t\t\t{\n\t\t\t\t\t'formSection': ContainerSimpleComponent.getFormGroupByDefault(),\n\t\t\t\t\t'name': '0',\n\t\t\t\t\t'label': 'Address',\n\t\t\t\t\t'controlType': ContainerSimpleComponent,\n\t\t\t\t\t'width': '100%',\n\t\t//            'appearance': TextInputAppearance.outline,\n\t\t\t\t\t'ariaLabel': 'Address',\n\t\t\t\t\t'formSectionContent': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'city',\n\t\t\t\t\t\t\t'label': 'Name of the city',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t'width': '45%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'Name of the city'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'country',\n\t\t\t\t\t\t\t'label': 'Name of the country',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t'width': '45%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'Name of the country'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'country_code',\n\t\t\t\t\t\t\t'label': 'ISO 3166-1 alpha-2 code of the country',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t'width': '45%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'ISO 3166-1 alpha-2 code of the country'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'lat',\n\t\t\t\t\t\t\t'label': 'Latitute of the institute',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t'width': '45%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'Latitute of the institute'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'lng',\n\t\t\t\t\t\t\t'label': 'Longitude of the institute',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t'width': '45%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'Longitude of the institute'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'line_1',\n\t\t\t\t\t\t\t'label': 'First line of the address',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t'width': '45%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'First line of the address'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'line_2',\n\t\t\t\t\t\t\t'label': 'Second line of the address',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': false,\n\t\t\t\t\t\t\t'width': '45%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'Second line of the address'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'line_3',\n\t\t\t\t\t\t\t'label': 'Third line of the address',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': false,\n\t\t\t\t\t\t\t'width': '45%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'Third line of the address'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'postcode',\n\t\t\t\t\t\t\t'label': 'Postcode/zipcode',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t'width': '45%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'Postcode/zipcode'\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t//TODO: Poner aquí el campo 'primary' de tipo 'boolean' (checkbox).\n\t\t\t\t\t\t//This address identifies the main location\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'state',\n\t\t\t\t\t\t\t'label': 'Name of the state/region',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t'width': '45%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'Name of the state/region'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'formControl': InputTextComponent.getFormControlByDefault(),\n\t\t\t\t\t\t\t'name': 'state_code',\n\t\t\t\t\t\t\t'label': 'ISO 3166-2 region code',\n\t\t\t\t\t\t\t'controlType': InputTextComponent,\n\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t'width': '45%',\n\t\t\t\t\t\t\t'appearance': TextInputAppearance.outline,\n\t\t\t\t\t\t\t'ariaLabel': 'ISO 3166-2 region code'\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t//TODO: Poner el resto de los campos.\n\n\t\t\t\t\t\tthis._initRemoveButtonContent('Remove address')\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t}\n\n\t/**\n\t * Returns the remove button's content.\n\t * @param tooltip The tooltip to show.\n\t */\n\tprivate _initRemoveButtonContent(tooltip: string): ActionContent\n\t{\n\t\treturn {\n\t\t\t'name': 'remove',\n\t\t\t'label': 'Remove',\n\t\t\t'controlType': ActionButtonComponent,\n\t\t\t'width': '30%',\n\t\t\t// 'appearance': TextInputAppearance.outline,\n\t\t\t'ariaLabel': 'Remove',\n\t\t\t'icon': new IconValue(IconSource.external, ContentPosition.prefix, 'remove_circle'),\n\t\t\t'tooltip': new HintValue(HintPosition.start, tooltip),\n\t\t\t'click': (sender: ActionControl): void => {\n\t\t\t\tsender.parentContainerControl.parentContainerControl.removeFromFormArray(+(sender.parentContainerControl.content.name));\n\t\t\t},\n\t\t\t'isDisabled': (sender: ActionControl): boolean => {\n\t\t\t\treturn !(sender.parentContainerControl.parentContainerControl.canRemoveFromFormArray);\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Does the tasks for the operation action.\n\t * @param op The operation action.\n\t */\n\tpublic doOperationAction(op: OperationAction): void\n\t{\n\t\tconsole.log('panelContent: ', this.panelContent);\n\t\tconsole.log('panelContent.parentFormSection: ', this.panelContent.parentFormSection);\n\t\tconsole.log('panelContent.formSection', this.panelContent.formSection);\n\t\t// console.log('addressesPanelFormSection', this.addressesPanelFormSection);\n\t\t// console.log('labelsSimpleFormSection', this.labelsSimpleFormSection);\n\t\treturn;\n\n\t\tif(op == OperationAction.submit)\n\t\t{\n\t\t\t//TODO: Do the tasks for the submit action.\n\t\t}\n\n\t\t/* Currently, it does not do any task for the cancel action. */\n\n\t\tif(op != OperationAction.reset)\n\t\t{\n\t\t\tthis._router.navigate(['../', { 'operation': op }]);\n\t\t}\n\t}\n\n\t/**\n\t * Returns true if the reset action is disabled; otherwise, false.\n\t */\n\tpublic get isResetActionDisabled(): boolean\n\t{\n\t\t//TODO: Implement this.\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns true if the submit action is disabled; otherwise, false.\n\t */\n\tpublic get isSubmitActionDisabled(): boolean\n\t{\n\t\treturn this.panelFormSection.invalid;\n\t}\n}\n","\nimport { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormGroup } from '@angular/forms';\n\nimport { Organization } from '../../entities/public-api';\nimport { OperationAction, FormSection, PanelContent, ContainerPanelComponent } from '../../forms/public-api';\n\n@Component({\n\tselector: 'toco-org-add',\n\ttemplateUrl: './org-add.component.html',\n\tstyleUrls: ['./org-add.component.scss']\n})\nexport class OrgAddComponent implements OnInit\n{\n    /**\n     * Represents the `OperationAction` enum for internal use. \n     */\n\tpublic readonly operationAction: typeof OperationAction;\n\n\t/**\n\t * Represents the organization for adding. \n\t */\n\tpublic org: Organization;\n\n\t/**\n\t * Tracks the value and validity state of the internal child controls that contains this component. \n\t */\n\tprivate panelFormSection: FormSection;\n\t\n    /**\n     * Contains the panel's content. \n     */\n\tpublic panelContent: PanelContent;\n\n\tpublic constructor(private _router: Router, private _activatedRoute: ActivatedRoute)\n\t{\n\t\tthis.operationAction = OperationAction;\n\t\tthis.panelFormSection = new FormGroup({ }, [ ]);\n\t}\n\n\tpublic ngOnInit()\n\t{\n\t\t/* Creates the panel's content. */\n\t\tthis.panelContent = this._initPanelContent();\n\t}\n\n    /**\n     * Returns the panel's content. \n     */\n    private _initPanelContent(): any//PanelContent\n    {\n\t\treturn {\n\t\t\t/* The 'label' and 'title' fields have the same values, but they are different fields with different functionalities. */\n\t\t\t'formSection': this.panelFormSection,\n\t\t\t'name': 'panel',\n\t\t\t'label': 'Adiciona una nueva organización',\n\t\t\t'controlType': ContainerPanelComponent,\n\t\t\t'title': 'Adiciona una nueva organización',\n\t\t\t'description': '',\n\t\t\t'iconName': undefined /*''*/,\n\t\t\t'formSectionContent': [\n\t\t\t\t//TODO: Poner los campos.'\n\t\t\t]\n\t\t};\n\t}\n\n\t/**\n\t * Does the tasks for the operation action. \n\t * @param op The operation action. \n\t */\n\tpublic doOperationAction(op: OperationAction): void\n\t{\n\t\tif(op == OperationAction.submit)\n\t\t{\n\t\t\t//TODO: Do the tasks for the submit action. \n\t\t}\n\n\t\t/* Currently, it does not do any task for the cancel action. */\n\n\t\tthis._router.navigate(['../', { 'operation': op }]);\n\t}\n\n\t/**\n\t * Returns true if the submit action is disabled; otherwise, false. \n\t */\n\tpublic get isSubmitActionDisabled(): boolean\n\t{\n\t\treturn this.panelFormSection.invalid;\n\t}\n}\n","import { isArray } from 'util';\nimport { Component, OnInit, Output, EventEmitter, Input, Type } from '@angular/core';\nimport { Organization, SearchResponse, HitList, Aggr } from '../../entities/public-api';\nimport { FormControl } from '@angular/forms';\nimport { SearchService, OrganizationServiceNoAuth } from '../../backend/public-api';\nimport { HttpParams } from '@angular/common/http';\n\n@Component({\n  selector: 'toco-org-search',\n  templateUrl: './org-search.component.html',\n  styleUrls: ['./org-search.component.scss']\n})\nexport class OrgSearchComponent implements OnInit {\n\n  /**\n   * Input `orgCtrl` is a FormControl\n   */\n  @Input()\n  orgCtrl = new FormControl();\n\n  filteredOrg = new  HitList<Organization>();\n\n  params= new HttpParams();\n\n  /**\n   * Input `orgFilter` is a dict with `type` and `value` to filter the organizations,\n   * @Example { type: 'country' , value: 'Cuba\" }\n   */\n  @Input()\n  orgFilter: { type: string, value: string} | Array<{ type: string, value: string}>;\n\n  @Input()\n  placeholder: string = \"Escriba al menos 3 letras\";\n\n  @Input()\n  label: string = \"Busque una organización\";\n\n  @Input()\n  appearance: string = \"outline\";\n\n  /**\n   * Input `cleaning` is a boolen, if true then clean the search\n   */\n  @Input()\n  cleaning: boolean = false;\n\n  @Output()\n  selectedOrg: EventEmitter<Organization> = new EventEmitter<Organization>();\n\n  toSearch=0;\n  constructor( private _orgService: OrganizationServiceNoAuth) {  }\n\n  ngOnInit() {\n    this.params = this.params.set('size', '10');\n    this.params = this.params.set('page', '1');\n    if (this.orgFilter != undefined) {\n      if (isArray(this.orgFilter )){\n        const filter_array = (this.orgFilter as Array<{ type: string, value: string}>);\n        for(let filter of filter_array){\n          this.params = this.params.set(filter.type, filter.value);\n        }\n      }\n      else {\n        const type = (this.orgFilter as { type: string, value: string} ).type;\n        const value = (this.orgFilter as { type: string, value: string} ).value;\n        this.params = this.params.set(type, value);\n      }\n    }\n    this.orgCtrl.valueChanges\n    .subscribe({\n      next: (orgValueChanges) => {\n        this.toSearch++;\n        // this condition check if the param is a `string` an if at least write 3 letters\n        if (this.toSearch > 3 && typeof orgValueChanges === 'string') {\n          this.toSearch = 0;\n          this.params = this.params.set('q', orgValueChanges)\n          this._orgService.getOrganizations(this.params).subscribe({\n              next: (response) => {\n                this.filteredOrg = response.hits\n              }\n          });\n        } else if (typeof orgValueChanges === 'object') {\n          this.toSearch = 0;\n          this.selectedOrg.emit(orgValueChanges);\n          if (this.cleaning){\n            this.orgCtrl.setValue('');\n          }\n        }\n      }\n    })\n  }\n  /* This function return the organization name\n   * @param org the Organization object\n   */\n  displayFn(org?: Organization): string | undefined {\n    return org ? org.name : undefined;\n  }\n\n}\n","\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { UserService, SortDirection, PageRequest, Page } from '../../core/public-api';\nimport { ENDPOINT_APIS, OrganizationService } from '../../backend/public-api';\nimport { Organization } from '../../entities/public-api';\nimport { TableContent, TableComponent, CellContentWrap, InputContent, TextAlign, \n    TextInputAppearance, IconValue, IconSource, HintPosition, HintValue, ContentPosition, \n    ContainerContent, InputTextComponent } from '../../forms/public-api';\n\n@Component({\n  selector: 'toco-org-table-edit',\n  templateUrl: './org-table-edit.component.html',\n  styleUrls: ['./org-table-edit.component.scss']\n})\nexport class OrgTableEditComponent implements OnInit {\n\n    /**\n     * Contains the content of the identifiers section. \n     */\n    public identifiersContent: ContainerContent;\n    // public identifiersContent_Complex: ContainerContent;\n\n    /**\n     * The search filter. \n     */\n\t// public searchContent: InputContent;\n\n    // @ViewChild('input_search', { static: true })\n    // private _inputSearch: InputTextComponent;\n\n    /**\n     * The sources list.\n     * Use this field to initialize only; to change value use the `_tableControl` field.\n     */\n    public tableContent: TableContent<any>;\n\n    @ViewChild(TableComponent, { static: true })\n    private _tableControl: TableComponent;\n\n    public constructor(private _router: Router, private _activatedRoute: ActivatedRoute, private _organizationService: OrganizationService)\n    //public constructor(private _userService: UserService)\n\t{ }\n\n\tpublic ngOnInit(): void\n\t{\n        /* Sets an initial search value. */\n        //this._inputSearch.formControl.setValue('cl');\n\n        /***************************/\n\n        // this.searchContent = this._initSearchContent();\n        this.tableContent = this._initTableContent();\n\n        /***************************/\n\n        // this._tableControl.page.subscribe((value) => console.log('page', value));\n    }\n\n    private _initSearchContent(): InputContent\n    {\n        return {\n            'formControl': InputTextComponent.getFormControlByDefault(),\n            'width': '65%',\n\n            'label': 'Write a text to search',\n            'controlType': InputTextComponent,\n    \n            'textAlign': TextAlign.left,\n            'ariaLabel': 'Search',\n    \n            'appearance': TextInputAppearance.outline,\n    \n            'prefixIcon': new IconValue(IconSource.external, ContentPosition.prefix, 'search'),\n    \n            'startHint': new HintValue(HintPosition.start, 'Searches when typing stops.')\n        };\n    }\n\n    private _initTableContent(): TableContent<any>\n    {\n        return {\n            'columnsObjectProperty': ['name', 'status', 'email_address'],\n            //'columnsObjectProperty': ['id', 'name', 'registrationDate'],\n            'columnsHeaderText': ['Nombre', 'Estatus', 'Dirección de Correo'],\n            //'columnsHeaderText': ['id', 'name', 'registrationDate'],\n            'columnsWidth': ['60%', '22%', '18%'],\n            'columnContentWrap': [CellContentWrap.ellipsis, CellContentWrap.ellipsis, CellContentWrap.responsible],\n            'createCssClassesForRow': (rowData: any) => {\n                return {\n                    //'new-release': rowData['email_address'],\n                    'selected-row': (rowData[this.tableContent.propertyNameToIdentify]) == this._tableControl.selectedRow\n                };\n            },\n            'propertyNameToIdentify': 'id',\n            //'propertyNameToIdentify': 'id',\n\n            // 'filter': {\n            //     'search': this._inputSearch,\n            //     //'registration': undefined\n            // },\n            'sort': {\n                'active': 'id',\n                'direction': SortDirection.desc\n            },\n            'pageIndex': 0,\n            'pageSize': 5,\n            'pageSizeOptions': [5, 10, 20, 50],\n            //'hidePageSize': true,\n            'showFirstLastButtons': true,\n\n            'endpoint': this._getMySources.bind(this),\n            //'endpoint': this._userService.page.bind(this._userService),\n\n            actions: [\n                { icon: 'visibility', route: 'ver', tooltip: 'Ver' },\n                { icon: 'edit', route: 'editar', tooltip: 'Editar' },\n            ]\n        };\n    }\n\n    private _getMySources(pageRequest: PageRequest): Observable<Page<any>>\n    {\n        return this._organizationService.get<Organization[]>(ENDPOINT_APIS.organizations, []).pipe(\n            map((response: Organization[]): Page<Organization> => {\n                console.log('Organizations Response: ', response);\n                // if (response && response.status != ResponseStatus.ERROR){\n                    return {\n                        'data': response,\n                        'totalData': response.length,\n                        'pageIndex': pageRequest.paginator.pageIndex,\n                        'pageSize': pageRequest.paginator.pageSize\n                    };\n                // }\n                \n            })\n        );\n\t}\n\t\n\tpublic doOperation(): void\n\t{\n\t\tthis._router.navigate(['organizaciones/adicionar']);\n\t}\n\n}\n","import { CollectionViewer, SelectionChange } from '@angular/cdk/collections';\nimport { FlatTreeControl } from '@angular/cdk/tree';\nimport { Component, EventEmitter, Injectable, Input, OnInit, Output } from '@angular/core';\nimport { BehaviorSubject, Observable, merge } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { OrganizationServiceNoAuth } from '../../backend/public-api';\nimport { Hit } from '../../entities/common';\nimport { Organization, OrganizationRelationships } from '../../entities/public-api';\n\n\n\n/** Flat node with expandable and level information */\nexport class OrganizationFlatNode {\n  constructor(public item: Hit<Organization>,\n              public parent: OrganizationFlatNode,\n              public level = 1,\n              public expandable = false,\n              public isLoading = false) { }\n}\n\n@Injectable()\nexport class OrganizationDataSource {\n\n\n  dataChange = new BehaviorSubject<OrganizationFlatNode[]>([]);\n  orgRelationshipType: string = null;\n\n  constructor(private _treeControl: FlatTreeControl<OrganizationFlatNode>,\n              private orgService: OrganizationServiceNoAuth) { }\n\n\n  get data(): OrganizationFlatNode[] { return this.dataChange.value; }\n  set data(value: OrganizationFlatNode[]) {\n    this._treeControl.dataNodes = value;\n    this.dataChange.next(value);\n  }\n\n\n  connect(collectionViewer: CollectionViewer): Observable<OrganizationFlatNode[]> {\n    this._treeControl.expansionModel.onChange.subscribe(change => {\n      if ((change as SelectionChange<OrganizationFlatNode>).added ||\n        (change as SelectionChange<OrganizationFlatNode>).removed) {\n        this.handleTreeControl(change as SelectionChange<OrganizationFlatNode>);\n      }\n    });\n\n    return merge(collectionViewer.viewChange, this.dataChange).pipe(map(() => this.data));\n  }\n\n  /** Handle expand/collapse behaviors */\n  handleTreeControl(change: SelectionChange<OrganizationFlatNode>) {\n    if (change.added) {\n      change.added.forEach(node => this.toggleNode(node, true));\n    }\n    if (change.removed) {\n      change.removed.slice().reverse().forEach(node => this.toggleNode(node, false));\n    }\n  }\n\n  /**\n   * Toggle the node, remove from display list\n   */\n  toggleNode(node: OrganizationFlatNode, expand: boolean) {\n    node.isLoading = true;\n    const index = this.data.indexOf(node);\n    if (node.item.metadata.relationships.length <= 0 || index < 0) { // If no children, or cannot find the node, no op\n      return;\n    }\n    if (expand) {\n      this.orgService.getOrganizationRelationships(node.item.metadata.id, this.orgRelationshipType).subscribe(\n        (response) => {\n          const nodes = response.map(\n            org =>\n              new OrganizationFlatNode(org, node, node.level + 1, org.metadata.relationships.length > 0)\n          );\n\n          this.data.splice(index + 1, 0, ...nodes);\n\n          this.dataChange.next(this.data);\n          node.isLoading = false;\n\n        },\n        (error) => { },\n        () => { }\n      );\n    } else {\n      let count = 0;\n      for (let i = index + 1; i < this.data.length\n        && this.data[i].level > node.level; i++) {\n        count++\n      }\n      this.data.splice(index + 1, count);\n      this.dataChange.next(this.data);\n      node.isLoading = false;\n    }\n  }\n}\n\n@Component({\n  selector: 'toco-org-tree-viewer',\n  templateUrl: './org-tree-viewer.component.html',\n  styleUrls: ['./org-tree-viewer.component.scss']\n})\nexport class OrgTreeViewerComponent implements OnInit {\n\n  @Input() organizations: Array<Hit<Organization>> = new Array();\n\n  @Input() orgRelationshipType: string = null;\n\n  @Input() iconAction = 'visibility';\n\n  @Input() labelAction = '';\n\n  @Input() ngStyle = null;\n\n  @Output()\n  action = new EventEmitter<OrganizationFlatNode>();\n\n  public error = false;\n\n  treeControl: FlatTreeControl<OrganizationFlatNode>;\n\n  dataSource: OrganizationDataSource;\n\n  getLevel = (node: OrganizationFlatNode) => node.level;\n\n  isExpandable = (node: OrganizationFlatNode) => node.expandable;\n\n  hasChild = (_: number, _nodeData: OrganizationFlatNode) => _nodeData.expandable;\n\n  constructor(\n    private orgService: OrganizationServiceNoAuth) {\n    this.treeControl = new FlatTreeControl<OrganizationFlatNode>(this.getLevel, this.isExpandable);\n    this.dataSource = new OrganizationDataSource(this.treeControl, orgService);\n  }\n\n  ngOnInit() {\n    this.dataSource.orgRelationshipType = this.orgRelationshipType;\n\n    this.dataSource.data = this.organizations.map(\n      org =>\n        new OrganizationFlatNode(org, null,  1, org.metadata.relationships.length > 0)\n    );\n  }\n\n  emitAction(org) {\n    this.action.emit(org);\n  }\n}\n","\nimport { CUSTOM_ELEMENTS_SCHEMA, NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/public-api';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { TocoFormsModule } from '../forms/public-api';\nimport { StaticsModule } from '../statics/public-api';\n\n\nimport { OrgViewComponent } from './org-view/org-view.component';\nimport { OrgViewAccordionComponent } from './org-view/org-view-accordion/org-view-accordion.component';\nimport { OrgViewAddressComponent } from './org-view/org-view-address/org-view-address.component';\nimport { OrgViewGeoNamesCityComponent } from './org-view/org-view-geo-names-city/org-view-geo-names-city.component';\nimport { OrgViewRelationshipComponent } from './org-view/org-view-relationship/org-view-relationship.component';\nimport { OrgEditComponent } from './org-edit/org-edit.component';\nimport { OrgAddComponent } from './org-add/org-add.component';\nimport { OrgSearchComponent } from './org-search/org-search.component';\nimport { MatAutocompleteModule, MatChipsModule } from '@angular/material';\nimport { OrgTableEditComponent } from './org-table-edit/org-table-edit.component';\n// import { OrgFooterComponent } from './org-footer/org-footer.component';\nimport { RouterModule } from '@angular/router';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { AngularMaterialModule } from '../angular-material/public-api';\nimport { HttpClientModule } from '@angular/common/http';\nimport { CommonModule } from '@angular/common';\nimport { OrgTreeViewerComponent } from './org-tree-viewer/org-tree-viewer.component';\n\n@NgModule({\n\tdeclarations: [\n\t\tOrgViewComponent,\n\t\tOrgViewAccordionComponent,\n\t\tOrgViewAddressComponent,\n\t\tOrgViewGeoNamesCityComponent,\n\t\tOrgViewRelationshipComponent,\n\t\tOrgEditComponent,\n\t\tOrgAddComponent,\n\t\tOrgSearchComponent,\n\t\tOrgTableEditComponent,\n\t\t// OrgFooterComponent,\n\t\tOrgTreeViewerComponent\n\t],\n\n\timports: [\n\t\t// SharedModule,\n\t\tFlexLayoutModule,\n\t\tCommonModule,\n\t\tFormsModule,\n\t\tHttpClientModule,\n\t\tAngularMaterialModule,\n\n\t\tReactiveFormsModule,\n\t\tRouterModule,\n\t\tTocoFormsModule,\n\t\tMatAutocompleteModule,\n\t\tMatChipsModule,\n\t\tStaticsModule\n\t],\n\n\texports: [\n\t\tOrgViewComponent,\n\t\tOrgEditComponent,\n\t\tOrgAddComponent,\n\t\tOrgSearchComponent,\n    // OrgFooterComponent,\n    OrgTreeViewerComponent\n\t],\n\tschemas: [\n        CUSTOM_ELEMENTS_SCHEMA\n    ]\n})\nexport class OrganizationsModule\n{ }\n","\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'toco-person',\n    templateUrl: './person.component.html',\n    styleUrls: ['./person.component.scss']\n})\nexport class PersonComponent implements OnInit\n{\n    constructor()\n    { }\n\n    ngOnInit()\n    { }\n}\n","\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'toco-person-view',\n    templateUrl: './person-view.component.html',\n    styleUrls: ['./person-view.component.scss']\n})\nexport class PersonViewComponent implements OnInit\n{\n    constructor()\n    { }\n\n    ngOnInit()\n    { }\n}\n","\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/public-api';\n\nimport { PersonComponent } from './person/person.component';\nimport { PersonViewComponent } from './person-view/person-view.component';\n\n@NgModule({\n    declarations: [\n        PersonComponent,\n        PersonViewComponent\n    ],\n\n    imports: [\n        SharedModule\n    ],\n\n    exports: [\n        PersonComponent,\n        PersonViewComponent\n    ]\n})\nexport class PersonModule\n{ }\n","import { Component, OnInit, Input} from '@angular/core';\nimport { Record } from '../../entities/public-api';\n\n@Component({\n  selector: 'toco-record',\n  templateUrl: './record.component.html',\n  styleUrls: ['./record.component.scss']\n})\nexport class RecordComponent implements OnInit {\n\n  @Input()\n  public record: Record;\n  constructor() { }\n\n  ngOnInit() {\n\n  }\n\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from \"@angular/core\";\nimport { Aggr, AggrBucket } from \"../../entities/public-api\";\n\nexport interface AggregationsSelection{\n  [id: string]: string[]\n}\n\n@Component({\n  selector: \"toco-search-aggregations\",\n  templateUrl: \"./aggregations.component.html\",\n  styleUrls: [\"./aggregations.component.scss\"],\n})\nexport class AggregationsComponent implements OnInit {\n  @Input()\n  aggregations: { [id: string]: Aggr } = {};\n\n  /***\n   * {\n   *  'country': ['Cuba','Peru'],\n   *  'state': ['New York']\n   *  ...\n   * }\n   *\n   * in the aggregation country, buckets 'Cuba' and 'Peru' are selected\n   * in the aggregation state, bucket 'New York' is selected\n   *\n   */\n  @Input()\n  selectedAggr: AggregationsSelection = {};\n\n  @Output()\n  keySelect = new EventEmitter<AggregationsSelection>();\n\n  keys = [];\n\n  constructor() {}\n\n  ngOnInit() {\n    for (const key in this.aggregations) {\n      if (this.aggregations.hasOwnProperty(key)) {\n        const element = this.aggregations[key];\n        //this.keys.push(key);\n        this.keys.push({\"key\":key, \"sp\":this._translate(key)});\n      }\n    }\n    console.log(\"cola\");\n    console.log(this.keys);\n\n  }\n\n  //aqui se agregan los casos que puedan haber en las agregaciones para q salgan siempre en español\n  private _translate(key){\n    switch (key)\n    {\n      case \"status\": {\n        return \"Estado\";\n      }\n      case \"country\": {\n        return \"País\";\n      }\n      case \"state\": {\n        return \"Provincia (Estado)\";\n      }\n      case \"types\": {\n        return \"Tipos\";\n      }\n      default: {\n        return this.aggregations[key]['label'];\n\n      }\n    }\n\n    return key;\n  }\n\n\n  isSelected(aggrKey, bucket: AggrBucket) {\n\n    if (this.selectedAggr.hasOwnProperty(aggrKey)) {\n      for (let index = 0; index < this.selectedAggr[aggrKey].length; index++) {\n        const element = this.selectedAggr[aggrKey][index];\n        if (element == bucket.key) {\n          // console.log(this.selectedAggr, aggrKey, bucket);\n          // console.log(\"--------------------\");\n\n          return true;\n        }\n      }\n      // this.selectedAggr[aggrKey].forEach((key) => {\n      //   if (key == bucket.key) {\n      //     console.log(this.selectedAggr, aggrKey, bucket);\n      //     console.log(\"--------------------\");\n\n      //     return true;\n      //   }\n      // });\n    }\n    // console.log(\"FALSE\");\n\n    return false;\n  }\n\n  selectionChange(aggrKey, bucket: AggrBucket) {\n    if (!this.selectedAggr.hasOwnProperty(aggrKey)){\n      this.selectedAggr[aggrKey] = [];\n    }\n\n      if (this.selectedAggr[aggrKey].find(k => k == bucket.key)){\n        this.selectedAggr[aggrKey] = this.selectedAggr[aggrKey].filter(k => k != bucket.key);\n      } else{\n        this.selectedAggr[aggrKey].push(bucket.key)\n      }\n\n\n    this.keySelect.emit(this.selectedAggr);\n  }\n}\n","\nimport { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { FormControl } from '@angular/forms';\n\n/**\n * Represents a component used to search a query. \n * \n * In order to use this component with the correct i18n, you must include \n * (in your i18n translate files that are in the folder `assets\\i18n`) \n * a translation key of name \"TOCO_SEARCH_QUERY_INPUT\" that contains \n * an object as value with the translation needed by this component. \n * \n * In the case of `es.json` file, you must include the following translation key: \n    \"TOCO_SEARCH_QUERY_INPUT\": {\n        \"INPUT_SEARCH_LABEL\": \"Buscar\",\n        \"INPUT_SEARCH_PLACEHOLDER\": \"Escriba un criterio y presione Enter\",\n        \"BUTTON_SEARCH\": \"Buscar\"\n    }\n * \n * In the case of `en.json` file, you must include the following translation key: \n    \"TOCO_SEARCH_QUERY_INPUT\": {\n        \"INPUT_SEARCH_LABEL\": \"Search\",\n        \"INPUT_SEARCH_PLACEHOLDER\": \"Write a phrase and press Enter\",\n        \"BUTTON_SEARCH\": \"Search\"\n    }\n * \n * If you have another language, then you have another `*.json` file, \n * and you must include the \"TOCO_SEARCH_QUERY_INPUT\" translation key with the correct translation values. \n */\n@Component({\n  selector: 'toco-search-query-input',\n  templateUrl: './query-input.component.html',\n  styleUrls: ['./query-input.component.scss']\n})\nexport class QueryInputComponent implements OnInit {\n\n  @Input()\n  query: string = \"\";\n\n  @Input()\n  minWordCount: number = 3;\n\n  @Input()\n  appearance: string = 'outline';\n\n  @Input()\n  inputColor: string = '';\n\n  @Input()\n  buttonColor: string = 'primary';\n\n  @Input()\n  showButton = true;\n\n  @Input()\n  width: number = 100;\n\n  @Output()\n  queryChange = new EventEmitter<string>();\n\n  queryCtrl = new FormControl();\n\n  constructor() { }\n\n  ngOnInit() {\n    // this.queryCtrl.valueChanges\n    // .subscribe({\n    //   next: (queryValueChanges) => {\n    //     // this condition check if the param is a `string` an if at least write 3 letters\n    //     if (typeof queryValueChanges === 'string' && (queryValueChanges.length >= this.minWordCount)) {\n    //       this.queryChange.emit(queryValueChanges);\n    //     }\n    //   }\n    // })\n  }\n\n  riseQuery(){\n    this.queryChange.emit(this.queryCtrl.value ? this.queryCtrl.value : '');\n  }\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { HitList, Record } from '../../entities/public-api';\n\n@Component({\n  selector: 'toco-record-list',\n  templateUrl: './record-list.component.html',\n  styleUrls: ['./record-list.component.scss']\n})\nexport class RecordListComponent implements OnInit {\n\n  @Input()\n  hitList: HitList<Record>;\n\n  constructor() { }\n\n  ngOnInit() {\n    console.log(this.hitList);\n  }\n\n}\n","\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/public-api';\n\nimport { RecordComponent } from './record/record.component';\nimport { AggregationsComponent } from './aggregations/aggregations.component';\nimport { QueryInputComponent } from './query-input/query-input.component';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { RecordListComponent } from './record-list/record-list.component';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  declarations: [\n    RecordComponent,\n    AggregationsComponent,\n    QueryInputComponent,\n    RecordListComponent\n  ],\n\n  imports: [\n    CommonModule,\n    SharedModule,\n    ReactiveFormsModule,\n    TranslateModule,\n    SharedModule\n  ],\n\n  exports: [\n    RecordComponent,\n    AggregationsComponent,\n    QueryInputComponent,\n    RecordListComponent\n  ]\n})\nexport class SearchModule\n{ }\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\nimport { Component, OnInit, Input } from '@angular/core';\nimport { MatSnackBar, MatDialog } from '@angular/material';\nimport { MetadataService, MessageHandler, StatusCode, Environment } from '../../core/public-api';\nimport { Organization, VocabulariesInmutableNames, JournalVersion } from '../../entities/public-api';\n\n\nexport enum JournalDataType {\n    /** is used by default, `Journal` have not that type of data. */\n    default = 0,\n    title = 1,\n    subtitle = 2,\n    shortname = 3,\n    issnP = 4,\n    issnE = 5,\n    issnL = 6,\n    rnpsP = 7,\n    rnpsE = 21,\n    url = 8,\n    email = 9,\n    logo = 10,\n    purpose = 11,\n    start_year = 12,\n    end_year = 13,\n    frequency = 14,\n    seriadas_cubanas = 15,\n    facebook = 16,\n    twitter = 17,\n    linkedin = 18,\n    description = 19,\n    term = 20,\n    oaiurl = 22,\n}\n\n@Component({\n    selector: 'toco-journal-view',\n    templateUrl: './journal-view.component.html',\n    styleUrls: ['./journal-view.component.scss']\n})\nexport class JournalViewComponent implements OnInit {\n\n\n    @Input()\n    public topMainOrganization: Organization = null;\n\n\n    /**************** auxiliary variables *******************/\n\n    public panelOpenState = false;\n\n\n    public defaultLogo = this.env.sceibaHost + 'static/favicon.ico'\n\n    /**\n     * Button roperty, is to enable or disable if there are not more versions\n     */\n    isDisabledNavigatePrevious: boolean;\n    isDisabledNavigateNext: boolean;\n\n    public vocabularies: typeof VocabulariesInmutableNames;\n\n\n    /**************** journal variables *******************/\n\n    /**\n     * Represents a Journal Object, it is a type of Source.\n     * Need the source.version array filled\n     */\n    // @Input()\n    // public journal: JournalData;\n\n    @Input()\n    public editingJournal: JournalVersion;\n\n    @Input()\n    public versions: Array<JournalVersion>;\n\n\n    /**************** select journal version variables *******************/\n\n    /**\n     * the current version of a Journal, (a type of Source)\n     * it is to compare and show changes between Journal and last version of journal\n     * iteration over journal.versions\n     */\n    public selectedJournal: JournalVersion;\n\n\n    /** TODO: In the future databaseTerms and subjectTerms will be changes by\n     *  miarTerms and subjectsUnescoTerms\n     *  public miarTerms: Array<SourceClasification>;\n     *  public subjectsUnescoTerms: Array<SourceClasification>;\n    */\n\n\n    /**\n     * Properties to move between versions\n     */\n    private selectedVersion: number;\n    private lengthVersion: number;\n\n    /**\n     * Inmutables data types of Journal\n     */\n    public journalDataType = JournalDataType;\n\n\n\n    /**\n     * version.is_current = true\n     */\n    // public currentJournal: JournalVersion;\n\n\n\n    public showVersions = false;\n    public editVersion = false;\n\n\n\n    constructor(\n        private metadata: MetadataService,\n        private env: Environment,\n        private _snackBar: MatSnackBar,\n        public dialog: MatDialog\n    ) { }\n\n    ngOnInit() {\n\n        this.isDisabledNavigatePrevious = true;\n        this.isDisabledNavigateNext = false;\n\n        this.vocabularies = VocabulariesInmutableNames;\n\n        // guardar la cantidad total de versiones\n        this.lengthVersion = this.versions.length;\n        // guardar la posicion de la version donde este la actual\n        this.selectedVersion = this.getSelectedJournalPosition();\n\n        this.SelectJournalVersion();\n\n        this.metadata.setStandardMeta(\"Revista Científica \" + this.editingJournal.data.title, this.editingJournal.data.description, \"\");\n\n        // if (this.versions){\n        //   this.versions.forEach((journalVersion: JournalVersion, index: number) => {\n        //     // check if has versions to view and return that position\n        //     if (journalVersion.is_current) {\n        //         this.currentJournal = new JournalVersion();\n        //         this.currentJournal.deepcopy(journalVersion);\n        //     }\n        //   });\n        // }\n    }\n\n\n\n    /**\n     * Changes the selected position to the next one if possible\n     */\n    public nextVersion(): void {\n\n        if (this.selectedVersion < this.lengthVersion - 1) {\n\n            this.isDisabledNavigateNext = false;\n            this.isDisabledNavigatePrevious = false;\n            this.selectedVersion++;\n            this.SelectJournalVersion();\n\n        }\n        else {\n\n            this.isDisabledNavigateNext = true;\n            const m = new MessageHandler(this._snackBar);\n            m.showMessage(StatusCode.OK, 'No hay más versiones para mostrar')\n\n        }\n        if (this.selectedVersion == this.lengthVersion - 1) {\n            this.isDisabledNavigateNext = true;\n        }\n    }\n\n    /**\n     * Changes the selected position to the before one if possible\n     */\n    public previousVersion(): void {\n\n        if (this.selectedVersion > 0) {\n            this.isDisabledNavigatePrevious = false;\n            this.isDisabledNavigateNext = false;\n            this.selectedVersion--;\n            this.SelectJournalVersion();\n\n        }\n        else {\n\n            this.isDisabledNavigatePrevious = true;\n            const m = new MessageHandler(this._snackBar);\n            m.showMessage(StatusCode.OK, 'No hay más versiones para mostrar')\n\n        }\n        if (this.selectedVersion == 0) {\n            this.isDisabledNavigatePrevious = true;\n        }\n    }\n\n    /**\n     * Selects the selected journal as a JournalVersion\n     */\n    public SelectJournalVersion(): void {\n        if (this.versions.length >= 0 &&\n            this.selectedVersion >= 0 &&\n            this.selectedVersion < this.versions.length) {\n\n            // load the selected journal\n            let version = new JournalVersion();\n            version.deepcopy(this.versions[this.selectedVersion]);\n            this.selectedJournal = version;\n\n            // load if was viewed\n            // this.selectedJournalChecked = this.selectedJournal.reviewed;\n\n        }\n    }\n\n\n    /**\n     * Returns the position of the unseen version of the journal as JournalVersion\n     */\n    private getSelectedJournalPosition(): number {\n        let count = 0;\n        this.versions.forEach((journalVersion: JournalVersion, index: number) => {\n\n            // check if has versions to view and return that position\n            if (journalVersion.reviewed != null && journalVersion.reviewed) {\n                count = index;\n                return count;\n            }\n        });\n        return count;\n    }\n\n    sourceEditDone(version: JournalVersion) {\n        this.editVersion = false;\n        console.log('AAaAAAAAAAAAAAAAAAAAA');\n\n    }\n\n    toogleShowVersions(){\n        this.showVersions = !this.showVersions\n        this.editVersion = false;\n    }\n\n\n\n}\n\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { FormGroup, FormBuilder, FormControl } from '@angular/forms';\nimport { MatSnackBar } from '@angular/material';\nimport { SourceService, CatalogService, TaxonomyService } from '../../../backend/public-api';\nimport { MetadataService } from '../../../core/public-api';\nimport { IdentifierSchemas } from '../../../entities/common';\nimport { JournalData, JournalVersion, Organization, SourceClasification, SourceTypes, SourceSystems, VocabulariesInmutableNames, Term } from '../../../entities/public-api';\nimport { VocabularyTreeComponent } from '../../../forms/experimental/vocabulary-tree/vocabulary-tree.component';\nimport { PanelContent, FormContainerAction, ContainerPanelComponent, InputTextComponent, FormFieldType, HintValue, HintPosition, InputRnpsComponent, SelectComponent, TextareaComponent, InputUrlComponent, InputEmailComponent, VocabularyComponent, DatepickerComponent } from '../../../forms/public-api';\n\n@Component({\n  selector: \"toco-journal-edit\",\n  templateUrl: \"./journal-edit.component.html\",\n  styleUrls: [\"./journal-edit.component.scss\"],\n})\nexport class JournalEditComponent implements OnInit {\n  // TODO: Idea del componente:\n  // trabajan internamente con un journal, si recibe null entonces es uno nuevo, si recibe un journal entonces es editar.\n  // en ambos casos devuelve el journal editado, o sea el contenido, listo para hacer post en el backend.\n  public pageTitle = \"\";\n\n  public journalData: JournalData = null;\n\n  @Input()\n  public journalVersion: JournalVersion = null;\n\n  @Input()\n  public showEditHeader = false;\n\n  @Input()\n  public description = \"\";\n\n  @Input()\n  public topMainOrganization: Organization = null;\n\n  @Input()\n  public showFinalStep = true;\n\n  // journal identifiers variables for step 0\n  identifiersPanel: PanelContent = null;\n  identifiersFormGroup: FormGroup;\n\n  // journal information variables for step 1\n  informationPanel: PanelContent = null;\n  informationFormGroup: FormGroup;\n  informationSocialFormGroup: FormGroup;\n\n  journalCover: SourceClasification;\n\n  organizationFormGroup: FormGroup;\n\n  // indexes: SourceClasification[] = [];\n  indexesFormGroup: FormGroup;\n\n  // institutions: SourceClasification[] = [];\n  // entityFormGroup: FormGroup;\n\n  // indexes (databases), variables for step 3\n\n  finalPanel: PanelContent = null;\n  finalFormGroup: FormGroup;\n\n  // actions, if needed\n  stepAction1: FormContainerAction;\n  stepAction2: FormContainerAction;\n  stepAction3: FormContainerAction;\n  stepAction4: FormContainerAction;\n\n  // TODO: Esto se puede hacer mejor, con un emiter alcanza\n  @Output()\n  journalEditDone = new EventEmitter<JournalVersion>();\n\n  @Output()\n  editCanceled = new EventEmitter<boolean>();\n\n  public constructor(\n    private metadata: MetadataService,\n    private sourceService: SourceService,\n    private catalogService: CatalogService,\n    private taxonomyService: TaxonomyService,\n    public snackBar: MatSnackBar,\n    private formBuilder: FormBuilder\n  ) {}\n\n  ngOnInit() {\n    this.journalData = new JournalData();\n    this.journalData.deepcopy(this.journalVersion.data);\n\n    this.pageTitle = this.journalData.isNew\n      ? \"Nueva Revista\"\n      : \"Editando: \" + this.journalData.title;\n    this.metadata.setStandardMeta(this.pageTitle, \"\", \"\");\n\n    console.log(\"journal edit INIT\");\n    this.resetStepper();\n    this.initStep2();\n    this.initStep0Identifiers();\n    this.initStep1();\n\n    this.initStep3();\n    this.initStepFinal();\n  }\n\n  resetStepper() {\n    this.identifiersPanel = null;\n    this.identifiersFormGroup = null;\n\n    this.informationPanel = null;\n    this.informationFormGroup = null;\n    this.informationSocialFormGroup = null;\n\n    // this.organization = null;\n    // this.organizationPanel = null;\n    // this.institution = null;\n    // this.institutionPanel = null;\n    // this.entity = null;\n    // this.entityPanel = null;\n    this.organizationFormGroup = null;\n    this.indexesFormGroup = null;\n  }\n\n  initStep0Identifiers() {\n    this.identifiersFormGroup = this.formBuilder.group({});\n\n    this.identifiersPanel =\n      {\n        name: 'identifiersPanel',\n        label: 'Identificadores',\n        controlType: ContainerPanelComponent,\n        description: \"\",\n        iconName: \"\",\n        formSection: this.identifiersFormGroup,\n        formSectionContent: [\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"issn_l\",\n            label: \"ISSN de Enlace\",\n            type: FormFieldType.text,\n            controlType: InputTextComponent,\n            required: false,\n            startHint: new HintValue(HintPosition.start, \"XXXX-XXXX\"),\n            width: \"23%\",\n            value: this.journalData\n              ? this.journalData.getIdentifierValue(IdentifierSchemas.issn_l)\n              : \"\",\n            // value: this.journalVersion ? IssnValue.createIssnValueFromString(this.journalVersion.issn.l) : null\n          },\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"issn_p\",\n            label: \"ISSN Impreso\",\n            type: FormFieldType.text,\n            controlType: InputTextComponent,\n            required: false,\n            startHint: new HintValue(HintPosition.start, \"XXXX-XXXX\"),\n            width: \"23%\",\n            value: this.journalData\n              ? this.journalData.getIdentifierValue(IdentifierSchemas.issn_p)\n              : \"\",\n            // value: this.journalVersion ? IssnValue.createIssnValueFromString(this.journalVersion.issn.p) : null\n          },\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"issn_e\",\n            label: \"ISSN Electrónico\",\n            type: FormFieldType.text,\n            controlType: InputTextComponent,\n            required: false,\n            startHint: new HintValue(HintPosition.start, \"XXXX-XXXX\"),\n            width: \"23%\",\n            value: this.journalData\n              ? this.journalData.getIdentifierValue(IdentifierSchemas.issn_e)\n              : \"\",\n            // value: this.journalVersion ? IssnValue.createIssnValueFromString(this.journalVersion.issn.e) : null\n          },\n          {\n            formControl: InputRnpsComponent.getFormControlByDefault(),\n            name: \"rnps_p\",\n            label: \"RNPS Impreso\",\n            type: FormFieldType.rnps,\n            controlType: InputRnpsComponent,\n            required: true,\n            startHint: new HintValue(HintPosition.start, \"XXXX.\"),\n            width: \"23%\",\n            value: this.journalData\n              ? this.journalData.getIdentifierValue(IdentifierSchemas.prnps)\n              : \"\",\n          },\n          {\n            formControl: InputRnpsComponent.getFormControlByDefault(),\n            name: \"rnps_e\",\n            label: \"RNPS Electrónico\",\n            type: FormFieldType.rnps,\n            controlType: InputRnpsComponent,\n            required: true,\n            startHint: new HintValue(HintPosition.start, \"XXXX.\"),\n            width: \"23%\",\n            value: this.journalData\n              ? this.journalData.getIdentifierValue(IdentifierSchemas.ernps)\n              : \"\",\n          },\n        ],\n      };\n  }\n\n  initStep1(): void {\n    this.informationFormGroup = this.formBuilder.group({\n      // 'description': descriptionControl,\n      start_year: new FormControl(\"\"),\n      end_year: new FormControl(\"\"),\n    });\n\n    this.informationSocialFormGroup = this.formBuilder.group({});\n\n    this.informationPanel =\n      {\n        name: 'informationPanel',\n        label: 'Datos de la Revista',\n        description: \"\",\n        iconName: \"\",\n        controlType: ContainerPanelComponent,\n        formSection: this.informationFormGroup,\n        formSectionContent: [\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"title\",\n            label: \"Título\",\n            type: FormFieldType.text,\n            controlType: InputTextComponent,\n            required: true,\n            width: \"100%\",\n            value: this.journalData ? this.journalData.title : \"\",\n          },\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"subtitle\",\n            label: \"Subtítulo\",\n            type: FormFieldType.text,\n            controlType: InputTextComponent,\n            required: false,\n            width: \"30%\",\n            startHint: new HintValue(HintPosition.start, \"\"),\n            value: this.journalData ? this.journalData.subtitle : \"\",\n          },\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"shortname\",\n            label: \"Título abreviado\",\n            type: FormFieldType.text,\n            controlType: InputTextComponent,\n            required: false,\n            width: \"30%\",\n            startHint: new HintValue(HintPosition.start, \"\"),\n            value: this.journalData ? this.journalData.shortname : \"\",\n          },\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"source_type\",\n            label: \"Tipo de Revista\",\n            type: FormFieldType.select_expr,\n            controlType: SelectComponent,\n            required: true,\n            width: \"30%\",\n            value: this.journalData ? this.journalData.source_type : \"\",\n            extraContent: {\n              multiple: false,\n              getOptions: () => {\n                return [\n                  {\n                    label: SourceTypes.JOURNAL.label,\n                    value: SourceTypes.JOURNAL.value,\n                  },\n                  {\n                    label: SourceTypes.STUDENT.label,\n                    value: SourceTypes.STUDENT.value,\n                  },\n                  {\n                    label: SourceTypes.POPULARIZATION.label,\n                    value: SourceTypes.POPULARIZATION.value,\n                  },\n                ];\n              },\n            },\n          },\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"description\",\n            label: \"Descripción\",\n            type: FormFieldType.textarea,\n            controlType: TextareaComponent,\n            required: true,\n            width: \"100%\",\n            value: this.journalData ? this.journalData.description : \"\",\n          },\n          // {\n          //   name: 'purpose',\n          //   label: 'Propósito',\n          //   type: FormFieldType.textarea,\n          //   required: true,\n          //   width: '100%',\n          //   value: this.journalVersion ? this.journalVersion.purpose : ''\n          // },\n          {\n            formControl: InputUrlComponent.getFormControlByDefault(),\n            name: \"url\",\n            label: \"URL\",\n            type: FormFieldType.url,\n            controlType: InputUrlComponent,\n            required: true,\n            startHint: new HintValue(\n              HintPosition.start,\n              \"Escriba una URL válida.\"\n            ),\n            width: \"100%\",\n            value: this.journalData\n              ? this.journalData.getIdentifierValue(IdentifierSchemas.url)\n              : \"\",\n          },\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"source_system\",\n            label: \"Tipo de Sistema que soporta la revista\",\n            type: FormFieldType.select_expr,\n            controlType: SelectComponent,\n            required: false,\n            width: \"35%\",\n            value: this.journalData ? this.journalData.source_system : \"\",\n            extraContent: {\n              multiple: false,\n              getOptions: () => {\n                return [\n                  {\n                    label: SourceSystems.OJS.label,\n                    value: SourceSystems.OJS.value,\n                  },\n                  {\n                    label: SourceSystems.CMS.label,\n                    value: SourceSystems.CMS.value,\n                  },\n                  {\n                    label: SourceSystems.OTHER.label,\n                    value: SourceSystems.OTHER.value,\n                  },\n                ];\n              },\n            },\n          },\n          {\n            formControl: InputUrlComponent.getFormControlByDefault(),\n            name: \"oaiurl\",\n            label: \"OAI-PMH\",\n            type: FormFieldType.url,\n            controlType: InputUrlComponent,\n            required: false,\n            startHint: new HintValue(\n              HintPosition.start,\n              \"Escriba una URL válida.\"\n            ),\n            width: \"60%\",\n            value: this.journalData\n              ? this.journalData.getIdentifierValue(IdentifierSchemas.oaiurl)\n              : \"\",\n          },\n          // {\n          //   name: 'seriadas_cubanas',\n          //   label: 'URL en Seriadas Cubanas',\n          //   type: FormFieldType.url,\n          //   required: false,\n          //   startHint: new HintValue(HintPosition.start, ''),\n          //   width: '100%',\n          //   value: this.journalVersion ? this.journalVersion.seriadas_cubanas : ''\n          // },\n\n          {\n            formControl: InputEmailComponent.getFormControlByDefault(),\n            name: \"email\",\n            label: \"Correo Electrónico\",\n            type: FormFieldType.email,\n            controlType: InputEmailComponent,\n            required: true,\n            startHint: new HintValue(\n              HintPosition.start,\n              \"Escriba un email válido.\"\n            ),\n            width: \"45%\",\n            value: this.journalData ? this.journalData.email : \"\",\n          },\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"licence\",\n            label: \"Licencia\",\n            type: FormFieldType.vocabulary,\n            controlType: VocabularyComponent,\n            required: false,\n            width: \"45%\",\n            extraContent: {\n              multiple: false,\n              selectedTermsIds: this.journalData\n                ? this.journalData.classifications.map(\n                    (termSource) => termSource.id\n                  )\n                : null,\n              vocab: VocabulariesInmutableNames.LICENCES,\n              level: 0,\n            },\n          },\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"start_year\",\n            label: \"Año de inicio\",\n            type: FormFieldType.datepicker,\n            controlType: DatepickerComponent,\n            required: false,\n            width: \"30%\",\n            value: this.journalData ? this.journalData.start_year : \"\",\n          },\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"end_year\",\n            label: \"Año final\",\n            type: FormFieldType.datepicker,\n            controlType: DatepickerComponent,\n            required: false,\n            width: \"30%\",\n            value: this.journalData ? this.journalData.end_year : \"\",\n          },\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"frequency\",\n            label: \"Frecuencia\",\n            type: FormFieldType.text,\n            controlType: InputTextComponent,\n            required: false,\n            startHint: new HintValue(HintPosition.start, \"\"),\n            width: \"30%\",\n            value: this.journalData ? this.journalData.frequency : \"\",\n          },\n          // {\n          //   // TODO: el top level de unesco de materias....\n          //   name: \"cover\",\n          //   label: \"Cobertura Temática\",\n          //   type: FormFieldType.select_expr,\n          //   required: true,\n          //   width: \"45%\",\n          //   extraContent: {\n          //     multiple: false,\n          //     observable: this.taxonomyService.getTermsTreeByVocab(\n          //       VocabulariesInmutableNames.SUBJECTS,\n          //       0\n          //     ),\n          //     getOptions: (response: any) => {\n          //       const opts: SelectOption[] = [];\n          //       response.data.tree.term_node.forEach((node: TermNode) => {\n          //         opts.push({\n          //           value: node.term,\n          //           label: node.term.description,\n          //         });\n          //       });\n          //       return opts;\n          //     },\n          //     selectionChange: (term) => {\n          //       this.journalCover = new SourceClasification();\n          //       this.journalCover.description = term.description;\n          //       this.journalCover.id = term.uuid;\n          //       this.journalCover.vocabulary = term.vocabulary_id;\n\n          //     },\n          //   },\n          // },\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"subjects\",\n            label: \"Materias\",\n            type: FormFieldType.vocabulary_tree,\n            controlType: VocabularyTreeComponent,\n            required: false,\n            width: \"80%\",\n            extraContent: {\n              multiple: true,\n              selectedTermsIds: this.journalData\n                ? this.journalData.classifications.map(\n                    (termSource) => termSource.id\n                  )\n                : null,\n              vocab: VocabulariesInmutableNames.SUBJECTS,\n              level: 1,\n            },\n          },\n          {\n            formControl: InputUrlComponent.getFormControlByDefault(),\n            name: \"facebook\",\n            label: \"Facebook\",\n            type: FormFieldType.url,\n            controlType: InputUrlComponent,\n            required: false,\n            width: \"33%\",\n            value: this.journalData\n              ? this.journalData.socialNetworks.facebook\n              : \"\",\n          },\n          {\n            formControl: InputUrlComponent.getFormControlByDefault(),\n            name: \"twitter\",\n            label: \"Twitter\",\n            type: FormFieldType.url,\n            controlType: InputUrlComponent,\n            required: false,\n            width: \"33%\",\n            value: this.journalData\n              ? this.journalData.socialNetworks.twitter\n              : \"\",\n          },\n          {\n            formControl: InputUrlComponent.getFormControlByDefault(),\n            name: \"linkedin\",\n            label: \"LinkedIN\",\n            type: FormFieldType.url,\n            controlType: InputUrlComponent,\n            required: false,\n            width: \"33%\",\n            value: this.journalData\n              ? this.journalData.socialNetworks.linkedin\n              : \"\",\n          }\n        ],\n      };\n      // {\n      //   title: \"Redes Sociales\",\n      //   description: \"\",\n      //   iconName: \"\",\n      //   formSection: this.informationFormGroup,\n      //   formSectionContent: [\n      //     {\n      //       name: \"facebook\",\n      //       label: \"Facebook\",\n      //       type: FormFieldType.url,\n      //       required: false,\n      //       width: \"33%\",\n      //       value: this.journalData\n      //         ? this.journalData.socialNetworks.facebook\n      //         : \"\",\n      //     },\n      //     {\n      //       name: \"twitter\",\n      //       label: \"Twitter\",\n      //       type: FormFieldType.url,\n      //       required: false,\n      //       width: \"33%\",\n      //       value: this.journalData\n      //         ? this.journalData.socialNetworks.twitter\n      //         : \"\",\n      //     },\n      //     {\n      //       name: \"linkedin\",\n      //       label: \"LinkedIN\",\n      //       type: FormFieldType.url,\n      //       required: false,\n      //       width: \"33%\",\n      //       value: this.journalData\n      //         ? this.journalData.socialNetworks.linkedin\n      //         : \"\",\n      //     },\n      //   ],\n      // },\n\n  }\n\n  initStep2() {\n    this.organizationFormGroup = this.formBuilder.group({\n      institutions: new FormControl(\"\"),\n    });\n  }\n\n  initStep3() {\n    this.indexesFormGroup = this.formBuilder.group({});\n  }\n  indexerStepper() {\n    // console.log(this.journalData);\n\n    // this.indexes = this.journalData.classifications.filter(\n    //   (value) => value.vocabulary == VocabulariesInmutableNames.INDEXES\n    // );\n    // console.log(this.indexes);\n  }\n\n  initStepFinal() {\n    this.finalFormGroup = this.formBuilder.group({});\n    this.finalPanel =\n      {\n        name: 'finalPanel',\n        label: '',\n        description: \"\",\n        iconName: \"\",\n        formSection: this.finalFormGroup,\n        controlType: ContainerPanelComponent,\n        formSectionContent: [\n          {\n            formControl: InputTextComponent.getFormControlByDefault(),\n            name: \"comment\",\n            label: \"Puede agregar aquí un comentario.\",\n            type: FormFieldType.textarea,\n            controlType: TextareaComponent,\n            required: false,\n            startHint: new HintValue(HintPosition.start, \"\"),\n            width: \"100%\",\n            minWidth: \"100%\",\n            value: this.journalData ? this.journalData._save_info.comment : \"\",\n          },\n        ],\n      };\n  }\n\n  private fillJournalFields() {\n    // this.journalVersion.source_type = this.informationFormGroup.value['source_type'];\n\n    this.journalData.setIdentifierValue(\n      IdentifierSchemas.issn_p,\n      this.identifiersFormGroup.value.issn_p\n    );\n    this.journalData.setIdentifierValue(\n      IdentifierSchemas.issn_e,\n      this.identifiersFormGroup.value.issn_e\n    );\n    this.journalData.setIdentifierValue(\n      IdentifierSchemas.issn_l,\n      this.identifiersFormGroup.value.issn_l\n    );\n    this.journalData.setIdentifierValue(\n      IdentifierSchemas.prnps,\n      this.identifiersFormGroup.value.rnps_p\n    );\n    this.journalData.setIdentifierValue(\n      IdentifierSchemas.ernps,\n      this.identifiersFormGroup.value.rnps_e\n    );\n\n    // this.journalVersion.issn.deepcopy(\n    //   this.identifiersFormGroup.value\n    // );\n    // this.journalVersion.rnps.deepcopy(\n    //   this.identifiersFormGroup.value\n    // );\n\n    console.log(this.informationFormGroup)\n    this.journalData.deepcopy(this.informationFormGroup.value);\n    this.journalData.socialNetworks.deepcopy(this.informationFormGroup.value);\n\n    this.journalData.setIdentifierValue(\n      IdentifierSchemas.url,\n      this.informationFormGroup.value.url\n    );\n    this.journalData.setIdentifierValue(\n      IdentifierSchemas.oaiurl,\n      this.informationFormGroup.value.oaiurl\n    );\n\n    this.journalData.source_type = this.informationFormGroup.value[\n      \"source_type\"\n    ];\n\n    const indexes = this.journalData.classifications.filter(\n      (value) => value.vocabulary == VocabulariesInmutableNames.INDEXES\n    );\n    this.journalData.classifications = [];\n\n    if (this.informationFormGroup.value[\"licence\"]){\n        this.informationFormGroup.value[\"licence\"].forEach((term: Term) => {\n        const ts = new SourceClasification();\n        ts.description = term.description;\n        ts.id = term.uuid;\n        ts.vocabulary = term.vocabulary_id;\n        this.journalData.classifications.push(ts);\n      });\n    }\n    // this.informationFormGroup.value[\"cover\"].forEach((term) => {\n    //   const ts = new SourceClasification();\n    //   ts.description = term.description;\n    //   ts.id = term.uuid;\n    //   ts.vocabulary = term.vocabulary_id;\n    //   this.journalData.classifications.push(ts);\n    // });\n\n    if (this.informationFormGroup.value[\"subjects\"]){\n      this.informationFormGroup.value[\"subjects\"].forEach((term) => {\n        const ts = new SourceClasification();\n        ts.description = term.description;\n        ts.id = term.uuid;\n        ts.vocabulary = term.vocabulary_id;\n        this.journalData.classifications.push(ts);\n      });\n\n    }\n\n    console.log(indexes);\n    this.journalData.classifications = this.journalData.classifications.concat(\n      indexes\n    );\n    // this.journalData.organizations = this.source.data.organizations;\n\n    // this.organizationFormGroup.value[\n    //   \"institutions\"\n    // ].forEach((panel: JournalInstitutionsPanel) => {\n    //   const ts = new SourceClasification();\n    //   ts.deepcopy(panel.inst);\n    //   ts.term_id = panel.inst.term.id;\n    //   ts.source_id = this.journalVersion.source_id;\n    //   this.journalVersion.classifications.push(ts);\n\n    // }\n    // );\n\n    // this.institutions.forEach(inst => {\n    //   this.journalVersion.classifications.push(inst);\n    // });\n    // console.log(this.indexesPanel);\n    // this.indexesPanel.forEach(panel => {\n    //   const ts = new SourceClasification();\n    //   const term: Term = panel.value;\n    //   ts.description = term.description;\n    //   ts.id = term.uuid;\n    //   ts.vocabulary = term.vocabulary_id;\n    //   ts.data['url'] = this.indexesFormGroup.value['url_' + ts.id];\n    //   ts.data['initial_cover'] = this.indexesFormGroup.value[\n    //     'initial_cover_' + ts.id\n    //   ];\n    //   ts.data['end_cover'] = this.indexesFormGroup.value[\n    //     'end_cover_' + ts.id\n    //   ];\n    //   this.journalData.classifications.push(ts);\n    // });\n\n    this.journalData._save_info.comment = this.finalFormGroup.value[\"comment\"];\n    this.journalVersion.comment = this.finalFormGroup.value[\"comment\"];\n    this.journalVersion.data.deepcopy(this.journalData);\n\n    console.log(this.identifiersFormGroup);\n    console.log(this.informationFormGroup);\n    console.log(this.organizationFormGroup);\n    console.log(this.indexesFormGroup);\n    console.log(this.journalData);\n  }\n\n  public finishStepper() {\n    console.log(this.journalData);\n    // console.log(this.journalVersion, this)\n    this.fillJournalFields();\n\n    console.log(this.journalData);\n    this.journalEditDone.emit(this.journalVersion);\n  }\n  public cancelStepper() {\n    this.editCanceled.emit(true);\n  }\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { SourceClasification } from '../../entities/public-api';\n\n/**\n * This component share the same scss that `JournalViewComponent`.\n * His goal is show a list of `terms`\n */\n@Component({\n    selector: 'toco-journal-view-term',\n    templateUrl: './journal-view-term.component.html',\n    styleUrls: ['./journal-view.component.scss']\n})\nexport class JournalViewTermComponent implements OnInit {\n\n    @Input() public title: string;\n\n    @Input() public vocab_id: number;\n\n    @Input() public terms: Array<SourceClasification>;\n\n    constructor() {\n\n    }\n\n    ngOnInit(): void {\n        if (this.terms == undefined) this.terms = new Array<SourceClasification>(0);\n\n        if (this.vocab_id == undefined) this.vocab_id = 0;\n\n        if (this.title == undefined) this.title = '';\n    }\n}\n\n","import { Component, OnInit, Input, Inject } from '@angular/core';\nimport { FormGroup, FormBuilder } from '@angular/forms';\nimport { MatDialog, MAT_DIALOG_DATA } from '@angular/material';\nimport { TaxonomyService } from '../../../backend/public-api';\nimport { SourceData, TermNode, Term, SourceClasification, VocabulariesInmutableNames } from '../../../entities/public-api';\nimport { PanelContent_Depr, FormContainerAction, InputTextComponent, FormFieldType, SelectComponent, SelectOption, InputUrlComponent, HintValue, HintPosition } from '../../../forms/public-api';\n\n\n@Component({\n  selector: \"toco-source-indexes\",\n  templateUrl: './source-indexes.component.html',\n  styleUrls: ['./source-indexes.component.scss'],\n})\nexport class SourceIndexesComponent implements OnInit {\n\n  @Input()\n  public sourceData: SourceData;\n  @Input()\n  public editable: boolean = true;\n\n  /*\n    el arbol entero de los indexes\n    el primer nivel se considera que es una clasificacion del index, por ejemplo\n        {\n          \"children\": {...}\n          \"term\": {\n            \"clasified_ids\": [],\n            \"class_ids\": [],\n            \"data\": null,\n            \"description\": \"WoS / Scopus\",\n            \"id\": 4355,\n            \"name\": \"http://miar.ub.edu/databases/GRUPO/G\",\n            \"parent_id\": null,\n            \"uuid\": \"a4aae8a2-b65d-4313-b666-5ef4170fc549\",\n            \"vocabulary_id\": \"INDEXES\"\n          }\n        }\n    en el segundo nivel (children) estan los indices(bases de datos) que realmente clasifican a las fuentes\n  */\n  databases: TermNode[] = null;\n\n  /*\n    cada elemento de este array tiene:\n    dbclass, que es un termino del primer nivel de databases,\n    dblist, son las clasificaciones de las fuentes con los correspondientes datos,\n      los terminos correspondientes de los elementos de dblist son hijos de dbclass en databses\n  */\n  selectedDatabases: Array<{ dbclass: Term, dblist: SourceClasification[] }> = null;\n\n  constructor(public dialog: MatDialog, private service: TaxonomyService) { }\n\n\n  ngOnInit() {\n    this.service.getTermsTreeByVocab(VocabulariesInmutableNames.INDEXES, 1).subscribe(\n      (response) => {\n        if (response.data.tree.term_node) {\n          this.databases = response.data.tree.term_node;\n          this.initIndexes();\n        }\n      },\n      (err: any) => {\n        console.log(\n          'ERROR: ' + err + '.'\n        );\n      },\n\n      () => {\n      }\n    );\n  }\n\n  public initIndexes(){\n\n    this.selectedDatabases = new Array(this.databases.length);\n    this._setSelectedDatabses();\n    this._setIndexesToSource();\n    console.log('******* complete process');\n  }\n\n  /**\n   * divide los source.classifications que son de INDEXES\n   * en el arreglo selectedDatabases, cuyos elementos tienen\n   * dbclass, que es el primer nivel\n   * dblist, que son los SourceClassification seleccionados e hijos de dbclass\n   */\n  private _setSelectedDatabses() {\n    for (let i = 0; i < this.databases.length; i++) {\n      this.selectedDatabases[i] = {\n        dbclass: this.databases[i].term,\n        dblist: this.sourceData.classifications.filter(\n          value =>\n            value.vocabulary == VocabulariesInmutableNames.INDEXES &&\n            this.databases[i].children.find(db => db.term.uuid == value.id) != undefined\n        )\n      };\n    }\n    for (let i = 0; i < this.databases.length; i++) {\n      for (let k = 0; k < this.selectedDatabases[i].dblist.length; k++) {\n        const element = this.selectedDatabases[i].dblist[k];\n        if (!this.selectedDatabases[i].dblist[k].data){\n          this.selectedDatabases[i].dblist[k].data = {};\n        }\n        if (!this.selectedDatabases[i].dblist[k].data['url']){\n          this.selectedDatabases[i].dblist[k].data['url']='';\n        }\n        if (!this.selectedDatabases[i].dblist[k].data['initial_cover']){\n          this.selectedDatabases[i].dblist[k].data['initial_cover']='';\n        }\n        if (!this.selectedDatabases[i].dblist[k].data['end_cover']){\n          this.selectedDatabases[i].dblist[k].data['end_cover']='';\n        }\n\n      }\n\n    }\n  }\n\n  /**\n   * mantiene la lista sourceData.classification bien formada en relacion con lo que hay en selectedDatabases\n   */\n  private _setIndexesToSource() {\n    // filtra las clasificaciones que no sean indexes\n    this.sourceData.classifications = this.sourceData.classifications.filter(\n      value => value.vocabulary != VocabulariesInmutableNames.INDEXES\n    );\n\n\n    this.selectedDatabases.forEach(element => {\n      // por cada elemento en selectedDatabases, si tiene algun elemento en dblist\n      // entonces dbclass y dblist tambien son parte de sourceData.classifications\n      if (element.dblist.length > 0) {\n        const parent = new SourceClasification();\n        parent.id = element.dbclass.uuid;\n        parent.description = element.dbclass.description;\n        parent.vocabulary = element.dbclass.vocabulary_id;\n        this.sourceData.classifications.push(parent);\n        this.sourceData.classifications = this.sourceData.classifications.concat(element.dblist);\n\n      }\n    });\n    console.log(this.sourceData);\n\n  }\n\n  public addIndexAction(dbclassIndex: number) {\n    const dbclass = this.selectedDatabases[dbclassIndex].dbclass;\n    const options: TermNode[] = this.databases[dbclassIndex].children.filter(\n      value =>\n        this.selectedDatabases[dbclassIndex].dblist.find(db => db.id == value.term.uuid) == undefined\n    );\n    if (options.length > 0) {\n      this.dialog.open(SourceEditAddIndexComponent, {\n        data: {\n          dbclass: this.selectedDatabases[dbclassIndex].dbclass,\n          options: options,\n          editing: null,\n          addIndex: (result: SourceClasification) => {\n            this.dialog.closeAll();\n            this.selectedDatabases[dbclassIndex].dblist = this.selectedDatabases[dbclassIndex].dblist.filter(\n              value => value.id != result.id);\n            this.selectedDatabases[dbclassIndex].dblist.push(result);\n            this._setIndexesToSource();\n          },\n        },\n      });\n    }\n\n  }\n\n  public editIndexAction(dbclassIndex: number, editing: SourceClasification) {\n    const dbclass = this.selectedDatabases[dbclassIndex].dbclass;\n    if (editing) {\n      // this.selectedDatabases[dbclassIndex].dblist = this.selectedDatabases[dbclassIndex].dblist.filter(\n      //   value => value.id != editing.id\n      // );\n\n      const options: TermNode[] = this.databases[dbclassIndex].children.filter(\n        value =>\n          this.selectedDatabases[dbclassIndex].dblist.find(db => db.id == value.term.uuid) == undefined ||\n          value.term.uuid == editing.id\n      );\n      if (options.length > 0 || editing) {\n        this.dialog.open(SourceEditAddIndexComponent, {\n          data: {\n            dbclass: this.selectedDatabases[dbclassIndex].dbclass,\n            options: options,\n            editing: editing,\n            addIndex: (result: SourceClasification) => {\n              this.dialog.closeAll();\n              // console.log('----------------------------',this.selectedDatabases[dbclassIndex].dblist);\n\n              const newSelected = [];\n              this.selectedDatabases[dbclassIndex].dblist.forEach(element => {\n                if (element.id != result.id && element.id != editing.id){\n                  newSelected.push(element);\n                }\n              });\n              this.selectedDatabases[dbclassIndex].dblist = newSelected;\n              // this.selectedDatabases[dbclassIndex].dblist = this.selectedDatabases[dbclassIndex].dblist.filter(\n              //   value => (value.id == result.id && value.id == editing.id));\n\n              // console.log('++++++++++++++++++++++',this.selectedDatabases[dbclassIndex].dblist);\n\n              this.selectedDatabases[dbclassIndex].dblist.push(result);\n              // console.log('*********************',this.selectedDatabases[dbclassIndex].dblist);\n              this._setIndexesToSource();\n            },\n          },\n        });\n      }\n    }\n  }\n  deleteIndexAction(dbclassIndex: number, toDelete: SourceClasification) {\n    // console.log('DELETE', toDelete);\n\n    this.selectedDatabases[dbclassIndex].dblist = this.selectedDatabases[dbclassIndex].dblist.filter(value => value.id != toDelete.id);\n    this._setIndexesToSource();\n  }\n}\n\n@Component({\n  selector: \"toco-source-addindex\",\n  styleUrls: ['./source-indexes.component.scss'],\n  template: `\n    <toco-form-container\n      #indexPanelContainer\n      [panelsContent]=\"indexPanel\"\n      [useAccordion]=\"false\"\n      fxLayout=\"row\"\n      [formGroup]=\"indexFormGroup\"\n      [action]=\"addIndexAction\"\n      [actionLabel]=\"'OK'\"\n      [deleteValuesAfterAction]=\"false\"\n    ></toco-form-container>\n  `,\n})\nexport class SourceEditAddIndexComponent implements OnInit {\n  indexPanel: PanelContent_Depr[] = null;\n  indexFormGroup: FormGroup;\n\n  addIndexAction: FormContainerAction;\n\n  dbclass: Term;\n  options: TermNode[];\n  editing: SourceClasification = null;\n  addIndex;\n\n  constructor(\n    private service: TaxonomyService,\n    private _formBuilder: FormBuilder,\n    @Inject(MAT_DIALOG_DATA) public data: any\n  ) {\n    // console.log(data);\n\n    this.dbclass = data.dbclass;\n    this.options = data.options;\n    if (data.editing) {\n      this.editing = data.editing;\n    }\n    this.addIndex = data.addIndex;\n\n\n  }\n\n  ngOnInit() {\n    this.indexFormGroup = this._formBuilder.group({});\n    if (this.dbclass) {\n      this.indexPanel = [\n        {\n          title: (this.editing) ? 'Editar' : 'Adicionar',\n          description: '',\n          iconName: '',\n          formSection: this.indexFormGroup,\n          formSectionContent: [\n            {\n              formControl: InputTextComponent.getFormControlByDefault(),\n              name: 'indexes',\n              label: this.dbclass.description,\n              type: FormFieldType.select_expr,\n              controlType: SelectComponent,\n              required: true,\n              width: '100%',\n              value: (this.editing) ? this.editing.id : null,\n              extraContent: {\n                multiple: false,\n                getOptions: (response: any) => {\n                  const opts: SelectOption[] = [];\n                  this.options.forEach((node: TermNode) => {\n                    opts.push({\n                      value: node.term.uuid,\n                      label: node.term.description,\n                    });\n                  });\n                  return opts;\n                },\n                selectionChange: (value) => {\n                  console.log(value);\n                }\n              }\n            },\n            {\n              formControl: InputUrlComponent.getFormControlByDefault(),\n              name: 'url',\n              label: 'URL',\n              type: FormFieldType.url,\n              controlType: InputUrlComponent,\n              required: false,\n              startHint: new HintValue(\n                HintPosition.start,\n                'URL de la revista en el índice.'\n              ),\n              width: '100%',\n              value: (this.editing) ? [this.editing.data['url']] : '',\n            },\n            {\n              formControl: InputTextComponent.getFormControlByDefault(),\n              name: 'initial_cover',\n              label: 'Cobertura inicio',\n              type: FormFieldType.text,\n              controlType: InputTextComponent,\n              required: false,\n              startHint: new HintValue(HintPosition.start, ''),\n              width: '45%',\n              value: (this.editing) ? [this.editing.data['initial_cover']] : '',\n            },\n            {\n              formControl: InputTextComponent.getFormControlByDefault(),\n              name: 'end_cover',\n              label: 'Cobertura',\n              type: FormFieldType.text,\n              controlType: InputTextComponent,\n              required: false,\n              startHint: new HintValue(HintPosition.start, ''),\n              width: '45%',\n              value: (this.editing) ? [this.editing.data['end_cover']] : '',\n            },\n          ],\n        },\n      ];\n    }\n\n\n    this.addIndexAction = {\n      doit: (data: any) => {\n        if (this.indexFormGroup.valid) {\n          const result = new SourceClasification();\n          // console.log(this.indexFormGroup);\n\n          if (this.indexFormGroup.controls['indexes'].value) {\n            const node = this.options.find(value => value.term.uuid == this.indexFormGroup.controls['indexes'].value);\n            if (node) {\n              result.vocabulary = node.term.vocabulary_id;\n              result.description = node.term.description;\n              result.id = node.term.uuid;\n              result.data = {\n                url: this.indexFormGroup.controls['url'].value,\n                initial_cover: this.indexFormGroup.controls['initial_cover'].value,\n                end_cover: this.indexFormGroup.controls['end_cover'].value,\n              };\n              this.addIndex(result);\n            }\n          }\n        }\n\n      },\n    };\n  }\n}\n","import { Component, OnInit, Input, Inject } from \"@angular/core\";\n\nimport { MatDialogRef, MAT_DIALOG_DATA, MatDialog } from \"@angular/material\";\nimport { OrganizationServiceNoAuth } from '../../../backend/public-api';\nimport { MessageHandler, StatusCode, HandlerComponent } from '../../../core/public-api';\nimport { SourceData, Organization, SourceOrganizationRole, SourceOrganization, OrganizationRelationships, Relationship } from '../../../entities/public-api';\n\n\n@Component({\n  selector: \"toco-source-organizations\",\n  templateUrl: \"./source-organizations.component.html\",\n  styleUrls: [\"./source-organizations.component.scss\"],\n})\nexport class SourceOrganizationsComponent implements OnInit {\n  @Input()\n  public sourceData: SourceData;\n\n  @Input()\n  public editable: boolean = true;\n\n  @Input()\n  public topMainOrganization: Organization = null;\n\n  public roles = SourceOrganizationRole;\n  constructor(\n    public dialog: MatDialog,\n    private orgService: OrganizationServiceNoAuth\n  ) {}\n\n  ngOnInit() {\n    console.log(this.sourceData.organizations);\n    this.sourceData.organizations = this.sourceData.organizations.filter(\n      (element) => element && element.role\n    );\n    console.log(this.sourceData.organizations);\n  }\n\n  addOrg(cuban = true, topMain = false) {\n    if (topMain && this.topMainOrganization) {\n      this.dialog.open(SourceOrganizationSelectTopDialog, {\n        width: \"500px\",\n        data: {\n          topMainOrganization: this.topMainOrganization,\n          selectOrg: (org: Organization, parents: Array<Organization>) => {\n            this.addOrgToSource(org, SourceOrganizationRole.MAIN.value);\n            parents.forEach((element) => {\n              this.addOrgToSource(\n                element,\n                SourceOrganizationRole.COLABORATOR.value\n              );\n            });\n          },\n        },\n      });\n    } else {\n      this.dialog.open(SourceOrganizationSelectDialog, {\n        width: \"500px\",\n        data: {\n          filter: cuban ? { type: \"country\", value: \"Cuba\" } : null,\n          canSelectRole: this.topMainOrganization == null,\n          selectOrg: (\n            org: Organization,\n            role,\n            parents: Array<Organization>\n          ) => {\n            this.addOrgToSource(org, role);\n            parents.forEach((element) => {\n              this.addOrgToSource(\n                element,\n                SourceOrganizationRole.COLABORATOR.value\n              );\n            });\n          },\n        },\n      });\n    }\n  }\n  private addOrgToSource(org: Organization, role) {\n    if (!this.sourceData.organizations.find((o) => o.id == org.id)) {\n      let selected = new SourceOrganization();\n      selected.deepcopy(org);\n      selected.role = role;\n      this.sourceData.organizations.push(selected);\n      if (SourceOrganizationRole.MAIN.value == role) {\n        this.setAsMain(org);\n      }\n    }\n  }\n  setAsMain(organization: Organization) {\n    this.sourceData.organizations.forEach((element) => {\n      if (organization.id == element.id) {\n        element.role = SourceOrganizationRole.MAIN.value;\n      } else {\n        element.role = SourceOrganizationRole.COLABORATOR.value;\n      }\n    });\n  }\n\n  removeInst(index) {\n    const organization = this.sourceData.organizations[index];\n    const m = new MessageHandler(null, this.dialog);\n    const child = this.childToRemove(organization);\n    if (child == null) {\n      let parents = this.getOrgToDelete(organization);\n      let toDelete = [];\n      let msg = \"\";\n      for (let i = 0; i < parents.length; i++) {\n        const element = parents[i];\n        toDelete.push(this.sourceData.organizations[element]);\n        msg += this.sourceData.organizations[element].name + \", \";\n      }\n      toDelete.push(organization);\n      console.log(toDelete);\n      if(toDelete.length>0){\n        m.showMessage(\n          StatusCode.OK,\n          msg,\n          HandlerComponent.dialog,\n          \"Se eliminó también: \"\n        );\n      }\n\n      let orgs = [];\n      for (let i = 0; i < this.sourceData.organizations.length; i++) {\n        if (\n          !toDelete.find((o) => o.id == this.sourceData.organizations[i].id)\n        ) {\n          orgs.push(this.sourceData.organizations[i]);\n        }\n      }\n      console.log(orgs);\n      this.sourceData.organizations = orgs;\n      // this.sourceData.organizations = this.sourceData.organizations.filter(\n      //   (o) => o.id != organization.id\n      // );\n    } else {\n      m.showMessage(\n        StatusCode.OK,\n        child.name,\n        HandlerComponent.dialog,\n        \"Para eliminar este elemento debe eliminar:\"\n      );\n    }\n  }\n\n  private childToRemove(org: Organization) {\n    // se puede eliminar si no tiene hijos en el sourceData.organizations\n    let result = true;\n\n    if (org.relationships) {\n      for (let index = 0; index < org.relationships.length; index++) {\n        const element = org.relationships[index];\n        if (element.type == OrganizationRelationships.CHILD.value) {\n          const childIndex = this.getIndexByPid(element.identifiers[0].value);\n          if (childIndex != null) {\n            return this.sourceData.organizations[childIndex];\n          }\n        }\n      }\n      return null;\n    }\n  }\n  // removeInst(index) {\n  //   let toDelete = []\n  //   toDelete.push(index);\n  //   toDelete.concat(this.getOrgToDelete(this.sourceData.organizations[index]));\n  //   let orgs = [];\n  //   for (let i = 0; i < this.sourceData.organizations.length; i++) {\n  //     if(!toDelete.find((o) => o == i)){\n  //       orgs.push(this.sourceData.organizations[i]);\n  //     }\n  //   }\n  //   this.sourceData.organizations = orgs;\n  // }\n\n  private getOrgToDelete(org: Organization) {\n    let toDelete = [];\n    if (org.relationships) {\n      org.relationships.forEach((element) => {\n        if (element.type == OrganizationRelationships.PARENT.value) {\n          const parentIndex = this.getIndexByPid(element.identifiers[0].value);\n          if (parentIndex) {\n            toDelete.push(parentIndex);\n            toDelete.concat(\n              this.getOrgToDelete(this.sourceData.organizations[parentIndex])\n            );\n          }\n        }\n      });\n    }\n\n    return toDelete;\n  }\n\n  private getIndexByPid(pid) {\n    for (let index = 0; index < this.sourceData.organizations.length; index++) {\n      const element = this.sourceData.organizations[index];\n      for (\n        let pidindex = 0;\n        pidindex < element.identifiers.length;\n        pidindex++\n      ) {\n        const identifier = element.identifiers[pidindex];\n        console.log(identifier.value + \"==\" + pid);\n        if (identifier.value == pid) {\n          console.log(identifier.value + \"==\" + pid + \"  iguales!!!\");\n          return index;\n        }\n      }\n    }\n    return null;\n  }\n}\n\n@Component({\n  selector: \"toco-source-organizations-select-top-main\",\n  template: `<mat-dialog-content class=\"height-auto\">\n    <ng-container *ngIf=\"toSelect\"\n      >{{ topMainOrganization.name }}\n      <br />\n      <mat-form-field>\n        <mat-label>Seleccione la Organización Principal: </mat-label>\n        <mat-select [(value)]=\"selected\" required>\n          <mat-option\n            *ngFor=\"let item of toSelect; let index = index\"\n            value=\"{{ index }}\"\n            >{{ item.label }}</mat-option\n          >\n        </mat-select>\n      </mat-form-field>\n\n      <br />\n      <mat-label *ngIf=\"selected >= 0\">{{\n        toSelect[selected].label\n      }}</mat-label>\n      <br />\n    </ng-container>\n    <br />\n    <button mat-raised-button (click)=\"ok()\">OK</button>\n  </mat-dialog-content>`,\n})\nexport class SourceOrganizationSelectTopDialog implements OnInit {\n  constructor(\n    public dialogRef: MatDialogRef<SourceOrganizationSelectTopDialog>,\n    @Inject(MAT_DIALOG_DATA) public data: any,\n    private orgService: OrganizationServiceNoAuth\n  ) {}\n\n  public topMainOrganization: Organization = null;\n  public toSelect: Array<Relationship> = null;\n  public selected = -1;\n\n  ngOnInit(): void {\n    this.topMainOrganization = this.data.topMainOrganization;\n    this.toSelect = new Array<Relationship>();\n    this.topMainOrganization.relationships.forEach((element) => {\n      if (element.type == OrganizationRelationships.CHILD.value) {\n        this.toSelect.push(element);\n      }\n    });\n    console.log(this.toSelect);\n  }\n  onNoClick(): void {\n    this.dialogRef.close();\n  }\n\n  public ok() {\n    // let selected = new SourceOrganization()\n    // selected.organization = org;\n    // selected.role = SourceOrganizationRole.MAIN.value;\n    if (this.selected >= 0) {\n      console.log(this.toSelect[this.selected]);\n      this.orgService\n        .getOrganizationByPID(this.toSelect[this.selected].identifiers[0].value)\n        .subscribe({\n          next: (response) => {\n            this.data.selectOrg(response.metadata, [this.topMainOrganization]);\n            this.dialogRef.close();\n          },\n        });\n    }\n  }\n}\n\n@Component({\n  selector: \"toco-source-organizations-select-dialog\",\n  template: `<mat-dialog-content class=\"height-auto\">\n    <toco-org-search\n      [orgFilter]=\"data.filter\"\n      (selectedOrg)=\"selectedOrg($event)\"\n      [placeholder]=\"placeholder\"\n    >\n    </toco-org-search>\n    <br />\n    <mat-label *ngIf=\"org\">{{ org.name }}</mat-label>\n    <br />\n    <mat-form-field *ngIf=\"canSelectRole\">\n      <mat-label>Rol</mat-label>\n      <mat-select [(value)]=\"role\" required>\n        <mat-option *ngFor=\"let item of roles\" value=\"{{ item.value }}\">{{\n          item.label\n        }}</mat-option>\n      </mat-select>\n    </mat-form-field>\n\n    <br />\n\n    <ng-container *ngIf=\"parents.length > 0\">\n      <mat-label>Se añadirá también: </mat-label>\n      <ng-container *ngFor=\"let item of parents\">\n        <br />\n        <mat-label>{{ item.name }}</mat-label>\n        <br />\n      </ng-container>\n      <br />\n    </ng-container>\n\n    <button mat-raised-button (click)=\"ok()\">OK</button>\n  </mat-dialog-content>`,\n})\nexport class SourceOrganizationSelectDialog implements OnInit {\n  constructor(\n    public dialogRef: MatDialogRef<SourceOrganizationSelectDialog>,\n    @Inject(MAT_DIALOG_DATA) public data: any,\n    private orgService: OrganizationServiceNoAuth\n  ) {}\n\n  public roles = [\n    { label: \"Principal\", value: \"MAIN\" },\n    { label: \"Colaborador\", value: \"COLABORATOR\" },\n  ];\n  public role = null;\n  public org: Organization;\n  public parents: Array<Organization> = new Array<Organization>();\n  placeholder = \"Buscar una organización\";\n  public canSelectRole = true;\n\n  ngOnInit(): void {\n    console.log(this.data);\n    this.canSelectRole = this.data.canSelectRole;\n    if (this.data.filter) {\n      this.placeholder = \"Buscar una organización cubana\";\n    }\n  }\n  onNoClick(): void {\n    this.dialogRef.close();\n  }\n\n  public selectedOrg(org?: Organization): void {\n    console.log(org);\n    this.org = org;\n    this.addParent(this.org);\n  }\n  private addParent(child: Organization) {\n    child.relationships.forEach((p) => {\n      if (p.type == OrganizationRelationships.PARENT.value) {\n        if (p.identifiers.length > 0 && p.identifiers[0].value) {\n          this.orgService\n            .getOrganizationByPID(p.identifiers[0].value)\n            .subscribe({\n              next: (response) => {\n                console.log(response);\n                this.parents.push(response.metadata);\n                this.addParent(response.metadata);\n              },\n            });\n        }\n      }\n    });\n  }\n  public ok() {\n    // let selected = new SourceOrganization()\n    // selected.organization = org;\n    // selected.role = SourceOrganizationRole.MAIN.value;\n    if (this.canSelectRole) {\n      if (this.role) {\n        this.data.selectOrg(this.org, this.role, this.parents);\n        this.dialogRef.close();\n      }\n    } else {\n      this.data.selectOrg(\n        this.org,\n        SourceOrganizationRole.COLABORATOR.value,\n        this.parents\n      );\n      this.dialogRef.close();\n    }\n  }\n}\n","import { Component, OnInit, OnChanges, Input, ViewChild } from \"@angular/core\";\nimport { MatSnackBar } from '@angular/material';\nimport { SourceService } from '../../backend/public-api';\nimport { IdentifierSchemas } from '../../entities/common';\nimport { JournalVersion, JournalData, SourceTypes, SourceSystems, SourceClasification, VocabulariesInmutableNames } from '../../entities/public-api';\nimport { SourceIndexesComponent } from '../source-edit/source-indexes/source-indexes.component';\nimport { SourceOrganizationsComponent } from '../source-edit/source-organizations/source-organizations.component';\n\n/**\n * This component share the same scss that `JournalViewComponent`.\n * His goal, shows a Journal\n */\n@Component({\n  selector: \"toco-journal-view-info\",\n  templateUrl: \"./journal-view-info.component.html\",\n  styleUrls: [\"./journal-view.component.scss\"],\n})\nexport class JournalViewInfoComponent implements OnInit, OnChanges {\n  @Input() public journalVersion: JournalVersion;\n  @Input() public showVersionLabel: boolean = true;\n  public journalData: JournalData;\n\n  public tipos = SourceTypes;\n  public sistemas = SourceSystems;\n\n  /** TODO: In the future databaseTerms and subjectTerms will be changes by\n   *  miarTerms and subjectsUnescoTerms\n   *  public miarTerms: Array<SourceClasification>;\n   *  public subjectsUnescoTerms: Array<SourceClasification>;\n   */\n  public institutionTerms: Array<SourceClasification>;\n  public dataBaseTerms: Array<SourceClasification>;\n  public groupTerms: Array<SourceClasification>;\n  public provinceTerms: Array<SourceClasification>;\n  public subjectTerms: Array<SourceClasification>;\n  public licenceTerms: Array<SourceClasification>;\n\n  public vocabularies: typeof VocabulariesInmutableNames;\n  public panelOpenState = false;\n\n  public IdentifierSchemas = IdentifierSchemas;\n\n  @ViewChild(SourceOrganizationsComponent, { static: false })\n  orgs: SourceOrganizationsComponent;\n\n  @ViewChild(SourceIndexesComponent, { static: false })\n  indexes: SourceIndexesComponent;\n\n\n  constructor(\n    private _sourveService: SourceService,\n    private _snackBar: MatSnackBar\n  ) {}\n\n  ngOnInit(): void {\n    this.loadJournalData();\n  }\n  ngOnChanges(): void {\n    console.log(\"changes....\");\n    this.loadJournalData();\n  }\n  loadJournalData() {\n    if (this.journalData == undefined)\n      this.journalData = new JournalData();\n\n    this.journalData.deepcopy(this.journalVersion.data);\n\n    this.dataBaseTerms = new Array<SourceClasification>();\n    this.groupTerms = new Array<SourceClasification>();\n    this.institutionTerms = new Array<SourceClasification>();\n    this.licenceTerms = new Array<SourceClasification>();\n    this.provinceTerms = new Array<SourceClasification>();\n    this.subjectTerms = new Array<SourceClasification>();\n\n    this.vocabularies = VocabulariesInmutableNames;\n\n    if (this.journalData.classifications) {\n      this.journalData.classifications.forEach(\n        (term: SourceClasification) => {\n          switch (term.vocabulary.toString()) {\n            case VocabulariesInmutableNames.CUBAN_INTITUTIONS:\n            case VocabulariesInmutableNames.EXTRA_INSTITUTIONS:\n              this.institutionTerms.push(term);\n              break;\n            case VocabulariesInmutableNames.INDEXES:\n              this.dataBaseTerms.push(term);\n              break;\n            case VocabulariesInmutableNames.INDEXES_CLASIFICATION:\n              this.groupTerms.push(term);\n              break;\n            case VocabulariesInmutableNames.LICENCES:\n              this.licenceTerms.push(term);\n              break;\n            case VocabulariesInmutableNames.CUBAN_PROVINCES:\n              this.provinceTerms.push(term);\n              break;\n            case VocabulariesInmutableNames.SUBJECTS:\n              this.subjectTerms.push(term);\n              break;\n          }\n        }\n      );\n    }\n  }\n\n\n  getIdentifier(idtype: IdentifierSchemas) {\n      var r = this.journalData\n      ? this.journalData.getIdentifierValue(idtype)\n      : \"\";\n\n    return r;\n  }\n\n  editingJournalChange(newVersion: JournalVersion): void {\n    console.log(\"*****llego....\", newVersion, this.journalData);\n\n    this.loadJournalData();\n    this.orgs.ngOnInit();\n    this.indexes.initIndexes();\n  }\n}\n\n\n@Component({\n    selector: \"toco-journal-view-info-field\",\n    styleUrls: [\"./journal-view.component.scss\"],\n    template: `\n    <mat-label style=\"font-weight: bold;\">{{label}}: </mat-label>\n    <mat-label *ngIf=\"value\">\n      {{ value }}\n    </mat-label>\n    <mat-label\n      *ngIf=\"!value\"\n      class=\"text-muted text-through\"\n      >{{emptyLabel}}\n    </mat-label\n    >`\n  })\n  export class JournalViewInfoFieldComponent {\n    @Input()\n    label: string;\n    @Input()\n    value: string;\n    @Input()\n    emptyLabel: string = 'Vacío';\n  }\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\nimport { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { IdentifierSchemas } from '../../entities/common';\nimport { JournalVersion, JournalData } from '../../entities/public-api';\nimport { JournalDataType } from './journal-view.component';\n\n\n\n/**\n* This component share the same scss that `JournalViewComponent`.\n* His goal, handle the actions and how show a specific data of a `JournalData`\n*/\n@Component({\n    selector: 'toco-journal-view-version-field',\n    templateUrl: './journal-view-version-field.component.html',\n    styleUrls: ['./journal-view.component.scss']\n})\nexport class JournalViewFieldComponent implements OnInit {\n\n    @Input() public editingJournal: JournalVersion;\n\n    @Input() public currentJournal: JournalVersion;\n\n    @Input() public type: number;\n\n    @Output()\n    editingJournalChange = new EventEmitter<JournalVersion>();\n\n\n    public journalDataType = JournalDataType;\n    public IdentifierSchemas = IdentifierSchemas;\n\n    constructor() {\n\n    }\n\n    ngOnInit(): void {\n        if (this.editingJournal.data == undefined) this.editingJournal.data = new JournalData()\n\n        if (this.currentJournal.data == undefined) this.currentJournal.data = new JournalData();\n\n        if (this.type == undefined) this.type = JournalDataType.default;\n    }\n\n    /**\n * Replaces a `Journal` property by a equal property in `JournalData`.\n * @param type is a `JournalDataType` enum, that means, `type` has all properties of a `Journal` enumerated as identifyer.\n * @param concat is a `boolean`, by default in `false`. If his value is `true` means the fields will be concated and not replaced.\n * @NOTE The `terms` of a `Journal` can NOT replace because will be the same information and not have sense, only we can merge.\n */\n    public replace(type: number, concat: boolean = false) {\n        switch (type) {\n            case JournalDataType.description:\n                concat ?\n                    this.editingJournal.data.description += ' ' + this.currentJournal.data.description :\n                    this.editingJournal.data.description = this.currentJournal.data.description;\n                break;\n            case JournalDataType.email:\n                concat ?\n                    this.editingJournal.data.email += ' ' + this.currentJournal.data.email :\n                    this.editingJournal.data.email = this.currentJournal.data.email;\n                break;\n            case JournalDataType.end_year:\n                concat ?\n                    this.editingJournal.data.end_year += ' ' + this.currentJournal.data.end_year :\n                    this.editingJournal.data.end_year = this.currentJournal.data.end_year;\n                break;\n            case JournalDataType.facebook:\n                concat ?\n                    this.editingJournal.data.socialNetworks.facebook += ' ' + this.currentJournal.data.socialNetworks.facebook :\n                    this.editingJournal.data.socialNetworks.facebook = this.currentJournal.data.socialNetworks.facebook;\n                break;\n            case JournalDataType.frequency:\n                concat ?\n                    this.editingJournal.data.frequency += ' ' + this.currentJournal.data.frequency :\n                    this.editingJournal.data.frequency = this.currentJournal.data.frequency;\n                break;\n                case JournalDataType.issnP:\n                  concat ?\n                  this.editingJournal.data.setIdentifierValue(\n                    IdentifierSchemas.issn_p,\n                      this.editingJournal.data.getIdentifierValue(IdentifierSchemas.issn_p) +\n                      ' ' +\n                      this.currentJournal.data.getIdentifierValue(IdentifierSchemas.issn_p)) :\n                  this.editingJournal.data.setIdentifierValue(\n                    IdentifierSchemas.issn_p,\n                    this.currentJournal.data.getIdentifierValue(IdentifierSchemas.issn_p));\n                  break;\n                case JournalDataType.issnE:\n                concat ?\n                    this.editingJournal.data.setIdentifierValue(\n                      IdentifierSchemas.issn_e,\n                        this.editingJournal.data.getIdentifierValue(IdentifierSchemas.issn_e) +\n                        ' ' +\n                        this.currentJournal.data.getIdentifierValue(IdentifierSchemas.issn_e)) :\n                    this.editingJournal.data.setIdentifierValue(\n                      IdentifierSchemas.issn_e,\n                      this.currentJournal.data.getIdentifierValue(IdentifierSchemas.issn_e));\n                break;\n            case JournalDataType.issnL:\n                concat ?\n                this.editingJournal.data.setIdentifierValue(\n                  IdentifierSchemas.issn_l,\n                    this.editingJournal.data.getIdentifierValue(IdentifierSchemas.issn_l) +\n                    ' ' +\n                    this.currentJournal.data.getIdentifierValue(IdentifierSchemas.issn_l)) :\n                this.editingJournal.data.setIdentifierValue(\n                  IdentifierSchemas.issn_l,\n                  this.currentJournal.data.getIdentifierValue(IdentifierSchemas.issn_l));\n                break;\n                case JournalDataType.rnpsP:\n                  concat ?\n                  this.editingJournal.data.setIdentifierValue(\n                    IdentifierSchemas.prnps,\n                      this.editingJournal.data.getIdentifierValue(IdentifierSchemas.prnps) +\n                      ' ' +\n                      this.currentJournal.data.getIdentifierValue(IdentifierSchemas.prnps)) :\n                  this.editingJournal.data.setIdentifierValue(\n                    IdentifierSchemas.prnps,\n                    this.currentJournal.data.getIdentifierValue(IdentifierSchemas.prnps));\n                  break;\n              case JournalDataType.rnpsE:\n                  concat ?\n                  this.editingJournal.data.setIdentifierValue(\n                    IdentifierSchemas.ernps,\n                      this.editingJournal.data.getIdentifierValue(IdentifierSchemas.ernps) +\n                      ' ' +\n                      this.currentJournal.data.getIdentifierValue(IdentifierSchemas.ernps)) :\n                  this.editingJournal.data.setIdentifierValue(\n                    IdentifierSchemas.ernps,\n                    this.currentJournal.data.getIdentifierValue(IdentifierSchemas.ernps));\n                  break;\n            case JournalDataType.end_year:\n                concat ?\n                    this.editingJournal.data.end_year += ' ' + this.currentJournal.data.end_year :\n                    this.editingJournal.data.end_year = this.currentJournal.data.end_year;\n                break;\n            case JournalDataType.linkedin:\n                concat ?\n                    this.editingJournal.data.socialNetworks.linkedin += ' ' + this.currentJournal.data.socialNetworks.linkedin :\n                    this.editingJournal.data.socialNetworks.linkedin = this.currentJournal.data.socialNetworks.linkedin;\n                break;\n            case JournalDataType.logo:\n                concat ?\n                    this.editingJournal.data.logo += ' ' + this.currentJournal.data.logo :\n                    this.editingJournal.data.logo = this.currentJournal.data.logo;\n                break;\n            case JournalDataType.purpose:\n                concat ?\n                    this.editingJournal.data.purpose += ' ' + this.currentJournal.data.purpose :\n                    this.editingJournal.data.purpose = this.currentJournal.data.purpose;\n                break;\n            case JournalDataType.seriadas_cubanas:\n                concat ?\n                    this.editingJournal.data.seriadas_cubanas += ' ' + this.currentJournal.data.seriadas_cubanas :\n                    this.editingJournal.data.seriadas_cubanas = this.currentJournal.data.seriadas_cubanas;\n                break;\n            case JournalDataType.shortname:\n                concat ?\n                    this.editingJournal.data.shortname += ' ' + this.currentJournal.data.shortname :\n                    this.editingJournal.data.shortname = this.currentJournal.data.shortname;\n                break;\n            case JournalDataType.start_year:\n                concat ?\n                    this.editingJournal.data.start_year += ' ' + this.currentJournal.data.start_year :\n                    this.editingJournal.data.start_year = this.currentJournal.data.start_year;\n                break;\n            case JournalDataType.subtitle:\n                concat ?\n                    this.editingJournal.data.subtitle += ' ' + this.currentJournal.data.subtitle :\n                    this.editingJournal.data.subtitle = this.currentJournal.data.subtitle;\n                break;\n            case JournalDataType.title:\n                concat ?\n                    this.editingJournal.data.title += ' ' + this.currentJournal.data.title :\n                    this.editingJournal.data.title = this.currentJournal.data.title;\n                break;\n            case JournalDataType.twitter:\n                concat ?\n                    this.editingJournal.data.socialNetworks.twitter += ' ' + this.currentJournal.data.socialNetworks.twitter :\n                    this.editingJournal.data.socialNetworks.twitter = this.currentJournal.data.socialNetworks.twitter;\n                break;\n            case JournalDataType.url:\n                concat ?\n                this.editingJournal.data.setIdentifierValue(\n                  IdentifierSchemas.url,\n                    this.editingJournal.data.getIdentifierValue(IdentifierSchemas.url) +\n                    ' ' +\n                    this.currentJournal.data.getIdentifierValue(IdentifierSchemas.url)) :\n                this.editingJournal.data.setIdentifierValue(\n                  IdentifierSchemas.url,\n                  this.currentJournal.data.getIdentifierValue(IdentifierSchemas.url));\n                break;\n            case JournalDataType.oaiurl:\n                concat ?\n                this.editingJournal.data.setIdentifierValue(\n                    IdentifierSchemas.oaiurl,\n                    this.editingJournal.data.getIdentifierValue(IdentifierSchemas.oaiurl) +\n                    ' ' +\n                    this.currentJournal.data.getIdentifierValue(IdentifierSchemas.oaiurl)) :\n                this.editingJournal.data.setIdentifierValue(\n                    IdentifierSchemas.oaiurl,\n                    this.currentJournal.data.getIdentifierValue(IdentifierSchemas.oaiurl));\n                break;\n        }\n        this.editingJournalChange.emit(this.editingJournal);\n    }\n\n\n}\n","import { Component, OnInit, OnChanges, Input, Output, EventEmitter } from '@angular/core';\nimport { MatSnackBar } from '@angular/material';\nimport { MessageHandler, StatusCode } from '../../core/public-api';\nimport { JournalVersion, SourceClasification, VocabulariesInmutableNames, SourceOrganization } from '../../entities/public-api';\nimport { JournalDataType } from './journal-view.component';\n\n\n@Component({\n  selector: \"toco-journal-view-version\",\n  templateUrl: \"./journal-view-version.component.html\",\n  styleUrls: [\"./journal-view.component.scss\"],\n})\nexport class JournalViewVersionComponent implements OnInit, OnChanges {\n  @Input() public currentJournal: JournalVersion;\n\n  @Input() public type: number;\n\n  @Input()\n  public editingJournal: JournalVersion;\n\n  public journalDataType = JournalDataType;\n\n  public currentInstitutionTerms: Array<SourceClasification>;\n  public currentDataBaseTerms: Array<SourceClasification>;\n  public currentGroupTerms: Array<SourceClasification>;\n  public currentProvinceTerms: Array<SourceClasification>;\n  public currentSubjectTerms: Array<SourceClasification>;\n  public currentLicenceTerms: Array<SourceClasification>;\n\n  vocabularies;\n  public panelOpenState = false;\n\n  currentJournalChecked: boolean = false;\n\n  @Output()\n  editingJournalChange = new EventEmitter<JournalVersion>();\n\n  constructor(private _snackBar: MatSnackBar) {}\n\n  ngOnInit(): void {\n    if (this.currentJournal == undefined)\n      this.currentJournal = new JournalVersion();\n    this.loadJournalData();\n\n    if (this.type == undefined) this.type = JournalDataType.default;\n  }\n\n  ngOnChanges(): void {\n    console.log(\"***////****////***///\");\n    this.ngOnInit();\n  }\n\n  loadJournalData() {\n    this.currentDataBaseTerms = new Array<SourceClasification>();\n    this.currentGroupTerms = new Array<SourceClasification>();\n    this.currentInstitutionTerms = new Array<SourceClasification>();\n    this.currentLicenceTerms = new Array<SourceClasification>();\n    this.currentProvinceTerms = new Array<SourceClasification>();\n    this.currentSubjectTerms = new Array<SourceClasification>();\n\n    this.vocabularies = VocabulariesInmutableNames;\n\n    if (this.currentJournal.data.classifications) {\n      this.currentJournal.data.classifications.forEach(\n        (termSource: SourceClasification) => {\n          switch (termSource.vocabulary.toString()) {\n            case VocabulariesInmutableNames.CUBAN_INTITUTIONS:\n              this.currentInstitutionTerms.push(termSource);\n              break;\n            case VocabulariesInmutableNames.INDEXES:\n              this.currentDataBaseTerms.push(termSource);\n              break;\n            case VocabulariesInmutableNames.INDEXES_CLASIFICATION:\n              this.currentGroupTerms.push(termSource);\n              break;\n            case VocabulariesInmutableNames.LICENCES:\n              this.currentLicenceTerms.push(termSource);\n              break;\n            case VocabulariesInmutableNames.CUBAN_PROVINCES:\n              this.currentProvinceTerms.push(termSource);\n              break;\n            case VocabulariesInmutableNames.SUBJECTS:\n              this.currentSubjectTerms.push(termSource);\n              break;\n          }\n        }\n      );\n    }\n  }\n\n  /**\n   * Changes the field `reviewed` of a `Journal`, that means the user saw these version\n   * and consider it not has more information.\n   */\n  markAsViewed() {\n    if (this.currentJournalChecked) {\n      this.currentJournal.data.reviewed = true;\n      // TODO: hacer el request al backend de marcar la version como vista o\n      const m = new MessageHandler(this._snackBar);\n      m.showMessage(StatusCode.OK, \"Revisión marcada como vista!!!\");\n    }\n  }\n\n  public fieldEditingJournalChange() {\n    this.editingJournalChange.emit(this.editingJournal);\n  }\n\n  public replace() {\n    this.editingJournal = this.currentJournal;\n    // this.editingJournal.data.classifications = [];\n    // this.editingJournal.data.classifications = this.currentJournal.data.classifications;\n    this.editingJournalChange.emit(this.editingJournal);\n    // // this.currentJournal.data.classifications.forEach((termSource: SourceClasification) => {\n\n    // //     this.editingJournal.data.classifications.push(termSource);\n\n    // // });\n    console.log(\"editingJournal remplazado\", this.editingJournal);\n  }\n\n  /**\n   * Concats a `Journal` property by a equal property in `JournalData`.\n   * @param type is a `JournalDataType` enum, that means, `type` has all properties of a `Journal` enumerated as identifyer.\n   * @param termId is a `Term` identifyer, only needs if `type` is `JournalDataType.term`.\n   * @NOTE this function call `replace(..., true)`\n   */\n  public concat(type: JournalDataType, termSource: SourceClasification) {\n    if (type == JournalDataType.term) {\n      let notFound = true;\n      for (\n        let index = 0;\n        index < this.editingJournal.data.classifications.length;\n        index++\n      ) {\n        const element = this.editingJournal.data.classifications[index];\n        if (element.id == termSource.id) {\n          this.editingJournal.data.classifications[index].data =\n            termSource.data;\n          notFound = false;\n        }\n      }\n      if (notFound) {\n        this.editingJournal.data.classifications.push(termSource);\n      }\n      this.editingJournalChange.emit(this.editingJournal);\n    }\n  }\n\n  public replaceSubjects() {\n    this.replaceClassifications(VocabulariesInmutableNames.SUBJECTS);\n  }\n\n  public replaceIndexes() {\n    this.replaceClassifications(VocabulariesInmutableNames.INDEXES);\n  }\n\n  public replaceClassifications(vocab: string) {\n    let found = false;\n    let newts: SourceClasification[] = [];\n\n    this.editingJournal.data.classifications.forEach((ts) => {\n      if (ts.vocabulary != vocab) {\n        newts.push(ts);\n      }\n    });\n\n    this.currentJournal.data.classifications.forEach((ts) => {\n      if (ts.vocabulary == vocab) {\n        newts.push(ts);\n      }\n    });\n    this.editingJournal.data.classifications = newts;\n\n    this.editingJournalChange.emit(this.editingJournal);\n  }\n\n  public replaceOrganizations() {\n    let found = false;\n    let newts: SourceOrganization[] = [];\n\n    this.currentJournal.data.organizations.forEach((ts) => {\n      newts.push(ts);\n    });\n\n    this.editingJournal.data.organizations = newts;\n\n    this.editingJournalChange.emit(this.editingJournal);\n  }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Component, ComponentFactoryResolver } from '@angular/core';\nimport { of } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { MatSnackBar } from '@angular/material';\n\nimport { FilterComponent } from '../../filters/public-api';\nimport { FilterItem } from '../../filters/public-api';\nimport { BooleanFilterComponent } from '../../filters/public-api';\nimport { FilterContainerService } from '../../filters/public-api';\nimport { FilterContainerComponent } from '../../filters/public-api';\nimport { MessageHandler, StatusCode } from '../../core/public-api';\n\nimport { CatalogService, TaxonomyService } from '../../backend/public-api';\nimport { Environment } from '../../core/env';\nimport { VocabulariesInmutableNames } from '../../entities/public-api';\n\n@Component({\n  selector: 'toco-catalog-filters-container',\n  templateUrl: './catalog-filters.component.html',\n  styleUrls: ['./catalog-filters.component.scss']\n})\nexport class CatalogFiltersComponent extends FilterContainerComponent {\n\n  constructor(protected componentFactoryResolver: ComponentFactoryResolver,\n    protected childrenService: FilterContainerService,\n    protected service: CatalogService,\n    private taxonomyService: TaxonomyService,\n    private _snackBar: MatSnackBar,\n    private env: Environment) {\n    super(componentFactoryResolver, childrenService)\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    this.addOperator();\n\n    // tslint:disable-next-line: no-use-before-declare\n    default_filters.forEach(filter => {\n      this.filters_data.push(filter);\n    });\n\n    this.service.getJournalsVocab().pipe(\n      catchError(error => {\n        const m = new MessageHandler(this._snackBar);\n        m.showMessage(StatusCode.serverError, error.message);\n        return of(null);\n      })\n    )\n      .subscribe(response => {\n        if (response) {\n          response.data.vocabularies.forEach(vocab => {\n            if (VocabulariesInmutableNames.CUBAN_INTITUTIONS === vocab.id\n              && this.env.topOrganizationPID !== '') {\n              console.log(this.env.topOrganizationPID);\n              this.taxonomyService.getTermByUUID(this.env.topOrganizationPID).subscribe(termsResponse => {\n                this.filters_data.push(\n                  {\n                    index: this.filters_data.length,\n                    field: 'terms',\n                    type: 'tree',\n                    placeholder: vocab.human_name,\n                    name: vocab.human_name,\n                    idVocab: vocab.id,\n                    selectOptions: termsResponse.data.term_node.children,\n                    is_enabled: true\n                  });\n              });\n            } else {\n              this.service.getTerminosByVocab(vocab.id).subscribe(termsResponse => {\n                this.filters_data.push(\n                  {\n                    index: this.filters_data.length,\n                    field: 'terms',\n                    type: 'select-autocomplete',\n                    placeholder: vocab.human_name,\n                    name: vocab.human_name,\n                    idVocab: vocab.id,\n                    selectOptions: termsResponse.data.terms,\n                    is_enabled: true\n                  });\n\n              });\n            }\n\n          });\n        } else {\n          const m = new MessageHandler(this._snackBar);\n          m.showMessage(StatusCode.serverError, \"No puedo cargar los vocabularios\");\n        }\n      });\n  }\n\n  addOperator() {\n    const f = new FilterItem(BooleanFilterComponent, { field: 'op', value: true, name: ['AND', 'OR'], is_enabled: false, index: -1 });\n    // this.current_filters.push(f);\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(f.component);\n    const viewContainerRef = this.adHost.viewContainerRef;\n    // viewContainerRef.clear();\n    const componentRef = viewContainerRef.createComponent(componentFactory);\n    (<FilterComponent>componentRef.instance).data = f.data;\n  }\n\n}\n\nconst default_filters =\n  [\n    {\n      index: 0,\n      field: 'title',\n      type: 'search',\n      placeholder: 'Título',\n      name: 'Título',\n      is_enabled: true\n    },\n    {\n      index: 1,\n      field: 'issn',\n      type: 'text',\n      placeholder: 'ISSN',\n      name: 'ISSN',\n      is_enabled: true\n    }/*,\n        {\n            index: 2,\n            field: 'e_issn',\n            type: 'text',\n            placeholder: 'eISSN',\n            name: 'eISSN',\n            is_enabled: true\n        },\n        {\n            index: 3,\n            field: 'i_issn',\n            type: 'text',\n            placeholder: 'iISSN',\n            name: 'iISSN',\n            is_enabled: true\n        }*/,\n    {\n      index: 2,\n      field: 'rnps',\n      type: 'number',\n      placeholder: 'RNPS',\n      name: 'RNPS',\n      is_enabled: true\n    }/*,\n        {\n            index: 5,\n            field: 'term',\n            type: 'select',\n            placeholder: 'Términos',\n            name: 'Términos',\n            is_enabled: true\n        } */\n  ];\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Component, OnInit, ViewChild, Inject } from '@angular/core';\nimport { animate, state, style, transition, trigger } from '@angular/animations';\nimport { merge, of as observableOf } from 'rxjs';\nimport { startWith, switchMap, map, catchError } from 'rxjs/operators';\nimport { MatPaginator, PageEvent } from '@angular/material/paginator';\nimport { MatTableDataSource } from '@angular/material/table';\n\nimport { MetadataService, MessageHandler, StatusCode } from '../../core/public-api';\nimport { Journal, JournalData, ISSN, JournalVersion } from '../../entities/public-api';\nimport { FilterHttpMap, FiltersService } from '../../filters/public-api';\n\nimport { Environment } from '../../core/env';\n\nimport { CatalogService } from '../../backend/public-api';\nimport { CatalogFiltersComponent } from '../catalog-filters/catalog-filters.component';\nimport { MatSnackBar, MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\nimport { JournalViewInfoComponent } from '../../sources/journal-view/journal-view-info.component';\nimport { ScrollStrategyOptions } from '@angular/cdk/overlay';\n\n@Component({\n  selector: 'toco-catalog',\n  templateUrl: './catalog.component.html',\n  styleUrls: ['./catalog.component.scss'],\n  animations: [\n    trigger('detailExpand', [\n      state('collapsed', style({ height: '0px', minHeight: '0', display: 'none' })),\n      state('expanded', style({ height: '*' })),\n      transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')),\n    ]),\n  ],\n})\nexport class CatalogComponent implements OnInit {\n\n  // journalList: Journal[] = [];\n  loading = true;\n  private hasErrors = false;\n  dataSource = new MatTableDataSource<Journal>();\n  columnsToDisplay = ['title', 'rnps', 'p-issn', 'url'];\n  expandedElement: Journal;\n  length = 0;\n  pageSize = 5;\n  pageSizeOptions: number[] = [5, 10, 15, 20];\n  pageEvent: PageEvent;\n  params: Array<FilterHttpMap>;\n\n  sceibaHost = '';\n\n  layoutPosition = [\n    {\n      name: 'Derecha',\n      layout: 'row-reverse',\n      aling: 'center baseline',\n      width: '22'\n    },\n    {\n      name: 'Izquierda',\n      layout: 'row',\n      aling: 'center baseline',\n      width: '22'\n    },\n    {\n      name: 'Arriba',\n      layout: 'column',\n      aling: 'center center',\n      width: '90'\n    },\n    {\n      name: 'Abajo',\n      layout: 'column-reverse',\n      aling: 'center center',\n      width: '90'\n    }\n  ];\n  currentlayout = this.layoutPosition[1];\n\n  constructor(private service: CatalogService,\n    private metadata: MetadataService,\n    private filterService: FiltersService,\n    private env: Environment,\n    private _snackBar: MatSnackBar,\n    public dialog: MatDialog) {\n    this.sceibaHost = env.sceibaHost + '/catalog';\n    env.topOrganizationPID\n  }\n\n  @ViewChild(MatPaginator, { static: true }) paginator: MatPaginator;\n  @ViewChild(CatalogFiltersComponent, { static: true }) filter_component: CatalogFiltersComponent;\n\n  ngOnInit() {\n\n    this.metadata.setStandardMeta(\"Catálogo de Revistas Científicas\", \"\", \"\");\n    this.paginator.firstPage();\n    this.paginator.pageSize = 5;\n\n    try {\n\n      this.fetchJournalData();\n\n      this.filterService.paramsChanged.pipe(\n        catchError(error => {\n          const m = new MessageHandler(this._snackBar);\n          m.showMessage(StatusCode.serverError, error.message);\n          return observableOf([]);\n        })\n      )\n        .subscribe(params => {\n          this.params = params;\n          this.fetchJournalData();\n        });\n    }\n    catch (err) {\n      const m = new MessageHandler(this._snackBar);\n      m.showMessage(StatusCode.serverError, err.message);\n    }\n\n  }\n\n  // onPaginatorChanged(){\n  //   this.filterService.changeFilter('count',this.paginator.pageSize, false);\n  //   this.filterService.changeFilter('page',this.paginator.pageIndex);\n  // }\n\n  public fetchJournalData() {\n    const arr = new Array<Journal>();\n\n    merge().pipe(\n      startWith({}),\n      switchMap(() => {\n        //this.loading = true;\n        return this.service!.getJournalsPage(this.paginator.pageSize, this.paginator.pageIndex, this.params);\n      }),\n      map(response => {\n        // Flip flag to show that loading has finished.\n        this.loading = false;\n\n        this.length = response.data.sources.count;\n\n        response.data.sources.data.forEach(item => {\n          const j = new Journal();\n          j.id = item.id;\n          j.uuid = item.uuid;\n          const info = new JournalData();\n          info.url = item.data != null ? item.data.url : '';\n          info.title = item.name;\n          info.subtitle = item.subtitle;\n          info.shortname = item.shortname;\n          const issn = new ISSN();\n          issn.e = item.data != null ? item.data.issn.e : '';\n          issn.l = item.data != null ? item.data.issn.l : '';\n          issn.p = item.data != null ? item.data.issn.p : '';\n          info.issn = issn;\n          info.rnps = item.data != null ? item.data.rnps : '';\n          info.logo = item.data != null ? item.data.logo : '';\n          info.purpose = item.purpose;\n          info.description = item.data != null ? item.data.description : '';\n          j.data = info;\n          arr.push(j);\n        });\n        return arr;\n      }),\n      catchError(error => {\n        this.loading = false;\n        this.hasErrors = true;\n        const m = new MessageHandler(this._snackBar);\n        m.showMessage(StatusCode.serverError, error.message);\n        // Catch if the GitHub API has reached its rate limit. Return empty data.\n        // this.isRateLimitReached = true;\n        return observableOf([]);\n\n      })\n    ).subscribe(data => this.dataSource.data = data);\n\n  }\n\n  public onScrollUp() {\n    // console.log(\"scrolled up!!\");\n  }\n\n  public isEmpty() {\n    if (this.dataSource.data.length === 0 && this.hasErrors) {\n      //this.loading = false;\n      return true;\n    }\n    return false;\n  }\n\n  public isLoading() {\n    return this.loading;\n  }\n\n  public openme(): boolean {\n    const a = navigator.userAgent.match(/Android/i);\n    const b = navigator.userAgent.match(/BlackBerry/i);\n    const apple = navigator.userAgent.match(/iPhone|iPad|iPod/i);\n    const o = navigator.userAgent.match(/Opera Mini/i);\n    const i = navigator.userAgent.match(/IEMobile/i);\n    if (a != null || b != null || apple != null || o != null || i != null) { return false; }\n    return true;\n  }\n\n  public changeLayoutPosition(index: number) {\n    this.currentlayout = this.layoutPosition[index];\n  }\n\n  viewJournal(uuid: string): void {\n\n    this.service.getSourceByUUID(uuid).subscribe(\n      (response) => {\n        console.log(response);\n        if (response.status == \"success\") {\n          let journalVersion = new JournalVersion();\n          journalVersion.deepcopy(response.data.sources);\n          const dialogRef = this.dialog.open(DialogCatalogJournalInfoDialog, {\n            data: {\n              journalVersion: journalVersion,\n              journalUUID: uuid\n            }\n          });\n\n          dialogRef.afterClosed();\n        } else {\n          const m = new MessageHandler(this._snackBar);\n          m.showMessage(StatusCode.serverError, 'No fue posible encontrar la Revista');\n        }\n      },\n      (error) => {\n        console.log('error');\n      },\n      () => { }\n    );\n\n\n  }\n}\n\n@Component({\n  selector: 'dialog-catalog-journal-info',\n  template: `<mat-dialog-content class=\"height-auto\">\n                    <toco-journal-view-info\n                        [journalVersion]=\"data.journalVersion\"\n                    >\n                    </toco-journal-view-info>\n                </mat-dialog-content>`,\n})\nexport class DialogCatalogJournalInfoDialog implements OnInit {\n\n\n  constructor(\n    public dialogRef: MatDialogRef<DialogCatalogJournalInfoDialog>,\n    @Inject(MAT_DIALOG_DATA) public data: any) { }\n\n  ngOnInit(): void {\n    console.log(this.data);\n\n  }\n  onNoClick(): void {\n    this.dialogRef.close();\n  }\n\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport { animate, state, style, transition, trigger } from '@angular/animations';\nimport { merge, of as observableOf } from 'rxjs';\nimport { startWith, switchMap, map, catchError } from 'rxjs/operators';\nimport { MatPaginator, PageEvent } from '@angular/material/paginator';\nimport { MatTableDataSource } from '@angular/material/table';\n\nimport { MetadataService } from '../../core/public-api';\nimport { Journal, JournalData, ISSN } from '../../entities/public-api';\nimport { FilterHttpMap, FiltersService } from '../../filters/public-api';\n\nimport { Environment } from '../../core/env';\n\nimport { CatalogService } from '../../backend/public-api';\nimport { CatalogFiltersComponent } from '../catalog-filters/catalog-filters.component';\n\n@Component({\n    selector: 'toco-sources-list',\n    templateUrl: './sources-list.component.html',\n    styleUrls: ['./sources-list.component.scss'],\n    animations: [\n        trigger('detailExpand', [\n            state('collapsed', style({ height: '0px', minHeight: '0', display: 'none' })),\n            state('expanded', style({ height: '*' })),\n            transition('expanded <=> collapsed', animate('225ms cubic-bezier(0.4, 0.0, 0.2, 1)')),\n        ]),\n    ],\n})\nexport class SourcesListComponent implements OnInit\n{\n    journalList: Journal[] = [];\n    private loading = true;\n    dataSource = new MatTableDataSource<Journal>();\n    columnsToDisplay = ['title', 'rnps', 'p-issn'];\n    expandedElement: Journal;\n    length = 0;\n    pageSize = 5;\n    pageSizeOptions: number[] = [5, 10, 15, 20];\n    pageEvent: PageEvent;\n    params: Array<FilterHttpMap>;\n    sceibaHost = '';\n    layoutPosition = [\n        {\n            name: 'Derecha',\n            layout: 'row-reverse',\n            aling: 'center baseline',\n            width: '22'\n        },\n        {\n            name: 'Izquierda',\n            layout: 'row',\n            aling: 'center baseline',\n            width: '22'\n        },\n        {\n            name: 'Arriba',\n            layout: 'column',\n            aling: 'center center',\n            width: '90'\n        },\n        {\n            name: 'Abajo',\n            layout: 'column-reverse',\n            aling: 'center center',\n            width: '90'\n        }\n    ];\n    currentlayout = this.layoutPosition[1];\n\n    constructor(private service: CatalogService, private metadata: MetadataService, private filterService: FiltersService, private env: Environment) {\n        this.sceibaHost = env.sceibaHost + '/catalog';\n    }\n\n    @ViewChild(MatPaginator, { static: true })\n    paginator: MatPaginator;\n\n    @ViewChild(CatalogFiltersComponent, { static: true })\n    filter_component: CatalogFiltersComponent;\n\n    ngOnInit() {\n        this.metadata.setStandardMeta(\"Catálogo de Revistas Científicas\", \"\", \"\");\n        this.paginator.firstPage();\n        this.paginator.pageSize = 5;\n        this.service.getJournalsCount().subscribe(response => {\n            this.length = response.data.count;\n        });\n        this.fetchJournalData();\n        this.filterService.paramsChanged.subscribe(params => {\n            this.params = params;\n            this.fetchJournalData();\n        });\n    }\n\n    // onPaginatorChanged(){\n    //   this.filterService.changeFilter('count',this.paginator.pageSize, false);\n    //   this.filterService.changeFilter('page',this.paginator.pageIndex);\n    // }\n\n    fetchJournalData() {\n        this.loading = true;\n        // this.dataSource.data = this.service.getJournalsPage(this.count, this.page);\n        const arr = new Array<Journal>();\n\n        merge().pipe(\n            startWith({}),\n            switchMap(() => {\n            this.loading = true;\n            return this.service!.getJournalsPage(this.paginator.pageSize, this.paginator.pageIndex, this.params);\n        }),\n        map(response => {\n            // Flip flag to show that loading has finished.\n            this.loading = false;\n            // this.isRateLimitReached = false;\n            // this.resultsLength = response.total_count;\n            this.length = response.data.sources.count;\n            response.data.sources.data.forEach(item => {\n                const j = new Journal();\n                j.id = item.id;\n                j.uuid = item.uuid;\n                const info = new JournalData();\n                info.url = item.data != null ? item.data.url : '';\n                info.title = item.name;\n                info.subtitle = item.subtitle;\n                info.shortname = item.shortname;\n                const issn = new ISSN();\n                issn.e = item.data != null ? item.data.issn.e : '';\n                issn.l = item.data != null ? item.data.issn.l : '';\n                issn.p = item.data != null ? item.data.issn.p : '';\n                info.issn = issn;\n                info.rnps = item.data != null ? item.data.rnps : '';\n                info.logo = item.data != null ? item.data.logo : '';\n                info.purpose = item.purpose;\n                info.description = item.data != null ? item.data.description : '';\n                j.data = info;\n                arr.push(j);\n            });\n            return arr;\n        }),\n        catchError(error => {\n            this.loading = false;\n            console.log('ERRORRR ' + error);\n            // Catch if the GitHub API has reached its rate limit. Return empty data.\n            // this.isRateLimitReached = true;\n            return observableOf([]);\n        })\n        ).subscribe(data => this.dataSource.data = data);\n    }\n\n    onScrollUp() {\n        // console.log(\"scrolled up!!\");\n    }\n\n    isEmpty() {\n        if (this.journalList.length == 0) {\n            this.loading = false;\n            return true;\n        }\n        return false;\n    }\n\n    isLoading() {\n        return this.loading;\n    }\n\n    openme(): boolean\n    {\n        const a = navigator.userAgent.match(/Android/i);\n        const b = navigator.userAgent.match(/BlackBerry/i);\n        const apple = navigator.userAgent.match(/iPhone|iPad|iPod/i);\n        const o = navigator.userAgent.match(/Opera Mini/i);\n        const i = navigator.userAgent.match(/IEMobile/i);\n\n        if (a != null || b != null || apple != null || o != null || i != null)\n        {\n            return false;\n        }\n        return true;\n    }\n\n    changeLayoutPosition(index: number)\n    {\n        this.currentlayout = this.layoutPosition[index];\n    }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\n\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/public-api';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { TocoFormsModule } from '../forms/public-api';\nimport { SourceService, TaxonomyService } from '../backend/public-api';\n\nimport { JournalViewComponent } from './journal-view/journal-view.component';\nimport { JournalEditComponent } from './source-edit/journal-edit/journal-edit.component';\n\nimport { JournalViewTermComponent } from './journal-view/journal-view-version-term.component';\nimport { JournalViewInfoComponent, JournalViewInfoFieldComponent } from './journal-view/journal-view-info.component';\nimport { JournalViewFieldComponent } from './journal-view/journal-view-version-field.component';\nimport { JournalViewVersionComponent } from './journal-view/journal-view-version.component';\nimport { CoreModule } from '../core/public-api';\nimport { STEPPER_GLOBAL_OPTIONS } from '@angular/cdk/stepper';\n\nimport { CatalogFiltersComponent } from './catalog-filters/catalog-filters.component';\nimport { CatalogComponent, DialogCatalogJournalInfoDialog } from './catalog/catalog.component';\nimport { SourcesListComponent } from './sources-list/sources-list.component';\nimport { SourceOrganizationsComponent, SourceOrganizationSelectDialog, SourceOrganizationSelectTopDialog } from './source-edit/source-organizations/source-organizations.component';\nimport { OrganizationsModule } from '../organizations/public-api';\nimport { SourceIndexesComponent, SourceEditAddIndexComponent } from './source-edit/source-indexes/source-indexes.component';\n\n@NgModule({\n    declarations: [\n        JournalViewComponent,\n        JournalViewTermComponent,\n        JournalViewInfoComponent,\n        JournalViewInfoFieldComponent,\n        JournalViewFieldComponent,\n        JournalEditComponent,\n        SourceEditAddIndexComponent,\n        JournalViewVersionComponent,\n        CatalogComponent,\n        CatalogFiltersComponent,\n        SourcesListComponent,\n        DialogCatalogJournalInfoDialog,\n        SourceOrganizationsComponent,\n        SourceOrganizationSelectDialog,\n        SourceOrganizationSelectTopDialog,\n        SourceIndexesComponent\n    ],\n    entryComponents: [\n        SourceEditAddIndexComponent,\n        DialogCatalogJournalInfoDialog,\n        SourceOrganizationSelectDialog,\n        SourceOrganizationSelectTopDialog\n    ],\n    imports: [\n        SharedModule,\n        CoreModule,\n        ReactiveFormsModule,\n        TocoFormsModule,\n        OrganizationsModule\n    ],\n\n    exports: [\n        JournalViewComponent,\n        JournalEditComponent,\n        JournalViewInfoComponent,\n        CatalogComponent,\n        SourcesListComponent\n    ],\n\n    providers: [\n        SourceService,\n        TaxonomyService,\n        {\n            provide: STEPPER_GLOBAL_OPTIONS,\n            useValue: { displayDefaultIndicatorType: false }\n          }\n    ]\n})\nexport class SourcesModule\n{ }\n","\nimport { Component, OnInit, Inject, Output, OnDestroy, EventEmitter } from '@angular/core';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { of, PartialObserver, Observable } from 'rxjs';\nimport { catchError, finalize, startWith, map } from 'rxjs/operators';\nimport { FormControl, FormGroup, FormBuilder } from '@angular/forms';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\nimport { MessageHandler, StatusCode, Response } from '../../core/public-api';\nimport { Vocabulary } from '../../entities/public-api';\nimport { FormContainerComponent, PanelContent_Depr, FormFieldType, FormContainerAction, HintValue, HintPosition } from '../../forms/public-api';\n\nimport { TaxonomyService } from '../../backend/public-api';\nimport { OAuthStorage } from 'angular-oauth2-oidc';\n\n\n\n@Component({\n    selector: 'toco-vocabulary-dialog',\n    templateUrl: './vocabulary-dialog.html'\n})\nexport class VocabularyDialogComponent implements OnInit {\n\n    public panels: PanelContent_Depr[];\n    public formGroup: FormGroup;\n    public action: FormContainerAction;\n    public actionLabel = 'Aceptar';\n    public hasService = false;\n    vocab: Vocabulary;\n    accept;\n\n    constructor(\n        private service: TaxonomyService,\n        private _formBuilder: FormBuilder,\n        public dialogRef: MatDialogRef<FormContainerComponent>,\n        public _snackBar: MatSnackBar,\n        @Inject(MAT_DIALOG_DATA) public data: any) {\n\n        if (data.accept) {\n            this.accept = data.accept;\n            this.hasService = true;\n            this.vocab = new Vocabulary();\n            if (data.vocab === null) {\n                this.vocab.isNew = true;\n            } else {\n                this.vocab.deepcopy(data.vocab);\n                this.actionLabel = 'Actualizar';\n            }\n        }\n\n    }\n\n    ngOnInit(): void {\n        if (this.hasService) {\n\n            this.formGroup = this._formBuilder.group({});\n            this.panels = [\n                {\n                    title: this.vocab.isNew ? 'Nuevo Vocabulario' : 'Editar Vocabulario',\n                    description: '',\n                    iconName: '',\n                    formSection: this.formGroup,\n                    formSectionContent: [\n                        {\n                            name: 'name',\n                            label: 'Identificador',\n                            type: FormFieldType.identifier,\n                            required: true,\n                            width: '100%',\n                            value: this.vocab.name,\n                            startHint: new HintValue(HintPosition.start, 'Un identificador es una secuencia de letras')\n                        },\n                        {\n                            name: 'human_name',\n                            label: 'Nombre',\n                            type: FormFieldType.text,\n                            required: false,\n                            width: '100%',\n                            value: this.vocab.human_name,\n                            startHint: new HintValue(HintPosition.start, '')\n                        },\n                        {\n                            name: 'description',\n                            label: 'Descripción',\n                            type: FormFieldType.textarea,\n                            required: false,\n                            width: '100%',\n                            value: this.vocab.description,\n                            startHint: new HintValue(HintPosition.start, '')\n                        }\n                    ]\n                }\n            ];\n            this.action = {\n                doit: (data: any) => {\n                    if (this.formGroup.valid) {\n                        this.vocab.name = this.formGroup.value['name'];\n                        this.vocab.human_name = this.formGroup.value['human_name'];\n                        this.vocab.description = this.formGroup.value['description'];\n\n                        this.accept(this.vocab);\n\n                    } else {\n                        const m = new MessageHandler(this._snackBar);\n                        m.showMessage(StatusCode.OK, 'El identificador no es válido.')\n                    }\n                }\n              }\n        }\n    }\n\n    onNoClick(): void {\n        this.dialogRef.close();\n    }\n\n    acceptAction() {\n\n\n    }\n}\n\n@Component({\n    selector: 'toco-vocabularies',\n    templateUrl: './vocabularies.component.html',\n    styleUrls: ['./vocabularies.component.scss']\n})\nexport class VocabulariesComponent implements OnInit, OnDestroy {\n\n    private vocabulariesChangeObserver: PartialObserver<Response<any>> = {\n        next: (result: Response<any>) => {\n            this.dialog.closeAll();\n            this.loadVocabularies();\n            const voc = new Vocabulary();\n            voc.deepcopy(result.data.vocabulary);\n            this.selectVocab(voc);\n            const m = new MessageHandler(this._snackBar);\n            m.showMessage(StatusCode.OK, result.message);\n        },\n\n        error: (err: any) => {\n            console.log('error: ' + err + '.');\n        },\n\n        complete: () => {\n            console.log('complete.');\n        }\n    };\n\n    public vocabCtrl = new FormControl();\n    public filteredVocabularies: Observable<Vocabulary[]>;\n\n    @Output()\n    public selectedVocab: EventEmitter<Vocabulary> = new EventEmitter();\n\n    public currentVocab: Vocabulary = null;\n\n    public vocabularies: Vocabulary[] = [];\n\n    loading = false;\n\n    @Output() emiterShowTerms: EventEmitter<Vocabulary> = new EventEmitter();\n\n    constructor(private service: TaxonomyService,\n        private oautheStorage: OAuthStorage,\n        public dialog: MatDialog,\n        private _snackBar: MatSnackBar) { }\n\n    ngOnInit() {\n        this.getAuthenticatedUserPermissions();\n        this.loadVocabularies();\n    }\n\n    ngOnDestroy(): void {\n    }\n\n    selectVocab(item: Vocabulary) {\n        this.currentVocab = item;\n    }\n\n    loadVocabularies() {\n        this.loading = true;\n        this.service.getVocabularies().pipe(\n            catchError((err: HttpErrorResponse) => {\n                const m = new MessageHandler(this._snackBar);\n                m.showMessage(StatusCode.serverError, err.message);\n                // TODO: Maybe you must set a better return.\n                return of(null);\n            }),\n            finalize(() => this.loading = false)\n        )\n            .subscribe(response => {\n                if (response) {\n                    this.vocabularies = response.data.vocabularies;\n                    this.filteredVocabularies = this.vocabCtrl.valueChanges\n                        .pipe<string, Vocabulary[]>(\n                            startWith(''),\n                            map(value => {\n                                return this.vocabularies.filter(vocab => vocab.name.toLowerCase().includes(value.toLowerCase()));\n                            })\n                        );\n                } else {\n                    this.vocabularies = [];\n                }\n            });\n    }\n\n    newVocab(): void {\n        this.openVocabDialog(null);\n    }\n\n    editVocab(vocab: any) {\n        this.openVocabDialog(vocab);\n    }\n\n    private openVocabDialog(vocab: Vocabulary) {\n\n        const dialogRef = this.dialog.open(VocabularyDialogComponent, {\n            data: {\n                vocab: vocab,\n                accept: (voc: Vocabulary) => {\n                    this.dialog.closeAll();\n                    if (voc.isNew){\n                        this.service.newVocabulary(voc).pipe().subscribe(this.vocabulariesChangeObserver);\n                    } else {\n                        this.service.editVocabulary(voc).pipe().subscribe(this.vocabulariesChangeObserver);\n                    }\n                }\n            }\n        });\n        dialogRef.afterClosed().subscribe(result => {\n            console.log('dialog closed');\n        });\n    }\n\n    deleteVocab(vocab: Vocabulary) {\n    }\n\n    onSelectionChange(){\n        this.selectedVocab.emit(this.currentVocab);\n    }\n\n    getAuthenticatedUserPermissions() {\n        this.service.getCurrentUserPermissions().pipe(\n            catchError(err => {\n                const m = new MessageHandler(this._snackBar);\n                m.showMessage(StatusCode.serverError, err.message);\n                // TODO: Maybe you must set a better return.\n                return of(null);\n            })\n        )\n            .subscribe(request => {\n                if (request.status == 'success') {\n                    var permJson = JSON.stringify(request.data.permissions.actions);\n                    this.oautheStorage.setItem('user_permissions', permJson);\n                }\n            });\n    }\n\n    hasPermission(permission: string, id?: string): boolean {\n\n        const userPermission = JSON.parse(this.oautheStorage.getItem('user_permissions'));\n        if (!userPermission) {\n            return false;\n        }\n        switch (permission) {\n            case 'add':\n                if (userPermission.taxonomy_full_editor_actions === null)\n                    return true;\n\n                return false;\n\n            case 'edit':\n                if (userPermission.taxonomy_full_editor_actions === null)\n                    return true;\n\n                if (userPermission.vocabulary_editor_actions) {\n                    const arr: Array<string> = userPermission.vocabulary_editor_actions;\n\n                    if (arr.includes(id)) {\n                        return true\n                    }\n\n                }\n                else if (userPermission.taxonomy_full_editor_actions) {\n                    return true;\n                }\n\n                return false;\n\n            default:\n                return false;\n        }\n    }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n */\n\nimport { Component, OnInit, Inject } from \"@angular/core\";\nimport { MAT_DIALOG_DATA } from \"@angular/material/dialog\";\n\nimport {\n\tPanelContent_Depr,\n\tFormFieldType,\n\tFormContainerAction,\n\tHintValue,\n\tHintPosition,\n\tInputContent,\n\tActionContent\n} from \"../../forms/public-api\";\nimport {\n\tTerm,\n\tVocabulary,\n\tTermInstitutionData,\n\tEntityBase,\n\tTermIndexData,\n\tVocabulariesInmutableNames\n} from \"../../entities/public-api\";\n\nimport { FormBuilder, FormGroup } from \"@angular/forms\";\nimport { MatSnackBar } from \"@angular/material\";\nimport { FormFieldContent_Experimental } from '../../forms/experimental/form-field.control.experimental';\n\n@Component({\n\tselector: \"toco-term-generic\",\n\ttemplateUrl: \"./term-generic.component.html\",\n\tstyleUrls: [\"./term-generic.component.scss\"]\n})\nexport class TermGenericComponent implements OnInit {\n\tpublic panels: PanelContent_Depr[] = [];\n\tpublic formGroup: FormGroup;\n\tpublic action: FormContainerAction;\n\tpublic actionLabel = \"Adicionar\";\n\t// term: Term;\n\thasService = false;\n\taccept;\n\tvocab: Vocabulary;\n\n\tpublic constructor(\n\t\tprivate _formBuilder: FormBuilder,\n\t\tpublic _snackBar: MatSnackBar,\n\t\t@Inject(MAT_DIALOG_DATA) private data: any\n\t)\n\t{\n\t\tif (data.accept && data.currentVocab)\n\t\t{\n\t\t\tthis.accept = data.accept;\n\t\t\tthis.hasService = true;\n\t\t\tthis.vocab = data.currentVocab;\n\n\t\t\tif (data.term)\n\t\t\t{\n\t\t\t\tthis.actionLabel = \"Actualizar\";\n\n\t\t\t\tif (!this.data.term.data)\n\t\t\t\t{\n\t\t\t\t\tthis.data.term.data = this._getTermDataObject();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.data.term = new Term();\n\t\t\t\tthis.data.term.isNew = true;\n\t\t\t\tthis.data.term.vocabulary_id = data.currentVocab.id;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic ngOnInit(): void\n\t{\n\t\tthis.formGroup = this._formBuilder.group({});\n\n\t\tthis.panels = [\n\t\t\t{\n\t\t\t\ttitle: \"Término\",\n\t\t\t\tdescription: \"\",\n\t\t\t\ticonName: \"\",\n\t\t\t\tformSection: this.formGroup,\n\t\t\t\tformSectionContent: this._getContent()\n\t\t\t}\n\t\t];\n\n\t\tthis.action = {\n\t\t\tdoit(data: any): void {\n\t\t\t\tif (this.formGroup.valid)\n\t\t\t\t{\n\t\t\t\t\t// get the result from formGroup\n\t\t\t\t\tconst result = new Term();\n\t\t\t\t\tresult.deepcopy(this.data.term);\n\t\t\t\t\tresult.deepcopy(this.formGroup.value);\n\t\t\t\t\tresult.data = this._getTermDataObject();\n\t\t\t\t\tresult.data.deepcopy(this.formGroup.value);\n\n\t\t\t\t\t// Set the parent term, if any\n\t\t\t\t\tconst parent = this.formGroup.value[\"parent_id\"];\n\t\t\t\t\tif (parent && parent[0]) {\n\t\t\t\t\t\tresult.parent_id = parent[0].id;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.parent_id = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// if the term is an index, then set miar_class and group_mes\n\t\t\t\t\t// clasifications\n\t\t\t\t\tif (this.vocab.id == VocabulariesInmutableNames.INDEXES) {\n\t\t\t\t\t\tresult.class_ids = [];\n\n\t\t\t\t\t\tconst miar = this.formGroup.value[\"miar_class\"];\n\t\t\t\t\t\tconst mes = this.formGroup.value[\"group_mes\"];\n\n\t\t\t\t\t\tif (miar && miar[0]) {\n\t\t\t\t\t\t\tresult.class_ids.push(miar[0].id);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (mes && mes[0]) {\n\t\t\t\t\t\t\tresult.class_ids.push(mes[0].id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.accept(result as Term);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n    /**\n     * Returns the panel's content.\n     */\n\tprivate _getContent(): (InputContent | ActionContent | FormFieldContent_Experimental)[]\n\t{\n\t\t// TODO: use TermHelper\n\t\tswitch (this.vocab.id) {\n\t\t\tcase VocabulariesInmutableNames.CUBAN_INTITUTIONS:\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"name\",\n\t\t\t\t\t\tlabel: \"Nombre\",\n\t\t\t\t\t\ttype: FormFieldType.text,\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tvalue: this.data.term.name ? this.data.term.name : null,\n\t\t\t\t\t\twidth: \"100%\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"grid\",\n\t\t\t\t\t\tlabel: \"Identificador GRID\",\n\t\t\t\t\t\ttype: FormFieldType.text,\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\tvalue: this.data.term.data.grid ? this.data.term.data.grid : null,\n\t\t\t\t\t\twidth: \"50%\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"description\",\n\t\t\t\t\t\tlabel: \"Descripción\",\n\t\t\t\t\t\ttype: FormFieldType.textarea,\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\tvalue: this.data.term.description\n\t\t\t\t\t\t\t? this.data.term.description\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\twidth: \"100%\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"email\",\n\t\t\t\t\t\tlabel: \"Email\",\n\t\t\t\t\t\ttype: FormFieldType.email,\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tvalue: this.data.term.data.email ? this.data.term.data.email : null,\n\t\t\t\t\t\twidth: \"45%\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"website\",\n\t\t\t\t\t\tlabel: \"Sitio Web Oficial\",\n\t\t\t\t\t\ttype: FormFieldType.url,\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\tvalue: this.data.term.data.website\n\t\t\t\t\t\t\t? this.data.term.data.website\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\twidth: \"45%\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"address\",\n\t\t\t\t\t\tlabel: \"Dirección\",\n\t\t\t\t\t\ttype: FormFieldType.textarea,\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\tvalue: this.data.term.data.address\n\t\t\t\t\t\t\t? this.data.term.data.address\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\twidth: \"100%\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"parent_id\",\n\t\t\t\t\t\tlabel: \"Jerarquía Institucional (Institución Superior)\",\n\t\t\t\t\t\ttype: FormFieldType.vocabulary,\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\textraContent: {\n\t\t\t\t\t\t\tmultiple: false,\n\t\t\t\t\t\t\tselectedTermsIds: this.data.term.parent_id\n\t\t\t\t\t\t\t\t? [this.data.term.parent_id]\n\t\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\t\tvocab: this.vocab.id\n\t\t\t\t\t\t},\n\t\t\t\t\t\twidth: \"100%\"\n\t\t\t\t\t}\n\t\t\t\t];\n\n\t\t\tcase VocabulariesInmutableNames.INDEXES:\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"name\",\n\t\t\t\t\t\tlabel: \"Nombre\",\n\t\t\t\t\t\ttype: FormFieldType.text,\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tvalue: this.data.term.name ? this.data.term.name : null,\n\t\t\t\t\t\twidth: \"100%\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"url\",\n\t\t\t\t\t\tlabel: \"URL\",\n\t\t\t\t\t\ttype: FormFieldType.url,\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\tvalue: this.data.term.data.url ? this.data.term.data.url : null,\n\t\t\t\t\t\twidth: \"100%\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"abrev\",\n\t\t\t\t\t\tlabel: \"Identificadores\",\n\t\t\t\t\t\ttype: FormFieldType.text,\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\tvalue: this.data.term.data.abrev ? this.data.term.data.abrev : null,\n\t\t\t\t\t\twidth: \"30%\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"initial_cover\",\n\t\t\t\t\t\tlabel: \"Cobertura inicio\",\n\t\t\t\t\t\ttype: FormFieldType.text,\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\tvalue: this.data.term.data.initial_cover\n\t\t\t\t\t\t\t? this.data.term.data.initial_cover\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\twidth: \"30%\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"end_cover\",\n\t\t\t\t\t\tlabel: \"Cobertura\",\n\t\t\t\t\t\ttype: FormFieldType.text,\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\tvalue: this.data.term.data.end_cover\n\t\t\t\t\t\t\t? this.data.term.data.end_cover\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\twidth: \"30%\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"description\",\n\t\t\t\t\t\tlabel: \"Descripción\",\n\t\t\t\t\t\ttype: FormFieldType.textarea,\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\tvalue: this.data.term.description\n\t\t\t\t\t\t\t? this.data.term.description\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\twidth: \"100%\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"miar_class\",\n\t\t\t\t\t\tlabel: \"Tipología de sistemas de indización\",\n\t\t\t\t\t\ttype: FormFieldType.vocabulary,\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\textraContent: {\n\t\t\t\t\t\t\tmultiple: false,\n\t\t\t\t\t\t\tselectedTermsIds: this.data.term.class_ids\n\t\t\t\t\t\t\t\t? this.data.term.class_ids\n\t\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\t\tvocab: VocabulariesInmutableNames.INDEXES_CLASIFICATION\n\t\t\t\t\t\t},\n\t\t\t\t\t\twidth: \"48%\"\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"group_mes\",\n\t\t\t\t\t\tlabel:\n\t\t\t\t\t\t\t\"Grupos, Categorías según criterios de “calidad” de las publicaciones \",\n\t\t\t\t\t\ttype: FormFieldType.vocabulary,\n\t\t\t\t\t\tstartHint: new HintValue(HintPosition.start, \"\"),\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\textraContent: {\n\t\t\t\t\t\t\tmultiple: false,\n\t\t\t\t\t\t\tselectedTermsIds: this.data.term.class_ids\n\t\t\t\t\t\t\t\t? this.data.term.class_ids\n\t\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\t\tvocab: VocabulariesInmutableNames.INDEXES_CLASIFICATION\n\t\t\t\t\t\t},\n\t\t\t\t\t\twidth: \"48%\"\n\t\t\t\t\t}\n\t\t\t\t];\n\n\t\t\tdefault:\n\t\t\t\treturn [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"name\",\n\t\t\t\t\t\tlabel: \"Nombre\",\n\t\t\t\t\t\ttype: FormFieldType.text,\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\tvalue: this.data.term.name ? this.data.term.name : null\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"description\",\n\t\t\t\t\t\tlabel: \"Descripción\",\n\t\t\t\t\t\ttype: FormFieldType.textarea,\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\tvalue: this.data.term.description\n\t\t\t\t\t\t\t? this.data.term.description\n\t\t\t\t\t\t\t: null\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"parent_id\",\n\t\t\t\t\t\tlabel: \"Término Padre\",\n\t\t\t\t\t\ttype: FormFieldType.vocabulary,\n\t\t\t\t\t\tstartHint: new HintValue(HintPosition.start, \"\"),\n\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\textraContent: {\n\t\t\t\t\t\t\tmultiple: false,\n\t\t\t\t\t\t\tselectedTermsIds: this.data.term.parent_id\n\t\t\t\t\t\t\t\t? [this.data.term.parent_id]\n\t\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\t\tvocab: this.vocab.id\n\t\t\t\t\t\t},\n\t\t\t\t\t\twidth: \"50%\"\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t}\n\t}\n\n\tprivate _getTermDataObject(): EntityBase\n\t{\n\t\tswitch (this.vocab.id)\n\t\t{\n\t\t\tcase VocabulariesInmutableNames.CUBAN_INTITUTIONS:\n\t\t\t\treturn new TermInstitutionData();\n\n\t\t\tcase VocabulariesInmutableNames.INDEXES:\n\t\t\t\treturn new TermIndexData();\n\n\t\t\tdefault:\n\t\t\t\treturn new EntityBase();\n\t\t}\n\t}\n}\n","\nimport { Component, OnInit, OnDestroy, Input, OnChanges } from '@angular/core';\nimport { of as observableOf, PartialObserver, Subscription, of } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { FlatTreeControl } from '@angular/cdk/tree';\nimport { MatDialog } from '@angular/material/dialog';\nimport { MatTreeFlatDataSource, MatTreeFlattener } from '@angular/material/tree';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\nimport { MessageHandler, StatusCode, Response } from '../../core/public-api';\nimport { Vocabulary, Term, TermNode } from '../../entities/public-api';\n\nimport { TaxonomyService } from '../../backend/public-api';\nimport { TermGenericComponent } from '../term-generic/term-generic.component';\n\nimport { OAuthStorage } from 'angular-oauth2-oidc';\n\n/**\n * Flattened tree node that has been created from a TermNode through the flattener. Flattened\n * nodes include level index and whether they can be expanded or not.\n */\nexport interface FlatTreeNode {\n    name: string;\n    level: number;\n    expandable: boolean;\n}\n\n@Component({\n    selector: 'toco-terms',\n    templateUrl: './terms.component.html',\n    styleUrls: ['./terms.component.scss']\n})\nexport class TermsComponent implements OnInit, OnChanges, OnDestroy {\n\n\n    loading: Boolean = false;\n\n    /** The TreeControl controls the expand/collapse state of tree nodes.  */\n    treeControl: FlatTreeControl<FlatTreeNode>;\n\n    /** The TreeFlattener is used to generate the flat list of items from hierarchical data. */\n    treeFlattener: MatTreeFlattener<TermNode, FlatTreeNode>;\n\n    /** The MatTreeFlatDataSource connects the control and flattener to provide data. */\n    dataSource: MatTreeFlatDataSource<TermNode, FlatTreeNode>;\n\n    private termsTreeObserver: PartialObserver<Response<any>> = {\n        next: (response: Response<any>) => {\n            this.dataSource.data = response.data.tree.term_node;\n            this.loading = !this.loading;\n        },\n\n        error: (err: any) => {\n            console.log('error: ' + err + '.');\n        },\n\n        complete: () => {\n            console.log('complete');\n        }\n    };\n\n    private termChangeObserver: PartialObserver<Response<any>> = {\n        next: (response: Response<any>) => {\n            this.loading = !this.loading;\n            this.service.getTermsTreeByVocab(this.currentVocab.id).subscribe(this.termsTreeObserver);\n            this.dialog.closeAll();\n            const m = new MessageHandler(this._snackBar);\n            m.showMessage(StatusCode.OK, response.message);\n        },\n\n        error: (err: any) => {\n            console.log('error: ' + err + '.');\n        },\n\n        complete: () => {\n            console.log('complete');\n        }\n    };\n\n    @Input()\n    currentVocab: Vocabulary = null;\n\n    constructor(private service: TaxonomyService,\n        private oautheStorage: OAuthStorage,\n        public dialog: MatDialog,\n        private _snackBar: MatSnackBar) {\n        this.treeFlattener = new MatTreeFlattener(\n            this.transformer,\n            this.getLevel,\n            this.isExpandable,\n            this.getChildren);\n\n        this.treeControl = new FlatTreeControl(this.getLevel, this.isExpandable);\n        this.dataSource = new MatTreeFlatDataSource(this.treeControl, this.treeFlattener);\n    }\n\n    ngOnInit(): void {\n\n        if (!this.oautheStorage.getItem('user_permission')) {\n            this.getAuthenticatedUserPermissions();\n        }\n    }\n    ngOnChanges() {\n        if (this.currentVocab != null) {\n            this.loading = true;\n            this.service.getTermsTreeByVocab(this.currentVocab.id)\n                .subscribe(\n                    (response: Response<any>) => {\n                        this.dataSource.data = response.data.tree.term_node;\n                    },\n                    (err: any) => {\n                        console.log('error: ' + err + '.');\n                    },\n                    () => {\n                        this.loading = false;\n                    }\n                );\n        }\n    }\n    ngOnDestroy(): void {\n\n    }\n\n    /** Transform the data to something the tree can read. */\n    transformer(node: TermNode, level: number) {\n        return {\n            name: node.term.identifier,\n            term: node.term,\n            level: level,\n            expandable: (node.children.length > 0)\n        };\n    }\n\n    /** Get the level of the node */\n    getLevel(node: FlatTreeNode) {\n        return node.level;\n    }\n\n    /** Get whether the node is expanded or not. */\n    isExpandable(node: FlatTreeNode) {\n        return node.expandable;\n    }\n\n    /** Get whether the node has children or not. */\n    hasChild(index: number, node: FlatTreeNode) {\n        return node.expandable;\n    }\n\n    /** Get the children for the node. */\n    getChildren(node: TermNode) {\n        return observableOf(node.children);\n    }\n\n    addTerm() {\n        this.openTermDialog(null);\n    }\n    editTerm(node: any) {\n        this.openTermDialog(node.term);\n    }\n\n\n    private openTermDialog(term: Term) {\n\n        const dialogRef = this.dialog.open(TermGenericComponent, {\n            data: {\n                term: term,\n                terms: this.dataSource.data,\n                currentVocab: this.currentVocab,\n                accept: (term: Term) => {\n                    this.dialog.closeAll();\n                    if (term.isNew){\n                        this.service.newTerm(term).pipe().subscribe(this.termChangeObserver);\n                    } else {\n                        this.service.editTerm(term).pipe().subscribe(this.termChangeObserver);\n                    }\n                }\n            }\n        });\n        dialogRef.afterClosed().subscribe(result => {\n            console.log('dialog closed');\n        });\n    }\n\n    deleteTerm(node: TermNode) {\n        console.log(node);\n    }\n\n    getAuthenticatedUserPermissions() {\n        this.service.getCurrentUserPermissions().pipe(\n            catchError(err => {\n                const m = new MessageHandler(this._snackBar);\n                m.showMessage(StatusCode.serverError, err.message);\n                // TODO: Maybe you must set a better return.\n                return of(null);\n            })\n        )\n            .subscribe(request => {\n                if (request.status == 'success') {\n                    var permJson = JSON.stringify(request.data.permissions.actions);\n                    this.oautheStorage.setItem('user_permissions', permJson);\n                }\n            });\n    }\n\n    hasPermission(permission: string, id?: string): boolean {\n\n        const userPermission = JSON.parse(this.oautheStorage.getItem('user_permissions'));\n        if (!userPermission) {\n            return false;\n        }\n        switch (permission) {\n            case 'add':\n                if (userPermission.taxonomy_full_editor_actions === null)\n                    return true;\n\n                return false;\n\n            case 'edit':\n                if (userPermission.taxonomy_full_editor_actions === null)\n                    return true;\n\n                if (userPermission.vocabulary_editor_actions) {\n                    const arr: Array<string> = userPermission.vocabulary_editor_actions;\n\n                    if (arr.includes(id)) {\n                        return true\n                    }\n\n                }\n                else if (userPermission.taxonomy_full_editor_actions) {\n                    return true;\n                }\n\n                return false;\n\n            default:\n                return false;\n        }\n    }\n}\n","/*\n *   Copyright (c) 2020 Universidad de Pinar del Río \"Hermanos Saíz Montes de Oca\"\n *   All rights reserved.\n\n *   Permission is hereby granted, free of charge, to any person obtaining a copy\n *   of this software and associated documentation files (the \"Software\"), to deal\n *   in the Software without restriction, including without limitation the rights\n *   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *   copies of the Software, and to permit persons to whom the Software is\n *   furnished to do so, subject to the following conditions:\n\n *   The above copyright notice and this permission notice shall be included in all\n *   copies or substantial portions of the Software.\n\n *   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n *   SOFTWARE.\n */\n\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Vocabulary } from '../../entities/public-api';\n\n\n@Component({\n    selector: 'toco-taxonomy',\n    templateUrl: './taxonomy.component.html',\n    styleUrls: ['./taxonomy.component.scss']\n})\nexport class TaxonomyComponent implements OnInit, OnDestroy{\n\n    vocabs = { title: 'Vocabularios', cols: 1, rows: 1 };\n    terms = { title: 'Terminos de', cols: 1, rows: 2 };\n\n    current_vocab = {name: '', description: ''};\n\n    currentVocab: Vocabulary;\n\n    constructor()\n    { }\n\n    ngOnInit(): void {\n    }\n    vocabChange(vocab: Vocabulary){\n        this.currentVocab = vocab;\n    }\n    ngOnDestroy(): void {\n    }\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { TaxonomyService } from '../../backend/public-api';\nimport { Term } from '../../entities/public-api';\n\n@Component({\n  selector: 'toco-terms-viewer',\n  templateUrl: './terms-viewer.component.html',\n  styleUrls: ['./terms-viewer.component.scss']\n})\nexport class TermsViewerComponent implements OnInit {\n  /**\n   * receive vocab_id and a list of terms ids. \n   * show in a chiplist the terms of vocab_id\n   */\n\n  @Input()\n  vocabulary_id = null;\n  @Input()\n  ids: number[] = null;\n  \n  terms: Term[] = []\n  constructor(private taxonomyService: TaxonomyService) { }\n\n  ngOnInit() {\n    if (this.vocabulary_id){\n      console.log(this.ids)\n      this.taxonomyService.getTermListByIDs(this.ids)\n      .subscribe(\n        (response)=>{\n          console.log(response);\n          \n          if(response.data.term){\n            response.data.term.forEach(term => {\n              if (term.vocabulary_id == this.vocabulary_id){\n                this.terms.push(term);\n              }\n            });\n          }\n        },\n        (error)=>{},\n        ()=>{}\n      );\n    }\n  }\n\n}\n","\n\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/public-api';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { TocoFormsModule } from '../forms/public-api';\n\nimport { VocabulariesComponent, VocabularyDialogComponent } from './vocabularies/vocabularies.component';\nimport { TermsComponent } from './terms/terms.component';\nimport { TaxonomyComponent } from './taxonomy/taxonomy.component';\nimport { TermGenericComponent } from './term-generic/term-generic.component';\nimport { TermsViewerComponent } from './terms-viewer/terms-viewer.component';\n\n@NgModule({\n    declarations: [\n        VocabulariesComponent,\n        VocabularyDialogComponent,\n        TermsComponent,\n        TaxonomyComponent,\n        TermGenericComponent,\n        TermsViewerComponent\n    ],\n\n    entryComponents: [\n        VocabularyDialogComponent,\n        TermGenericComponent\n    ],\n\n    imports: [\n        SharedModule,\n        ReactiveFormsModule,\n        TocoFormsModule\n    ],\n\n    exports: [\n        TaxonomyComponent,\n        VocabulariesComponent,\n        TermsViewerComponent\n    ],\n\n    providers: [\n    ]\n})\nexport class TaxonomyModule\n{ }\n\n\n","import { Term, VocabulariesInmutableNames } from \"../entities/public-api\";\nimport { PanelContent, FormFieldType, HintValue, HintPosition } from \"../forms/public-api\";\n\nexport class TermHelper {\n  public static getPanelContentToEdit(term: Term) {\n    // console.log(term);\n\n    let result = null;\n    if (term) {\n      switch (term.vocabulary_id) {\n        case VocabulariesInmutableNames.CUBAN_INTITUTIONS:\n          result = [\n            {\n              name: \"name\",\n              label: \"Nombre\",\n              type: FormFieldType.text,\n              required: true,\n              value: term.identifier ? term.identifier : null,\n              width: \"100%\"\n            },\n            {\n              name: \"grid\",\n              label: \"Identificador GRID\",\n              type: FormFieldType.text,\n              required: false,\n              value: term.data[\"grid\"] ? term.data[\"grid\"] : null,\n              width: \"50%\"\n            },\n            {\n              name: \"description\",\n              label: \"Descripción\",\n              type: FormFieldType.textarea,\n              required: false,\n              value: term.description ? term.description : null,\n              width: \"100%\"\n            },\n            {\n              name: \"email\",\n              label: \"Email\",\n              type: FormFieldType.email,\n              required: true,\n              value: term.data[\"email\"] ? term.data[\"email\"] : null,\n              width: \"45%\"\n            },\n            {\n              name: \"website\",\n              label: \"Sitio Web Oficial\",\n              type: FormFieldType.url,\n              required: false,\n              value: term.data[\"website\"] ? term.data[\"website\"] : null,\n              width: \"45%\"\n            },\n            {\n              name: \"address\",\n              label: \"Dirección\",\n              type: FormFieldType.textarea,\n              required: false,\n              value: term.data[\"address\"] ? term.data[\"address\"] : null,\n              width: \"100%\"\n            },\n            {\n              name: \"parent_id\",\n              label: \"Jerarquía Institucional (Institución Superior)\",\n              type: FormFieldType.vocabulary,\n              required: false,\n              extraContent: {\n                multiple: false,\n                selectedTermsIds: term.parent_id ? [term.parent_id] : null,\n                vocab: term.vocabulary_id\n              },\n              width: \"100%\"\n            }\n          ];\n          break;\n        case VocabulariesInmutableNames.INDEXES:\n          result = [\n            {\n              name: \"name\",\n              label: \"Nombre\",\n              type: FormFieldType.text,\n              required: true,\n              value: term.identifier ? term.identifier : null,\n              width: \"100%\"\n            },\n            {\n              name: \"url\",\n              label: \"URL\",\n              type: FormFieldType.url,\n              required: false,\n              value: term.data[\"url\"] ? term.data[\"url\"] : null,\n              width: \"100%\"\n            },\n            {\n              name: \"abrev\",\n              label: \"Identificadores\",\n              type: FormFieldType.text,\n              required: false,\n              value: term.data[\"abrev\"] ? term.data[\"abrev\"] : null,\n              width: \"30%\"\n            },\n            {\n              name: \"initial_cover\",\n              label: \"Cobertura inicio\",\n              type: FormFieldType.text,\n              required: false,\n              value: term.data[\"initial_cover\"]\n                ? term.data[\"initial_cover\"]\n                : null,\n              width: \"30%\"\n            },\n            {\n              name: \"end_cover\",\n              label: \"Cobertura\",\n              type: FormFieldType.text,\n              required: false,\n              value: term.data[\"end_cover\"] ? term.data[\"end_cover\"] : null,\n              width: \"30%\"\n            },\n            {\n              name: \"description\",\n              label: \"Descripción\",\n              type: FormFieldType.textarea,\n              required: false,\n              value: term.description ? term.description : null,\n              width: \"100%\"\n            },\n            {\n              name: \"miar_class\",\n              label: \"Tipología de sistemas de indización\",\n              type: FormFieldType.vocabulary,\n              required: false,\n              extraContent: {\n                multiple: false,\n                selectedTermsIds: term.class_ids ? term.class_ids : null,\n                vocab: VocabulariesInmutableNames.INDEXES_CLASIFICATION\n              },\n              width: \"48%\"\n            },\n            {\n              name: \"group_mes\",\n              label:\n                \"Grupos, Categorías según criterios de “calidad” de las publicaciones \",\n              type: FormFieldType.vocabulary,\n              startHint: new HintValue(HintPosition.start, \"\"),\n              required: false,\n              extraContent: {\n                multiple: false,\n                selectedTermsIds: term.class_ids ? term.class_ids : null,\n                vocab: VocabulariesInmutableNames.INDEXES_CLASIFICATION\n              },\n              width: \"48%\"\n            }\n          ];\n          break;\n        default:\n          result = [\n            {\n              name: \"name\",\n              label: \"Nombre\",\n              type: FormFieldType.text,\n              required: true,\n              width: \"100%\",\n              value: term.identifier ? term.identifier : null\n            },\n            {\n              name: \"description\",\n              label: \"Descripción\",\n              type: FormFieldType.textarea,\n              required: false,\n              width: \"100%\",\n              value: term.description ? term.description : null\n            },\n            {\n              name: \"parent_id\",\n              label: \"Término Padre\",\n              type: FormFieldType.vocabulary,\n              startHint: new HintValue(HintPosition.start, \"\"),\n              required: false,\n              extraContent: {\n                multiple: false,\n                selectedTermsIds: term.parent_id ? [term.parent_id] : null,\n                vocab: term.vocabulary_id\n              },\n              width: \"50%\"\n            }\n          ];\n      }\n    }\n    return result;\n  }\n}\n","\n/**\n * An enum that represents the query param key. \n */\nexport enum QueryParamKey\n{\n    /**\n     * The query param for the current language. \n     */\n    lang = 'lang',\n\n    /**\n     * The query param for the page size. \n     */\n    size = 'size',\n\n    /**\n     * The query param for the page index. \n     */\n    page = 'page',\n\n    /**\n     * The query param for the query. \n     */\n    q = 'q',\n\n    /**\n     * The query param for the aggregations selection. \n     */\n    aggrsSel = 'aggrsSel'\n}\n","import { AuthConfig } from 'angular-oauth2-oidc';\n\nexport const authConfig: AuthConfig = {\n\n    // Url of the Identity Provider\n    //issuer: 'https://sceiba-lab.upr.edu.cu',\n\n    loginUrl: 'https://localhost:5000/oauth/authorize',\n\n    tokenEndpoint: 'https://localhost:5000/oauth/token',\n\n    // URL of the SPA to redirect the user to after login\n    redirectUri: 'https://127.0.0.1:4200/',\n\n    // The SPA's id. The SPA is registered with this id at the auth-server\n    clientId: 'a0QpogRmC5iyrhLbfIqmDEbOhhr9nUzOYYPAhWW1',\n\n    oidc: false,\n\n    timeoutFactor: 0.80,\n\n    // set the scope for the permissions the client should request\n    // The first three are defined by OIDC. The 4th is a usecase-specific one\n    scope: 'user:email', //'openid profile email voucher',\n}\n"]}